!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.ash=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){"use strict";var b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};e=a("../../../lib"),c=e.core.NodeList,d=e.core.NodePool,b=function(){function a(){}return a}(),e.core.ComponentMatchingFamily=function(){function a(a,b){this.nodeClass=a,this.engine=b,this.releaseNodePoolCache=f(this.releaseNodePoolCache,this),this.init()}return a.prototype.nodes=null,a.prototype.entities=null,a.prototype.nodeClass=null,a.prototype.components=null,a.prototype.nodePool=null,a.prototype.engine=null,a.prototype.init=function(){var a,e,f;this.nodes=new c,this.entities=new b,this.components=new b,this.nodePool=new d(this.nodeClass,this.nodeClass.components),f=this.nodeClass.components;for(a in f)e=f[a],this.components[e.name]=e},Object.defineProperties(a.prototype,{nodeList:{get:function(){return this.nodes}}}),a.prototype.newEntity=function(a){this.addIfMatch(a)},a.prototype.componentAddedToEntity=function(a){this.addIfMatch(a)},a.prototype.componentRemovedFromEntity=function(a,b){var c;c=null!=b.name?b.name:b,c in this.components&&this.removeIfMatch(a)},a.prototype.removeEntity=function(a){this.removeIfMatch(a)},a.prototype.addIfMatch=function(a){var b,c,d,e,f;if(null==this.entities[a.name]){e=this.nodeClass.components;for(c in e)if(b=e[c],!a.has(b))return;d=this.nodePool.get(),d.entity=a,f=this.nodeClass.components;for(c in f)b=f[c],d[c]=a.get(b);this.entities[a.name]=d,this.nodes.add(d)}},a.prototype.removeIfMatch=function(a){var b;a.name in this.entities&&(b=this.entities[a.name],delete this.entities[a.name],this.nodes.remove(b),this.engine.updating?(this.nodePool.cache(b),this.engine.updateComplete.add(this.releaseNodePoolCache)):this.nodePool.dispose(b))},a.prototype.releaseNodePoolCache=function(){this.engine.updateComplete.remove(this.releaseNodePoolCache),this.nodePool.releaseCache()},a.prototype.cleanUp=function(){var a;for(a=this.nodes.head;a;)this.entities.remove(a.entity),a=a.next;this.nodes.removeAll()},a}()},{"../../../lib":34}],2:[function(a){"use strict";var b,c,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}};g=a("../../../lib"),b=g.core.ComponentMatchingFamily,d=g.core.EntityList,e=g.signals.Signal0,f=g.core.SystemList,c=function(){function a(){}return a}(),g.core.Engine=function(){function a(){this.update=h(this.update,this),this.componentRemoved=h(this.componentRemoved,this),this.componentAdded=h(this.componentAdded,this),this.entityNameChanged=h(this.entityNameChanged,this),this.entityList=new d,this.entityNames=new c,this.systemList=new f,this.families=new c,this.updateComplete=new e}return a.prototype.entityNames=null,a.prototype.entityList=null,a.prototype.systemList=null,a.prototype.families=null,a.prototype.updating=!1,a.prototype.updateComplete=null,a.prototype.familyClass=b,Object.defineProperties(a.prototype,{entities:{get:function(){var a,b;for(a=[],b=this.entityList.head;b;)this.entities.push(b),b=b.next;return a}},systems:{get:function(){var a,b;for(b=[],a=this.systemList.head;a;)b.push(a),a=a.next;return b}}}),a.prototype.addEntity=function(a){var b,c,d;if(this.entityNames[a.name])throw"The entity name "+a.name+" is already in use by another entity.";this.entityList.add(a),this.entityNames[a.name]=a,a.componentAdded.add(this.componentAdded),a.componentRemoved.add(this.componentRemoved),a.nameChanged.add(this.entityNameChanged),d=this.families;for(b in d)c=d[b],c.newEntity(a)},a.prototype.removeEntity=function(a){var b,c,d;a.componentAdded.remove(this.componentAdded),a.componentRemoved.remove(this.componentRemoved),a.nameChanged.remove(this.entityNameChanged),d=this.families;for(b in d)c=d[b],c.removeEntity(a);delete this.entityNames[a.name],this.entityList.remove(a)},a.prototype.entityNameChanged=function(a,b){this.entityNames[b]===a&&(delete this.entityNames[b],this.entityNames[a.name]=a)},a.prototype.getEntityByName=function(a){return this.entityNames[a]},a.prototype.removeAllEntities=function(){for(;null!==this.entityList.head;)this.removeEntity(this.entityList.head)},a.prototype.componentAdded=function(a,b){var c,d,e;e=this.families;for(c in e)d=e[c],d.componentAddedToEntity(a,b)},a.prototype.componentRemoved=function(a,b){var c,d,e;e=this.families;for(c in e)d=e[c],d.componentRemovedFromEntity(a,b)},a.prototype.getNodeList=function(a){var b,c;if(a.name in this.families)return this.families[a.name].nodeList;for(c=new this.familyClass(a,this),this.families[a.name]=c,b=this.entityList.head;b;)c.newEntity(b),b=b.next;return c.nodeList},a.prototype.releaseNodeList=function(a){a.name in this.families&&(this.families[a.name].cleanUp(),delete this.families[a.name])},a.prototype.addSystem=function(a,b){a.priority=b,a.addToEngine(this),this.systemList.add(a)},a.prototype.getSystem=function(a){return systemList.get(a)},a.prototype.removeSystem=function(a){this.systemList.remove(a),a.removeFromEngine(this)},a.prototype.removeAllSystems=function(){for(;null!==this.systemList.head;)this.removeSystem(this.systemList.head)},a.prototype.update=function(a){var b;for(this.updating=!0,b=this.systemList.head;b;)b.update(a),b=b.next;this.updating=!1,this.updateComplete.dispatch()},a}()},{"../../../lib":34}],3:[function(a){"use strict";var b,c,d;d=a("../../../lib"),c=d.signals.Signal2,b=function(){function a(){}return a}(),d.core.Entity=function(){function a(a){null==a&&(a=""),Object.defineProperties(this,{name:{get:function(){return this._name},set:function(a){var b;return this._name!==a?(b=this._name,this._name=a,this.nameChanged.dispatch(this,b)):void 0}}}),this.componentAdded=new c,this.componentRemoved=new c,this.nameChanged=new c,this.components=new b,this._name=""!==a?a:"_entity"+ ++d}var d;return d=0,a.prototype._name="",a.prototype.componentAdded=null,a.prototype.componentRemoved=null,a.prototype.nameChanged=null,a.prototype.previous=null,a.prototype.next=null,a.prototype.components=null,a.prototype.add=function(a,b){return null==b&&(b=a.constructor),b.name in this.components&&this.remove(b),this.components[b.name]=a,this.componentAdded.dispatch(this,b),this},a.prototype.remove=function(a){var b,c;return c=null!=a.name?a.name:a,b=this.components[c],b?(delete this.components[c],this.componentRemoved.dispatch(this,c),b):null},a.prototype.get=function(a){return this.components[a.name]},a.prototype.getAll=function(){var a,b,c,d,e;for(b=[],e=this.components,c=0,d=e.length;d>c;c++)a=e[c],b.push(a);return b},a.prototype.has=function(a){return a.name in this.components},a}()},{"../../../lib":34}],4:[function(a){"use strict";var b;b=a("../../../lib"),b.core.EntityList=function(){function a(){}return a.prototype.head=null,a.prototype.tail=null,a.prototype.add=function(a){this.head?(this.tail.next=a,a.previous=this.tail,a.next=null,this.tail=a):(this.head=this.tail=a,a.next=a.previous=null)},a.prototype.remove=function(a){this.head===a&&(this.head=this.head.next),this.tail===a&&(this.tail=this.tail.previous),a.previous&&(a.previous.next=a.next),a.next&&(a.next.previous=a.previous)},a.prototype.removeAll=function(){for(var a;this.head;)a=this.head,this.head=this.head.next,a.previous=null,a.next=null;this.tail=null},a}()},{"../../../lib":34}],5:[function(a){"use strict";var b;b=a("../../../lib"),b.core.Family=function(){function a(){Object.defineProperties(this,{nodeList:{get:function(){return this.nodes}}})}return a.prototype.nodes=null,a.prototype.newEntity=function(){throw new Error("Method must be overriden")},a.prototype.removeEntity=function(){throw new Error("Method must be overriden")},a.prototype.componentAddedToEntity=function(){throw new Error("Method must be overriden")},a.prototype.componentRemovedFromEntity=function(){throw new Error("Method must be overriden")},a.prototype.cleanUp=function(){throw new Error("Method must be overriden")},a}()},{"../../../lib":34}],6:[function(a){"use strict";var b;b=a("../../../lib"),b.core.Node=function(){function a(){}return a.prototype.entity=null,a.prototype.previous=null,a.prototype.next=null,a}()},{"../../../lib":34}],7:[function(a){"use strict";var b,c;c=a("../../../lib"),b=c.signals.Signal1,c.core.NodeList=function(){function a(){this.nodeAdded=new b,this.nodeRemoved=new b}return a.prototype.head=null,a.prototype.tail=null,a.prototype.nodeAdded=null,a.prototype.nodeRemoved=null,a.prototype.add=function(a){this.head?(this.tail.next=a,a.previous=this.tail,a.next=null,this.tail=a):(this.head=this.tail=a,a.next=a.previous=null),this.nodeAdded.dispatch(a)},a.prototype.remove=function(a){this.head===a&&(this.head=this.head.next),this.tail===a&&(this.tail=this.tail.previous),a.previous&&(a.previous.next=a.next),a.next&&(a.next.previous=a.previous),this.nodeRemoved.dispatch(a)},a.prototype.removeAll=function(){for(var a;this.head;)a=this.head,this.head=this.head.next,a.previous=null,a.next=null,this.nodeRemoved.dispatch(a);this.tail=null},Object.defineProperties(a.prototype,{empty:{get:function(){return null===this.head}}}),a.prototype.swap=function(a,b){var c;a.previous===b?(a.previous=b.previous,b.previous=a,b.next=a.next,a.next=b):b.previous===a?(b.previous=a.previous,a.previous=b,a.next=b.next,b.next=a):(c=a.previous,a.previous=b.previous,b.previous=c,c=a.next,a.next=b.next,b.next=c),this.head===a?this.head=b:this.head===b&&(this.head=a),this.tail===a?this.tail=b:this.tail===b&&(this.tail=a),null!==a.previous&&(a.previous.next=a),null!==b.previous&&(b.previous.next=b),null!==a.next&&(a.next.previous=a),null!==b.next&&(b.next.previous=b)},a.prototype.insertionSort=function(a){var b,c,d;if(this.head!==this.tail)for(d=this.head.next,b=d;null!==b;){for(d=b.next,c=b.previous;null!==c;){if(a(b,c)>=0){b!==c.next&&(this.tail===b&&(this.tail=b.previous),b.previous.next=b.next,null!==b.next&&(b.next.previous=b.previous),b.next=c.next,b.previous=c,b.next.previous=b,c.next=b);break}c=c.previous}null===c&&(this.tail===b&&(this.tail=b.previous),b.previous.next=b.next,null!==b.next&&(b.next.previous=b.previous),b.next=this.head,this.head.previous=b,b.previous=null,this.head=b),b=d}},a.prototype.mergeSort=function(a){var b,c,d,e;if(this.head!==this.tail){for(c=[],e=this.head;null!==e;){for(b=e;null!==b.next&&a(b,b.next)<=0;)b=b.next;d=b.next,e.previous=b.next=null,c.push(e),e=d}for(;c.length>1;)c.push(this.merge(c.shift(),c.shift(),a));for(this.tail=this.head=c[0];null!==this.tail.next;)this.tail=this.tail.next}},a.prototype.merge=function(a,b,c){var d,e;for(c(a,b)<=0?(d=e=a,a=a.next):(d=e=b,b=b.next);null!==a&&null!==b;)c(a,b)<=0?(e.next=a,a.previous=e,e=a,a=a.next):(e.next=b,b.previous=e,e=b,b=b.next);return null!==a?(e.next=a,a.previous=e):(e.next=b,b.previous=e),d},a}()},{"../../../lib":34}],8:[function(a){"use strict";var b;b=a("../../../lib"),b.core.NodePool=function(){function a(a,b){this.nodeClass=a,this.components=b}return a.prototype.tail=null,a.prototype.nodeClass=null,a.prototype.cacheTail=null,a.prototype.components=null,a.prototype.get=function(){var a;return this.tail?(a=this.tail,this.tail=this.tail.previous,a.previous=null,a):new this.nodeClass},a.prototype.dispose=function(a){var b;for(b in this.components)a[b]=null;a.entity=null,a.next=null,a.previous=this.tail,this.tail=a},a.prototype.cache=function(a){a.previous=this.cacheTail,this.cacheTail=a},a.prototype.releaseCache=function(){for(var a;this.cacheTail;)a=this.cacheTail,this.cacheTail=a.previous,this.dispose(a)},a}()},{"../../../lib":34}],9:[function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=a("../../../lib"),b.core.System=function(){function a(){this.update=c(this.update,this)}return a.prototype.previous=null,a.prototype.next=null,a.prototype.priority=0,a.prototype.addToEngine=function(){},a.prototype.removeFromEngine=function(){},a.prototype.update=function(){},a}()},{"../../../lib":34}],10:[function(a){"use strict";var b;b=a("../../../lib"),b.core.SystemList=function(){function a(){}return a.prototype.head=null,a.prototype.tail=null,a.prototype.add=function(a){var b;if(this.head){for(b=this.tail;b&&!(b.priority<=a.priority);)b=b.previous;b===this.tail?(this.tail.next=a,a.previous=this.tail,a.next=null,this.tail=a):b?(a.next=b.next,a.previous=b,b.next.previous=a,b.next=a):(a.next=this.head,a.previous=null,this.head.previous=a,this.head=a)}else this.head=this.tail=a,a.next=a.previous=null},a.prototype.remove=function(a){this.head===a&&(this.head=this.head.next),this.tail===a&&(this.tail=this.tail.previous),a.previous&&(a.previous.next=a.next),a.next&&(a.next.previous=a.previous)},a.prototype.removeAll=function(){for(var a;this.head;)a=this.head,this.head=this.head.next,a.previous=null,a.next=null;this.tail=null},a.prototype.get=function(a){var b;for(b=this.head;b;){if(b.constructor===a)return b;b=b.next}return null},a}()},{"../../../lib":34}],11:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.ComponentInstanceProvider=function(){function a(a){this.instance=a}return a.prototype.instance=null,a.prototype.getComponent=function(){return this.instance},Object.defineProperties(a.prototype,{identifier:{get:function(){return this.instance}}}),a}()},{"../../../lib":34}],12:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.ComponentSingletonProvider=function(){function a(a){this.componentType=a}return a.prototype.componentType=null,a.prototype.instance=null,a.prototype.getComponent=function(){return null==this.instance&&(this.instance=new this.componentType),this.instance},Object.defineProperties(a.prototype,{identifier:{get:function(){return this.getComponent()}}}),a}()},{"../../../lib":34}],13:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.ComponentTypeProvider=function(){function a(a){this.componentType=a}return a.prototype.componentType=null,a.prototype.getComponent=function(){return new this.componentType},Object.defineProperties(a.prototype,{identifier:{get:function(){return this.componentType}}}),a}()},{"../../../lib":34}],14:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.DynamicComponentProvider=function(){function a(a){this._closure=a}return a.prototype._closure=null,a.prototype.getComponent=function(){return this._closure},Object.defineProperties(a.prototype,{identifier:{get:function(){return this._closure}}}),a}()},{"../../../lib":34}],15:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.DynamicSystemProvider=function(){function a(a){this.method=a}return a.prototype.method=function(){},a.prototype.systemPriority=0,a.prototype.getSystem=function(){return this.method()},Object.defineProperties(a.prototype,{identifier:{get:function(){return this.method}},priority:{get:function(){return this.systemPriority},set:function(a){return this.systemPriority=a}}}),a}()},{"../../../lib":34}],16:[function(a){"use strict";var b,c,d,e,f;f=a("../../../lib"),d=f.fsm.SystemInstanceProvider,e=f.fsm.SystemSingletonProvider,b=f.fsm.DynamicSystemProvider,c=f.fsm.StateSystemMapping,f.fsm.EngineState=function(){function a(){this.providers=[]}return a.prototype.providers=null,a.prototype.addInstance=function(a){return this.addProvider(new d(a))},a.prototype.addSingleton=function(a){return this.addProvider(new e(a))},a.prototype.addMethod=function(a){return this.addProvider(new b(a))},a.prototype.addProvider=function(a){var b;return b=new c(this,a),this.providers.push(a),b},a}()},{"../../../lib":34}],17:[function(a){"use strict";var b,c,d;d=a("../../../lib"),c=d.fsm.EngineState,b=function(){function a(){}return a}(),d.fsm.EngineStateMachine=function(){function a(a){this.engine=a,this.states=new b}return a.prototype.engine=null,a.prototype.states=null,a.prototype.currentState=null,a.prototype.addState=function(a,b){return this.states[a]=b,this},a.prototype.createState=function(a){var b;return b=new c,this.states[a]=b,this},a.prototype.changeState=function(a){var c,d,e,f,g,h,i,j;if(e=this.states[a],null==e)throw new Error("Engine state "+a+" doesn't exist");if(e===this.currentState)return void(e=null);h=new b,i=e.providers;for(c in i)g=i[c],d=g.identifier,h[d]=g;if(currentState){j=this.currentState.providers;for(c in j)g=j[c],d=g.identifier,f=h[d],f?delete h[d]:this.engine.removeSystem(g.getSystem())}for(c in h)g=h[c],this.engine.addSystem(g.getSystem(),g.priority);return this.currentState=e},a}()},{"../../../lib":34}],18:[function(a){"use strict";var b,c,d;d=a("../../../lib"),c=d.fsm.StateComponentMapping,b=function(){function a(){}return a}(),d.fsm.EntityState=function(){function a(){this.providers=new b}return a.prototype.providers=null,a.prototype.add=function(a){return new c(this,a.name)},a.prototype.get=function(a){return this.providers[a]},a.prototype.has=function(a){return null!==this.providers[a]},a}()},{"../../../lib":34}],19:[function(a){"use strict";var b,c,d;d=a("../../../lib"),c=d.fsm.EntityState,b=function(){function a(){}return a}(),d.fsm.EntityStateMachine=function(){function a(a){this.entity=a,this.states=new b}return a.prototype.states=null,a.prototype.currentState=null,a.prototype.entity=null,a.prototype.addState=function(a,b){return this.states[a]=b,this},a.prototype.createState=function(a){var b;return b=new c,this.states[a]=b,b},a.prototype.changeState=function(a){var c,d,e,f;if(c=this.states[a],!c)throw new Error("Entity state "+a+" doesn't exist");if(c===this.currentState)return void(c=null);if(this.currentState){e=new b;for(f in c.providers)e[f]=c.providers[f];for(f in this.currentState.providers)d=e[f],d&&d.identifier===this.currentState.providers[f].identifier?delete e[f]:this.entity.remove(f)}else e=c.providers;for(f in e)this.entity.add(e[f].getComponent());return this.currentState=c},a}()},{"../../../lib":34}],20:[function(a){"use strict";var b,c,d,e,f;f=a("../../../lib"),b=f.fsm.ComponentInstanceProvider,d=f.fsm.ComponentTypeProvider,c=f.fsm.ComponentSingletonProvider,e=f.fsm.DynamicComponentProvider,f.fsm.StateComponentMapping=function(){function a(a,b){this.creatingState=a,this.componentType=b,this.withType(b)}return a.prototype.componentType=null,a.prototype.creatingState=null,a.prototype.provider=null,a.prototype.withInstance=function(a){return this.setProvider(new b(a)),this},a.prototype.withType=function(a){return this.setProvider(new d(a)),this},a.prototype.withSingleton=function(a){return null==a&&(a=this.componentType),this.setProvider(new c(a)),this},a.prototype.withMethod=function(a){return this.setProvider(new e(a)),this},a.prototype.withProvider=function(a){return this.setProvider(a),this},a.prototype.add=function(a){return this.creatingState.add(a)},a.prototype.setProvider=function(a){return this.provider=a,this.creatingState.providers[this.componentType]=a},a}()},{"../../../lib":34}],21:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.StateSystemMapping=function(){function a(a,b){this.creatingState=a,this.provider=b}return a.prototype.creatingState=null,a.prototype.provider=null,a.prototype.withPriority=function(a){return this.provider.priority=a,this},a.prototype.addInstance=function(a){return creatingState.addInstance(a)},a.prototype.addSingleton=function(a){return creatingState.addSingleton(a)},a.prototype.addMethod=function(a){return creatingState.addMethod(a)},a.prototype.addProvider=function(a){return creatingState.addProvider(a)},a}()},{"../../../lib":34}],22:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.SystemInstanceProvider=function(){function a(a){this.instance=a}return a.prototype.instance=null,a.prototype.systemPriority=0,a.prototype.getSystem=function(){return this.instance},Object.defineProperties(a.prototype,{identifier:{get:function(){return this.instance}},priority:{get:function(){return this.systemPriority},set:function(a){return this.systemPriority=a}}}),a}()},{"../../../lib":34}],23:[function(a){"use strict";var b;b=a("../../../lib"),b.fsm.SystemSingletonProvider=function(){function a(a){this.componentType=a}return a.prototype.componentType=null,a.prototype.instance=null,a.prototype.systemPriority=0,a.prototype.getSystem=function(){return this.instance||(this.instance=new this.componentType),this.instance},Object.defineProperties(a.prototype,{identifier:{get:function(){return this.getSystem()}},priority:{get:function(){return this.systemPriority},set:function(a){return this.systemPriority=a}}}),a}()},{"../../../lib":34}],24:[function(a){"use strict";var b;b=a("../../../lib"),b.signals.ListenerNode=function(){function a(){}return a.prototype.previous=null,a.prototype.next=null,a.prototype.listener=null,a.prototype.once=!1,a}()},{"../../../lib":34}],25:[function(a){"use strict";var b,c;c=a("../../../lib"),b=c.signals.ListenerNode,c.signals.ListenerNodePool=function(){function a(){}return a.prototype.tail=null,a.prototype.cacheTail=null,a.prototype.get=function(){var a;return null!==this.tail?(a=this.tail,this.tail=this.tail.previous,a.previous=null,a):new b},a.prototype.dispose=function(a){a.listener=null,a.once=!1,a.next=null,a.previous=this.tail,this.tail=a},a.prototype.cache=function(a){a.listener=null,a.previous=this.cacheTail,this.cacheTail=a},a.prototype.releaseCache=function(){for(var a;null!==this.cacheTail;)a=this.cacheTail,this.cacheTail=a.previous,a.next=null,a.previous=this.tail,this.tail=a},a}()},{"../../../lib":34}],26:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.signals.Signal0=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.dispatch=function(){var a;for(this.startDispatch(),a=this.head;null!==a;)a.listener(),a.once&&this.remove(a.listener),a=a.next;return this.endDispatch()},b}(b.signals.SignalBase)},{"../../../lib":34}],27:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.signals.Signal1=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.dispatch=function(a){var b;for(this.startDispatch(),b=this.head;null!==b;)b.listener(a),b.once&&this.remove(b.listener),b=b.next;return this.endDispatch()},b}(b.signals.SignalBase)},{"../../../lib":34}],28:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.signals.Signal2=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.dispatch=function(a,b){var c;for(this.startDispatch(),c=this.head;c;)c.listener(a,b),c.once&&this.remove(c.listener),c=c.next;return this.endDispatch()},b}(b.signals.SignalBase)},{"../../../lib":34}],29:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.signals.Signal3=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return d(b,a),b.prototype.dispatch=function(a,b,c){var d;for(this.startDispatch(),d=this.head;null!==d;)d.listener(a,b,c),d.once&&this.remove(d.listener),d=d.next;return this.endDispatch()},b}(b.signals.SignalBase)},{"../../../lib":34}],30:[function(a){"use strict";var b,c;c=a("../../../lib"),b=c.signals.ListenerNodePool,c.signals.SignalBase=function(){function a(){this.nodes=[],this.keys=[],this.listenerNodePool=new b,this.numListeners=0}return a.prototype.head=null,a.prototype.tail=null,a.prototype.numListeners=0,a.prototype.keys=null,a.prototype.nodes=null,a.prototype.listenerNodePool=null,a.prototype.toAddHead=null,a.prototype.toAddTail=null,a.prototype.dispatching=!1,a.prototype.startDispatch=function(){this.dispatching=!0},a.prototype.endDispatch=function(){this.dispatching=!1,this.toAddHead&&(this.head?(this.tail.next=this.toAddHead,this.toAddHead.previous=this.tail,this.tail=this.toAddTail):(this.head=this.toAddHead,this.tail=this.toAddTail),this.toAddHead=null,this.toAddTail=null),this.listenerNodePool.releaseCache()},a.prototype.getNode=function(a){var b;for(b=this.head;null!==b&&b.listener!==a;)b=b.next;if(null===b)for(b=this.toAddHead;null!==b&&b.listener!==a;)b=b.next;return b},a.prototype.add=function(a){var b;-1===this.keys.indexOf(a)&&(b=this.listenerNodePool.get(),b.listener=a,this.nodes.push(b),this.keys.push(a),this.addNode(b))},a.prototype.addOnce=function(a){var b;-1===this.keys.indexOf(a)&&(b=this.listenerNodePool.get(),b.listener=a,b.once=!0,this.nodes.push(b),this.keys.push(a),this.addNode(b))},a.prototype.addNode=function(a){this.dispatching?null===this.toAddHead?this.toAddHead=this.toAddTail=a:(this.toAddTail.next=a,a.previous=this.toAddTail,this.toAddTail=a):null===this.head?this.head=this.tail=a:(this.tail.next=a,a.previous=this.tail,this.tail=a),this.numListeners++},a.prototype.remove=function(a){var b,c;b=this.keys.indexOf(a),c=this.nodes[b],c&&(this.head===c&&(this.head=this.head.next),this.tail===c&&(this.tail=this.tail.previous),this.toAddHead===c&&(this.toAddHead=this.toAddHead.next),this.toAddTail===c&&(this.toAddTail=this.toAddTail.previous),c.previous&&(c.previous.next=c.next),c.next&&(c.next.previous=c.previous),this.nodes.splice(b,1),this.keys.splice(b,1),this.dispatching?this.listenerNodePool.cache(c):this.listenerNodePool.dispose(c),this.numListeners--)},a.prototype.removeAll=function(){for(var a;this.head;)a=this.head,this.head=this.head.next,this.nodes.splice(index,1),this.listenerNodePool.dispose(a);this.nodes=[],this.keys=[],this.tail=null,this.toAddHead=null,this.toAddTail=null,this.numListeners=0},a}()},{"../../../lib":34}],31:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.signals.Signal1,c.tick.FrameTickProvider=function(a){function b(a,c){this.displayObject=a,this.maximumFrameTime=c,this.dispatchTick=d(this.dispatchTick,this),b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.displayObject=null,b.prototype.previousTime=0,b.prototype.maximumFrameTime=0,b.prototype.isPlaying=!1,b.prototype.request=null,b.prototype.timeAdjustment=1,Object.defineProperties(b.prototype,{playing:{get:function(){return this.isPlaying}}}),b.prototype.start=function(){this.request=requestAnimationFrame(this.dispatchTick),this.isPlaying=!0},b.prototype.stop=function(){cancelRequestAnimationFrame(this.request),this.isPlaying=!1},b.prototype.dispatchTick=function(a){var b,c;null==a&&(a=Date.now()),this.displayObject&&this.displayObject.begin(),c=this.previousTime||a,this.previousTime=a,b=.001*(a-c),this.dispatch(b),requestAnimationFrame(this.dispatchTick),this.displayObject&&this.displayObject.end()},b}(b)},{"../../../lib":34}],32:[function(a){"use strict";var b,c,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};c=a("../../../lib"),b=function(){function a(){}return a}(),c.tools.ComponentPool=function(){function a(){}var c,e;return e=new b,c=function(a){var b;return b=a.name,d.call(e,b)>=0?e[a.name]:e[a.name]=[]},a.get=function(a){var b;return b=c(a),b.length>0?b.pop():new a},a.dispose=function(a){var b,d;a&&(d=a.constructor,b=c(d),b.push(a))},a.empty=function(){return e=new b},a}()},{"../../../lib":34}],33:[function(a){"use strict";var b,c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("../../../lib"),b=f.core.Engine,c=f.core.Node,d=f.core.NodeList,e=f.core.System,f.tools.ListIteratingSystem=function(a){function b(a,b,c,d){null==c&&(c=null),null==d&&(d=null),this.nodeClass=a,this.nodeUpdateFunction=b,this.nodeAddedFunction=c,this.nodeRemovedFunction=d}return h(b,a),b.prototype.nodeList=null,b.prototype.nodeClass=null,b.prototype.nodeUpdateFunction=null,b.prototype.nodeAddedFunction=null,b.prototype.nodeRemovedFunction=null,b.prototype.addToEngine=function(a){var b;if(this.nodeList=a.getNodeList(this.nodeClass),null!==this.nodeAddedFunction){for(b=this.nodeList.head;b;)this.nodeAddedFunction(b),b=b.next;this.nodeList.nodeAdded.add(this.nodeAddedFunction)}null!==this.nodeRemovedFunction&&this.nodeList.nodeRemoved.add(this.nodeRemovedFunction)},b.prototype.removeFromEngine=function(){null!==this.nodeAddedFunction&&this.nodeList.nodeAdded.remove(this.nodeAddedFunction),null!==this.nodeRemovedFunction&&this.nodeList.nodeRemoved.remove(this.nodeRemovedFunction),this.nodeList=null},b.prototype.update=function(a){var b;for(b=this.nodeList.head;b;)this.nodeUpdateFunction(b,a),b=b.next},b}(e)},{"../../../lib":34}],34:[function(a,b){"use strict";var c;b.exports=c=function(){function a(){}return a}(),c.signals=function(){function a(){}return a}(),a("./ash/signals/listener_node"),a("./ash/signals/listener_node_pool"),a("./ash/signals/signal_base"),a("./ash/signals/signal0"),a("./ash/signals/signal1"),a("./ash/signals/signal2"),a("./ash/signals/signal3"),c.core=function(){function a(){}return a}(),a("./ash/core/entity"),a("./ash/core/entity_list"),a("./ash/core/node"),a("./ash/core/node_list"),a("./ash/core/node_pool"),a("./ash/core/system"),a("./ash/core/system_list"),a("./ash/core/family"),a("./ash/core/component_matching_family"),a("./ash/core/engine"),c.fsm=function(){function a(){}return a}(),a("./ash/fsm/component_instance_provider"),a("./ash/fsm/component_singleton_provider"),a("./ash/fsm/component_type_provider"),a("./ash/fsm/dynamic_component_provider"),a("./ash/fsm/dynamic_system_provider"),a("./ash/fsm/engine_state"),a("./ash/fsm/state_component_mapping"),a("./ash/fsm/engine_state_machine"),a("./ash/fsm/entity_state"),a("./ash/fsm/entity_state_machine"),a("./ash/fsm/state_system_mapping"),a("./ash/fsm/system_instance_provider"),a("./ash/fsm/system_singleton_provider"),c.tick=function(){function a(){}return a}(),a("./ash/tick/frame_tick_provider"),c.tools=function(){function a(){}return a}(),a("./ash/tools/component_pool"),a("./ash/tools/list_iterating_system")},{"./ash/core/component_matching_family":1,"./ash/core/engine":2,"./ash/core/entity":3,"./ash/core/entity_list":4,"./ash/core/family":5,"./ash/core/node":6,"./ash/core/node_list":7,"./ash/core/node_pool":8,"./ash/core/system":9,"./ash/core/system_list":10,"./ash/fsm/component_instance_provider":11,"./ash/fsm/component_singleton_provider":12,"./ash/fsm/component_type_provider":13,"./ash/fsm/dynamic_component_provider":14,"./ash/fsm/dynamic_system_provider":15,"./ash/fsm/engine_state":16,"./ash/fsm/engine_state_machine":17,"./ash/fsm/entity_state":18,"./ash/fsm/entity_state_machine":19,"./ash/fsm/state_component_mapping":20,"./ash/fsm/state_system_mapping":21,"./ash/fsm/system_instance_provider":22,"./ash/fsm/system_singleton_provider":23,"./ash/signals/listener_node":24,"./ash/signals/listener_node_pool":25,"./ash/signals/signal0":26,"./ash/signals/signal1":27,"./ash/signals/signal2":28,"./ash/signals/signal3":29,"./ash/signals/signal_base":30,"./ash/tick/frame_tick_provider":31,"./ash/tools/component_pool":32,"./ash/tools/list_iterating_system":33}]},{},[34])(34)
});