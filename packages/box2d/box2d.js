!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Box2D=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2ContactID = Box2D.Collision.b2ContactID;

Box2D.Collision.ClipVertex = (function() {
  ClipVertex.prototype.v = null;

  ClipVertex.prototype.id = null;

  function ClipVertex() {
    this.v = new b2Vec2();
    this.id = new b2ContactID();
    return;
  }

  ClipVertex.prototype.Set = function(other) {
    this.v.SetV(other.v);
    this.id.Set(other.id);
  };

  return ClipVertex;

})();

//# sourceMappingURL=ClipVertex.js.map

},{"../index":103}],2:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.Features = (function() {
  function Features() {}

  Object.defineProperties(Features.prototype, {
    referenceEdge: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._referenceEdge;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._referenceEdge = value;
        this._m_id._key = (this._m_id._key & 0xffffff00) | (this._referenceEdge & 0x000000ff);
      }
    },
    incidentEdge: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._incidentEdge;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._incidentEdge = value;
        this._m_id._key = (this._m_id._key & 0xffff00ff) | ((this._incidentEdge << 8) & 0x0000ff00);
      }
    },
    incidentVertex: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._incidentVertex;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._incidentVertex = value;
        this._m_id._key = (this._m_id._key & 0xff00ffff) | ((this._incidentVertex << 16) & 0x00ff0000);
      }
    },
    flip: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._flip;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._flip = value;
        this._m_id._key = (this._m_id._key & 0x00ffffff) | ((this._flip << 24) & 0xff000000);
      }
    }
  });

  return Features;

})();

//# sourceMappingURL=Features.js.map

},{"../index":103}],3:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2AABB = (function() {
  b2AABB.prototype.lowerBound = null;

  b2AABB.prototype.upperBound = null;

  function b2AABB() {
    this.lowerBound = new b2Vec2();
    this.upperBound = new b2Vec2();
    return;
  }

  b2AABB.prototype.IsValid = function() {
    var dX, dY, valid;
    dX = this.upperBound.x - this.lowerBound.x;
    dY = this.upperBound.y - this.lowerBound.y;
    valid = dX >= 0.0 && dY >= 0.0;
    valid = valid && this.lowerBound.IsValid() && this.upperBound.IsValid();
    return valid;
  };

  b2AABB.prototype.GetCenter = function() {
    return new b2Vec2((this.lowerBound.x + this.upperBound.x) / 2, (this.lowerBound.y + this.upperBound.y) / 2);
  };

  b2AABB.prototype.GetExtents = function() {
    return new b2Vec2((this.upperBound.x - this.lowerBound.x) / 2, (this.upperBound.y - this.lowerBound.y) / 2);
  };

  b2AABB.prototype.Contains = function(aabb) {
    var result;
    result = true;
    result = result && this.lowerBound.x <= aabb.lowerBound.x;
    result = result && this.lowerBound.y <= aabb.lowerBound.y;
    result = result && aabb.upperBound.x <= this.upperBound.x;
    result = result && aabb.upperBound.y <= this.upperBound.y;
    return result;
  };

  b2AABB.prototype.RayCast = function(output, input) {
    var absDX, absDY, dX, dY, inv_d, normal, pX, pY, s, t1, t2, t3, tmax, tmin;
    tmin = -Number.MAX_VALUE;
    tmax = Number.MAX_VALUE;
    pX = input.p1.x;
    pY = input.p1.y;
    dX = input.p2.x - input.p1.x;
    dY = input.p2.y - input.p1.y;
    absDX = Math.abs(dX);
    absDY = Math.abs(dY);
    normal = output.normal;
    inv_d = 0;
    t1 = 0;
    t2 = 0;
    t3 = 0;
    s = 0;
    if (absDX < Number.MIN_VALUE) {
      if (pX < this.lowerBound.x || this.upperBound.x < pX) {
        return false;
      }
    } else {
      inv_d = 1.0 / dX;
      t1 = (this.lowerBound.x - pX) * inv_d;
      t2 = (this.upperBound.x - pX) * inv_d;
      s = -1.0;
      if (t1 > t2) {
        t3 = t1;
        t1 = t2;
        t2 = t3;
        s = 1.0;
      }
      if (t1 > tmin) {
        normal.x = s;
        normal.y = 0;
        tmin = t1;
      }
      tmax = Math.min(tmax, t2);
      if (tmin > tmax) {
        return false;
      }
    }
    if (absDY < Number.MIN_VALUE) {
      if (pY < this.lowerBound.y || this.upperBound.y < pY) {
        return false;
      }
    } else {
      inv_d = 1.0 / dY;
      t1 = (this.lowerBound.y - pY) * inv_d;
      t2 = (this.upperBound.y - pY) * inv_d;
      s = -1.0;
      if (t1 > t2) {
        t3 = t1;
        t1 = t2;
        t2 = t3;
        s = 1.0;
      }
      if (t1 > tmin) {
        normal.y = s;
        normal.x = 0;
        tmin = t1;
      }
      tmax = Math.min(tmax, t2);
      if (tmin > tmax) {
        return false;
      }
    }
    output.fraction = tmin;
    return true;
  };

  b2AABB.prototype.TestOverlap = function(other) {
    var d1X, d1Y, d2X, d2Y;
    d1X = other.lowerBound.x - this.upperBound.x;
    d1Y = other.lowerBound.y - this.upperBound.y;
    d2X = this.lowerBound.x - other.upperBound.x;
    d2Y = this.lowerBound.y - other.upperBound.y;
    if (d1X > 0.0 || d1Y > 0.0) {
      return false;
    }
    if (d2X > 0.0 || d2Y > 0.0) {
      return false;
    }
    return true;
  };

  b2AABB.Combine = function(aabb1, aabb2) {
    var aabb;
    aabb = new b2AABB();
    aabb.Combine(aabb1, aabb2);
    return aabb;
  };

  b2AABB.prototype.Combine = function(aabb1, aabb2) {
    this.lowerBound.x = Math.min(aabb1.lowerBound.x, aabb2.lowerBound.x);
    this.lowerBound.y = Math.min(aabb1.lowerBound.y, aabb2.lowerBound.y);
    this.upperBound.x = Math.max(aabb1.upperBound.x, aabb2.upperBound.x);
    this.upperBound.y = Math.max(aabb1.upperBound.y, aabb2.upperBound.y);
  };

  return b2AABB;

})();

//# sourceMappingURL=b2AABB.js.map

},{"../index":103}],4:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2Bound = (function() {
  function b2Bound() {}

  b2Bound.prototype.value = 0;

  b2Bound.prototype.proxy = null;

  b2Bound.prototype.stabbingCount = 0;

  b2Bound.prototype.IsLower = function() {
    return (this.value & 1) === 0;
  };

  b2Bound.prototype.IsUpper = function() {
    return (this.value & 1) === 1;
  };

  b2Bound.prototype.Swap = function(b) {
    var tempProxy, tempStabbingCount, tempValue;
    tempValue = this.value;
    tempProxy = this.proxy;
    tempStabbingCount = this.stabbingCount;
    this.value = b.value;
    this.proxy = b.proxy;
    this.stabbingCount = b.stabbingCount;
    b.value = tempValue;
    b.proxy = tempProxy;
    b.stabbingCount = tempStabbingCount;
  };

  return b2Bound;

})();

//# sourceMappingURL=b2Bound.js.map

},{"../index":103}],5:[function(require,module,exports){
var Box2D, Vector;

Box2D = require('../index');

Vector = Box2D.Vector;

Box2D.Collision.b2BoundValues = (function() {
  b2BoundValues.prototype.lowerValues = null;

  b2BoundValues.prototype.upperValues = null;

  function b2BoundValues() {
    this.lowerValues = new Vector();
    this.lowerValues[0] = 0.0;
    this.lowerValues[1] = 0.0;
    this.upperValues = new Vector();
    this.upperValues[0] = 0.0;
    this.upperValues[1] = 0.0;
    return;
  }

  return b2BoundValues;

})();

//# sourceMappingURL=b2BoundValues.js.map

},{"../index":103}],6:[function(require,module,exports){
var Box2D, ClipVertex, Vector, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Vector = Box2D.Vector;

ClipVertex = Box2D.Collision.ClipVertex;

Box2D.Collision.b2Collision = (function() {
  function b2Collision() {}

  b2Collision.b2_nullFeature = 0x000000ff;

  b2Collision.s_edgeAO = new Vector(1);

  b2Collision.s_edgeBO = new Vector(1);

  b2Collision.s_localTangent = new b2Vec2();

  b2Collision.s_localNormal = new b2Vec2();

  b2Collision.s_planePoint = new b2Vec2();

  b2Collision.s_normal = new b2Vec2();

  b2Collision.s_tangent = new b2Vec2();

  b2Collision.s_tangent2 = new b2Vec2();

  b2Collision.s_v11 = new b2Vec2();

  b2Collision.s_v12 = new b2Vec2();

  b2Collision.b2CollidePolyTempVec = new b2Vec2();

  b2Collision.ClipSegmentToLine = function(vOut, vIn, normal, offset) {
    var cv, cv2, distance0, distance1, interp, numOut, tVec, vIn0, vIn1;
    if (offset === void 0) {
      offset = 0;
    }
    cv = void 0;
    numOut = 0;
    cv = vIn[0];
    vIn0 = cv.v;
    cv = vIn[1];
    vIn1 = cv.v;
    distance0 = normal.x * vIn0.x + normal.y * vIn0.y - offset;
    distance1 = normal.x * vIn1.x + normal.y * vIn1.y - offset;
    if (distance0 <= 0.0) {
      vOut[numOut++].Set(vIn[0]);
    }
    if (distance1 <= 0.0) {
      vOut[numOut++].Set(vIn[1]);
    }
    if (distance0 * distance1 < 0.0) {
      interp = distance0 / (distance0 - distance1);
      cv = vOut[numOut];
      tVec = cv.v;
      tVec.x = vIn0.x + interp * (vIn1.x - vIn0.x);
      tVec.y = vIn0.y + interp * (vIn1.y - vIn0.y);
      cv = vOut[numOut];
      cv2 = void 0;
      if (distance0 > 0.0) {
        cv2 = vIn[0];
        cv.id = cv2.id;
      } else {
        cv2 = vIn[1];
        cv.id = cv2.id;
      }
      ++numOut;
    }
    return numOut;
  };

  b2Collision.EdgeSeparation = function(poly1, xf1, edge1, poly2, xf2) {
    var count1, count2, dot, i, index, minDot, normal1WorldX, normal1WorldY, normal1X, normal1Y, normals1, separation, tMat, tVec, v1X, v1Y, v2X, v2Y, vertices1, vertices2;
    if (edge1 === void 0) {
      edge1 = 0;
    }
    count1 = parseInt(poly1.m_vertexCount);
    vertices1 = poly1.m_vertices;
    normals1 = poly1.m_normals;
    count2 = parseInt(poly2.m_vertexCount);
    vertices2 = poly2.m_vertices;
    tMat = void 0;
    tVec = void 0;
    tMat = xf1.R;
    tVec = normals1[edge1];
    normal1WorldX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    normal1WorldY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    tMat = xf2.R;
    normal1X = tMat.col1.x * normal1WorldX + tMat.col1.y * normal1WorldY;
    normal1Y = tMat.col2.x * normal1WorldX + tMat.col2.y * normal1WorldY;
    index = 0;
    minDot = Number.MAX_VALUE;
    i = 0;
    while (i < count2) {
      tVec = vertices2[i];
      dot = tVec.x * normal1X + tVec.y * normal1Y;
      if (dot < minDot) {
        minDot = dot;
        index = i;
      }
      ++i;
    }
    tVec = vertices1[edge1];
    tMat = xf1.R;
    v1X = xf1.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    v1Y = xf1.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tVec = vertices2[index];
    tMat = xf2.R;
    v2X = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    v2Y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    v2X -= v1X;
    v2Y -= v1Y;
    separation = v2X * normal1WorldX + v2Y * normal1WorldY;
    return separation;
  };

  b2Collision.FindMaxSeparation = function(edgeIndex, poly1, xf1, poly2, xf2) {
    var bestEdge, bestSeparation, count1, dLocal1X, dLocal1Y, dX, dY, dot, edge, i, increment, maxDot, nextEdge, normals1, prevEdge, s, sNext, sPrev, tMat, tVec;
    count1 = parseInt(poly1.m_vertexCount);
    normals1 = poly1.m_normals;
    tVec = void 0;
    tMat = void 0;
    tMat = xf2.R;
    tVec = poly2.m_centroid;
    dX = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    dY = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tMat = xf1.R;
    tVec = poly1.m_centroid;
    dX -= xf1.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    dY -= xf1.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    dLocal1X = dX * xf1.R.col1.x + dY * xf1.R.col1.y;
    dLocal1Y = dX * xf1.R.col2.x + dY * xf1.R.col2.y;
    edge = 0;
    maxDot = -Number.MAX_VALUE;
    i = 0;
    while (i < count1) {
      tVec = normals1[i];
      dot = tVec.x * dLocal1X + tVec.y * dLocal1Y;
      if (dot > maxDot) {
        maxDot = dot;
        edge = i;
      }
      ++i;
    }
    s = b2Collision.EdgeSeparation(poly1, xf1, edge, poly2, xf2);
    prevEdge = parseInt((edge - 1 >= 0 ? edge - 1 : count1 - 1));
    sPrev = b2Collision.EdgeSeparation(poly1, xf1, prevEdge, poly2, xf2);
    nextEdge = parseInt((edge + 1 < count1 ? edge + 1 : 0));
    sNext = b2Collision.EdgeSeparation(poly1, xf1, nextEdge, poly2, xf2);
    bestEdge = 0;
    bestSeparation = 0;
    increment = 0;
    if (sPrev > s && sPrev > sNext) {
      increment = -1.;
      bestEdge = prevEdge;
      bestSeparation = sPrev;
    } else if (sNext > s) {
      increment = 1;
      bestEdge = nextEdge;
      bestSeparation = sNext;
    } else {
      edgeIndex[0] = edge;
      return s;
    }
    while (true) {
      if (increment === (-1)) {
        edge = (bestEdge - 1 >= 0 ? bestEdge - 1 : count1 - 1);
      } else {
        edge = (bestEdge + 1 < count1 ? bestEdge + 1 : 0);
      }
      s = b2Collision.EdgeSeparation(poly1, xf1, edge, poly2, xf2);
      if (s > bestSeparation) {
        bestEdge = edge;
        bestSeparation = s;
      } else {
        break;
      }
    }
    edgeIndex[0] = bestEdge;
    return bestSeparation;
  };

  b2Collision.FindIncidentEdge = function(c, poly1, xf1, edge1, poly2, xf2) {
    var count1, count2, dot, i, i1, i2, index, minDot, normal1X, normal1Y, normals1, normals2, tClip, tMat, tVec, tX, vertices2;
    if (edge1 === void 0) {
      edge1 = 0;
    }
    count1 = parseInt(poly1.m_vertexCount);
    normals1 = poly1.m_normals;
    count2 = parseInt(poly2.m_vertexCount);
    vertices2 = poly2.m_vertices;
    normals2 = poly2.m_normals;
    tMat = void 0;
    tVec = void 0;
    tMat = xf1.R;
    tVec = normals1[edge1];
    normal1X = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    normal1Y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    tMat = xf2.R;
    tX = tMat.col1.x * normal1X + tMat.col1.y * normal1Y;
    normal1Y = tMat.col2.x * normal1X + tMat.col2.y * normal1Y;
    normal1X = tX;
    index = 0;
    minDot = Number.MAX_VALUE;
    i = 0;
    while (i < count2) {
      tVec = normals2[i];
      dot = normal1X * tVec.x + normal1Y * tVec.y;
      if (dot < minDot) {
        minDot = dot;
        index = i;
      }
      ++i;
    }
    tClip = void 0;
    i1 = parseInt(index);
    i2 = parseInt((i1 + 1 < count2 ? i1 + 1 : 0));
    tClip = c[0];
    tVec = vertices2[i1];
    tMat = xf2.R;
    tClip.v.x = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    tClip.v.y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tClip.id.features.referenceEdge = edge1;
    tClip.id.features.incidentEdge = i1;
    tClip.id.features.incidentVertex = 0;
    tClip = c[1];
    tVec = vertices2[i2];
    tMat = xf2.R;
    tClip.v.x = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    tClip.v.y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tClip.id.features.referenceEdge = edge1;
    tClip.id.features.incidentEdge = i2;
    tClip.id.features.incidentVertex = 1;
  };

  b2Collision.MakeClipPointVector = function() {
    var r;
    r = new Vector(2);
    r[0] = new ClipVertex();
    r[1] = new ClipVertex();
    return r;
  };

  b2Collision.CollidePolygons = function(manifold, polyA, xfA, polyB, xfB) {
    var clipPoints1, clipPoints2, count1, cp, cv, edge1, edgeA, edgeB, flip, frontOffset, i, incidentEdge, k_absoluteTol, k_relativeTol, localNormal, localTangent, local_v11, local_v12, normal, np, planePoint, pointCount, poly1, poly2, separation, separationA, separationB, sideOffset1, sideOffset2, tMat, tX, tY, tangent, tangent2, totalRadius, v11, v12, vertices1, xf1, xf2;
    cv = void 0;
    manifold.m_pointCount = 0;
    totalRadius = polyA.m_radius + polyB.m_radius;
    edgeA = 0;
    b2Collision.s_edgeAO[0] = edgeA;
    separationA = b2Collision.FindMaxSeparation(b2Collision.s_edgeAO, polyA, xfA, polyB, xfB);
    edgeA = b2Collision.s_edgeAO[0];
    if (separationA > totalRadius) {
      return;
    }
    edgeB = 0;
    b2Collision.s_edgeBO[0] = edgeB;
    separationB = b2Collision.FindMaxSeparation(b2Collision.s_edgeBO, polyB, xfB, polyA, xfA);
    edgeB = b2Collision.s_edgeBO[0];
    if (separationB > totalRadius) {
      return;
    }
    poly1 = void 0;
    poly2 = void 0;
    xf1 = void 0;
    xf2 = void 0;
    edge1 = 0;
    flip = 0;
    k_relativeTol = 0.98;
    k_absoluteTol = 0.001;
    tMat = void 0;
    if (separationB > k_relativeTol * separationA + k_absoluteTol) {
      poly1 = polyB;
      poly2 = polyA;
      xf1 = xfB;
      xf2 = xfA;
      edge1 = edgeB;
      manifold.m_type = b2Manifold.e_faceB;
      flip = 1;
    } else {
      poly1 = polyA;
      poly2 = polyB;
      xf1 = xfA;
      xf2 = xfB;
      edge1 = edgeA;
      manifold.m_type = b2Manifold.e_faceA;
      flip = 0;
    }
    incidentEdge = b2Collision.s_incidentEdge;
    b2Collision.FindIncidentEdge(incidentEdge, poly1, xf1, edge1, poly2, xf2);
    count1 = parseInt(poly1.m_vertexCount);
    vertices1 = poly1.m_vertices;
    local_v11 = vertices1[edge1];
    local_v12 = void 0;
    if (edge1 + 1 < count1) {
      local_v12 = vertices1[parseInt(edge1 + 1)];
    } else {
      local_v12 = vertices1[0];
    }
    localTangent = b2Collision.s_localTangent;
    localTangent.Set(local_v12.x - local_v11.x, local_v12.y - local_v11.y);
    localTangent.Normalize();
    localNormal = b2Collision.s_localNormal;
    localNormal.x = localTangent.y;
    localNormal.y = -localTangent.x;
    planePoint = b2Collision.s_planePoint;
    planePoint.Set(0.5 * (local_v11.x + local_v12.x), 0.5 * (local_v11.y + local_v12.y));
    tangent = b2Collision.s_tangent;
    tMat = xf1.R;
    tangent.x = tMat.col1.x * localTangent.x + tMat.col2.x * localTangent.y;
    tangent.y = tMat.col1.y * localTangent.x + tMat.col2.y * localTangent.y;
    tangent2 = b2Collision.s_tangent2;
    tangent2.x = -tangent.x;
    tangent2.y = -tangent.y;
    normal = b2Collision.s_normal;
    normal.x = tangent.y;
    normal.y = -tangent.x;
    v11 = b2Collision.s_v11;
    v12 = b2Collision.s_v12;
    v11.x = xf1.position.x + (tMat.col1.x * local_v11.x + tMat.col2.x * local_v11.y);
    v11.y = xf1.position.y + (tMat.col1.y * local_v11.x + tMat.col2.y * local_v11.y);
    v12.x = xf1.position.x + (tMat.col1.x * local_v12.x + tMat.col2.x * local_v12.y);
    v12.y = xf1.position.y + (tMat.col1.y * local_v12.x + tMat.col2.y * local_v12.y);
    frontOffset = normal.x * v11.x + normal.y * v11.y;
    sideOffset1 = (-tangent.x * v11.x) - tangent.y * v11.y + totalRadius;
    sideOffset2 = tangent.x * v12.x + tangent.y * v12.y + totalRadius;
    clipPoints1 = b2Collision.s_clipPoints1;
    clipPoints2 = b2Collision.s_clipPoints2;
    np = 0;
    np = b2Collision.ClipSegmentToLine(clipPoints1, incidentEdge, tangent2, sideOffset1);
    if (np < 2) {
      return;
    }
    np = b2Collision.ClipSegmentToLine(clipPoints2, clipPoints1, tangent, sideOffset2);
    if (np < 2) {
      return;
    }
    manifold.m_localPlaneNormal.SetV(localNormal);
    manifold.m_localPoint.SetV(planePoint);
    pointCount = 0;
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      cv = clipPoints2[i];
      separation = normal.x * cv.v.x + normal.y * cv.v.y - frontOffset;
      if (separation <= totalRadius) {
        cp = manifold.m_points[pointCount];
        tMat = xf2.R;
        tX = cv.v.x - xf2.position.x;
        tY = cv.v.y - xf2.position.y;
        cp.m_localPoint.x = tX * tMat.col1.x + tY * tMat.col1.y;
        cp.m_localPoint.y = tX * tMat.col2.x + tY * tMat.col2.y;
        cp.m_id.Set(cv.id);
        cp.m_id.features.flip = flip;
        ++pointCount;
      }
      ++i;
    }
    manifold.m_pointCount = pointCount;
  };

  b2Collision.CollideCircles = function(manifold, circle1, xf1, circle2, xf2) {
    var dX, dY, distSqr, p1X, p1Y, p2X, p2Y, radius, tMat, tVec;
    manifold.m_pointCount = 0;
    tMat = void 0;
    tVec = void 0;
    tMat = xf1.R;
    tVec = circle1.m_p;
    p1X = xf1.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    p1Y = xf1.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    tMat = xf2.R;
    tVec = circle2.m_p;
    p2X = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    p2Y = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    distSqr = dX * dX + dY * dY;
    radius = circle1.m_radius + circle2.m_radius;
    if (distSqr > radius * radius) {
      return;
    }
    manifold.m_type = b2Manifold.e_circles;
    manifold.m_localPoint.SetV(circle1.m_p);
    manifold.m_localPlaneNormal.SetZero();
    manifold.m_pointCount = 1;
    manifold.m_points[0].m_localPoint.SetV(circle2.m_p);
    manifold.m_points[0].m_id.key = 0;
  };

  b2Collision.CollidePolygonAndCircle = function(manifold, polygon, xf1, circle, xf2) {
    var cLocalX, cLocalY, cX, cY, dX, dY, dist, faceCenterX, faceCenterY, i, normalIndex, normals, positionX, positionY, radius, s, separation, tMat, tPoint, tVec, u1, u2, v1, v2, vertIndex1, vertIndex2, vertexCount, vertices;
    manifold.m_pointCount = 0;
    tPoint = void 0;
    dX = 0;
    dY = 0;
    positionX = 0;
    positionY = 0;
    tVec = void 0;
    tMat = void 0;
    tMat = xf2.R;
    tVec = circle.m_p;
    cX = xf2.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    cY = xf2.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    dX = cX - xf1.position.x;
    dY = cY - xf1.position.y;
    tMat = xf1.R;
    cLocalX = dX * tMat.col1.x + dY * tMat.col1.y;
    cLocalY = dX * tMat.col2.x + dY * tMat.col2.y;
    dist = 0;
    normalIndex = 0;
    separation = -Number.MAX_VALUE;
    radius = polygon.m_radius + circle.m_radius;
    vertexCount = parseInt(polygon.m_vertexCount);
    vertices = polygon.m_vertices;
    normals = polygon.m_normals;
    i = 0;
    while (i < vertexCount) {
      tVec = vertices[i];
      dX = cLocalX - tVec.x;
      dY = cLocalY - tVec.y;
      tVec = normals[i];
      s = tVec.x * dX + tVec.y * dY;
      if (s > radius) {
        return;
      }
      if (s > separation) {
        separation = s;
        normalIndex = i;
      }
      ++i;
    }
    vertIndex1 = parseInt(normalIndex);
    vertIndex2 = parseInt((vertIndex1 + 1 < vertexCount ? vertIndex1 + 1 : 0));
    v1 = vertices[vertIndex1];
    v2 = vertices[vertIndex2];
    if (separation < Number.MIN_VALUE) {
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.SetV(normals[normalIndex]);
      manifold.m_localPoint.x = 0.5 * (v1.x + v2.x);
      manifold.m_localPoint.y = 0.5 * (v1.y + v2.y);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
      return;
    }
    u1 = (cLocalX - v1.x) * (v2.x - v1.x) + (cLocalY - v1.y) * (v2.y - v1.y);
    u2 = (cLocalX - v2.x) * (v1.x - v2.x) + (cLocalY - v2.y) * (v1.y - v2.y);
    if (u1 <= 0.0) {
      if ((cLocalX - v1.x) * (cLocalX - v1.x) + (cLocalY - v1.y) * (cLocalY - v1.y) > radius * radius) {
        return;
      }
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.x = cLocalX - v1.x;
      manifold.m_localPlaneNormal.y = cLocalY - v1.y;
      manifold.m_localPlaneNormal.Normalize();
      manifold.m_localPoint.SetV(v1);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
    } else if (u2 <= 0) {
      if ((cLocalX - v2.x) * (cLocalX - v2.x) + (cLocalY - v2.y) * (cLocalY - v2.y) > radius * radius) {
        return;
      }
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.x = cLocalX - v2.x;
      manifold.m_localPlaneNormal.y = cLocalY - v2.y;
      manifold.m_localPlaneNormal.Normalize();
      manifold.m_localPoint.SetV(v2);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
    } else {
      faceCenterX = 0.5 * (v1.x + v2.x);
      faceCenterY = 0.5 * (v1.y + v2.y);
      separation = (cLocalX - faceCenterX) * normals[vertIndex1].x + (cLocalY - faceCenterY) * normals[vertIndex1].y;
      if (separation > radius) {
        return;
      }
      manifold.m_pointCount = 1;
      manifold.m_type = b2Manifold.e_faceA;
      manifold.m_localPlaneNormal.x = normals[vertIndex1].x;
      manifold.m_localPlaneNormal.y = normals[vertIndex1].y;
      manifold.m_localPlaneNormal.Normalize();
      manifold.m_localPoint.Set(faceCenterX, faceCenterY);
      manifold.m_points[0].m_localPoint.SetV(circle.m_p);
      manifold.m_points[0].m_id.key = 0;
    }
  };

  b2Collision.TestOverlap = function(a, b) {
    var d1X, d1Y, d2X, d2Y, t1, t2;
    t1 = b.lowerBound;
    t2 = a.upperBound;
    d1X = t1.x - t2.x;
    d1Y = t1.y - t2.y;
    t1 = a.lowerBound;
    t2 = b.upperBound;
    d2X = t1.x - t2.x;
    d2Y = t1.y - t2.y;
    if (d1X > 0.0 || d1Y > 0.0) {
      return false;
    }
    if (d2X > 0.0 || d2Y > 0.0) {
      return false;
    }
    return true;
  };

  b2Collision.s_incidentEdge = b2Collision.MakeClipPointVector();

  b2Collision.s_clipPoints1 = b2Collision.MakeClipPointVector();

  b2Collision.s_clipPoints2 = b2Collision.MakeClipPointVector();

  return b2Collision;

})();

//# sourceMappingURL=b2Collision.js.map

},{"../index":103}],7:[function(require,module,exports){
var Box2D, Features;

Box2D = require('../index');

Features = Box2D.Collision.Features;

Box2D.Collision.b2ContactID = (function() {
  b2ContactID.prototype.key = null;

  b2ContactID.prototype.features = null;

  function b2ContactID() {
    this.features = new Features();
    this.features._m_id = this;
    return;
  }

  b2ContactID.prototype.Set = function(id) {
    this.key = id._key;
  };

  b2ContactID.prototype.Copy = function() {
    var id;
    id = new b2ContactID();
    id.key = this.key;
    return id;
  };

  Object.defineProperties(b2ContactID.prototype, {
    key: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._key;
      },
      set: function(value) {
        if (value === void 0) {
          value = 0;
        }
        this._key = value;
        this.features._referenceEdge = this._key & 0x000000ff;
        this.features._incidentEdge = ((this._key & 0x0000ff00) >> 8) & 0x000000ff;
        this.features._incidentVertex = ((this._key & 0x00ff0000) >> 16) & 0x000000ff;
        this.features._flip = ((this._key & 0xff000000) >> 24) & 0x000000ff;
      }
    }
  });

  return b2ContactID;

})();

//# sourceMappingURL=b2ContactID.js.map

},{"../index":103}],8:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2ContactID = Box2D.Collision.b2ContactID;

Box2D.Collision.b2ContactPoint = (function() {
  b2ContactPoint.prototype.position = null;

  b2ContactPoint.prototype.velocity = null;

  b2ContactPoint.prototype.normal = null;

  b2ContactPoint.prototype.id = null;

  function b2ContactPoint() {
    this.position = new b2Vec2();
    this.velocity = new b2Vec2();
    this.normal = new b2Vec2();
    this.id = new b2ContactID();
    return;
  }

  return b2ContactPoint;

})();

//# sourceMappingURL=b2ContactPoint.js.map

},{"../index":103}],9:[function(require,module,exports){
var Box2D, Vector, b2Simplex;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Simplex = Box2D.Collision.b2Simplex;

Box2D.Collision.b2Distance = (function() {
  function b2Distance(output, cache, input) {
    var closestPoint, d, distanceSqr1, distanceSqr2, duplicate, i, iter, k_maxIters, normal, p, proxyA, proxyB, rA, rB, saveA, saveB, saveCount, simplex, transformA, transformB, vertex, vertices;
    ++b2Distance.b2_gjkCalls;
    proxyA = input.proxyA;
    proxyB = input.proxyB;
    transformA = input.transformA;
    transformB = input.transformB;
    simplex = b2Distance.s_simplex;
    simplex.ReadCache(cache, proxyA, transformA, proxyB, transformB);
    vertices = simplex.m_vertices;
    k_maxIters = 20;
    saveA = b2Distance.s_saveA;
    saveB = b2Distance.s_saveB;
    saveCount = 0;
    closestPoint = simplex.GetClosestPoint();
    distanceSqr1 = closestPoint.LengthSquared();
    distanceSqr2 = distanceSqr1;
    i = 0;
    p = void 0;
    iter = 0;
    while (iter < k_maxIters) {
      saveCount = simplex.m_count;
      i = 0;
      while (i < saveCount) {
        saveA[i] = vertices[i].indexA;
        saveB[i] = vertices[i].indexB;
        i++;
      }
      switch (simplex.m_count) {
        case 1:
        case 2:
          simplex.Solve2();
          break;
        case 3:
          simplex.Solve3();
          break;
        default:
          b2Settings.b2Assert(false);
      }
      if (simplex.m_count === 3) {
        break;
      }
      p = simplex.GetClosestPoint();
      distanceSqr2 = p.LengthSquared();

      /**
      todo: this looks like a bug
       */
      distanceSqr1 = distanceSqr2;
      d = simplex.GetSearchDirection();
      if (d.LengthSquared() < Number.MIN_VALUE * Number.MIN_VALUE) {
        break;
      }
      vertex = vertices[simplex.m_count];
      vertex.indexA = proxyA.GetSupport(b2Math.MulTMV(transformA.R, d.GetNegative()));
      vertex.wA = b2Math.MulX(transformA, proxyA.GetVertex(vertex.indexA));
      vertex.indexB = proxyB.GetSupport(b2Math.MulTMV(transformB.R, d));
      vertex.wB = b2Math.MulX(transformB, proxyB.GetVertex(vertex.indexB));
      vertex.w = b2Math.SubtractVV(vertex.wB, vertex.wA);
      ++iter;
      ++b2Distance.b2_gjkIters;
      duplicate = false;
      i = 0;
      while (i < saveCount) {
        if (vertex.indexA === saveA[i] && vertex.indexB === saveB[i]) {
          duplicate = true;
          break;
        }
        i++;
      }
      if (duplicate) {
        break;
      }
      ++simplex.m_count;
    }
    b2Distance.b2_gjkMaxIters = b2Math.Max(b2Distance.b2_gjkMaxIters, iter);
    simplex.GetWitnessPoints(output.pointA, output.pointB);
    output.distance = b2Math.SubtractVV(output.pointA, output.pointB).Length();
    output.iterations = iter;
    simplex.WriteCache(cache);
    if (input.useRadii) {
      rA = proxyA.m_radius;
      rB = proxyB.m_radius;
      if (output.distance > rA + rB && output.distance > Number.MIN_VALUE) {
        output.distance -= rA + rB;
        normal = b2Math.SubtractVV(output.pointB, output.pointA);
        normal.Normalize();
        output.pointA.x += rA * normal.x;
        output.pointA.y += rA * normal.y;
        output.pointB.x -= rB * normal.x;
        output.pointB.y -= rB * normal.y;
      } else {
        p = new b2Vec2();
        p.x = .5 * (output.pointA.x + output.pointB.x);
        p.y = .5 * (output.pointA.y + output.pointB.y);
        output.pointA.x = output.pointB.x = p.x;
        output.pointA.y = output.pointB.y = p.y;
        output.distance = 0.0;
      }
    }
    return;
  }

  b2Distance.s_simplex = new b2Simplex();

  b2Distance.s_saveA = new Vector(3);

  b2Distance.s_saveB = new Vector(3);

  return b2Distance;

})();

//# sourceMappingURL=b2Distance.js.map

},{"../index":103}],10:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2DistanceInput = (function() {
  function b2DistanceInput() {}

  return b2DistanceInput;

})();

//# sourceMappingURL=b2DistanceInput.js.map

},{"../index":103}],11:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2DistanceOutput = (function() {
  b2DistanceOutput.prototype.pointA = null;

  b2DistanceOutput.prototype.pointB = null;

  function b2DistanceOutput() {
    this.pointA = new b2Vec2();
    this.pointB = new b2Vec2();
    return;
  }

  return b2DistanceOutput;

})();

//# sourceMappingURL=b2DistanceOutput.js.map

},{"../index":103}],12:[function(require,module,exports){
var Box2D, Vector, b2CircleShape, b2Settings;

Box2D = require('../index');

b2CircleShape = Box2D.Collision.Shapes.b2CircleShape;

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

Box2D.Collision.b2DistanceProxy = (function() {
  function b2DistanceProxy() {}

  b2DistanceProxy.prototype.m_vertices = null;

  b2DistanceProxy.prototype.m_count = 0;

  b2DistanceProxy.prototype.m_radius = 0;

  b2DistanceProxy.prototype.Set = function(shape) {
    var circle, polygon;
    switch (shape.GetType()) {
      case b2Shape.e_circleShape:
        circle = (shape instanceof b2CircleShape ? shape : null);
        this.m_vertices = new Vector(1, true);
        this.m_vertices[0] = circle.m_p;
        this.m_count = 1;
        this.m_radius = circle.m_radius;
        break;
      case b2Shape.e_polygonShape:
        polygon = (shape instanceof b2PolygonShape ? shape : null);
        this.m_vertices = polygon.m_vertices;
        this.m_count = polygon.m_vertexCount;
        this.m_radius = polygon.m_radius;
        break;
      default:
        b2Settings.b2Assert(false);
    }
  };

  b2DistanceProxy.prototype.GetSupport = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_count) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return bestIndex;
  };

  b2DistanceProxy.prototype.GetSupportVertex = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_count) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return this.m_vertices[bestIndex];
  };

  b2DistanceProxy.prototype.GetVertexCount = function() {
    return this.m_count;
  };

  b2DistanceProxy.prototype.GetVertex = function(index) {
    if (index === void 0) {
      index = 0;
    }
    b2Settings.b2Assert(0 <= index && index < this.m_count);
    return this.m_vertices[index];
  };

  return b2DistanceProxy;

})();

//# sourceMappingURL=b2DistanceProxy.js.map

},{"../index":103}],13:[function(require,module,exports){
var Box2D, Vector, b2AABB, b2DynamicTreeNode, b2Math, b2RayCastInput, b2Settings;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2AABB = Box2D.Collision.b2AABB;

b2RayCastInput = Box2D.Collision.b2RayCastInput;

b2DynamicTreeNode = Box2D.Collision.b2DynamicTreeNode;

Box2D.Collision.b2DynamicTree = (function() {
  function b2DynamicTree() {
    this.m_root = null;
    this.m_freeList = null;
    this.m_path = 0;
    this.m_insertionCount = 0;
    return;
  }

  b2DynamicTree.prototype.CreateProxy = function(aabb, userData) {
    var extendX, extendY, node;
    node = this.AllocateNode();
    extendX = b2Settings.b2_aabbExtension;
    extendY = b2Settings.b2_aabbExtension;
    node.aabb.lowerBound.x = aabb.lowerBound.x - extendX;
    node.aabb.lowerBound.y = aabb.lowerBound.y - extendY;
    node.aabb.upperBound.x = aabb.upperBound.x + extendX;
    node.aabb.upperBound.y = aabb.upperBound.y + extendY;
    node.userData = userData;
    this.InsertLeaf(node);
    return node;
  };

  b2DynamicTree.prototype.DestroyProxy = function(proxy) {
    this.RemoveLeaf(proxy);
    this.FreeNode(proxy);
  };

  b2DynamicTree.prototype.MoveProxy = function(proxy, aabb, displacement) {
    var extendX, extendY;
    b2Settings.b2Assert(proxy.IsLeaf());
    if (proxy.aabb.Contains(aabb)) {
      return false;
    }
    this.RemoveLeaf(proxy);
    extendX = b2Settings.b2_aabbExtension + b2Settings.b2_aabbMultiplier * (displacement.x > 0 ? displacement.x : -displacement.x);
    extendY = b2Settings.b2_aabbExtension + b2Settings.b2_aabbMultiplier * (displacement.y > 0 ? displacement.y : -displacement.y);
    proxy.aabb.lowerBound.x = aabb.lowerBound.x - extendX;
    proxy.aabb.lowerBound.y = aabb.lowerBound.y - extendY;
    proxy.aabb.upperBound.x = aabb.upperBound.x + extendX;
    proxy.aabb.upperBound.y = aabb.upperBound.y + extendY;
    this.InsertLeaf(proxy);
    return true;
  };

  b2DynamicTree.prototype.Rebalance = function(iterations) {
    var bit, i, node;
    if (iterations === void 0) {
      iterations = 0;
    }
    if (this.m_root == null) {
      return;
    }
    i = 0;
    while (i < iterations) {
      node = this.m_root;
      bit = 0;
      while (node.IsLeaf() === false) {
        node = ((this.m_path >> bit) & 1 ? node.child2 : node.child1);
        bit = (bit + 1) & 31;
      }
      ++this.m_path;
      this.RemoveLeaf(node);
      this.InsertLeaf(node);
      i++;
    }
  };

  b2DynamicTree.prototype.GetFatAABB = function(proxy) {
    return proxy.aabb;
  };

  b2DynamicTree.prototype.GetUserData = function(proxy) {
    return proxy.userData;
  };

  b2DynamicTree.prototype.Query = function(callback, aabb) {
    var count, node, proceed, stack;
    if (this.m_root == null) {
      return;
    }
    stack = new Vector();
    count = 0;
    stack[count++] = this.m_root;
    while (count > 0) {
      node = stack[--count];
      if (node.aabb.TestOverlap(aabb)) {
        if (node.IsLeaf()) {
          proceed = callback(node);
          if (!proceed) {
            return;
          }
        } else {
          stack[count++] = node.child1;
          stack[count++] = node.child2;
        }
      }
    }
  };

  b2DynamicTree.prototype.RayCast = function(callback, input) {
    var abs_v, c, count, h, maxFraction, node, p1, p2, r, segmentAABB, separation, stack, subInput, tX, tY, v;
    if (this.m_root == null) {
      return;
    }
    p1 = input.p1;
    p2 = input.p2;
    r = b2Math.SubtractVV(p1, p2);
    r.Normalize();
    v = b2Math.CrossFV(1.0, r);
    abs_v = b2Math.AbsV(v);
    maxFraction = input.maxFraction;
    segmentAABB = new b2AABB();
    tX = 0;
    tY = 0;
    tX = p1.x + maxFraction * (p2.x - p1.x);
    tY = p1.y + maxFraction * (p2.y - p1.y);
    segmentAABB.lowerBound.x = Math.min(p1.x, tX);
    segmentAABB.lowerBound.y = Math.min(p1.y, tY);
    segmentAABB.upperBound.x = Math.max(p1.x, tX);
    segmentAABB.upperBound.y = Math.max(p1.y, tY);
    stack = new Vector();
    count = 0;
    stack[count++] = this.m_root;
    while (count > 0) {
      node = stack[--count];
      if (node.aabb.TestOverlap(segmentAABB) === false) {
        continue;
      }
      c = node.aabb.GetCenter();
      h = node.aabb.GetExtents();
      separation = Math.abs(v.x * (p1.x - c.x) + v.y * (p1.y - c.y)) - abs_v.x * h.x - abs_v.y * h.y;
      if (separation > 0.0) {
        continue;
      }
      if (node.IsLeaf()) {
        subInput = new b2RayCastInput();
        subInput.p1 = input.p1;
        subInput.p2 = input.p2;
        subInput.maxFraction = input.maxFraction;
        maxFraction = callback(subInput, node);
        if (maxFraction === 0.0) {
          return;
        }
        if (maxFraction > 0.0) {
          tX = p1.x + maxFraction * (p2.x - p1.x);
          tY = p1.y + maxFraction * (p2.y - p1.y);
          segmentAABB.lowerBound.x = Math.min(p1.x, tX);
          segmentAABB.lowerBound.y = Math.min(p1.y, tY);
          segmentAABB.upperBound.x = Math.max(p1.x, tX);
          segmentAABB.upperBound.y = Math.max(p1.y, tY);
        }
      } else {
        stack[count++] = node.child1;
        stack[count++] = node.child2;
      }
    }
  };

  b2DynamicTree.prototype.AllocateNode = function() {
    var node;
    if (this.m_freeList) {
      node = this.m_freeList;
      this.m_freeList = node.parent;
      node.parent = null;
      node.child1 = null;
      node.child2 = null;
      return node;
    }
    return new b2DynamicTreeNode();
  };

  b2DynamicTree.prototype.FreeNode = function(node) {
    node.parent = this.m_freeList;
    this.m_freeList = node;
  };

  b2DynamicTree.prototype.InsertLeaf = function(leaf) {
    var center, child1, child2, node1, node2, norm1, norm2, sibling;
    ++this.m_insertionCount;
    if (this.m_root == null) {
      this.m_root = leaf;
      this.m_root.parent = null;
      return;
    }
    center = leaf.aabb.GetCenter();
    sibling = this.m_root;
    if (sibling.IsLeaf() === false) {
      while (true) {
        child1 = sibling.child1;
        child2 = sibling.child2;
        norm1 = Math.abs((child1.aabb.lowerBound.x + child1.aabb.upperBound.x) / 2 - center.x) + Math.abs((child1.aabb.lowerBound.y + child1.aabb.upperBound.y) / 2 - center.y);
        norm2 = Math.abs((child2.aabb.lowerBound.x + child2.aabb.upperBound.x) / 2 - center.x) + Math.abs((child2.aabb.lowerBound.y + child2.aabb.upperBound.y) / 2 - center.y);
        if (norm1 < norm2) {
          sibling = child1;
        } else {
          sibling = child2;
        }
        if (sibling.IsLeaf() !== false) {
          break;
        }
      }
    }
    node1 = sibling.parent;
    node2 = this.AllocateNode();
    node2.parent = node1;
    node2.userData = null;
    node2.aabb.Combine(leaf.aabb, sibling.aabb);
    if (node1) {
      if (sibling.parent.child1 === sibling) {
        node1.child1 = node2;
      } else {
        node1.child2 = node2;
      }
      node2.child1 = sibling;
      node2.child2 = leaf;
      sibling.parent = node2;
      leaf.parent = node2;
      while (true) {
        if (node1.aabb.Contains(node2.aabb)) {
          break;
        }
        node1.aabb.Combine(node1.child1.aabb, node1.child2.aabb);
        node2 = node1;
        node1 = node1.parent;
        if (!node1) {
          break;
        }
      }
    } else {
      node2.child1 = sibling;
      node2.child2 = leaf;
      sibling.parent = node2;
      leaf.parent = node2;
      this.m_root = node2;
    }
  };

  b2DynamicTree.prototype.RemoveLeaf = function(leaf) {
    var node1, node2, oldAABB, sibling;
    if (leaf === this.m_root) {
      this.m_root = null;
      return;
    }
    node2 = leaf.parent;
    node1 = node2.parent;
    sibling = void 0;
    if (node2.child1 === leaf) {
      sibling = node2.child2;
    } else {
      sibling = node2.child1;
    }
    if (node1) {
      if (node1.child1 === node2) {
        node1.child1 = sibling;
      } else {
        node1.child2 = sibling;
      }
      sibling.parent = node1;
      this.FreeNode(node2);
      while (node1) {
        oldAABB = node1.aabb;
        node1.aabb = b2AABB.Combine(node1.child1.aabb, node1.child2.aabb);
        if (oldAABB.Contains(node1.aabb)) {
          break;
        }
        node1 = node1.parent;
      }
    } else {
      this.m_root = sibling;
      sibling.parent = null;
      this.FreeNode(node2);
    }
  };

  return b2DynamicTree;

})();

//# sourceMappingURL=b2DynamicTree.js.map

},{"../index":103}],14:[function(require,module,exports){
var Box2D, Vector, b2DynamicTree;

Box2D = require('../index');

Vector = Box2D.Vector;

b2DynamicTree = Box2D.Collision.b2DynamicTree;

Box2D.Collision.b2DynamicTreeBroadPhase = (function() {
  b2DynamicTreeBroadPhase.prototype.m_tree = null;

  b2DynamicTreeBroadPhase.prototype.m_moveBuffer = null;

  b2DynamicTreeBroadPhase.prototype.m_pairBuffer = null;

  b2DynamicTreeBroadPhase.prototype.m_pairCount = 0;

  b2DynamicTreeBroadPhase.m_proxyCount = 0;

  function b2DynamicTreeBroadPhase() {
    this.m_tree = new b2DynamicTree();
    this.m_moveBuffer = new Vector();
    this.m_pairBuffer = new Vector();
    return;
  }

  b2DynamicTreeBroadPhase.prototype.CreateProxy = function(aabb, userData) {
    var proxy;
    proxy = this.m_tree.CreateProxy(aabb, userData);
    ++this.m_proxyCount;
    this.BufferMove(proxy);
    return proxy;
  };

  b2DynamicTreeBroadPhase.prototype.DestroyProxy = function(proxy) {
    this.UnBufferMove(proxy);
    --this.m_proxyCount;
    this.m_tree.DestroyProxy(proxy);
  };

  b2DynamicTreeBroadPhase.prototype.MoveProxy = function(proxy, aabb, displacement) {
    var buffer;
    buffer = this.m_tree.MoveProxy(proxy, aabb, displacement);
    if (buffer) {
      this.BufferMove(proxy);
    }
  };

  b2DynamicTreeBroadPhase.prototype.TestOverlap = function(proxyA, proxyB) {
    var aabbA, aabbB;
    aabbA = this.m_tree.GetFatAABB(proxyA);
    aabbB = this.m_tree.GetFatAABB(proxyB);
    return aabbA.TestOverlap(aabbB);
  };

  b2DynamicTreeBroadPhase.prototype.GetUserData = function(proxy) {
    return this.m_tree.GetUserData(proxy);
  };

  b2DynamicTreeBroadPhase.prototype.GetFatAABB = function(proxy) {
    return this.m_tree.GetFatAABB(proxy);
  };

  b2DynamicTreeBroadPhase.prototype.GetProxyCount = function() {
    return this.m_proxyCount;
  };

  b2DynamicTreeBroadPhase.prototype.UpdatePairs = function(callback) {
    var QueryCallback, fatAABB, i, pair, primaryPair, queryProxy, userDataA, userDataB, __this;
    __this = this;
    __this.m_pairCount = 0;
    i = 0;
    queryProxy = void 0;
    i = 0;
    while (i < __this.m_moveBuffer.length) {
      QueryCallback = function(proxy) {
        var pair;
        if (proxy === queryProxy) {
          return true;
        }
        if (__this.m_pairCount === __this.m_pairBuffer.length) {
          __this.m_pairBuffer[__this.m_pairCount] = new b2DynamicTreePair();
        }
        pair = __this.m_pairBuffer[__this.m_pairCount];
        pair.proxyA = (proxy < queryProxy ? proxy : queryProxy);
        pair.proxyB = (proxy >= queryProxy ? proxy : queryProxy);
        ++__this.m_pairCount;
        return true;
      };
      queryProxy = __this.m_moveBuffer[i];
      fatAABB = __this.m_tree.GetFatAABB(queryProxy);
      __this.m_tree.Query(QueryCallback, fatAABB);
      ++i;
    }
    __this.m_moveBuffer.length = 0;
    i = 0;
    while (i < __this.m_pairCount) {
      primaryPair = __this.m_pairBuffer[i];
      userDataA = __this.m_tree.GetUserData(primaryPair.proxyA);
      userDataB = __this.m_tree.GetUserData(primaryPair.proxyB);
      callback(userDataA, userDataB);
      ++i;
      while (i < __this.m_pairCount) {
        pair = __this.m_pairBuffer[i];
        if (pair.proxyA !== primaryPair.proxyA || pair.proxyB !== primaryPair.proxyB) {
          break;
        }
        ++i;
      }
    }
  };

  b2DynamicTreeBroadPhase.prototype.Query = function(callback, aabb) {
    this.m_tree.Query(callback, aabb);
  };

  b2DynamicTreeBroadPhase.prototype.RayCast = function(callback, input) {
    this.m_tree.RayCast(callback, input);
  };

  b2DynamicTreeBroadPhase.prototype.Validate = function() {};

  b2DynamicTreeBroadPhase.prototype.Rebalance = function(iterations) {
    if (iterations === void 0) {
      iterations = 0;
    }
    this.m_tree.Rebalance(iterations);
  };

  b2DynamicTreeBroadPhase.prototype.BufferMove = function(proxy) {
    this.m_moveBuffer[this.m_moveBuffer.length] = proxy;
  };

  b2DynamicTreeBroadPhase.prototype.UnBufferMove = function(proxy) {
    var i;
    i = parseInt(this.m_moveBuffer.indexOf(proxy));
    this.m_moveBuffer.splice(i, 1);
  };

  b2DynamicTreeBroadPhase.prototype.ComparePairs = function(pair1, pair2) {
    return 0;
  };

  b2DynamicTreeBroadPhase.__implements = {
    IBroadPhase: true
  };

  return b2DynamicTreeBroadPhase;

})();

//# sourceMappingURL=b2DynamicTreeBroadPhase.js.map

},{"../index":103}],15:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2DynamicTreeNode = (function() {
  b2DynamicTreeNode.prototype.aabb = null;

  b2DynamicTreeNode.prototype.child1 = null;

  function b2DynamicTreeNode() {
    this.aabb = new b2AABB();
    return;
  }

  b2DynamicTreeNode.prototype.IsLeaf = function() {
    return this.child1 == null;
  };

  return b2DynamicTreeNode;

})();

//# sourceMappingURL=b2DynamicTreeNode.js.map

},{"../index":103}],16:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2DynamicTreePair = (function() {
  function b2DynamicTreePair() {}

  return b2DynamicTreePair;

})();

//# sourceMappingURL=b2DynamicTreePair.js.map

},{"../index":103}],17:[function(require,module,exports){
var Box2D, Vector, b2Settings, b2Vec2;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2Manifold = (function() {
  b2Manifold.e_circles = 0x0001;

  b2Manifold.e_faceA = 0x0002;

  b2Manifold.e_faceB = 0x0004;

  b2Manifold.prototype.m_type = 0;

  b2Manifold.prototype.m_pointCount = 0;

  b2Manifold.prototype.m_points = null;

  b2Manifold.prototype.m_localPlaneNormal = null;

  b2Manifold.prototype.m_localPoint = null;

  function b2Manifold() {
    var i;
    this.m_pointCount = 0;
    this.m_points = new Vector(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.m_points[i] = new b2ManifoldPoint();
      i++;
    }
    this.m_localPlaneNormal = new b2Vec2();
    this.m_localPoint = new b2Vec2();
    return;
  }

  b2Manifold.prototype.Reset = function() {
    var i;
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      (this.m_points[i] instanceof b2ManifoldPoint ? this.m_points[i] : null).Reset();
      i++;
    }
    this.m_localPlaneNormal.SetZero();
    this.m_localPoint.SetZero();
    this.m_type = 0;
    this.m_pointCount = 0;
  };

  b2Manifold.prototype.Set = function(m) {
    var i;
    this.m_pointCount = m.m_pointCount;
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      (this.m_points[i] instanceof b2ManifoldPoint ? this.m_points[i] : null).Set(m.m_points[i]);
      i++;
    }
    this.m_localPlaneNormal.SetV(m.m_localPlaneNormal);
    this.m_localPoint.SetV(m.m_localPoint);
    this.m_type = m.m_type;
  };

  b2Manifold.prototype.Copy = function() {
    var copy;
    copy = new b2Manifold();
    copy.Set(this);
    return copy;
  };

  return b2Manifold;

})();

//# sourceMappingURL=b2Manifold.js.map

},{"../index":103}],18:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2ContactID = Box2D.Collision.b2ContactID;

Box2D.Collision.b2ManifoldPoint = (function() {
  b2ManifoldPoint.prototype.m_localPoint = null;

  b2ManifoldPoint.prototype.m_id = null;

  b2ManifoldPoint.prototype.m_localPoint = null;

  b2ManifoldPoint.prototype.m_normalImpulse = 0.0;

  b2ManifoldPoint.prototype.m_tangentImpulse = 0.0;

  function b2ManifoldPoint() {
    this.m_localPoint = new b2Vec2();
    this.m_id = new b2ContactID();
    this.Reset();
    return;
  }

  b2ManifoldPoint.prototype.Reset = function() {
    this.m_localPoint.SetZero();
    this.m_normalImpulse = 0.0;
    this.m_tangentImpulse = 0.0;
    this.m_id.key = 0;
  };

  b2ManifoldPoint.prototype.Set = function(m) {
    this.m_localPoint.SetV(m.m_localPoint);
    this.m_normalImpulse = m.m_normalImpulse;
    this.m_tangentImpulse = m.m_tangentImpulse;
    this.m_id.Set(m.m_id);
  };

  return b2ManifoldPoint;

})();

//# sourceMappingURL=b2ManifoldPoint.js.map

},{"../index":103}],19:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2Point = (function() {
  b2Point.prototype.p = null;

  function b2Point() {
    this.p = new b2Vec2();
    return;
  }

  b2Point.prototype.Support = function(xf, vX, vY) {
    if (vX === void 0) {
      vX = 0;
    }
    if (vY === void 0) {
      vY = 0;
    }
    return this.p;
  };

  b2Point.prototype.GetFirstVertex = function(xf) {
    return this.p;
  };

  return b2Point;

})();

//# sourceMappingURL=b2Point.js.map

},{"../index":103}],20:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2RayCastInput = (function() {
  b2RayCastInput.prototype.p1 = null;

  b2RayCastInput.prototype.p2 = null;

  b2RayCastInput.prototype.maxFraction = 1;

  function b2RayCastInput(p1, p2, maxFraction) {
    this.p1 = new b2Vec2();
    this.p2 = new b2Vec2();
    if (p1 === void 0) {
      p1 = null;
    }
    if (p2 === void 0) {
      p2 = null;
    }
    if (maxFraction === void 0) {
      maxFraction = 1;
    }
    if (p1) {
      this.p1.SetV(p1);
    }
    if (p2) {
      this.p2.SetV(p2);
    }
    this.maxFraction = maxFraction;
    return;
  }

  return b2RayCastInput;

})();

//# sourceMappingURL=b2RayCastInput.js.map

},{"../index":103}],21:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2RayCastOutput = (function() {
  b2RayCastOutput.prototype.normal = null;

  function b2RayCastOutput() {
    this.normal = new b2Vec2();
    return;
  }

  return b2RayCastOutput;

})();

//# sourceMappingURL=b2RayCastOutput.js.map

},{"../index":103}],22:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2Segment = (function() {
  b2Segment.prototype.p1 = null;

  b2Segment.prototype.p2 = null;

  function b2Segment() {
    this.p1 = new b2Vec2();
    this.p2 = new b2Vec2();
    return;
  }

  b2Segment.prototype.TestSegment = function(lambda, normal, segment, maxLambda) {
    var a, bX, bY, dX, dY, denom, k_slop, mu2, nLen, nX, nY, rX, rY, s;
    if (maxLambda === void 0) {
      maxLambda = 0;
    }
    s = segment.p1;
    rX = segment.p2.x - s.x;
    rY = segment.p2.y - s.y;
    dX = this.p2.x - this.p1.x;
    dY = this.p2.y - this.p1.y;
    nX = dY;
    nY = -dX;
    k_slop = 100.0 * Number.MIN_VALUE;
    denom = -(rX * nX + rY * nY);
    if (denom > k_slop) {
      bX = s.x - this.p1.x;
      bY = s.y - this.p1.y;
      a = bX * nX + bY * nY;
      if (0.0 <= a && a <= maxLambda * denom) {
        mu2 = (-rX * bY) + rY * bX;
        if ((-k_slop * denom) <= mu2 && mu2 <= denom * (1.0 + k_slop)) {
          a /= denom;
          nLen = Math.sqrt(nX * nX + nY * nY);
          nX /= nLen;
          nY /= nLen;
          lambda[0] = a;
          normal.Set(nX, nY);
          return true;
        }
      }
    }
    return false;
  };

  b2Segment.prototype.Extend = function(aabb) {
    this.ExtendForward(aabb);
    this.ExtendBackward(aabb);
  };

  b2Segment.prototype.ExtendForward = function(aabb) {
    var dX, dY, lambda;
    dX = this.p2.x - this.p1.x;
    dY = this.p2.y - this.p1.y;
    lambda = Math.min((dX > 0 ? (aabb.upperBound.x - this.p1.x) / dX : (dX < 0 ? (aabb.lowerBound.x - this.p1.x) / dX : Number.POSITIVE_INFINITY)), (dY > 0 ? (aabb.upperBound.y - this.p1.y) / dY : (dY < 0 ? (aabb.lowerBound.y - this.p1.y) / dY : Number.POSITIVE_INFINITY)));
    this.p2.x = this.p1.x + dX * lambda;
    this.p2.y = this.p1.y + dY * lambda;
  };

  b2Segment.prototype.ExtendBackward = function(aabb) {
    var dX, dY, lambda;
    dX = (-this.p2.x) + this.p1.x;
    dY = (-this.p2.y) + this.p1.y;
    lambda = Math.min((dX > 0 ? (aabb.upperBound.x - this.p2.x) / dX : (dX < 0 ? (aabb.lowerBound.x - this.p2.x) / dX : Number.POSITIVE_INFINITY)), (dY > 0 ? (aabb.upperBound.y - this.p2.y) / dY : (dY < 0 ? (aabb.lowerBound.y - this.p2.y) / dY : Number.POSITIVE_INFINITY)));
    this.p1.x = this.p2.x + dX * lambda;
    this.p1.y = this.p2.y + dY * lambda;
  };

  return b2Segment;

})();

//# sourceMappingURL=b2Segment.js.map

},{"../index":103}],23:[function(require,module,exports){
var Box2D, b2Math, b2Settings, b2Vec2;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2SeparationFunction = (function() {
  b2SeparationFunction.prototype.m_localPoint = null;

  b2SeparationFunction.prototype.m_axis = null;

  b2SeparationFunction.prototype.m_proxyA = null;

  b2SeparationFunction.prototype.m_proxyB = null;

  function b2SeparationFunction() {
    this.m_localPoint = new b2Vec2();
    this.m_axis = new b2Vec2();
    return;
  }

  b2SeparationFunction.prototype.Initialize = function(cache, proxyA, transformA, proxyB, transformB) {
    var a, b, c, count, dA, dB, denom, e, f, localPointA, localPointA1, localPointA2, localPointB, localPointB1, localPointB2, normalX, normalY, pA, pB, pointAX, pointAY, pointBX, pointBY, r, s, sgn, t, tMat, tVec;
    this.m_proxyA = proxyA;
    this.m_proxyB = proxyB;
    count = parseInt(cache.count);
    b2Settings.b2Assert(0 < count && count < 3);
    localPointA = void 0;
    localPointA1 = void 0;
    localPointA2 = void 0;
    localPointB = void 0;
    localPointB1 = void 0;
    localPointB2 = void 0;
    pointAX = 0;
    pointAY = 0;
    pointBX = 0;
    pointBY = 0;
    normalX = 0;
    normalY = 0;
    tMat = void 0;
    tVec = void 0;
    s = 0;
    sgn = 0;
    if (count === 1) {
      this.m_type = b2SeparationFunction.e_points;
      localPointA = this.m_proxyA.GetVertex(cache.indexA[0]);
      localPointB = this.m_proxyB.GetVertex(cache.indexB[0]);
      tVec = localPointA;
      tMat = transformA.R;
      pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      tVec = localPointB;
      tMat = transformB.R;
      pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      this.m_axis.x = pointBX - pointAX;
      this.m_axis.y = pointBY - pointAY;
      this.m_axis.Normalize();
    } else if (cache.indexB[0] === cache.indexB[1]) {
      this.m_type = b2SeparationFunction.e_faceA;
      localPointA1 = this.m_proxyA.GetVertex(cache.indexA[0]);
      localPointA2 = this.m_proxyA.GetVertex(cache.indexA[1]);
      localPointB = this.m_proxyB.GetVertex(cache.indexB[0]);
      this.m_localPoint.x = 0.5 * (localPointA1.x + localPointA2.x);
      this.m_localPoint.y = 0.5 * (localPointA1.y + localPointA2.y);
      this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointA2, localPointA1), 1.0);
      this.m_axis.Normalize();
      tVec = this.m_axis;
      tMat = transformA.R;
      normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tVec = this.m_localPoint;
      tMat = transformA.R;
      pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      tVec = localPointB;
      tMat = transformB.R;
      pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      s = (pointBX - pointAX) * normalX + (pointBY - pointAY) * normalY;
      if (s < 0.0) {
        this.m_axis.NegativeSelf();
      }
    } else if (cache.indexA[0] === cache.indexA[0]) {
      this.m_type = b2SeparationFunction.e_faceB;
      localPointB1 = this.m_proxyB.GetVertex(cache.indexB[0]);
      localPointB2 = this.m_proxyB.GetVertex(cache.indexB[1]);
      localPointA = this.m_proxyA.GetVertex(cache.indexA[0]);
      this.m_localPoint.x = 0.5 * (localPointB1.x + localPointB2.x);
      this.m_localPoint.y = 0.5 * (localPointB1.y + localPointB2.y);
      this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointB2, localPointB1), 1.0);
      this.m_axis.Normalize();
      tVec = this.m_axis;
      tMat = transformB.R;
      normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tVec = this.m_localPoint;
      tMat = transformB.R;
      pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      tVec = localPointA;
      tMat = transformA.R;
      pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      s = (pointAX - pointBX) * normalX + (pointAY - pointBY) * normalY;
      if (s < 0.0) {
        this.m_axis.NegativeSelf();
      }
    } else {
      localPointA1 = this.m_proxyA.GetVertex(cache.indexA[0]);
      localPointA2 = this.m_proxyA.GetVertex(cache.indexA[1]);
      localPointB1 = this.m_proxyB.GetVertex(cache.indexB[0]);
      localPointB2 = this.m_proxyB.GetVertex(cache.indexB[1]);
      pA = b2Math.MulX(transformA, localPointA);
      dA = b2Math.MulMV(transformA.R, b2Math.SubtractVV(localPointA2, localPointA1));
      pB = b2Math.MulX(transformB, localPointB);
      dB = b2Math.MulMV(transformB.R, b2Math.SubtractVV(localPointB2, localPointB1));
      a = dA.x * dA.x + dA.y * dA.y;
      e = dB.x * dB.x + dB.y * dB.y;
      r = b2Math.SubtractVV(dB, dA);
      c = dA.x * r.x + dA.y * r.y;
      f = dB.x * r.x + dB.y * r.y;
      b = dA.x * dB.x + dA.y * dB.y;
      denom = a * e - b * b;
      s = 0.0;
      if (denom !== 0.0) {
        s = b2Math.Clamp((b * f - c * e) / denom, 0.0, 1.0);
      }
      t = (b * s + f) / e;
      if (t < 0.0) {
        t = 0.0;
        s = b2Math.Clamp((b - c) / a, 0.0, 1.0);
      }
      localPointA = new b2Vec2();
      localPointA.x = localPointA1.x + s * (localPointA2.x - localPointA1.x);
      localPointA.y = localPointA1.y + s * (localPointA2.y - localPointA1.y);
      localPointB = new b2Vec2();
      localPointB.x = localPointB1.x + s * (localPointB2.x - localPointB1.x);
      localPointB.y = localPointB1.y + s * (localPointB2.y - localPointB1.y);
      if (s === 0.0 || s === 1.0) {
        this.m_type = b2SeparationFunction.e_faceB;
        this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointB2, localPointB1), 1.0);
        this.m_axis.Normalize();
        this.m_localPoint = localPointB;
        tVec = this.m_axis;
        tMat = transformB.R;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tVec = this.m_localPoint;
        tMat = transformB.R;
        pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tVec = localPointA;
        tMat = transformA.R;
        pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        sgn = (pointAX - pointBX) * normalX + (pointAY - pointBY) * normalY;
        if (s < 0.0) {
          this.m_axis.NegativeSelf();
        }
      } else {
        this.m_type = b2SeparationFunction.e_faceA;
        this.m_axis = b2Math.CrossVF(b2Math.SubtractVV(localPointA2, localPointA1), 1.0);
        this.m_localPoint = localPointA;
        tVec = this.m_axis;
        tMat = transformA.R;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tVec = this.m_localPoint;
        tMat = transformA.R;
        pointAX = transformA.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointAY = transformA.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tVec = localPointB;
        tMat = transformB.R;
        pointBX = transformB.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointBY = transformB.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        sgn = (pointBX - pointAX) * normalX + (pointBY - pointAY) * normalY;
        if (s < 0.0) {
          this.m_axis.NegativeSelf();
        }
      }
    }
  };

  b2SeparationFunction.prototype.Evaluate = function(transformA, transformB) {
    var axisA, axisB, localPointA, localPointB, normal, pointA, pointB, seperation;
    axisA = void 0;
    axisB = void 0;
    localPointA = void 0;
    localPointB = void 0;
    pointA = void 0;
    pointB = void 0;
    seperation = 0;
    normal = void 0;
    switch (this.m_type) {
      case b2SeparationFunction.e_points:
        axisA = b2Math.MulTMV(transformA.R, this.m_axis);
        axisB = b2Math.MulTMV(transformB.R, this.m_axis.GetNegative());
        localPointA = this.m_proxyA.GetSupportVertex(axisA);
        localPointB = this.m_proxyB.GetSupportVertex(axisB);
        pointA = b2Math.MulX(transformA, localPointA);
        pointB = b2Math.MulX(transformB, localPointB);
        seperation = (pointB.x - pointA.x) * this.m_axis.x + (pointB.y - pointA.y) * this.m_axis.y;
        return seperation;
      case b2SeparationFunction.e_faceA:
        normal = b2Math.MulMV(transformA.R, this.m_axis);
        pointA = b2Math.MulX(transformA, this.m_localPoint);
        axisB = b2Math.MulTMV(transformB.R, normal.GetNegative());
        localPointB = this.m_proxyB.GetSupportVertex(axisB);
        pointB = b2Math.MulX(transformB, localPointB);
        seperation = (pointB.x - pointA.x) * normal.x + (pointB.y - pointA.y) * normal.y;
        return seperation;
      case b2SeparationFunction.e_faceB:
        normal = b2Math.MulMV(transformB.R, this.m_axis);
        pointB = b2Math.MulX(transformB, this.m_localPoint);
        axisA = b2Math.MulTMV(transformA.R, normal.GetNegative());
        localPointA = this.m_proxyA.GetSupportVertex(axisA);
        pointA = b2Math.MulX(transformA, localPointA);
        seperation = (pointA.x - pointB.x) * normal.x + (pointA.y - pointB.y) * normal.y;
        return seperation;
      default:
        b2Settings.b2Assert(false);
        return 0.0;
    }
  };

  b2SeparationFunction.e_points = 0x01;

  b2SeparationFunction.e_faceA = 0x02;

  b2SeparationFunction.e_faceB = 0x04;

  return b2SeparationFunction;

})();

//# sourceMappingURL=b2SeparationFunction.js.map

},{"../index":103}],24:[function(require,module,exports){
var Box2D, Vector, b2Math, b2Settings, b2SimplexVertex, b2Vec2;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2SimplexVertex = Box2D.Collision.b2SimplexVertex;

Box2D.Collision.b2Simplex = (function() {
  b2Simplex.prototype.m_v1 = null;

  b2Simplex.prototype.m_v2 = null;

  b2Simplex.prototype.m_v3 = null;

  b2Simplex.prototype.m_vertices = null;

  b2Simplex.prototype.m_count = 0;

  function b2Simplex() {
    this.m_v1 = new b2SimplexVertex();
    this.m_v2 = new b2SimplexVertex();
    this.m_v3 = new b2SimplexVertex();
    this.m_vertices = new Vector(3);
    this.m_vertices[0] = this.m_v1;
    this.m_vertices[1] = this.m_v2;
    this.m_vertices[2] = this.m_v3;
    return;
  }

  b2Simplex.prototype.ReadCache = function(cache, proxyA, transformA, proxyB, transformB) {
    var i, metric1, metric2, v, vertices, wALocal, wBLocal;
    b2Settings.b2Assert(0 <= cache.count && cache.count <= 3);
    wALocal = void 0;
    wBLocal = void 0;
    this.m_count = cache.count;
    vertices = this.m_vertices;
    i = 0;
    while (i < this.m_count) {
      v = vertices[i];
      v.indexA = cache.indexA[i];
      v.indexB = cache.indexB[i];
      wALocal = proxyA.GetVertex(v.indexA);
      wBLocal = proxyB.GetVertex(v.indexB);
      v.wA = b2Math.MulX(transformA, wALocal);
      v.wB = b2Math.MulX(transformB, wBLocal);
      v.w = b2Math.SubtractVV(v.wB, v.wA);
      v.a = 0;
      i++;
    }
    if (this.m_count > 1) {
      metric1 = cache.metric;
      metric2 = this.GetMetric();
      if (metric2 < .5 * metric1 || 2.0 * metric1 < metric2 || metric2 < Number.MIN_VALUE) {
        this.m_count = 0;
      }
    }
    if (this.m_count === 0) {
      v = vertices[0];
      v.indexA = 0;
      v.indexB = 0;
      wALocal = proxyA.GetVertex(0);
      wBLocal = proxyB.GetVertex(0);
      v.wA = b2Math.MulX(transformA, wALocal);
      v.wB = b2Math.MulX(transformB, wBLocal);
      v.w = b2Math.SubtractVV(v.wB, v.wA);
      this.m_count = 1;
    }
  };

  b2Simplex.prototype.WriteCache = function(cache) {
    var i, vertices;
    cache.metric = this.GetMetric();
    cache.count = Box2D.parseUInt(this.m_count);
    vertices = this.m_vertices;
    i = 0;
    while (i < this.m_count) {
      cache.indexA[i] = Box2D.parseUInt(vertices[i].indexA);
      cache.indexB[i] = Box2D.parseUInt(vertices[i].indexB);
      i++;
    }
  };

  b2Simplex.prototype.GetSearchDirection = function() {
    var e12, sgn;
    switch (this.m_count) {
      case 1:
        return this.m_v1.w.GetNegative();
      case 2:
        e12 = b2Math.SubtractVV(this.m_v2.w, this.m_v1.w);
        sgn = b2Math.CrossVV(e12, this.m_v1.w.GetNegative());
        if (sgn > 0.0) {
          return b2Math.CrossFV(1.0, e12);
        } else {
          return b2Math.CrossVF(e12, 1.0);
        }
        break;
      default:
        b2Settings.b2Assert(false);
        return new b2Vec2();
    }
  };

  b2Simplex.prototype.GetClosestPoint = function() {
    switch (this.m_count) {
      case 0:
        b2Settings.b2Assert(false);
        return new b2Vec2();
      case 1:
        return this.m_v1.w;
      case 2:
        return new b2Vec2(this.m_v1.a * this.m_v1.w.x + this.m_v2.a * this.m_v2.w.x, this.m_v1.a * this.m_v1.w.y + this.m_v2.a * this.m_v2.w.y);
      default:
        b2Settings.b2Assert(false);
        return new b2Vec2();
    }
  };

  b2Simplex.prototype.GetWitnessPoints = function(pA, pB) {
    switch (this.m_count) {
      case 0:
        return b2Settings.b2Assert(false);
      case 1:
        pA.SetV(this.m_v1.wA);
        return pB.SetV(this.m_v1.wB);
      case 2:
        pA.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x;
        pA.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y;
        pB.x = this.m_v1.a * this.m_v1.wB.x + this.m_v2.a * this.m_v2.wB.x;
        return pB.y = this.m_v1.a * this.m_v1.wB.y + this.m_v2.a * this.m_v2.wB.y;
      case 3:
        pB.x = pA.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x + this.m_v3.a * this.m_v3.wA.x;
        return pB.y = pA.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y + this.m_v3.a * this.m_v3.wA.y;
      default:
        return b2Settings.b2Assert(false);
    }
  };

  b2Simplex.prototype.GetMetric = function() {
    switch (this.m_count) {
      case 0:
        b2Settings.b2Assert(false);
        return 0.0;
      case 1:
        return 0.0;
      case 2:
        return b2Math.SubtractVV(this.m_v1.w, this.m_v2.w).Length();
      case 3:
        return b2Math.CrossVV(b2Math.SubtractVV(this.m_v2.w, this.m_v1.w), b2Math.SubtractVV(this.m_v3.w, this.m_v1.w));
      default:
        b2Settings.b2Assert(false);
        return 0.0;
    }
  };

  b2Simplex.prototype.Solve2 = function() {
    var d12_1, d12_2, e12, inv_d12, w1, w2;
    w1 = this.m_v1.w;
    w2 = this.m_v2.w;
    e12 = b2Math.SubtractVV(w2, w1);
    d12_2 = -(w1.x * e12.x + w1.y * e12.y);
    if (d12_2 <= 0.0) {
      this.m_v1.a = 1.0;
      this.m_count = 1;
      return;
    }
    d12_1 = w2.x * e12.x + w2.y * e12.y;
    if (d12_1 <= 0.0) {
      this.m_v2.a = 1.0;
      this.m_count = 1;
      this.m_v1.Set(this.m_v2);
      return;
    }
    inv_d12 = 1.0 / (d12_1 + d12_2);
    this.m_v1.a = d12_1 * inv_d12;
    this.m_v2.a = d12_2 * inv_d12;
    this.m_count = 2;
  };

  b2Simplex.prototype.Solve3 = function() {
    var d123_1, d123_2, d123_3, d12_1, d12_2, d13_1, d13_2, d23_1, d23_2, e12, e13, e23, inv_d12, inv_d123, inv_d13, inv_d23, n123, w1, w1e12, w1e13, w2, w2e12, w2e23, w3, w3e13, w3e23;
    w1 = this.m_v1.w;
    w2 = this.m_v2.w;
    w3 = this.m_v3.w;
    e12 = b2Math.SubtractVV(w2, w1);
    w1e12 = b2Math.Dot(w1, e12);
    w2e12 = b2Math.Dot(w2, e12);
    d12_1 = w2e12;
    d12_2 = -w1e12;
    e13 = b2Math.SubtractVV(w3, w1);
    w1e13 = b2Math.Dot(w1, e13);
    w3e13 = b2Math.Dot(w3, e13);
    d13_1 = w3e13;
    d13_2 = -w1e13;
    e23 = b2Math.SubtractVV(w3, w2);
    w2e23 = b2Math.Dot(w2, e23);
    w3e23 = b2Math.Dot(w3, e23);
    d23_1 = w3e23;
    d23_2 = -w2e23;
    n123 = b2Math.CrossVV(e12, e13);
    d123_1 = n123 * b2Math.CrossVV(w2, w3);
    d123_2 = n123 * b2Math.CrossVV(w3, w1);
    d123_3 = n123 * b2Math.CrossVV(w1, w2);
    if (d12_2 <= 0.0 && d13_2 <= 0.0) {
      this.m_v1.a = 1.0;
      this.m_count = 1;
      return;
    }
    if (d12_1 > 0.0 && d12_2 > 0.0 && d123_3 <= 0.0) {
      inv_d12 = 1.0 / (d12_1 + d12_2);
      this.m_v1.a = d12_1 * inv_d12;
      this.m_v2.a = d12_2 * inv_d12;
      this.m_count = 2;
      return;
    }
    if (d13_1 > 0.0 && d13_2 > 0.0 && d123_2 <= 0.0) {
      inv_d13 = 1.0 / (d13_1 + d13_2);
      this.m_v1.a = d13_1 * inv_d13;
      this.m_v3.a = d13_2 * inv_d13;
      this.m_count = 2;
      this.m_v2.Set(this.m_v3);
      return;
    }
    if (d12_1 <= 0.0 && d23_2 <= 0.0) {
      this.m_v2.a = 1.0;
      this.m_count = 1;
      this.m_v1.Set(this.m_v2);
      return;
    }
    if (d13_1 <= 0.0 && d23_1 <= 0.0) {
      this.m_v3.a = 1.0;
      this.m_count = 1;
      this.m_v1.Set(this.m_v3);
      return;
    }
    if (d23_1 > 0.0 && d23_2 > 0.0 && d123_1 <= 0.0) {
      inv_d23 = 1.0 / (d23_1 + d23_2);
      this.m_v2.a = d23_1 * inv_d23;
      this.m_v3.a = d23_2 * inv_d23;
      this.m_count = 2;
      this.m_v1.Set(this.m_v3);
      return;
    }
    inv_d123 = 1.0 / (d123_1 + d123_2 + d123_3);
    this.m_v1.a = d123_1 * inv_d123;
    this.m_v2.a = d123_2 * inv_d123;
    this.m_v3.a = d123_3 * inv_d123;
    this.m_count = 3;
  };

  return b2Simplex;

})();

//# sourceMappingURL=b2Simplex.js.map

},{"../index":103}],25:[function(require,module,exports){
var Box2D, Vector;

Box2D = require('../index');

Vector = Box2D.Vector;

Box2D.Collision.b2SimplexCache = (function() {
  b2SimplexCache.prototype.indexA = null;

  b2SimplexCache.prototype.indexB = null;

  function b2SimplexCache() {
    this.indexA = new Vector(3);
    this.indexB = new Vector(3);
    return;
  }

  return b2SimplexCache;

})();

//# sourceMappingURL=b2SimplexCache.js.map

},{"../index":103}],26:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Collision.b2SimplexVertex = (function() {
  function b2SimplexVertex() {}

  b2SimplexVertex.prototype.indexA = null;

  b2SimplexVertex.prototype.indexB = null;

  b2SimplexVertex.prototype.wA = null;

  b2SimplexVertex.prototype.wB = null;

  b2SimplexVertex.prototype.w = null;

  b2SimplexVertex.prototype.a = null;

  b2SimplexVertex.prototype.Set = function(other) {
    this.wA.SetV(other.wA);
    this.wB.SetV(other.wB);
    this.w.SetV(other.w);
    this.a = other.a;
    this.indexA = other.indexA;
    this.indexB = other.indexB;
  };

  return b2SimplexVertex;

})();

//# sourceMappingURL=b2SimplexVertex.js.map

},{"../index":103}],27:[function(require,module,exports){
var Box2D, b2DistanceProxy, b2Sweep;

Box2D = require('../index');

b2Sweep = Box2D.Common.Math.b2Sweep;

b2DistanceProxy = Box2D.Collision.b2DistanceProxy;

Box2D.Collision.b2TOIInput = (function() {
  b2TOIInput.prototype.proxyA = null;

  b2TOIInput.prototype.proxyB = null;

  b2TOIInput.prototype.sweepA = null;

  b2TOIInput.prototype.sweepB = null;

  function b2TOIInput() {
    this.proxyA = new b2DistanceProxy();
    this.proxyB = new b2DistanceProxy();
    this.sweepA = new b2Sweep();
    this.sweepB = new b2Sweep();
    return;
  }

  return b2TOIInput;

})();

//# sourceMappingURL=b2TOIInput.js.map

},{"../index":103}],28:[function(require,module,exports){
var Box2D, b2Distance, b2DistanceInput, b2DistanceOutput, b2Math, b2SeparationFunction, b2Settings, b2SimplexCache, b2Transform;

Box2D = require('../index');

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Transform = Box2D.Common.Math.b2Transform;

b2Distance = Box2D.Collision.b2Distance;

b2SimplexCache = Box2D.Collision.b2SimplexCache;

b2SeparationFunction = Box2D.Collision.b2SeparationFunction;

b2DistanceOutput = Box2D.Collision.b2DistanceOutput;

b2DistanceInput = Box2D.Collision.b2DistanceInput;

Box2D.Collision.b2TimeOfImpact = (function() {
  function b2TimeOfImpact() {}

  b2TimeOfImpact.b2_toiCalls = 0;

  b2TimeOfImpact.b2_toiIters = 0;

  b2TimeOfImpact.b2_toiMaxIters = 0;

  b2TimeOfImpact.b2_toiRootIters = 0;

  b2TimeOfImpact.b2_toiMaxRootIters = 0;

  b2TimeOfImpact.s_cache = new b2SimplexCache();

  b2TimeOfImpact.s_distanceInput = new b2DistanceInput();

  b2TimeOfImpact.s_xfA = new b2Transform();

  b2TimeOfImpact.s_xfB = new b2Transform();

  b2TimeOfImpact.s_fcn = new b2SeparationFunction();

  b2TimeOfImpact.s_distanceOutput = new b2DistanceOutput();

  b2TimeOfImpact.TimeOfImpact = function(input) {
    var alpha, f, f1, f2, iter, k_maxIterations, newAlpha, proxyA, proxyB, radius, rootIterCount, separation, sweepA, sweepB, target, tolerance, x, x1, x2;
    ++b2TimeOfImpact.b2_toiCalls;
    proxyA = input.proxyA;
    proxyB = input.proxyB;
    sweepA = input.sweepA;
    sweepB = input.sweepB;
    b2Settings.b2Assert(sweepA.t0 === sweepB.t0);
    b2Settings.b2Assert(1.0 - sweepA.t0 > Number.MIN_VALUE);
    radius = proxyA.m_radius + proxyB.m_radius;
    tolerance = input.tolerance;
    alpha = 0.0;
    k_maxIterations = 1000;
    iter = 0;
    target = 0.0;
    b2TimeOfImpact.s_cache.count = 0;
    b2TimeOfImpact.s_distanceInput.useRadii = false;
    while (true) {
      sweepA.GetTransform(b2TimeOfImpact.s_xfA, alpha);
      sweepB.GetTransform(b2TimeOfImpact.s_xfB, alpha);
      b2TimeOfImpact.s_distanceInput.proxyA = proxyA;
      b2TimeOfImpact.s_distanceInput.proxyB = proxyB;
      b2TimeOfImpact.s_distanceInput.transformA = b2TimeOfImpact.s_xfA;
      b2TimeOfImpact.s_distanceInput.transformB = b2TimeOfImpact.s_xfB;
      b2Distance.Distance(b2TimeOfImpact.s_distanceOutput, b2TimeOfImpact.s_cache, b2TimeOfImpact.s_distanceInput);
      if (b2TimeOfImpact.s_distanceOutput.distance <= 0.0) {
        alpha = 1.0;
        break;
      }
      b2TimeOfImpact.s_fcn.Initialize(b2TimeOfImpact.s_cache, proxyA, b2TimeOfImpact.s_xfA, proxyB, b2TimeOfImpact.s_xfB);
      separation = b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA, b2TimeOfImpact.s_xfB);
      if (separation <= 0.0) {
        alpha = 1.0;
        break;
      }
      if (iter === 0) {
        if (separation > radius) {
          target = b2Math.Max(radius - tolerance, 0.75 * radius);
        } else {
          target = b2Math.Max(separation - tolerance, 0.02 * radius);
        }
      }
      if (separation - target < 0.5 * tolerance) {
        if (iter === 0) {
          alpha = 1.0;
          break;
        }
        break;
      }
      newAlpha = alpha;
      x1 = alpha;
      x2 = 1.0;
      f1 = separation;
      sweepA.GetTransform(b2TimeOfImpact.s_xfA, x2);
      sweepB.GetTransform(b2TimeOfImpact.s_xfB, x2);
      f2 = b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA, b2TimeOfImpact.s_xfB);
      if (f2 >= target) {
        alpha = 1.0;
        break;
      }
      rootIterCount = 0;
      while (true) {
        x = 0;
        if (rootIterCount & 1) {
          x = x1 + (target - f1) * (x2 - x1) / (f2 - f1);
        } else {
          x = 0.5 * (x1 + x2);
        }
        sweepA.GetTransform(b2TimeOfImpact.s_xfA, x);
        sweepB.GetTransform(b2TimeOfImpact.s_xfB, x);
        f = b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA, b2TimeOfImpact.s_xfB);
        if (b2Math.Abs(f - target) < 0.025 * tolerance) {
          newAlpha = x;
          break;
        }
        if (f > target) {
          x1 = x;
          f1 = f;
        } else {
          x2 = x;
          f2 = f;
        }
        ++rootIterCount;
        ++b2TimeOfImpact.b2_toiRootIters;
        if (rootIterCount === 50) {
          break;
        }
      }
      b2TimeOfImpact.b2_toiMaxRootIters = b2Math.Max(b2TimeOfImpact.b2_toiMaxRootIters, rootIterCount);
      if (newAlpha < (1.0 + 100.0 * Number.MIN_VALUE) * alpha) {
        break;
      }
      alpha = newAlpha;
      iter++;
      ++b2TimeOfImpact.b2_toiIters;
      if (iter === k_maxIterations) {
        break;
      }
    }
    b2TimeOfImpact.b2_toiMaxIters = b2Math.Max(b2TimeOfImpact.b2_toiMaxIters, iter);
    return alpha;
  };

  return b2TimeOfImpact;

})();

//# sourceMappingURL=b2TimeOfImpact.js.map

},{"../index":103}],29:[function(require,module,exports){
var Box2D, Vector, b2Settings, b2Vec2;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.b2WorldManifold = (function() {
  b2WorldManifold.prototype.m_normal = null;

  b2WorldManifold.prototype.m_points = null;

  function b2WorldManifold() {
    var i;
    this.m_normal = new b2Vec2();
    this.m_points = new Vector(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.m_points[i] = new b2Vec2();
      i++;
    }
    return;
  }

  b2WorldManifold.prototype.Initialize = function(manifold, xfA, radiusA, xfB, radiusB) {
    var cAX, cAY, cBX, cBY, clipPointX, clipPointY, d, d2, dX, dY, i, normalX, normalY, planePointX, planePointY, pointAX, pointAY, pointBX, pointBY, tMat, tVec, _results, _results1;
    if (radiusA === void 0) {
      radiusA = 0;
    }
    if (radiusB === void 0) {
      radiusB = 0;
    }
    if (manifold.m_pointCount === 0) {
      return;
    }
    i = 0;
    tVec = void 0;
    tMat = void 0;
    normalX = 0;
    normalY = 0;
    planePointX = 0;
    planePointY = 0;
    clipPointX = 0;
    clipPointY = 0;
    switch (manifold.m_type) {
      case b2Manifold.e_circles:
        tMat = xfA.R;
        tVec = manifold.m_localPoint;
        pointAX = xfA.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        pointAY = xfA.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = xfB.R;
        tVec = manifold.m_points[0].m_localPoint;
        pointBX = xfB.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        pointBY = xfB.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        dX = pointBX - pointAX;
        dY = pointBY - pointAY;
        d2 = dX * dX + dY * dY;
        if (d2 > Number.MIN_VALUE * Number.MIN_VALUE) {
          d = Math.sqrt(d2);
          this.m_normal.x = dX / d;
          this.m_normal.y = dY / d;
        } else {
          this.m_normal.x = 1;
          this.m_normal.y = 0;
        }
        cAX = pointAX + radiusA * this.m_normal.x;
        cAY = pointAY + radiusA * this.m_normal.y;
        cBX = pointBX - radiusB * this.m_normal.x;
        cBY = pointBY - radiusB * this.m_normal.y;
        this.m_points[0].x = 0.5 * (cAX + cBX);
        return this.m_points[0].y = 0.5 * (cAY + cBY);
      case b2Manifold.e_faceA:
        tMat = xfA.R;
        tVec = manifold.m_localPlaneNormal;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = xfA.R;
        tVec = manifold.m_localPoint;
        planePointX = xfA.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        planePointY = xfA.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        this.m_normal.x = normalX;
        this.m_normal.y = normalY;
        i = 0;
        _results = [];
        while (i < manifold.m_pointCount) {
          tMat = xfB.R;
          tVec = manifold.m_points[i].m_localPoint;
          clipPointX = xfB.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
          clipPointY = xfB.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
          this.m_points[i].x = clipPointX + 0.5 * (radiusA - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusB) * normalX;
          this.m_points[i].y = clipPointY + 0.5 * (radiusA - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusB) * normalY;
          _results.push(i++);
        }
        return _results;
        break;
      case b2Manifold.e_faceB:
        tMat = xfB.R;
        tVec = manifold.m_localPlaneNormal;
        normalX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        normalY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = xfB.R;
        tVec = manifold.m_localPoint;
        planePointX = xfB.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        planePointY = xfB.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        this.m_normal.x = -normalX;
        this.m_normal.y = -normalY;
        i = 0;
        _results1 = [];
        while (i < manifold.m_pointCount) {
          tMat = xfA.R;
          tVec = manifold.m_points[i].m_localPoint;
          clipPointX = xfA.position.x + tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
          clipPointY = xfA.position.y + tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
          this.m_points[i].x = clipPointX + 0.5 * (radiusB - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusA) * normalX;
          this.m_points[i].y = clipPointY + 0.5 * (radiusB - (clipPointX - planePointX) * normalX - (clipPointY - planePointY) * normalY - radiusA) * normalY;
          _results1.push(i++);
        }
        return _results1;
    }
  };

  return b2WorldManifold;

})();

//# sourceMappingURL=b2WorldManifold.js.map

},{"../index":103}],30:[function(require,module,exports){
var Box2D, Vector, b2Math, b2Settings, b2Shape, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Shape = Box2D.Collision.Shapes.b2Shape;

Box2D.Collision.Shapes.b2CircleShape = (function(_super) {
  __extends(b2CircleShape, _super);

  b2CircleShape.prototype.m_type = b2Shape.e_circleShape;

  b2CircleShape.prototype.m_p = null;

  function b2CircleShape(radius) {
    if (radius === void 0) {
      radius = 0;
    }
    b2CircleShape.__super__.constructor.call(this, radius);
    this.m_p = new b2Vec2();
    this.m_type = b2Shape.e_circleShape;
    this.m_radius = radius;
    return;
  }

  b2CircleShape.prototype.Copy = function() {
    var s;
    s = new b2CircleShape();
    s.Set(this);
    return s;
  };

  b2CircleShape.prototype.Set = function(other) {
    var other2;
    b2CircleShape.__super__.Set.call(this, other);
    if (Box2D.equals(other, b2CircleShape)) {
      other2 = (other instanceof b2CircleShape ? other : null);
      this.m_p.SetV(other2.m_p);
    }
  };

  b2CircleShape.prototype.TestPoint = function(transform, p) {
    var dX, dY, tMat;
    tMat = transform.R;
    dX = transform.position.x + (tMat.col1.x * this.m_p.x + tMat.col2.x * this.m_p.y);
    dY = transform.position.y + (tMat.col1.y * this.m_p.x + tMat.col2.y * this.m_p.y);
    dX = p.x - dX;
    dY = p.y - dY;
    return (dX * dX + dY * dY) <= this.m_radius * this.m_radius;
  };

  b2CircleShape.prototype.RayCast = function(output, input, transform) {
    var a, b, c, positionX, positionY, rX, rY, rr, sX, sY, sigma, tMat;
    tMat = transform.R;
    positionX = transform.position.x + (tMat.col1.x * this.m_p.x + tMat.col2.x * this.m_p.y);
    positionY = transform.position.y + (tMat.col1.y * this.m_p.x + tMat.col2.y * this.m_p.y);
    sX = input.p1.x - positionX;
    sY = input.p1.y - positionY;
    b = (sX * sX + sY * sY) - this.m_radius * this.m_radius;
    rX = input.p2.x - input.p1.x;
    rY = input.p2.y - input.p1.y;
    c = sX * rX + sY * rY;
    rr = rX * rX + rY * rY;
    sigma = c * c - rr * b;
    if (sigma < 0.0 || rr < Number.MIN_VALUE) {
      return false;
    }
    a = -(c + Math.sqrt(sigma));
    if (0.0 <= a && a <= input.maxFraction * rr) {
      a /= rr;
      output.fraction = a;
      output.normal.x = sX + a * rX;
      output.normal.y = sY + a * rY;
      output.normal.Normalize();
      return true;
    }
    return false;
  };

  b2CircleShape.prototype.ComputeAABB = function(aabb, transform) {
    var pX, pY, tMat;
    tMat = transform.R;
    pX = transform.position.x + (tMat.col1.x * this.m_p.x + tMat.col2.x * this.m_p.y);
    pY = transform.position.y + (tMat.col1.y * this.m_p.x + tMat.col2.y * this.m_p.y);
    aabb.lowerBound.Set(pX - this.m_radius, pY - this.m_radius);
    aabb.upperBound.Set(pX + this.m_radius, pY + this.m_radius);
  };

  b2CircleShape.prototype.ComputeMass = function(massData, density) {
    if (density === void 0) {
      density = 0;
    }
    massData.mass = density * b2Settings.b2_pi * this.m_radius * this.m_radius;
    massData.center.SetV(this.m_p);
    massData.I = massData.mass * (0.5 * this.m_radius * this.m_radius + (this.m_p.x * this.m_p.x + this.m_p.y * this.m_p.y));
  };

  b2CircleShape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    var area, com, l, l2, p, r2;
    if (offset === void 0) {
      offset = 0;
    }
    p = b2Math.MulX(xf, this.m_p);
    l = -(b2Math.Dot(normal, p) - offset);
    if (l < (-this.m_radius) + Number.MIN_VALUE) {
      return 0;
    }
    if (l > this.m_radius) {
      c.SetV(p);
      return Math.PI * this.m_radius * this.m_radius;
    }
    r2 = this.m_radius * this.m_radius;
    l2 = l * l;
    area = r2 * (Math.asin(l / this.m_radius) + Math.PI / 2) + l * Math.sqrt(r2 - l2);
    com = -2 / 3 * Math.pow(r2 - l2, 1.5) / area;
    c.x = p.x + normal.x * com;
    c.y = p.y + normal.y * com;
    return area;
  };

  b2CircleShape.prototype.GetLocalPosition = function() {
    return this.m_p;
  };

  b2CircleShape.prototype.SetLocalPosition = function(position) {
    this.m_p.SetV(position);
  };

  b2CircleShape.prototype.GetRadius = function() {
    return this.m_radius;
  };

  b2CircleShape.prototype.SetRadius = function(radius) {
    if (radius === void 0) {
      radius = 0;
    }
    this.m_radius = radius;
  };

  return b2CircleShape;

})(b2Shape);

//# sourceMappingURL=b2CircleShape.js.map

},{"../../index":103}],31:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Collision.Shapes.b2EdgeChainDef = (function() {
  b2EdgeChainDef.prototype.vertexCount = 0;

  b2EdgeChainDef.prototype.isALoop = true;

  b2EdgeChainDef.prototype.vertices = null;

  function b2EdgeChainDef() {
    this.vertices = [];
    return;
  }

  return b2EdgeChainDef;

})();

//# sourceMappingURL=b2EdgeChainDef.js.map

},{"../../index":103}],32:[function(require,module,exports){
var Box2D, b2Shape,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Shape = Box2D.Collision.Shapes.b2Shape;

Box2D.Collision.Shapes.b2EdgeShape = (function(_super) {
  __extends(b2EdgeShape, _super);

  function b2EdgeShape() {
    b2EdgeShape.__super__.constructor.apply(this, arguments);
    this.s_supportVec = new b2Vec2();
    this.m_v1 = new b2Vec2();
    this.m_v2 = new b2Vec2();
    this.m_coreV1 = new b2Vec2();
    this.m_coreV2 = new b2Vec2();
    this.m_normal = new b2Vec2();
    this.m_direction = new b2Vec2();
    this.m_cornerDir1 = new b2Vec2();
    this.m_cornerDir2 = new b2Vec2();
    this.m_type = b2Shape.e_edgeShape;
    this.m_prevEdge = null;
    this.m_nextEdge = null;
    this.m_v1 = v1;
    this.m_v2 = v2;
    this.m_direction.Set(this.m_v2.x - this.m_v1.x, this.m_v2.y - this.m_v1.y);
    this.m_length = this.m_direction.Normalize();
    this.m_normal.Set(this.m_direction.y, -this.m_direction.x);
    this.m_coreV1.Set((-b2Settings.b2_toiSlop * (this.m_normal.x - this.m_direction.x)) + this.m_v1.x, (-b2Settings.b2_toiSlop * (this.m_normal.y - this.m_direction.y)) + this.m_v1.y);
    this.m_coreV2.Set((-b2Settings.b2_toiSlop * (this.m_normal.x + this.m_direction.x)) + this.m_v2.x, (-b2Settings.b2_toiSlop * (this.m_normal.y + this.m_direction.y)) + this.m_v2.y);
    this.m_cornerDir1 = this.m_normal;
    this.m_cornerDir2.Set(-this.m_normal.x, -this.m_normal.y);
    return;
  }

  b2EdgeShape.prototype.TestPoint = function(transform, p) {
    return false;
  };

  b2EdgeShape.prototype.RayCast = function(output, input, transform) {
    var a, bX, bY, denom, k_slop, mu2, nLen, nX, nY, rX, rY, tMat, v1X, v1Y;
    tMat = void 0;
    rX = input.p2.x - input.p1.x;
    rY = input.p2.y - input.p1.y;
    tMat = transform.R;
    v1X = transform.position.x + (tMat.col1.x * this.m_v1.x + tMat.col2.x * this.m_v1.y);
    v1Y = transform.position.y + (tMat.col1.y * this.m_v1.x + tMat.col2.y * this.m_v1.y);
    nX = transform.position.y + (tMat.col1.y * this.m_v2.x + tMat.col2.y * this.m_v2.y) - v1Y;
    nY = -(transform.position.x + (tMat.col1.x * this.m_v2.x + tMat.col2.x * this.m_v2.y) - v1X);
    k_slop = 100.0 * Number.MIN_VALUE;
    denom = -(rX * nX + rY * nY);
    if (denom > k_slop) {
      bX = input.p1.x - v1X;
      bY = input.p1.y - v1Y;
      a = bX * nX + bY * nY;
      if (0.0 <= a && a <= input.maxFraction * denom) {
        mu2 = (-rX * bY) + rY * bX;
        if ((-k_slop * denom) <= mu2 && mu2 <= denom * (1.0 + k_slop)) {
          a /= denom;
          output.fraction = a;
          nLen = Math.sqrt(nX * nX + nY * nY);
          output.normal.x = nX / nLen;
          output.normal.y = nY / nLen;
          return true;
        }
      }
    }
    return false;
  };

  b2EdgeShape.prototype.ComputeAABB = function(aabb, transform) {
    var tMat, v1X, v1Y, v2X, v2Y;
    tMat = transform.R;
    v1X = transform.position.x + (tMat.col1.x * this.m_v1.x + tMat.col2.x * this.m_v1.y);
    v1Y = transform.position.y + (tMat.col1.y * this.m_v1.x + tMat.col2.y * this.m_v1.y);
    v2X = transform.position.x + (tMat.col1.x * this.m_v2.x + tMat.col2.x * this.m_v2.y);
    v2Y = transform.position.y + (tMat.col1.y * this.m_v2.x + tMat.col2.y * this.m_v2.y);
    if (v1X < v2X) {
      aabb.lowerBound.x = v1X;
      aabb.upperBound.x = v2X;
    } else {
      aabb.lowerBound.x = v2X;
      aabb.upperBound.x = v1X;
    }
    if (v1Y < v2Y) {
      aabb.lowerBound.y = v1Y;
      aabb.upperBound.y = v2Y;
    } else {
      aabb.lowerBound.y = v2Y;
      aabb.upperBound.y = v1Y;
    }
  };

  b2EdgeShape.prototype.ComputeMass = function(massData, density) {
    if (density === void 0) {
      density = 0;
    }
    massData.mass = 0;
    massData.center.SetV(this.m_v1);
    massData.I = 0;
  };

  b2EdgeShape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    var d1, d2, v0, v1, v2;
    if (offset === void 0) {
      offset = 0;
    }
    v0 = new b2Vec2(normal.x * offset, normal.y * offset);
    v1 = b2Math.MulX(xf, this.m_v1);
    v2 = b2Math.MulX(xf, this.m_v2);
    d1 = b2Math.Dot(normal, v1) - offset;
    d2 = b2Math.Dot(normal, v2) - offset;
    if (d1 > 0) {
      if (d2 > 0) {
        return 0;
      } else {
        v1.x = (-d2 / (d1 - d2) * v1.x) + d1 / (d1 - d2) * v2.x;
        v1.y = (-d2 / (d1 - d2) * v1.y) + d1 / (d1 - d2) * v2.y;
      }
    } else {
      if (d2 > 0) {
        v2.x = (-d2 / (d1 - d2) * v1.x) + d1 / (d1 - d2) * v2.x;
        v2.y = (-d2 / (d1 - d2) * v1.y) + d1 / (d1 - d2) * v2.y;
      } else {

      }
    }
    c.x = (v0.x + v1.x + v2.x) / 3;
    c.y = (v0.y + v1.y + v2.y) / 3;
    return 0.5 * ((v1.x - v0.x) * (v2.y - v0.y) - (v1.y - v0.y) * (v2.x - v0.x));
  };

  b2EdgeShape.prototype.GetLength = function() {
    return this.m_length;
  };

  b2EdgeShape.prototype.GetVertex1 = function() {
    return this.m_v1;
  };

  b2EdgeShape.prototype.GetVertex2 = function() {
    return this.m_v2;
  };

  b2EdgeShape.prototype.GetCoreVertex1 = function() {
    return this.m_coreV1;
  };

  b2EdgeShape.prototype.GetCoreVertex2 = function() {
    return this.m_coreV2;
  };

  b2EdgeShape.prototype.GetNormalVector = function() {
    return this.m_normal;
  };

  b2EdgeShape.prototype.GetDirectionVector = function() {
    return this.m_direction;
  };

  b2EdgeShape.prototype.GetCorner1Vector = function() {
    return this.m_cornerDir1;
  };

  b2EdgeShape.prototype.GetCorner2Vector = function() {
    return this.m_cornerDir2;
  };

  b2EdgeShape.prototype.Corner1IsConvex = function() {
    return this.m_cornerConvex1;
  };

  b2EdgeShape.prototype.Corner2IsConvex = function() {
    return this.m_cornerConvex2;
  };

  b2EdgeShape.prototype.GetFirstVertex = function(xf) {
    var tMat;
    tMat = xf.R;
    return new b2Vec2(xf.position.x + (tMat.col1.x * this.m_coreV1.x + tMat.col2.x * this.m_coreV1.y), xf.position.y + (tMat.col1.y * this.m_coreV1.x + tMat.col2.y * this.m_coreV1.y));
  };

  b2EdgeShape.prototype.GetNextEdge = function() {
    return this.m_nextEdge;
  };

  b2EdgeShape.prototype.GetPrevEdge = function() {
    return this.m_prevEdge;
  };

  b2EdgeShape.prototype.Support = function(xf, dX, dY) {
    var tMat, v1X, v1Y, v2X, v2Y;
    if (dX === void 0) {
      dX = 0;
    }
    if (dY === void 0) {
      dY = 0;
    }
    tMat = xf.R;
    v1X = xf.position.x + (tMat.col1.x * this.m_coreV1.x + tMat.col2.x * this.m_coreV1.y);
    v1Y = xf.position.y + (tMat.col1.y * this.m_coreV1.x + tMat.col2.y * this.m_coreV1.y);
    v2X = xf.position.x + (tMat.col1.x * this.m_coreV2.x + tMat.col2.x * this.m_coreV2.y);
    v2Y = xf.position.y + (tMat.col1.y * this.m_coreV2.x + tMat.col2.y * this.m_coreV2.y);
    if ((v1X * dX + v1Y * dY) > (v2X * dX + v2Y * dY)) {
      this.s_supportVec.x = v1X;
      this.s_supportVec.y = v1Y;
    } else {
      this.s_supportVec.x = v2X;
      this.s_supportVec.y = v2Y;
    }
    return this.s_supportVec;
  };

  b2EdgeShape.prototype.SetPrevEdge = function(edge, core, cornerDir, convex) {
    this.m_prevEdge = edge;
    this.m_coreV1 = core;
    this.m_cornerDir1 = cornerDir;
    this.m_cornerConvex1 = convex;
  };

  b2EdgeShape.prototype.SetNextEdge = function(edge, core, cornerDir, convex) {
    this.m_nextEdge = edge;
    this.m_coreV2 = core;
    this.m_cornerDir2 = cornerDir;
    this.m_cornerConvex2 = convex;
  };

  return b2EdgeShape;

})(b2Shape);

//# sourceMappingURL=b2EdgeShape.js.map

},{"../../index":103}],33:[function(require,module,exports){
var Box2D, b2Shape, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Shape = Box2D.Collision.Shapes.b2Shape;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Collision.Shapes.b2MassData = (function(_super) {
  __extends(b2MassData, _super);

  b2MassData.prototype.mass = 0.0;

  b2MassData.prototype.center = null;

  b2MassData.prototype.I = 0.0;

  function b2MassData() {
    this.center = new b2Vec2(0, 0);
    return;
  }

  return b2MassData;

})(b2Shape);

//# sourceMappingURL=b2MassData.js.map

},{"../../index":103}],34:[function(require,module,exports){
var Box2D, Vector, b2Mat22, b2Math, b2Settings, b2Shape, b2Transform, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

b2Math = Box2D.Common.Math.b2Math;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Transform = Box2D.Common.Math.b2Transform;

b2Shape = Box2D.Collision.Shapes.b2Shape;

Box2D.Collision.Shapes.b2PolygonShape = (function(_super) {
  __extends(b2PolygonShape, _super);

  b2PolygonShape.s_mat = new b2Mat22();

  b2PolygonShape.prototype.m_type = b2Shape.e_polygonShape;

  b2PolygonShape.prototype.m_centroid = null;

  b2PolygonShape.prototype.m_vertices = null;

  b2PolygonShape.prototype.m_normals = null;

  b2PolygonShape.prototype.m_vertexCount = 0;

  function b2PolygonShape() {
    this.m_centroid = new b2Vec2();
    this.m_vertices = new Vector();
    this.m_normals = new Vector();
    return;
  }

  b2PolygonShape.prototype.Copy = function() {
    var s;
    s = new b2PolygonShape();
    s.Set(this);
    return s;
  };

  b2PolygonShape.prototype.Set = function(other) {
    var i, other2;
    b2PolygonShape.__super__.Set.call(this, other);
    if (Box2D.equals(other, b2PolygonShape)) {
      other2 = (other instanceof b2PolygonShape ? other : null);
      this.m_centroid.SetV(other2.m_centroid);
      this.m_vertexCount = other2.m_vertexCount;
      this.Reserve(this.m_vertexCount);
      i = 0;
      while (i < this.m_vertexCount) {
        this.m_vertices[i].SetV(other2.m_vertices[i]);
        this.m_normals[i].SetV(other2.m_normals[i]);
        i++;
      }
    }
  };

  b2PolygonShape.prototype.SetAsArray = function(vertices, vertexCount) {
    var i, tVec, v;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    v = new Vector();
    i = 0;
    tVec = void 0;
    i = 0;
    while (i < vertices.length) {
      tVec = vertices[i];
      v.push(tVec);
      ++i;
    }
    this.SetAsVector(v, vertexCount);
  };

  b2PolygonShape.AsArray = function(vertices, vertexCount) {
    var polygonShape;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsArray(vertices, vertexCount);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsVector = function(vertices, vertexCount) {
    var edge, i, i1, i2;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    if (vertexCount === 0) {
      vertexCount = vertices.length;
    }
    b2Settings.b2Assert(2 <= vertexCount);
    this.m_vertexCount = vertexCount;
    this.Reserve(vertexCount);
    i = 0;
    i = 0;
    while (i < this.m_vertexCount) {
      this.m_vertices[i].SetV(vertices[i]);
      i++;
    }
    i = 0;
    while (i < this.m_vertexCount) {
      i1 = parseInt(i);
      i2 = parseInt((i + 1 < this.m_vertexCount ? i + 1 : 0));
      edge = b2Math.SubtractVV(this.m_vertices[i2], this.m_vertices[i1]);
      b2Settings.b2Assert(edge.LengthSquared() > Number.MIN_VALUE);
      this.m_normals[i].SetV(b2Math.CrossVF(edge, 1.0));
      this.m_normals[i].Normalize();
      ++i;
    }
    this.m_centroid = b2PolygonShape.ComputeCentroid(this.m_vertices, this.m_vertexCount);
  };

  b2PolygonShape.AsVector = function(vertices, vertexCount) {
    var polygonShape;
    if (vertexCount === void 0) {
      vertexCount = 0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsVector(vertices, vertexCount);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsBox = function(hx, hy) {
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    this.m_vertexCount = 4;
    this.Reserve(4);
    this.m_vertices[0].Set(-hx, -hy);
    this.m_vertices[1].Set(hx, -hy);
    this.m_vertices[2].Set(hx, hy);
    this.m_vertices[3].Set(-hx, hy);
    this.m_normals[0].Set(0.0, -1.0);
    this.m_normals[1].Set(1.0, 0.0);
    this.m_normals[2].Set(0.0, 1.0);
    this.m_normals[3].Set(-1.0, 0.0);
    this.m_centroid.SetZero();
  };

  b2PolygonShape.AsBox = function(hx, hy) {
    var polygonShape;
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsBox(hx, hy);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsOrientedBox = function(hx, hy, center, angle) {
    var i, xf;
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    if (center === void 0) {
      center = null;
    }
    if (angle === void 0) {
      angle = 0.0;
    }
    this.m_vertexCount = 4;
    this.Reserve(4);
    this.m_vertices[0].Set(-hx, -hy);
    this.m_vertices[1].Set(hx, -hy);
    this.m_vertices[2].Set(hx, hy);
    this.m_vertices[3].Set(-hx, hy);
    this.m_normals[0].Set(0.0, -1.0);
    this.m_normals[1].Set(1.0, 0.0);
    this.m_normals[2].Set(0.0, 1.0);
    this.m_normals[3].Set(-1.0, 0.0);
    this.m_centroid = center;
    xf = new b2Transform();
    xf.position = center;
    xf.R.Set(angle);
    i = 0;
    while (i < this.m_vertexCount) {
      this.m_vertices[i] = b2Math.MulX(xf, this.m_vertices[i]);
      this.m_normals[i] = b2Math.MulMV(xf.R, this.m_normals[i]);
      ++i;
    }
  };

  b2PolygonShape.AsOrientedBox = function(hx, hy, center, angle) {
    var polygonShape;
    if (hx === void 0) {
      hx = 0;
    }
    if (hy === void 0) {
      hy = 0;
    }
    if (center === void 0) {
      center = null;
    }
    if (angle === void 0) {
      angle = 0.0;
    }
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsOrientedBox(hx, hy, center, angle);
    return polygonShape;
  };

  b2PolygonShape.prototype.SetAsEdge = function(v1, v2) {
    this.m_vertexCount = 2;
    this.Reserve(2);
    this.m_vertices[0].SetV(v1);
    this.m_vertices[1].SetV(v2);
    this.m_centroid.x = 0.5 * (v1.x + v2.x);
    this.m_centroid.y = 0.5 * (v1.y + v2.y);
    this.m_normals[0] = b2Math.CrossVF(b2Math.SubtractVV(v2, v1), 1.0);
    this.m_normals[0].Normalize();
    this.m_normals[1].x = -this.m_normals[0].x;
    this.m_normals[1].y = -this.m_normals[0].y;
  };

  b2PolygonShape.AsEdge = function(v1, v2) {
    var polygonShape;
    polygonShape = new b2PolygonShape();
    polygonShape.SetAsEdge(v1, v2);
    return polygonShape;
  };

  b2PolygonShape.prototype.TestPoint = function(xf, p) {
    var dot, i, pLocalX, pLocalY, tMat, tVec, tX, tY;
    tVec = void 0;
    tMat = xf.R;
    tX = p.x - xf.position.x;
    tY = p.y - xf.position.y;
    pLocalX = tX * tMat.col1.x + tY * tMat.col1.y;
    pLocalY = tX * tMat.col2.x + tY * tMat.col2.y;
    i = 0;
    while (i < this.m_vertexCount) {
      tVec = this.m_vertices[i];
      tX = pLocalX - tVec.x;
      tY = pLocalY - tVec.y;
      tVec = this.m_normals[i];
      dot = tVec.x * tX + tVec.y * tY;
      if (dot > 0.0) {
        return false;
      }
      ++i;
    }
    return true;
  };

  b2PolygonShape.prototype.RayCast = function(output, input, transform) {
    var dX, dY, denominator, i, index, lower, numerator, p1X, p1Y, p2X, p2Y, tMat, tVec, tX, tY, upper;
    lower = 0.0;
    upper = input.maxFraction;
    tX = 0;
    tY = 0;
    tMat = void 0;
    tVec = void 0;
    tX = input.p1.x - transform.position.x;
    tY = input.p1.y - transform.position.y;
    tMat = transform.R;
    p1X = tX * tMat.col1.x + tY * tMat.col1.y;
    p1Y = tX * tMat.col2.x + tY * tMat.col2.y;
    tX = input.p2.x - transform.position.x;
    tY = input.p2.y - transform.position.y;
    tMat = transform.R;
    p2X = tX * tMat.col1.x + tY * tMat.col1.y;
    p2Y = tX * tMat.col2.x + tY * tMat.col2.y;
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    index = parseInt(-1.);
    i = 0;
    while (i < this.m_vertexCount) {
      tVec = this.m_vertices[i];
      tX = tVec.x - p1X;
      tY = tVec.y - p1Y;
      tVec = this.m_normals[i];
      numerator = tVec.x * tX + tVec.y * tY;
      denominator = tVec.x * dX + tVec.y * dY;
      if (denominator === 0.0) {
        if (numerator < 0.0) {
          return false;
        }
      } else {
        if (denominator < 0.0 && numerator < lower * denominator) {
          lower = numerator / denominator;
          index = i;
        } else {
          if (denominator > 0.0 && numerator < upper * denominator) {
            upper = numerator / denominator;
          }
        }
      }
      if (upper < lower - Number.MIN_VALUE) {
        return false;
      }
      ++i;
    }
    if (index >= 0) {
      output.fraction = lower;
      tMat = transform.R;
      tVec = this.m_normals[index];
      output.normal.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      output.normal.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      return true;
    }
    return false;
  };

  b2PolygonShape.prototype.ComputeAABB = function(aabb, xf) {
    var i, lowerX, lowerY, tMat, tVec, upperX, upperY, vX, vY;
    tMat = xf.R;
    tVec = this.m_vertices[0];
    lowerX = xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    lowerY = xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    upperX = lowerX;
    upperY = lowerY;
    i = 1;
    while (i < this.m_vertexCount) {
      tVec = this.m_vertices[i];
      vX = xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
      vY = xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
      lowerX = (lowerX < vX ? lowerX : vX);
      lowerY = (lowerY < vY ? lowerY : vY);
      upperX = (upperX > vX ? upperX : vX);
      upperY = (upperY > vY ? upperY : vY);
      ++i;
    }
    aabb.lowerBound.x = lowerX - this.m_radius;
    aabb.lowerBound.y = lowerY - this.m_radius;
    aabb.upperBound.x = upperX + this.m_radius;
    aabb.upperBound.y = upperY + this.m_radius;
  };

  b2PolygonShape.prototype.ComputeMass = function(massData, density) {
    var D, I, area, centerX, centerY, e1X, e1Y, e2X, e2Y, ex1, ex2, ey1, ey2, i, intx2, inty2, k_inv3, p1X, p1Y, p2, p3, px, py, triangleArea;
    if (density === void 0) {
      density = 0;
    }
    if (this.m_vertexCount === 2) {
      massData.center.x = 0.5 * (this.m_vertices[0].x + this.m_vertices[1].x);
      massData.center.y = 0.5 * (this.m_vertices[0].y + this.m_vertices[1].y);
      massData.mass = 0.0;
      massData.I = 0.0;
      return;
    }
    centerX = 0.0;
    centerY = 0.0;
    area = 0.0;
    I = 0.0;
    p1X = 0.0;
    p1Y = 0.0;
    k_inv3 = 1.0 / 3.0;
    i = 0;
    while (i < this.m_vertexCount) {
      p2 = this.m_vertices[i];
      p3 = (i + 1 < this.m_vertexCount ? this.m_vertices[parseInt(i + 1)] : this.m_vertices[0]);
      e1X = p2.x - p1X;
      e1Y = p2.y - p1Y;
      e2X = p3.x - p1X;
      e2Y = p3.y - p1Y;
      D = e1X * e2Y - e1Y * e2X;
      triangleArea = 0.5 * D;
      area += triangleArea;
      centerX += triangleArea * k_inv3 * (p1X + p2.x + p3.x);
      centerY += triangleArea * k_inv3 * (p1Y + p2.y + p3.y);
      px = p1X;
      py = p1Y;
      ex1 = e1X;
      ey1 = e1Y;
      ex2 = e2X;
      ey2 = e2Y;
      intx2 = k_inv3 * (0.25 * (ex1 * ex1 + ex2 * ex1 + ex2 * ex2) + (px * ex1 + px * ex2)) + 0.5 * px * px;
      inty2 = k_inv3 * (0.25 * (ey1 * ey1 + ey2 * ey1 + ey2 * ey2) + (py * ey1 + py * ey2)) + 0.5 * py * py;
      I += D * (intx2 + inty2);
      ++i;
    }
    massData.mass = density * area;
    centerX *= 1.0 / area;
    centerY *= 1.0 / area;
    massData.center.Set(centerX, centerY);
    massData.I = density * I;
  };

  b2PolygonShape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    var area, center, depths, diveCount, i, intoIndex, intoIndex2, intoLamdda, intoVec, isSubmerged, lastSubmerged, md, normalL, offsetL, outoIndex, outoIndex2, outoLamdda, outoVec, p2, p3, triangleArea;
    if (offset === void 0) {
      offset = 0;
    }
    normalL = b2Math.MulTMV(xf.R, normal);
    offsetL = offset - b2Math.Dot(normal, xf.position);
    depths = new Vector();
    diveCount = 0;
    intoIndex = parseInt(-1.);
    outoIndex = parseInt(-1.);
    lastSubmerged = false;
    i = 0;
    i = 0;
    while (i < this.m_vertexCount) {
      depths[i] = b2Math.Dot(normalL, this.m_vertices[i]) - offsetL;
      isSubmerged = depths[i] < (-Number.MIN_VALUE);
      if (i > 0) {
        if (isSubmerged) {
          if (!lastSubmerged) {
            intoIndex = i - 1;
            diveCount++;
          }
        } else {
          if (lastSubmerged) {
            outoIndex = i - 1;
            diveCount++;
          }
        }
      }
      lastSubmerged = isSubmerged;
      ++i;
    }
    switch (diveCount) {
      case 0:
        if (lastSubmerged) {
          md = new b2MassData();
          this.ComputeMass(md, 1);
          c.SetV(b2Math.MulX(xf, md.center));
          return md.mass;
        } else {
          return 0;
        }
        break;
      case 1:
        if (intoIndex === (-1)) {
          intoIndex = this.m_vertexCount - 1;
        } else {
          outoIndex = this.m_vertexCount - 1;
        }
    }
    intoIndex2 = parseInt((intoIndex + 1) % this.m_vertexCount);
    outoIndex2 = parseInt((outoIndex + 1) % this.m_vertexCount);
    intoLamdda = (0 - depths[intoIndex]) / (depths[intoIndex2] - depths[intoIndex]);
    outoLamdda = (0 - depths[outoIndex]) / (depths[outoIndex2] - depths[outoIndex]);
    intoVec = new b2Vec2(this.m_vertices[intoIndex].x * (1 - intoLamdda) + this.m_vertices[intoIndex2].x * intoLamdda, this.m_vertices[intoIndex].y * (1 - intoLamdda) + this.m_vertices[intoIndex2].y * intoLamdda);
    outoVec = new b2Vec2(this.m_vertices[outoIndex].x * (1 - outoLamdda) + this.m_vertices[outoIndex2].x * outoLamdda, this.m_vertices[outoIndex].y * (1 - outoLamdda) + this.m_vertices[outoIndex2].y * outoLamdda);
    area = 0;
    center = new b2Vec2();
    p2 = this.m_vertices[intoIndex2];
    p3 = void 0;
    i = intoIndex2;
    while (i !== outoIndex2) {
      i = (i + 1) % this.m_vertexCount;
      if (i === outoIndex2) {
        p3 = outoVec;
      } else {
        p3 = this.m_vertices[i];
      }
      triangleArea = 0.5 * ((p2.x - intoVec.x) * (p3.y - intoVec.y) - (p2.y - intoVec.y) * (p3.x - intoVec.x));
      area += triangleArea;
      center.x += triangleArea * (intoVec.x + p2.x + p3.x) / 3;
      center.y += triangleArea * (intoVec.y + p2.y + p3.y) / 3;
      p2 = p3;
    }
    center.Multiply(1 / area);
    c.SetV(b2Math.MulX(xf, center));
    return area;
  };

  b2PolygonShape.prototype.GetVertexCount = function() {
    return this.m_vertexCount;
  };

  b2PolygonShape.prototype.GetVertices = function() {
    return this.m_vertices;
  };

  b2PolygonShape.prototype.GetNormals = function() {
    return this.m_normals;
  };

  b2PolygonShape.prototype.GetSupport = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_vertexCount) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return bestIndex;
  };

  b2PolygonShape.prototype.GetSupportVertex = function(d) {
    var bestIndex, bestValue, i, value;
    bestIndex = 0;
    bestValue = this.m_vertices[0].x * d.x + this.m_vertices[0].y * d.y;
    i = 1;
    while (i < this.m_vertexCount) {
      value = this.m_vertices[i].x * d.x + this.m_vertices[i].y * d.y;
      if (value > bestValue) {
        bestIndex = i;
        bestValue = value;
      }
      ++i;
    }
    return this.m_vertices[bestIndex];
  };

  b2PolygonShape.prototype.Validate = function() {
    return false;
  };

  b2PolygonShape.prototype.Reserve = function(count) {
    var i;
    if (count === void 0) {
      count = 0;
    }
    i = parseInt(this.m_vertices.length);
    while (i < count) {
      this.m_vertices[i] = new b2Vec2();
      this.m_normals[i] = new b2Vec2();
      i++;
    }
  };

  b2PolygonShape.ComputeCentroid = function(vs, count) {
    var D, area, c, e1X, e1Y, e2X, e2Y, i, inv3, p1X, p1Y, p2, p3, triangleArea;
    if (count === void 0) {
      count = 0;
    }
    c = new b2Vec2();
    area = 0.0;
    p1X = 0.0;
    p1Y = 0.0;
    inv3 = 1.0 / 3.0;
    i = 0;
    while (i < count) {
      p2 = vs[i];
      p3 = (i + 1 < count ? vs[parseInt(i + 1)] : vs[0]);
      e1X = p2.x - p1X;
      e1Y = p2.y - p1Y;
      e2X = p3.x - p1X;
      e2Y = p3.y - p1Y;
      D = e1X * e2Y - e1Y * e2X;
      triangleArea = 0.5 * D;
      area += triangleArea;
      c.x += triangleArea * inv3 * (p1X + p2.x + p3.x);
      c.y += triangleArea * inv3 * (p1Y + p2.y + p3.y);
      ++i;
    }
    c.x *= 1.0 / area;
    c.y *= 1.0 / area;
    return c;
  };

  b2PolygonShape.ComputeOBB = function(obb, vs, count) {
    var area, centerX, centerY, dX, dY, i, j, length, lowerX, lowerY, minArea, p, rX, rY, root, tMat, upperX, upperY, uxX, uxY, uyX, uyY;
    if (count === void 0) {
      count = 0;
    }
    i = 0;
    p = new Vector(count + 1);
    i = 0;
    while (i < count) {
      p[i] = vs[i];
      ++i;
    }
    p[count] = p[0];
    minArea = Number.MAX_VALUE;
    i = 1;
    while (i <= count) {
      root = p[parseInt(i - 1)];
      uxX = p[i].x - root.x;
      uxY = p[i].y - root.y;
      length = Math.sqrt(uxX * uxX + uxY * uxY);
      uxX /= length;
      uxY /= length;
      uyX = -uxY;
      uyY = uxX;
      lowerX = Number.MAX_VALUE;
      lowerY = Number.MAX_VALUE;
      upperX = -Number.MAX_VALUE;
      upperY = -Number.MAX_VALUE;
      j = 0;
      while (j < count) {
        dX = p[j].x - root.x;
        dY = p[j].y - root.y;
        rX = uxX * dX + uxY * dY;
        rY = uyX * dX + uyY * dY;
        if (rX < lowerX) {
          lowerX = rX;
        }
        if (rY < lowerY) {
          lowerY = rY;
        }
        if (rX > upperX) {
          upperX = rX;
        }
        if (rY > upperY) {
          upperY = rY;
        }
        ++j;
      }
      area = (upperX - lowerX) * (upperY - lowerY);
      if (area < 0.95 * minArea) {
        minArea = area;
        obb.R.col1.x = uxX;
        obb.R.col1.y = uxY;
        obb.R.col2.x = uyX;
        obb.R.col2.y = uyY;
        centerX = 0.5 * (lowerX + upperX);
        centerY = 0.5 * (lowerY + upperY);
        tMat = obb.R;
        obb.center.x = root.x + (tMat.col1.x * centerX + tMat.col2.x * centerY);
        obb.center.y = root.y + (tMat.col1.y * centerX + tMat.col2.y * centerY);
        obb.extents.x = 0.5 * (upperX - lowerX);
        obb.extents.y = 0.5 * (upperY - lowerY);
      }
      ++i;
    }
  };

  return b2PolygonShape;

})(b2Shape);

//# sourceMappingURL=b2PolygonShape.js.map

},{"../../index":103}],35:[function(require,module,exports){
var Box2D, b2Distance, b2DistanceInput, b2DistanceOutput, b2DistanceProxy, b2Settings, b2SimplexCache;

Box2D = require('../../index');

b2Settings = Box2D.Common.b2Settings;

b2SimplexCache = Box2D.Collision.b2SimplexCache;

b2Distance = Box2D.Collision.b2Distance;

b2DistanceOutput = Box2D.Collision.b2DistanceOutput;

b2DistanceInput = Box2D.Collision.b2DistanceInput;

b2DistanceProxy = Box2D.Collision.b2DistanceProxy;

Box2D.Collision.Shapes.b2Shape = (function() {
  function b2Shape() {}

  b2Shape.e_unknownShape = parseInt(-1.);

  b2Shape.e_circleShape = 0;

  b2Shape.e_polygonShape = 1;

  b2Shape.e_edgeShape = 2;

  b2Shape.e_shapeTypeCount = 3;

  b2Shape.e_hitCollide = 1;

  b2Shape.e_missCollide = 0;

  b2Shape.e_startsInsideCollide = parseInt(-1.);

  b2Shape.prototype.m_type = b2Shape.e_unknownShape;

  b2Shape.prototype.m_radius = b2Settings.b2_linearSlop;

  b2Shape.prototype.Copy = function() {
    return null;
  };

  b2Shape.prototype.Set = function(other) {
    this.m_radius = other.m_radius;
  };

  b2Shape.prototype.GetType = function() {
    return this.m_type;
  };

  b2Shape.prototype.TestPoint = function(xf, p) {
    return false;
  };

  b2Shape.prototype.RayCast = function(output, input, transform) {
    return false;
  };

  b2Shape.prototype.ComputeAABB = function(aabb, xf) {};

  b2Shape.prototype.ComputeMass = function(massData, density) {
    if (density === void 0) {
      density = 0;
    }
  };

  b2Shape.prototype.ComputeSubmergedArea = function(normal, offset, xf, c) {
    if (offset === void 0) {
      offset = 0;
    }
    return 0;
  };

  b2Shape.TestOverlap = function(shape1, transform1, shape2, transform2) {
    var input, output, simplexCache;
    input = new b2DistanceInput();
    input.proxyA = new b2DistanceProxy();
    input.proxyA.Set(shape1);
    input.proxyB = new b2DistanceProxy();
    input.proxyB.Set(shape2);
    input.transformA = transform1;
    input.transformB = transform2;
    input.useRadii = true;
    simplexCache = new b2SimplexCache();
    simplexCache.count = 0;
    output = new b2DistanceOutput();
    b2Distance.Distance(output, simplexCache, input);
    return output.distance < 10.0 * Number.MIN_VALUE;
  };

  return b2Shape;

})();

//# sourceMappingURL=b2Shape.js.map

},{"../../index":103}],36:[function(require,module,exports){
var Box2D, b2Math, parseUInt;

Box2D = require('../index');

b2Math = Box2D.Common.Math.b2Math;

parseUInt = function(v) {
  return Math.abs(parseInt(v));
};

Box2D.Common.b2Color = (function() {
  b2Color.prototype._r = 0;

  b2Color.prototype._g = 0;

  b2Color.prototype._b = 0;

  function b2Color(rr, gg, bb) {
    if (rr === void 0) {
      rr = 0;
    }
    if (gg === void 0) {
      gg = 0;
    }
    if (bb === void 0) {
      bb = 0;
    }
    this._r = parseUInt(255 * b2Math.Clamp(rr, 0.0, 1.0));
    this._g = parseUInt(255 * b2Math.Clamp(gg, 0.0, 1.0));
    this._b = parseUInt(255 * b2Math.Clamp(bb, 0.0, 1.0));
  }

  b2Color.prototype.Set = function(rr, gg, bb) {
    if (rr === void 0) {
      rr = 0;
    }
    if (gg === void 0) {
      gg = 0;
    }
    if (bb === void 0) {
      bb = 0;
    }
    this._r = parseUInt(255 * b2Math.Clamp(rr, 0.0, 1.0));
    this._g = parseUInt(255 * b2Math.Clamp(gg, 0.0, 1.0));
    this._b = parseUInt(255 * b2Math.Clamp(bb, 0.0, 1.0));
  };

  Object.defineProperties(b2Color.prototype, {
    r: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._r;
      },
      set: function(rr) {
        if (rr == null) {
          rr = 0;
        }
        return this._r = parseUInt(255 * b2Math.Clamp(rr, 0.0, 1.0));
      }
    },
    g: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._g;
      },
      set: function(gg) {
        if (gg == null) {
          gg = 0;
        }
        return this._g = parseUInt(255 * b2Math.Clamp(gg, 0.0, 1.0));
      }
    },
    b: {
      enumerable: false,
      configurable: true,
      get: function() {
        return this._b;
      },
      set: function(bb) {
        if (bb == null) {
          bb = 0;
        }
        return this._b = parseUInt(255 * b2Math.Clamp(bb, 0.0, 1.0));
      }
    },
    color: {
      enumerable: false,
      configurable: true,
      get: function() {
        return (this._r << 16) | (this._g << 8) | this._b;
      }
    }
  });

  return b2Color;

})();

//# sourceMappingURL=b2Color.js.map

},{"../index":103}],37:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Common.b2Settings = (function() {
  function b2Settings() {}

  b2Settings.VERSION = "2.1alpha";

  b2Settings.USHRT_MAX = 0x0000ffff;

  b2Settings.b2_pi = Math.PI;

  b2Settings.b2_maxManifoldPoints = 2;

  b2Settings.b2_aabbExtension = 0.1;

  b2Settings.b2_aabbMultiplier = 2.0;

  b2Settings.b2_polygonRadius = 2.0 * b2Settings.b2_linearSlop;

  b2Settings.b2_linearSlop = 0.005;

  b2Settings.b2_angularSlop = 2.0 / 180.0 * b2Settings.b2_pi;

  b2Settings.b2_toiSlop = 8.0 * b2Settings.b2_linearSlop;

  b2Settings.b2_maxTOIContactsPerIsland = 32;

  b2Settings.b2_maxTOIJointsPerIsland = 32;

  b2Settings.b2_velocityThreshold = 1.0;

  b2Settings.b2_maxLinearCorrection = 0.2;

  b2Settings.b2_maxAngularCorrection = 8.0 / 180.0 * b2Settings.b2_pi;

  b2Settings.b2_maxTranslation = 2.0;

  b2Settings.b2_maxTranslationSquared = b2Settings.b2_maxTranslation * b2Settings.b2_maxTranslation;

  b2Settings.b2_maxRotation = 0.5 * b2Settings.b2_pi;

  b2Settings.b2_maxRotationSquared = b2Settings.b2_maxRotation * b2Settings.b2_maxRotation;

  b2Settings.b2_contactBaumgarte = 0.2;

  b2Settings.b2_timeToSleep = 0.5;

  b2Settings.b2_linearSleepTolerance = 0.01;

  b2Settings.b2_angularSleepTolerance = 2.0 / 180.0 * b2Settings.b2_pi;

  b2Settings.b2MixFriction = function(friction1, friction2) {
    if (friction1 === void 0) {
      friction1 = 0;
    }
    if (friction2 === void 0) {
      friction2 = 0;
    }
    return Math.sqrt(friction1 * friction2);
  };

  b2Settings.b2MixRestitution = function(restitution1, restitution2) {
    var _ref;
    if (restitution1 === void 0) {
      restitution1 = 0;
    }
    if (restitution2 === void 0) {
      restitution2 = 0;
    }
    return (_ref = restitution1 > restitution2) != null ? _ref : {
      restitution1: restitution2
    };
  };

  b2Settings.b2Assert = function(a) {
    if (!a) {
      throw "Assertion Failed";
    }
  };

  return b2Settings;

})();

//# sourceMappingURL=b2Settings.js.map

},{"../index":103}],38:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Mat22 = (function() {
  b2Mat22.prototype.col1 = null;

  b2Mat22.prototype.col2 = null;

  function b2Mat22() {
    this.col1 = new b2Vec2();
    this.col2 = new b2Vec2();
    this.SetIdentity();
  }

  b2Mat22.FromAngle = function(angle) {
    var mat;
    if (angle == null) {
      angle = 0;
    }
    mat = new b2Mat22();
    mat.Set(angle);
    return mat;
  };

  b2Mat22.FromVV = function(c1, c2) {
    var mat;
    mat = new b2Mat22();
    mat.SetVV(c1, c2);
    return mat;
  };

  b2Mat22.prototype.Set = function(angle) {
    var c, s;
    if (angle == null) {
      angle = 0;
    }
    c = Math.cos(angle);
    s = Math.sin(angle);
    this.col1.x = c;
    this.col2.x = -s;
    this.col1.y = s;
    this.col2.y = c;
  };

  b2Mat22.prototype.SetVV = function(c1, c2) {
    this.col1.SetV(c1);
    this.col2.SetV(c2);
  };

  b2Mat22.prototype.Copy = function() {
    var mat;
    mat = new b2Mat22();
    mat.SetM(this);
    return mat;
  };

  b2Mat22.prototype.SetM = function(m) {
    this.col1.SetV(m.col1);
    this.col2.SetV(m.col2);
  };

  b2Mat22.prototype.AddM = function(m) {
    this.col1.x += m.col1.x;
    this.col1.y += m.col1.y;
    this.col2.x += m.col2.x;
    this.col2.y += m.col2.y;
  };

  b2Mat22.prototype.SetIdentity = function() {
    this.col1.x = 1.0;
    this.col2.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 1.0;
  };

  b2Mat22.prototype.SetZero = function() {
    this.col1.x = 0.0;
    this.col2.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 0.0;
  };

  b2Mat22.prototype.GetAngle = function() {
    return Math.atan2(this.col1.y, this.col1.x);
  };

  b2Mat22.prototype.GetInverse = function(out) {
    var a, b, c, d, det;
    a = this.col1.x;
    b = this.col2.x;
    c = this.col1.y;
    d = this.col2.y;
    det = a * d - b * c;
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.col1.x = det * d;
    out.col2.x = -det * b;
    out.col1.y = -det * c;
    out.col2.y = det * a;
    return out;
  };

  b2Mat22.prototype.Solve = function(out, bX, bY) {
    var a11, a12, a21, a22, det;
    if (bX == null) {
      bX = 0;
    }
    if (bY == null) {
      bY = 0;
    }
    a11 = this.col1.x;
    a12 = this.col2.x;
    a21 = this.col1.y;
    a22 = this.col2.y;
    det = a11 * a22 - a12 * a21;
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.x = det * (a22 * bX - a12 * bY);
    out.y = det * (a11 * bY - a21 * bX);
    return out;
  };

  b2Mat22.prototype.Abs = function() {
    this.col1.Abs();
    this.col2.Abs();
  };

  return b2Mat22;

})();

//# sourceMappingURL=b2Mat22.js.map

},{"../../index":103}],39:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Mat33 = (function() {
  b2Mat33.prototype.col1 = null;

  b2Mat33.prototype.col2 = null;

  b2Mat33.prototype.col3 = null;

  function b2Mat33(c1, c2, c3) {
    if (c1 === void 0) {
      c1 = null;
    }
    if (c2 === void 0) {
      c2 = null;
    }
    if (c3 === void 0) {
      c3 = null;
    }
    this.col1 = new b2Vec3();
    this.col2 = new b2Vec3();
    this.col3 = new b2Vec3();
    if (!c1 && !c2 && !c3) {
      this.col1.SetZero();
      this.col2.SetZero();
      this.col3.SetZero();
    } else {
      this.col1.SetV(c1);
      this.col2.SetV(c2);
      this.col3.SetV(c3);
    }
    return;
  }

  b2Mat33.prototype.SetVVV = function(c1, c2, c3) {
    this.col1.SetV(c1);
    this.col2.SetV(c2);
    this.col3.SetV(c3);
  };

  b2Mat33.prototype.Copy = function() {
    new b2Mat33(this.col1, this.col2, this.col3);
  };

  b2Mat33.prototype.SetM = function(m) {
    this.col1.SetV(m.col1);
    this.col2.SetV(m.col2);
    this.col3.SetV(m.col3);
  };

  b2Mat33.prototype.AddM = function(m) {
    this.col1.x += m.col1.x;
    this.col1.y += m.col1.y;
    this.col1.z += m.col1.z;
    this.col2.x += m.col2.x;
    this.col2.y += m.col2.y;
    this.col2.z += m.col2.z;
    this.col3.x += m.col3.x;
    this.col3.y += m.col3.y;
    this.col3.z += m.col3.z;
  };

  b2Mat33.prototype.SetIdentity = function() {
    this.col1.x = 1.0;
    this.col2.x = 0.0;
    this.col3.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 1.0;
    this.col3.y = 0.0;
    this.col1.z = 0.0;
    this.col2.z = 0.0;
    this.col3.z = 1.0;
  };

  b2Mat33.prototype.SetZero = function() {
    this.col1.x = 0.0;
    this.col2.x = 0.0;
    this.col3.x = 0.0;
    this.col1.y = 0.0;
    this.col2.y = 0.0;
    this.col3.y = 0.0;
    this.col1.z = 0.0;
    this.col2.z = 0.0;
    this.col3.z = 0.0;
  };

  b2Mat33.prototype.Solve22 = function(out, bX, bY) {
    var a11, a12, a21, a22, det;
    if (bX === void 0) {
      bX = 0;
    }
    if (bY === void 0) {
      bY = 0;
    }
    a11 = this.col1.x;
    a12 = this.col2.x;
    a21 = this.col1.y;
    a22 = this.col2.y;
    det = a11 * a22 - a12 * a21;
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.x = det * (a22 * bX - a12 * bY);
    out.y = det * (a11 * bY - a21 * bX);
    return out;
  };

  b2Mat33.prototype.Solve33 = function(out, bX, bY, bZ) {
    var a11, a12, a13, a21, a22, a23, a31, a32, a33, det;
    if (bX === void 0) {
      bX = 0;
    }
    if (bY === void 0) {
      bY = 0;
    }
    if (bZ === void 0) {
      bZ = 0;
    }
    a11 = this.col1.x;
    a21 = this.col1.y;
    a31 = this.col1.z;
    a12 = this.col2.x;
    a22 = this.col2.y;
    a32 = this.col2.z;
    a13 = this.col3.x;
    a23 = this.col3.y;
    a33 = this.col3.z;
    det = a11 * (a22 * a33 - a32 * a23) + a21 * (a32 * a13 - a12 * a33) + a31 * (a12 * a23 - a22 * a13);
    if (det !== 0.0) {
      det = 1.0 / det;
    }
    out.x = det * (bX * (a22 * a33 - a32 * a23) + bY * (a32 * a13 - a12 * a33) + bZ * (a12 * a23 - a22 * a13));
    out.y = det * (a11 * (bY * a33 - bZ * a23) + a21 * (bZ * a13 - bX * a33) + a31 * (bX * a23 - bY * a13));
    out.z = det * (a11 * (a22 * bZ - a32 * bY) + a21 * (a32 * bX - a12 * bZ) + a31 * (a12 * bY - a22 * bX));
    return out;
  };

  return b2Mat33;

})();

//# sourceMappingURL=b2Mat33.js.map

},{"../../index":103}],40:[function(require,module,exports){
var Box2D, b2Mat22, b2Math, b2Transform, b2Vec2;

Box2D = require('../../index');

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Math = Box2D.Common.Math.b2Math;

b2Transform = Box2D.Common.Math.b2Transform;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Math = (function() {
  function b2Math() {}

  b2Math.IsValid = function(x) {
    if (x === void 0) {
      x = 0;
    }
    return isFinite(x);
  };

  b2Math.Dot = function(a, b) {
    return a.x * b.x + a.y * b.y;
  };

  b2Math.CrossVV = function(a, b) {
    return a.x * b.y - a.y * b.x;
  };

  b2Math.CrossVF = function(a, s) {
    var v;
    if (s === void 0) {
      s = 0;
    }
    v = new b2Vec2(s * a.y, -s * a.x);
    return v;
  };

  b2Math.CrossFV = function(s, a) {
    var v;
    if (s === void 0) {
      s = 0;
    }
    v = new b2Vec2(-s * a.y, s * a.x);
    return v;
  };

  b2Math.MulMV = function(A, v) {
    var u;
    u = new b2Vec2(A.col1.x * v.x + A.col2.x * v.y, A.col1.y * v.x + A.col2.y * v.y);
    return u;
  };

  b2Math.MulTMV = function(A, v) {
    var u;
    u = new b2Vec2(b2Math.Dot(v, A.col1), b2Math.Dot(v, A.col2));
    return u;
  };

  b2Math.MulX = function(T, v) {
    var a;
    a = b2Math.MulMV(T.R, v);
    a.x += T.position.x;
    a.y += T.position.y;
    return a;
  };

  b2Math.MulXT = function(T, v) {
    var a, tX;
    a = b2Math.SubtractVV(v, T.position);
    tX = a.x * T.R.col1.x + a.y * T.R.col1.y;
    a.y = a.x * T.R.col2.x + a.y * T.R.col2.y;
    a.x = tX;
    return a;
  };

  b2Math.AddVV = function(a, b) {
    var v;
    v = new b2Vec2(a.x + b.x, a.y + b.y);
    return v;
  };

  b2Math.SubtractVV = function(a, b) {
    var v;
    v = new b2Vec2(a.x - b.x, a.y - b.y);
    return v;
  };

  b2Math.Distance = function(a, b) {
    var cX, cY;
    cX = a.x - b.x;
    cY = a.y - b.y;
    return Math.sqrt(cX * cX + cY * cY);
  };

  b2Math.DistanceSquared = function(a, b) {
    var cX, cY;
    cX = a.x - b.x;
    cY = a.y - b.y;
    return cX * cX + cY * cY;
  };

  b2Math.MulFV = function(s, a) {
    var v;
    if (s === void 0) {
      s = 0;
    }
    v = new b2Vec2(s * a.x, s * a.y);
    return v;
  };

  b2Math.AddMM = function(A, B) {
    var C;
    C = b2Mat22.FromVV(b2Math.AddVV(A.col1, B.col1), b2Math.AddVV(A.col2, B.col2));
    return C;
  };

  b2Math.MulMM = function(A, B) {
    var C;
    C = b2Mat22.FromVV(b2Math.MulMV(A, B.col1), b2Math.MulMV(A, B.col2));
    return C;
  };

  b2Math.MulTMM = function(A, B) {
    var C, c1, c2;
    c1 = new b2Vec2(b2Math.Dot(A.col1, B.col1), b2Math.Dot(A.col2, B.col1));
    c2 = new b2Vec2(b2Math.Dot(A.col1, B.col2), b2Math.Dot(A.col2, B.col2));
    C = b2Mat22.FromVV(c1, c2);
    return C;
  };

  b2Math.Abs = function(a) {
    if (a === void 0) {
      a = 0;
    }
    return (a > 0.0 ? a : -a);
  };

  b2Math.AbsV = function(a) {
    var b;
    b = new b2Vec2(b2Math.Abs(a.x), b2Math.Abs(a.y));
    return b;
  };

  b2Math.AbsM = function(A) {
    var B;
    B = b2Mat22.FromVV(b2Math.AbsV(A.col1), b2Math.AbsV(A.col2));
    return B;
  };

  b2Math.Min = function(a, b) {
    if (a === void 0) {
      a = 0;
    }
    if (b === void 0) {
      b = 0;
    }
    return (a < b ? a : b);
  };

  b2Math.MinV = function(a, b) {
    var c;
    c = new b2Vec2(b2Math.Min(a.x, b.x), b2Math.Min(a.y, b.y));
    return c;
  };

  b2Math.Max = function(a, b) {
    if (a === void 0) {
      a = 0;
    }
    if (b === void 0) {
      b = 0;
    }
    return (a > b ? a : b);
  };

  b2Math.MaxV = function(a, b) {
    var c;
    c = new b2Vec2(b2Math.Max(a.x, b.x), b2Math.Max(a.y, b.y));
    return c;
  };

  b2Math.Clamp = function(a, low, high) {
    if (a === void 0) {
      a = 0;
    }
    if (low === void 0) {
      low = 0;
    }
    if (high === void 0) {
      high = 0;
    }
    return (a < low ? low : (a > high ? high : a));
  };

  b2Math.ClampV = function(a, low, high) {
    return b2Math.MaxV(low, b2Math.MinV(a, high));
  };

  b2Math.Swap = function(a, b) {
    var tmp;
    tmp = a[0];
    a[0] = b[0];
    b[0] = tmp;
  };

  b2Math.Random = function() {
    return Math.random() * 2 - 1;
  };

  b2Math.RandomRange = function(lo, hi) {
    var r;
    if (lo === void 0) {
      lo = 0;
    }
    if (hi === void 0) {
      hi = 0;
    }
    r = Math.random();
    r = (hi - lo) * r + lo;
    return r;
  };

  b2Math.NextPowerOfTwo = function(x) {
    if (x === void 0) {
      x = 0;
    }
    x |= (x >> 1) & 0x7FFFFFFF;
    x |= (x >> 2) & 0x3FFFFFFF;
    x |= (x >> 4) & 0x0FFFFFFF;
    x |= (x >> 8) & 0x00FFFFFF;
    x |= (x >> 16) & 0x0000FFFF;
    return x + 1;
  };

  b2Math.IsPowerOfTwo = function(x) {
    var result;
    if (x === void 0) {
      x = 0;
    }
    result = x > 0 && (x & (x - 1)) === 0;
    return result;
  };

  b2Math.b2Vec2_zero = new b2Vec2(0.0, 0.0);

  b2Math.b2Mat22_identity = b2Mat22.FromVV(new b2Vec2(1.0, 0.0), new b2Vec2(0.0, 1.0));

  b2Math.b2Transform_identity = new b2Transform(b2Math.b2Vec2_zero, b2Math.b2Mat22_identity);

  return b2Math;

})();

//# sourceMappingURL=b2Math.js.map

},{"../../index":103}],41:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Sweep = (function() {
  b2Sweep.prototype.localCenter = null;

  b2Sweep.prototype.c0 = null;

  b2Sweep.prototype.c = null;

  b2Sweep.prototype.a0 = null;

  b2Sweep.prototype.a = null;

  b2Sweep.prototype.t0 = null;

  function b2Sweep() {
    this.localCenter = new b2Vec2();
    this.c0 = new b2Vec2;
    this.c = new b2Vec2();
    return;
  }

  b2Sweep.prototype.Set = function(other) {
    this.localCenter.SetV(other.localCenter);
    this.c0.SetV(other.c0);
    this.c.SetV(other.c);
    this.a0 = other.a0;
    this.a = other.a;
    this.t0 = other.t0;
  };

  b2Sweep.prototype.Copy = function() {
    var copy;
    copy = new b2Sweep();
    copy.localCenter.SetV(this.localCenter);
    copy.c0.SetV(this.c0);
    copy.c.SetV(this.c);
    copy.a0 = this.a0;
    copy.a = this.a;
    copy.t0 = this.t0;
    return copy;
  };

  b2Sweep.prototype.GetTransform = function(xf, alpha) {
    var angle, tMat;
    if (alpha === void 0) {
      alpha = 0;
    }
    xf.position.x = (1.0 - alpha) * this.c0.x + alpha * this.c.x;
    xf.position.y = (1.0 - alpha) * this.c0.y + alpha * this.c.y;
    angle = (1.0 - alpha) * this.a0 + alpha * this.a;
    xf.R.Set(angle);
    tMat = xf.R;
    xf.position.x -= tMat.col1.x * this.localCenter.x + tMat.col2.x * this.localCenter.y;
    xf.position.y -= tMat.col1.y * this.localCenter.x + tMat.col2.y * this.localCenter.y;
  };

  b2Sweep.prototype.Advance = function(t) {
    var alpha;
    if (t === void 0) {
      t = 0;
    }
    if (this.t0 < t && 1.0 - this.t0 > Number.MIN_VALUE) {
      alpha = (t - this.t0) / (1.0 - this.t0);
      this.c0.x = (1.0 - alpha) * this.c0.x + alpha * this.c.x;
      this.c0.y = (1.0 - alpha) * this.c0.y + alpha * this.c.y;
      this.a0 = (1.0 - alpha) * this.a0 + alpha * this.a;
      this.t0 = t;
    }
  };

  return b2Sweep;

})();

//# sourceMappingURL=b2Sweep.js.map

},{"../../index":103}],42:[function(require,module,exports){
var Box2D, b2Mat22, b2Vec2;

Box2D = require('../../index');

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Common.Math.b2Transform = (function() {
  b2Transform.prototype.position = null;

  b2Transform.prototype.R = null;

  function b2Transform(pos, r) {
    this.position = new b2Vec2;
    this.R = new b2Mat22();
    if (pos === void 0) {
      pos = null;
    }
    if (r === void 0) {
      r = null;
    }
    if (pos) {
      this.position.SetV(pos);
      this.R.SetM(r);
    }
    return;
  }

  b2Transform.prototype.Initialize = function(pos, r) {
    this.position.SetV(pos);
    this.R.SetM(r);
  };

  b2Transform.prototype.SetIdentity = function() {
    this.position.SetZero();
    this.R.SetIdentity();
  };

  b2Transform.prototype.Set = function(x) {
    this.position.SetV(x.position);
    this.R.SetM(x.R);
  };

  b2Transform.prototype.GetAngle = function() {
    return Math.atan2(this.R.col1.y, this.R.col1.x);
  };

  return b2Transform;

})();

//# sourceMappingURL=b2Transform.js.map

},{"../../index":103}],43:[function(require,module,exports){
var Box2D, b2Math;

Box2D = require('../../index');

b2Math = Box2D.Common.Math.b2Math;

Box2D.Common.Math.b2Vec2 = (function() {
  b2Vec2.prototype.x = 0;

  b2Vec2.prototype.y = 0;

  function b2Vec2(x_, y_) {
    if (x_ === void 0) {
      x_ = 0;
    }
    if (y_ === void 0) {
      y_ = 0;
    }
    this.x = x_;
    this.y = y_;
    return;
  }

  b2Vec2.prototype.SetZero = function() {
    this.x = 0.0;
    this.y = 0.0;
  };

  b2Vec2.prototype.Set = function(x_, y_) {
    if (x_ === void 0) {
      x_ = 0;
    }
    if (y_ === void 0) {
      y_ = 0;
    }
    this.x = x_;
    this.y = y_;
  };

  b2Vec2.prototype.SetV = function(v) {
    this.x = v.x;
    this.y = v.y;
  };

  b2Vec2.prototype.GetNegative = function() {
    return new b2Vec2(-this.x, -this.y);
  };

  b2Vec2.prototype.NegativeSelf = function() {
    this.x = -this.x;
    this.y = -this.y;
  };

  b2Vec2.Make = function(x_, y_) {
    if (x_ === void 0) {
      x_ = 0;
    }
    if (y_ === void 0) {
      y_ = 0;
    }
    return new b2Vec2(x_, y_);
  };

  b2Vec2.prototype.Copy = function() {
    return new b2Vec2(this.x, this.y);
  };

  b2Vec2.prototype.Add = function(v) {
    this.x += v.x;
    this.y += v.y;
  };

  b2Vec2.prototype.Subtract = function(v) {
    this.x -= v.x;
    this.y -= v.y;
  };

  b2Vec2.prototype.Multiply = function(a) {
    if (a === void 0) {
      a = 0;
    }
    this.x *= a;
    this.y *= a;
  };

  b2Vec2.prototype.MulM = function(A) {
    var tX;
    tX = this.x;
    this.x = A.col1.x * tX + A.col2.x * this.y;
    this.y = A.col1.y * tX + A.col2.y * this.y;
  };

  b2Vec2.prototype.MulTM = function(A) {
    var tX;
    tX = b2Math.Dot(this, A.col1);
    this.y = b2Math.Dot(this, A.col2);
    this.x = tX;
  };

  b2Vec2.prototype.CrossVF = function(s) {
    var tX;
    if (s === void 0) {
      s = 0;
    }
    tX = this.x;
    this.x = s * this.y;
    this.y = -s * tX;
  };

  b2Vec2.prototype.CrossFV = function(s) {
    var tX;
    if (s === void 0) {
      s = 0;
    }
    tX = this.x;
    this.x = -s * this.y;
    this.y = s * tX;
  };

  b2Vec2.prototype.MinV = function(b) {
    this.x = (this.x < b.x ? this.x : b.x);
    this.y = (this.y < b.y ? this.y : b.y);
  };

  b2Vec2.prototype.MaxV = function(b) {
    this.x = (this.x > b.x ? this.x : b.x);
    this.y = (this.y > b.y ? this.y : b.y);
  };

  b2Vec2.prototype.Abs = function() {
    if (this.x < 0) {
      this.x = -this.x;
    }
    if (this.y < 0) {
      this.y = -this.y;
    }
  };

  b2Vec2.prototype.Length = function() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  };

  b2Vec2.prototype.LengthSquared = function() {
    return this.x * this.x + this.y * this.y;
  };

  b2Vec2.prototype.Normalize = function() {
    var invLength, length;
    length = Math.sqrt(this.x * this.x + this.y * this.y);
    if (length < Number.MIN_VALUE) {
      return 0.0;
    }
    invLength = 1.0 / length;
    this.x *= invLength;
    this.y *= invLength;
    return length;
  };

  b2Vec2.prototype.IsValid = function() {
    return b2Math.IsValid(this.x) && b2Math.IsValid(this.y);
  };

  return b2Vec2;

})();

//# sourceMappingURL=b2Vec2.js.map

},{"../../index":103}],44:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Common.Math.b2Vec3 = (function() {
  b2Vec3.prototype.x = 0;

  b2Vec3.prototype.y = 0;

  b2Vec3.prototype.z = 0;

  function b2Vec3(x, y, z) {
    if (x === void 0) {
      x = 0;
    }
    if (y === void 0) {
      y = 0;
    }
    if (z === void 0) {
      z = 0;
    }
    this.x = x;
    this.y = y;
    this.z = z;
    return;
  }

  b2Vec3.prototype.SetZero = function() {
    this.x = this.y = this.z = 0.0;
  };

  b2Vec3.prototype.Set = function(x, y, z) {
    if (x === void 0) {
      x = 0;
    }
    if (y === void 0) {
      y = 0;
    }
    if (z === void 0) {
      z = 0;
    }
    this.x = x;
    this.y = y;
    this.z = z;
  };

  b2Vec3.prototype.SetV = function(v) {
    this.x = v.x;
    this.y = v.y;
    this.z = v.z;
  };

  b2Vec3.prototype.GetNegative = function() {
    return new b2Vec3(-this.x, -this.y, -this.z);
  };

  b2Vec3.prototype.NegativeSelf = function() {
    this.x = -this.x;
    this.y = -this.y;
    this.z = -this.z;
  };

  b2Vec3.prototype.Copy = function() {
    return new b2Vec3(this.x, this.y, this.z);
  };

  b2Vec3.prototype.Add = function(v) {
    this.x += v.x;
    this.y += v.y;
    this.z += v.z;
  };

  b2Vec3.prototype.Subtract = function(v) {
    this.x -= v.x;
    this.y -= v.y;
    this.z -= v.z;
  };

  b2Vec3.prototype.Multiply = function(a) {
    if (a === void 0) {
      a = 0;
    }
    this.x *= a;
    this.y *= a;
    this.z *= a;
  };

  return b2Vec3;

})();

//# sourceMappingURL=b2Vec3.js.map

},{"../../index":103}],45:[function(require,module,exports){
var Box2D, b2BodyDef, b2Fixture, b2FixtureDef, b2Math, b2Sweep, b2Transform, b2Vec2;

Box2D = require('../index');

b2Math = Box2D.Common.Math.b2Math;

b2Sweep = Box2D.Common.Math.b2Sweep;

b2Transform = Box2D.Common.Math.b2Transform;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Fixture = Box2D.Dynamics.b2Fixture;

b2FixtureDef = Box2D.Dynamics.b2FixtureDef;

b2BodyDef = Box2D.Dynamics.b2BodyDef;

Box2D.Dynamics.b2Body = (function() {
  b2Body.s_xf1 = new b2Transform();

  b2Body.e_islandFlag = 0x0001;

  b2Body.e_awakeFlag = 0x0002;

  b2Body.e_allowSleepFlag = 0x0004;

  b2Body.e_bulletFlag = 0x0008;

  b2Body.e_fixedRotationFlag = 0x0010;

  b2Body.e_activeFlag = 0x0020;

  b2Body.b2_staticBody = 0;

  b2Body.b2_kinematicBody = 1;

  b2Body.b2_dynamicBody = 2;

  b2Body.prototype.m_xf = null;

  b2Body.prototype.m_sweep = null;

  b2Body.prototype.m_linearVelocity = null;

  b2Body.prototype.m_force = null;

  b2Body.prototype.m_flags = 0;

  b2Body.prototype.m_world = null;

  b2Body.prototype.m_jointList = null;

  b2Body.prototype.m_controllerList = null;

  b2Body.prototype.m_contactList = null;

  b2Body.prototype.m_controllerCount = null;

  b2Body.prototype.m_prev = null;

  b2Body.prototype.m_next = null;

  b2Body.prototype.m_linearVelocity = null;

  b2Body.prototype.m_angularVelocity = null;

  b2Body.prototype.m_linearDamping = null;

  b2Body.prototype.m_angularDamping = null;

  b2Body.prototype.m_force = null;

  b2Body.prototype.m_torque = 0;

  b2Body.prototype.m_sleepTime = 0;

  b2Body.prototype.m_type = 0;

  b2Body.prototype.m_mass = 0;

  b2Body.prototype.m_invMass = 0;

  b2Body.prototype.m_I = 0;

  b2Body.prototype.m_invI = 0;

  b2Body.prototype.m_inertiaScale = 0;

  b2Body.prototype.m_userData = null;

  b2Body.prototype.m_fixtureList = null;

  b2Body.prototype.m_fixtureCount = 0;

  function b2Body(bd, world) {
    var tMat, tVec;
    this.m_xf = new b2Transform();
    this.m_sweep = new b2Sweep();
    this.m_linearVelocity = new b2Vec2();
    this.m_force = new b2Vec2();
    this.m_flags = 0;
    if (bd.bullet) {
      this.m_flags |= b2Body.e_bulletFlag;
    }
    if (bd.fixedRotation) {
      this.m_flags |= b2Body.e_fixedRotationFlag;
    }
    if (bd.allowSleep) {
      this.m_flags |= b2Body.e_allowSleepFlag;
    }
    if (bd.awake) {
      this.m_flags |= b2Body.e_awakeFlag;
    }
    if (bd.active) {
      this.m_flags |= b2Body.e_activeFlag;
    }
    this.m_world = world;
    this.m_xf.position.SetV(bd.position);
    this.m_xf.R.Set(bd.angle);
    this.m_sweep.localCenter.SetZero();
    this.m_sweep.t0 = 1.0;
    this.m_sweep.a0 = this.m_sweep.a = bd.angle;
    tMat = this.m_xf.R;
    tVec = this.m_sweep.localCenter;
    this.m_sweep.c.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    this.m_sweep.c.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    this.m_sweep.c.x += this.m_xf.position.x;
    this.m_sweep.c.y += this.m_xf.position.y;
    this.m_sweep.c0.SetV(this.m_sweep.c);
    this.m_jointList = null;
    this.m_controllerList = null;
    this.m_contactList = null;
    this.m_controllerCount = 0;
    this.m_prev = null;
    this.m_next = null;
    this.m_linearVelocity.SetV(bd.linearVelocity);
    this.m_angularVelocity = bd.angularVelocity;
    this.m_linearDamping = bd.linearDamping;
    this.m_angularDamping = bd.angularDamping;
    this.m_force.Set(0.0, 0.0);
    this.m_torque = 0.0;
    this.m_sleepTime = 0.0;
    this.m_type = bd.type;
    if (this.m_type === b2Body.b2_dynamicBody) {
      this.m_mass = 1.0;
      this.m_invMass = 1.0;
    } else {
      this.m_mass = 0.0;
      this.m_invMass = 0.0;
    }
    this.m_I = 0.0;
    this.m_invI = 0.0;
    this.m_inertiaScale = bd.inertiaScale;
    this.m_userData = bd.userData;
    this.m_fixtureList = null;
    this.m_fixtureCount = 0;
    return;
  }

  b2Body.prototype.ConnectEdges = function(s1, s2, angle1) {
    var angle2, convex, core, coreOffset, cornerDir;
    if (angle1 === void 0) {
      angle1 = 0;
    }
    angle2 = Math.atan2(s2.GetDirectionVector().y, s2.GetDirectionVector().x);
    coreOffset = Math.tan((angle2 - angle1) * 0.5);
    core = b2Math.MulFV(coreOffset, s2.GetDirectionVector());
    core = b2Math.SubtractVV(core, s2.GetNormalVector());
    core = b2Math.MulFV(b2Settings.b2_toiSlop, core);
    core = b2Math.AddVV(core, s2.GetVertex1());
    cornerDir = b2Math.AddVV(s1.GetDirectionVector(), s2.GetDirectionVector());
    cornerDir.Normalize();
    convex = b2Math.Dot(s1.GetDirectionVector(), s2.GetNormalVector()) > 0.0;
    s1.SetNextEdge(s2, core, cornerDir, convex);
    s2.SetPrevEdge(s1, core, cornerDir, convex);
    return angle2;
  };

  b2Body.prototype.CreateFixture = function(def) {
    var broadPhase, fixture;
    if (this.m_world.IsLocked() === true) {
      return null;
    }
    fixture = new b2Fixture();
    fixture.Create(this, this.m_xf, def);
    if (this.m_flags & b2Body.e_activeFlag) {
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      fixture.CreateProxy(broadPhase, this.m_xf);
    }
    fixture.m_next = this.m_fixtureList;
    this.m_fixtureList = fixture;
    ++this.m_fixtureCount;
    fixture.m_body = this;
    if (fixture.m_density > 0.0) {
      this.ResetMassData();
    }
    this.m_world.m_flags |= b2World.e_newFixture;
    return fixture;
  };

  b2Body.prototype.CreateFixture2 = function(shape, density) {
    var def;
    if (density === void 0) {
      density = 0.0;
    }
    def = new b2FixtureDef();
    def.shape = shape;
    def.density = density;
    return this.CreateFixture(def);
  };

  b2Body.prototype.DestroyFixture = function(fixture) {
    var broadPhase, c, edge, fixtureA, fixtureB, found, node, ppF;
    if (this.m_world.IsLocked() === true) {
      return;
    }
    node = this.m_fixtureList;
    ppF = null;
    found = false;
    while (node != null) {
      if (node === fixture) {
        if (ppF) {
          ppF.m_next = fixture.m_next;
        } else {
          this.m_fixtureList = fixture.m_next;
        }
        found = true;
        break;
      }
      ppF = node;
      node = node.m_next;
    }
    edge = this.m_contactList;
    while (edge) {
      c = edge.contact;
      edge = edge.next;
      fixtureA = c.GetFixtureA();
      fixtureB = c.GetFixtureB();
      if (fixture === fixtureA || fixture === fixtureB) {
        this.m_world.m_contactManager.Destroy(c);
      }
    }
    if (this.m_flags & b2Body.e_activeFlag) {
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      fixture.DestroyProxy(broadPhase);
    } else {

    }
    fixture.Destroy();
    fixture.m_body = null;
    fixture.m_next = null;
    --this.m_fixtureCount;
    this.ResetMassData();
  };

  b2Body.prototype.SetPositionAndAngle = function(position, angle) {
    var broadPhase, f, tMat, tVec;
    if (angle === void 0) {
      angle = 0;
    }
    f = void 0;
    if (this.m_world.IsLocked() === true) {
      return;
    }
    this.m_xf.R.Set(angle);
    this.m_xf.position.SetV(position);
    tMat = this.m_xf.R;
    tVec = this.m_sweep.localCenter;
    this.m_sweep.c.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
    this.m_sweep.c.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
    this.m_sweep.c.x += this.m_xf.position.x;
    this.m_sweep.c.y += this.m_xf.position.y;
    this.m_sweep.c0.SetV(this.m_sweep.c);
    this.m_sweep.a0 = this.m_sweep.a = angle;
    broadPhase = this.m_world.m_contactManager.m_broadPhase;
    f = this.m_fixtureList;
    while (f) {
      f.Synchronize(broadPhase, this.m_xf, this.m_xf);
      f = f.m_next;
    }
    this.m_world.m_contactManager.FindNewContacts();
  };

  b2Body.prototype.SetTransform = function(xf) {
    this.SetPositionAndAngle(xf.position, xf.GetAngle());
  };

  b2Body.prototype.GetTransform = function() {
    return this.m_xf;
  };

  b2Body.prototype.GetPosition = function() {
    return this.m_xf.position;
  };

  b2Body.prototype.SetPosition = function(position) {
    this.SetPositionAndAngle(position, this.GetAngle());
  };

  b2Body.prototype.GetAngle = function() {
    return this.m_sweep.a;
  };

  b2Body.prototype.SetAngle = function(angle) {
    if (angle === void 0) {
      angle = 0;
    }
    this.SetPositionAndAngle(this.GetPosition(), angle);
  };

  b2Body.prototype.GetWorldCenter = function() {
    return this.m_sweep.c;
  };

  b2Body.prototype.GetLocalCenter = function() {
    return this.m_sweep.localCenter;
  };

  b2Body.prototype.SetLinearVelocity = function(v) {
    if (this.m_type === b2Body.b2_staticBody) {
      return;
    }
    this.m_linearVelocity.SetV(v);
  };

  b2Body.prototype.GetLinearVelocity = function() {
    return this.m_linearVelocity;
  };

  b2Body.prototype.SetAngularVelocity = function(omega) {
    if (omega === void 0) {
      omega = 0;
    }
    if (this.m_type === b2Body.b2_staticBody) {
      return;
    }
    this.m_angularVelocity = omega;
  };

  b2Body.prototype.GetAngularVelocity = function() {
    return this.m_angularVelocity;
  };

  b2Body.prototype.GetDefinition = function() {
    var bd;
    bd = new b2BodyDef();
    bd.type = this.GetType();
    bd.allowSleep = (this.m_flags & b2Body.e_allowSleepFlag) === b2Body.e_allowSleepFlag;
    bd.angle = this.GetAngle();
    bd.angularDamping = this.m_angularDamping;
    bd.angularVelocity = this.m_angularVelocity;
    bd.fixedRotation = (this.m_flags & b2Body.e_fixedRotationFlag) === b2Body.e_fixedRotationFlag;
    bd.bullet = (this.m_flags & b2Body.e_bulletFlag) === b2Body.e_bulletFlag;
    bd.awake = (this.m_flags & b2Body.e_awakeFlag) === b2Body.e_awakeFlag;
    bd.linearDamping = this.m_linearDamping;
    bd.linearVelocity.SetV(this.GetLinearVelocity());
    bd.position = this.GetPosition();
    bd.userData = this.GetUserData();
    return bd;
  };

  b2Body.prototype.ApplyForce = function(force, point) {
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    if (this.IsAwake() === false) {
      this.SetAwake(true);
    }
    this.m_force.x += force.x;
    this.m_force.y += force.y;
    this.m_torque += (point.x - this.m_sweep.c.x) * force.y - (point.y - this.m_sweep.c.y) * force.x;
  };

  b2Body.prototype.ApplyTorque = function(torque) {
    if (torque === void 0) {
      torque = 0;
    }
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    if (this.IsAwake() === false) {
      this.SetAwake(true);
    }
    this.m_torque += torque;
  };

  b2Body.prototype.ApplyImpulse = function(impulse, point) {
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    if (this.IsAwake() === false) {
      this.SetAwake(true);
    }
    this.m_linearVelocity.x += this.m_invMass * impulse.x;
    this.m_linearVelocity.y += this.m_invMass * impulse.y;
    this.m_angularVelocity += this.m_invI * ((point.x - this.m_sweep.c.x) * impulse.y - (point.y - this.m_sweep.c.y) * impulse.x);
  };

  b2Body.prototype.Split = function(callback) {
    var angularVelocity, body1, body2, center, center1, center2, f, linearVelocity, next, prev, velocity1, velocity2;
    linearVelocity = this.GetLinearVelocity().Copy();
    angularVelocity = this.GetAngularVelocity();
    center = this.GetWorldCenter();
    body1 = this;
    body2 = this.m_world.CreateBody(this.GetDefinition());
    prev = void 0;
    f = body1.m_fixtureList;
    while (f) {
      if (callback(f)) {
        next = f.m_next;
        if (prev) {
          prev.m_next = next;
        } else {
          body1.m_fixtureList = next;
        }
        body1.m_fixtureCount--;
        f.m_next = body2.m_fixtureList;
        body2.m_fixtureList = f;
        body2.m_fixtureCount++;
        f.m_body = body2;
        f = next;
      } else {
        prev = f;
        f = f.m_next;
      }
    }
    body1.ResetMassData();
    body2.ResetMassData();
    center1 = body1.GetWorldCenter();
    center2 = body2.GetWorldCenter();
    velocity1 = b2Math.AddVV(linearVelocity, b2Math.CrossFV(angularVelocity, b2Math.SubtractVV(center1, center)));
    velocity2 = b2Math.AddVV(linearVelocity, b2Math.CrossFV(angularVelocity, b2Math.SubtractVV(center2, center)));
    body1.SetLinearVelocity(velocity1);
    body2.SetLinearVelocity(velocity2);
    body1.SetAngularVelocity(angularVelocity);
    body2.SetAngularVelocity(angularVelocity);
    body1.SynchronizeFixtures();
    body2.SynchronizeFixtures();
    return body2;
  };

  b2Body.prototype.Merge = function(other) {
    var angular, angular1, body1, body2, center1, center2, f, next, velocity1, velocity2;
    f = void 0;
    f = other.m_fixtureList;
    while (f) {
      next = f.m_next;
      other.m_fixtureCount--;
      f.m_next = this.m_fixtureList;
      this.m_fixtureList = f;
      this.m_fixtureCount++;
      f.m_body = body2;
      f = next;
    }
    body1.m_fixtureCount = 0;
    body1 = this;
    body2 = other;
    center1 = body1.GetWorldCenter();
    center2 = body2.GetWorldCenter();
    velocity1 = body1.GetLinearVelocity().Copy();
    velocity2 = body2.GetLinearVelocity().Copy();
    angular1 = body1.GetAngularVelocity();
    angular = body2.GetAngularVelocity();
    body1.ResetMassData();
    this.SynchronizeFixtures();
  };

  b2Body.prototype.GetMass = function() {
    return this.m_mass;
  };

  b2Body.prototype.GetInertia = function() {
    return this.m_I;
  };

  b2Body.prototype.GetMassData = function(data) {
    data.mass = this.m_mass;
    data.I = this.m_I;
    data.center.SetV(this.m_sweep.localCenter);
  };

  b2Body.prototype.SetMassData = function(massData) {
    var oldCenter;
    b2Settings.b2Assert(this.m_world.IsLocked() === false);
    if (this.m_world.IsLocked() === true) {
      return;
    }
    if (this.m_type !== b2Body.b2_dynamicBody) {
      return;
    }
    this.m_invMass = 0.0;
    this.m_I = 0.0;
    this.m_invI = 0.0;
    this.m_mass = massData.mass;
    if (this.m_mass <= 0.0) {
      this.m_mass = 1.0;
    }
    this.m_invMass = 1.0 / this.m_mass;
    if (massData.I > 0.0 && (this.m_flags & b2Body.e_fixedRotationFlag) === 0) {
      this.m_I = massData.I - this.m_mass * (massData.center.x * massData.center.x + massData.center.y * massData.center.y);
      this.m_invI = 1.0 / this.m_I;
    }
    oldCenter = this.m_sweep.c.Copy();
    this.m_sweep.localCenter.SetV(massData.center);
    this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf, this.m_sweep.localCenter));
    this.m_sweep.c.SetV(this.m_sweep.c0);
    this.m_linearVelocity.x += this.m_angularVelocity * (-(this.m_sweep.c.y - oldCenter.y));
    this.m_linearVelocity.y += this.m_angularVelocity * (+(this.m_sweep.c.x - oldCenter.x));
  };

  b2Body.prototype.ResetMassData = function() {
    var center, f, massData, oldCenter;
    this.m_mass = 0.0;
    this.m_invMass = 0.0;
    this.m_I = 0.0;
    this.m_invI = 0.0;
    this.m_sweep.localCenter.SetZero();
    if (this.m_type === b2Body.b2_staticBody || this.m_type === b2Body.b2_kinematicBody) {
      return;
    }
    center = b2Vec2.Make(0, 0);
    f = this.m_fixtureList;
    while (f) {
      if (f.m_density === 0.0) {
        continue;
      }
      massData = f.GetMassData();
      this.m_mass += massData.mass;
      center.x += massData.center.x * massData.mass;
      center.y += massData.center.y * massData.mass;
      this.m_I += massData.I;
      f = f.m_next;
    }
    if (this.m_mass > 0.0) {
      this.m_invMass = 1.0 / this.m_mass;
      center.x *= this.m_invMass;
      center.y *= this.m_invMass;
    } else {
      this.m_mass = 1.0;
      this.m_invMass = 1.0;
    }
    if (this.m_I > 0.0 && (this.m_flags & b2Body.e_fixedRotationFlag) === 0) {
      this.m_I -= this.m_mass * (center.x * center.x + center.y * center.y);
      this.m_I *= this.m_inertiaScale;
      b2Settings.b2Assert(this.m_I > 0);
      this.m_invI = 1.0 / this.m_I;
    } else {
      this.m_I = 0.0;
      this.m_invI = 0.0;
    }
    oldCenter = this.m_sweep.c.Copy();
    this.m_sweep.localCenter.SetV(center);
    this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf, this.m_sweep.localCenter));
    this.m_sweep.c.SetV(this.m_sweep.c0);
    this.m_linearVelocity.x += this.m_angularVelocity * (-(this.m_sweep.c.y - oldCenter.y));
    this.m_linearVelocity.y += this.m_angularVelocity * (+(this.m_sweep.c.x - oldCenter.x));
  };

  b2Body.prototype.GetWorldPoint = function(localPoint) {
    var A, u;
    A = this.m_xf.R;
    u = new b2Vec2(A.col1.x * localPoint.x + A.col2.x * localPoint.y, A.col1.y * localPoint.x + A.col2.y * localPoint.y);
    u.x += this.m_xf.position.x;
    u.y += this.m_xf.position.y;
    return u;
  };

  b2Body.prototype.GetWorldVector = function(localVector) {
    return b2Math.MulMV(this.m_xf.R, localVector);
  };

  b2Body.prototype.GetLocalPoint = function(worldPoint) {
    return b2Math.MulXT(this.m_xf, worldPoint);
  };

  b2Body.prototype.GetLocalVector = function(worldVector) {
    return b2Math.MulTMV(this.m_xf.R, worldVector);
  };

  b2Body.prototype.GetLinearVelocityFromWorldPoint = function(worldPoint) {
    return new b2Vec2(this.m_linearVelocity.x - this.m_angularVelocity * (worldPoint.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (worldPoint.x - this.m_sweep.c.x));
  };

  b2Body.prototype.GetLinearVelocityFromLocalPoint = function(localPoint) {
    var A, worldPoint;
    A = this.m_xf.R;
    worldPoint = new b2Vec2(A.col1.x * localPoint.x + A.col2.x * localPoint.y, A.col1.y * localPoint.x + A.col2.y * localPoint.y);
    worldPoint.x += this.m_xf.position.x;
    worldPoint.y += this.m_xf.position.y;
    return new b2Vec2(this.m_linearVelocity.x - this.m_angularVelocity * (worldPoint.y - this.m_sweep.c.y), this.m_linearVelocity.y + this.m_angularVelocity * (worldPoint.x - this.m_sweep.c.x));
  };

  b2Body.prototype.GetLinearDamping = function() {
    return this.m_linearDamping;
  };

  b2Body.prototype.SetLinearDamping = function(linearDamping) {
    if (linearDamping === void 0) {
      linearDamping = 0;
    }
    this.m_linearDamping = linearDamping;
  };

  b2Body.prototype.GetAngularDamping = function() {
    return this.m_angularDamping;
  };

  b2Body.prototype.SetAngularDamping = function(angularDamping) {
    if (angularDamping === void 0) {
      angularDamping = 0;
    }
    this.m_angularDamping = angularDamping;
  };

  b2Body.prototype.SetType = function(type) {
    var ce;
    if (type === void 0) {
      type = 0;
    }
    if (this.m_type === type) {
      return;
    }
    this.m_type = type;
    this.ResetMassData();
    if (this.m_type === b2Body.b2_staticBody) {
      this.m_linearVelocity.SetZero();
      this.m_angularVelocity = 0.0;
    }
    this.SetAwake(true);
    this.m_force.SetZero();
    this.m_torque = 0.0;
    ce = this.m_contactList;
    while (ce) {
      ce.contact.FlagForFiltering();
      ce = ce.next;
    }
  };

  b2Body.prototype.GetType = function() {
    return this.m_type;
  };

  b2Body.prototype.SetBullet = function(flag) {
    if (flag) {
      this.m_flags |= b2Body.e_bulletFlag;
    } else {
      this.m_flags &= ~b2Body.e_bulletFlag;
    }
  };

  b2Body.prototype.IsBullet = function() {
    return (this.m_flags & b2Body.e_bulletFlag) === b2Body.e_bulletFlag;
  };

  b2Body.prototype.SetSleepingAllowed = function(flag) {
    if (flag) {
      this.m_flags |= b2Body.e_allowSleepFlag;
    } else {
      this.m_flags &= ~b2Body.e_allowSleepFlag;
      this.SetAwake(true);
    }
  };

  b2Body.prototype.SetAwake = function(flag) {
    if (flag) {
      this.m_flags |= b2Body.e_awakeFlag;
      this.m_sleepTime = 0.0;
    } else {
      this.m_flags &= ~b2Body.e_awakeFlag;
      this.m_sleepTime = 0.0;
      this.m_linearVelocity.SetZero();
      this.m_angularVelocity = 0.0;
      this.m_force.SetZero();
      this.m_torque = 0.0;
    }
  };

  b2Body.prototype.IsAwake = function() {
    return (this.m_flags & b2Body.e_awakeFlag) === b2Body.e_awakeFlag;
  };

  b2Body.prototype.SetFixedRotation = function(fixed) {
    if (fixed) {
      this.m_flags |= b2Body.e_fixedRotationFlag;
    } else {
      this.m_flags &= ~b2Body.e_fixedRotationFlag;
    }
    this.ResetMassData();
  };

  b2Body.prototype.IsFixedRotation = function() {
    return (this.m_flags & b2Body.e_fixedRotationFlag) === b2Body.e_fixedRotationFlag;
  };

  b2Body.prototype.SetActive = function(flag) {
    var broadPhase, ce, ce0, f;
    if (flag === this.IsActive()) {
      return;
    }
    broadPhase = void 0;
    f = void 0;
    if (flag) {
      this.m_flags |= b2Body.e_activeFlag;
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      f = this.m_fixtureList;
      while (f) {
        f.CreateProxy(broadPhase, this.m_xf);
        f = f.m_next;
      }
    } else {
      this.m_flags &= ~b2Body.e_activeFlag;
      broadPhase = this.m_world.m_contactManager.m_broadPhase;
      f = this.m_fixtureList;
      while (f) {
        f.DestroyProxy(broadPhase);
        f = f.m_next;
      }
      ce = this.m_contactList;
      while (ce) {
        ce0 = ce;
        ce = ce.next;
        this.m_world.m_contactManager.Destroy(ce0.contact);
      }
      this.m_contactList = null;
    }
  };

  b2Body.prototype.IsActive = function() {
    return (this.m_flags & b2Body.e_activeFlag) === b2Body.e_activeFlag;
  };

  b2Body.prototype.IsSleepingAllowed = function() {
    return (this.m_flags & b2Body.e_allowSleepFlag) === b2Body.e_allowSleepFlag;
  };

  b2Body.prototype.GetFixtureList = function() {
    return this.m_fixtureList;
  };

  b2Body.prototype.GetJointList = function() {
    return this.m_jointList;
  };

  b2Body.prototype.GetControllerList = function() {
    return this.m_controllerList;
  };

  b2Body.prototype.GetContactList = function() {
    return this.m_contactList;
  };

  b2Body.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Body.prototype.GetUserData = function() {
    return this.m_userData;
  };

  b2Body.prototype.SetUserData = function(data) {
    this.m_userData = data;
  };

  b2Body.prototype.GetWorld = function() {
    return this.m_world;
  };

  b2Body.prototype.SynchronizeFixtures = function() {
    var broadPhase, f, tMat, tVec, xf1;
    xf1 = b2Body.s_xf1;
    xf1.R.Set(this.m_sweep.a0);
    tMat = xf1.R;
    tVec = this.m_sweep.localCenter;
    xf1.position.x = this.m_sweep.c0.x - (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    xf1.position.y = this.m_sweep.c0.y - (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
    f = void 0;
    broadPhase = this.m_world.m_contactManager.m_broadPhase;
    f = this.m_fixtureList;
    while (f) {
      f.Synchronize(broadPhase, xf1, this.m_xf);
      f = f.m_next;
    }
  };

  b2Body.prototype.SynchronizeTransform = function() {
    var tMat, tVec;
    this.m_xf.R.Set(this.m_sweep.a);
    tMat = this.m_xf.R;
    tVec = this.m_sweep.localCenter;
    this.m_xf.position.x = this.m_sweep.c.x - (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
    this.m_xf.position.y = this.m_sweep.c.y - (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
  };

  b2Body.prototype.ShouldCollide = function(other) {
    var jn;
    if (this.m_type !== b2Body.b2_dynamicBody && other.m_type !== b2Body.b2_dynamicBody) {
      return false;
    }
    jn = this.m_jointList;
    while (jn) {
      if (jn.other === other) {
        if (jn.joint.m_collideConnected === false) {
          return false;
        }
      }
      jn = jn.next;
    }
    return true;
  };

  b2Body.prototype.Advance = function(t) {
    if (t === void 0) {
      t = 0;
    }
    this.m_sweep.Advance(t);
    this.m_sweep.c.SetV(this.m_sweep.c0);
    this.m_sweep.a = this.m_sweep.a0;
    this.SynchronizeTransform();
  };

  return b2Body;

})();

//# sourceMappingURL=b2Body.js.map

},{"../index":103}],46:[function(require,module,exports){
var Box2D, b2Body, b2Vec2;

Box2D = require('../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Body = Box2D.Dynamics.b2Body;

Box2D.Dynamics.b2BodyDef = (function() {
  b2BodyDef.prototype.position = null;

  b2BodyDef.prototype.linearVelocity = null;

  b2BodyDef.prototype.userData = null;

  b2BodyDef.prototype.angle = 0.0;

  b2BodyDef.prototype.linearVelocity = null;

  b2BodyDef.prototype.angularVelocity = 0.0;

  b2BodyDef.prototype.linearDamping = 0.0;

  b2BodyDef.prototype.angularDamping = 0.0;

  b2BodyDef.prototype.allowSleep = true;

  b2BodyDef.prototype.awake = true;

  b2BodyDef.prototype.fixedRotation = false;

  b2BodyDef.prototype.bullet = false;

  b2BodyDef.prototype.type = b2Body.b2_staticBody;

  b2BodyDef.prototype.active = true;

  b2BodyDef.prototype.inertiaScale = 1.0;

  function b2BodyDef() {
    this.position = new b2Vec2();
    this.position.Set(0.0, 0.0);
    this.linearVelocity = new b2Vec2();
    this.linearVelocity.Set(0, 0);
    return;
  }

  return b2BodyDef;

})();

//# sourceMappingURL=b2BodyDef.js.map

},{"../index":103}],47:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2ContactFilter = (function() {
  function b2ContactFilter() {}

  b2ContactFilter.prototype.ShouldCollide = function(fixtureA, fixtureB) {
    var collide, filter1, filter2;
    filter1 = fixtureA.GetFilterData();
    filter2 = fixtureB.GetFilterData();
    if (filter1.groupIndex === filter2.groupIndex && filter1.groupIndex !== 0) {
      return filter1.groupIndex > 0;
    }
    collide = (filter1.maskBits & filter2.categoryBits) !== 0 && (filter1.categoryBits & filter2.maskBits) !== 0;
    return collide;
  };

  b2ContactFilter.prototype.RayCollide = function(userData, fixture) {
    if (!userData) {
      return true;
    }
    return this.ShouldCollide((userData instanceof b2Fixture ? userData : null), fixture);
  };

  b2ContactFilter.b2_defaultFilter = new b2ContactFilter();

  return b2ContactFilter;

})();

//# sourceMappingURL=b2ContactFilter.js.map

},{"../index":103}],48:[function(require,module,exports){
var Box2D, Vector, b2Settings;

Box2D = require('../index');

Vector = Box2D.Vector;

b2Settings = Box2D.Common.b2Settings;

Box2D.Dynamics.b2ContactImpulse = (function() {
  function b2ContactImpulse() {}

  b2ContactImpulse.prototype.normalImpulses = null;

  b2ContactImpulse.prototype.tangentImpulses = null;

  b2ContactImpulse.b2ContactImpulse = function() {
    this.normalImpulses = new Vector(b2Settings.b2_maxManifoldPoints);
    this.tangentImpulses = new Vector(b2Settings.b2_maxManifoldPoints);
  };

  return b2ContactImpulse;

})();

//# sourceMappingURL=b2ContactImpulse.js.map

},{"../index":103}],49:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2ContactListener = (function() {
  function b2ContactListener() {}

  b2ContactListener.prototype.BeginContact = function(contact) {};

  b2ContactListener.prototype.EndContact = function(contact) {};

  b2ContactListener.prototype.PreSolve = function(contact, oldManifold) {};

  b2ContactListener.prototype.PostSolve = function(contact, impulse) {};

  b2ContactListener.b2_defaultListener = new b2ContactListener();

  return b2ContactListener;

})();

//# sourceMappingURL=b2ContactListener.js.map

},{"../index":103}],50:[function(require,module,exports){
var Box2D, b2ContactFactory, b2ContactFilter, b2ContactListener, b2ContactPoint, b2DynamicTreeBroadPhase;

Box2D = require('../index');

b2ContactFilter = Box2D.Dynamics.b2ContactFilter;

b2ContactListener = Box2D.Dynamics.b2ContactListener;

b2ContactFactory = Box2D.Dynamics.Contacts.b2ContactFactory;

b2ContactPoint = Box2D.Collision.b2ContactPoint;

b2DynamicTreeBroadPhase = Box2D.Collision.b2DynamicTreeBroadPhase;

Box2D.Dynamics.b2ContactManager = (function() {
  b2ContactManager.prototype.m_world = null;

  b2ContactManager.prototype.m_contactCount = null;

  b2ContactManager.prototype.m_contactFilter = null;

  b2ContactManager.prototype.m_contactListener = null;

  b2ContactManager.prototype.m_contactFactory = null;

  b2ContactManager.prototype.m_broadPhase = null;

  function b2ContactManager() {
    this.m_world = null;
    this.m_contactCount = 0;
    this.m_contactFilter = b2ContactFilter.b2_defaultFilter;
    this.m_contactListener = b2ContactListener.b2_defaultListener;
    this.m_contactFactory = new b2ContactFactory(this.m_allocator);
    this.m_broadPhase = new b2DynamicTreeBroadPhase();
    return;
  }

  b2ContactManager.prototype.AddPair = function(proxyUserDataA, proxyUserDataB) {
    var bodyA, bodyB, c, edge, fA, fB, fixtureA, fixtureB;
    fixtureA = (proxyUserDataA instanceof b2Fixture ? proxyUserDataA : null);
    fixtureB = (proxyUserDataB instanceof b2Fixture ? proxyUserDataB : null);
    bodyA = fixtureA.GetBody();
    bodyB = fixtureB.GetBody();
    if (bodyA === bodyB) {
      return;
    }
    edge = bodyB.GetContactList();
    while (edge) {
      if (edge.other === bodyA) {
        fA = edge.contact.GetFixtureA();
        fB = edge.contact.GetFixtureB();
        if (fA === fixtureA && fB === fixtureB) {
          return;
        }
        if (fA === fixtureB && fB === fixtureA) {
          return;
        }
      }
      edge = edge.next;
    }
    if (bodyB.ShouldCollide(bodyA) === false) {
      return;
    }
    if (this.m_contactFilter.ShouldCollide(fixtureA, fixtureB) === false) {
      return;
    }
    c = this.m_contactFactory.Create(fixtureA, fixtureB);
    fixtureA = c.GetFixtureA();
    fixtureB = c.GetFixtureB();
    bodyA = fixtureA.m_body;
    bodyB = fixtureB.m_body;
    c.m_prev = null;
    c.m_next = this.m_world.m_contactList;
    if (this.m_world.m_contactList != null) {
      this.m_world.m_contactList.m_prev = c;
    }
    this.m_world.m_contactList = c;
    c.m_nodeA.contact = c;
    c.m_nodeA.other = bodyB;
    c.m_nodeA.prev = null;
    c.m_nodeA.next = bodyA.m_contactList;
    if (bodyA.m_contactList != null) {
      bodyA.m_contactList.prev = c.m_nodeA;
    }
    bodyA.m_contactList = c.m_nodeA;
    c.m_nodeB.contact = c;
    c.m_nodeB.other = bodyA;
    c.m_nodeB.prev = null;
    c.m_nodeB.next = bodyB.m_contactList;
    if (bodyB.m_contactList != null) {
      bodyB.m_contactList.prev = c.m_nodeB;
    }
    bodyB.m_contactList = c.m_nodeB;
    ++this.m_world.m_contactCount;
  };

  b2ContactManager.prototype.FindNewContacts = function() {
    this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this, this.AddPair));
  };

  b2ContactManager.prototype.Destroy = function(c) {
    var bodyA, bodyB, fixtureA, fixtureB;
    fixtureA = c.GetFixtureA();
    fixtureB = c.GetFixtureB();
    bodyA = fixtureA.GetBody();
    bodyB = fixtureB.GetBody();
    if (c.IsTouching()) {
      this.m_contactListener.EndContact(c);
    }
    if (c.m_prev) {
      c.m_prev.m_next = c.m_next;
    }
    if (c.m_next) {
      c.m_next.m_prev = c.m_prev;
    }
    if (c === this.m_world.m_contactList) {
      this.m_world.m_contactList = c.m_next;
    }
    if (c.m_nodeA.prev) {
      c.m_nodeA.prev.next = c.m_nodeA.next;
    }
    if (c.m_nodeA.next) {
      c.m_nodeA.next.prev = c.m_nodeA.prev;
    }
    if (c.m_nodeA === bodyA.m_contactList) {
      bodyA.m_contactList = c.m_nodeA.next;
    }
    if (c.m_nodeB.prev) {
      c.m_nodeB.prev.next = c.m_nodeB.next;
    }
    if (c.m_nodeB.next) {
      c.m_nodeB.next.prev = c.m_nodeB.prev;
    }
    if (c.m_nodeB === bodyB.m_contactList) {
      bodyB.m_contactList = c.m_nodeB.next;
    }
    this.m_contactFactory.Destroy(c);
    --this.m_contactCount;
  };

  b2ContactManager.prototype.Collide = function() {
    var bodyA, bodyB, c, cNuke, fixtureA, fixtureB, overlap, proxyA, proxyB;
    c = this.m_world.m_contactList;
    while (c) {
      fixtureA = c.GetFixtureA();
      fixtureB = c.GetFixtureB();
      bodyA = fixtureA.GetBody();
      bodyB = fixtureB.GetBody();
      if (bodyA.IsAwake() === false && bodyB.IsAwake() === false) {
        c = c.GetNext();
        continue;
      }
      if (c.m_flags & b2Contact.e_filterFlag) {
        if (bodyB.ShouldCollide(bodyA) === false) {
          cNuke = c;
          c = cNuke.GetNext();
          this.Destroy(cNuke);
          continue;
        }
        if (this.m_contactFilter.ShouldCollide(fixtureA, fixtureB) === false) {
          cNuke = c;
          c = cNuke.GetNext();
          this.Destroy(cNuke);
          continue;
        }
        c.m_flags &= ~b2Contact.e_filterFlag;
      }
      proxyA = fixtureA.m_proxy;
      proxyB = fixtureB.m_proxy;
      overlap = this.m_broadPhase.TestOverlap(proxyA, proxyB);
      if (overlap === false) {
        cNuke = c;
        c = cNuke.GetNext();
        this.Destroy(cNuke);
        continue;
      }
      c.Update(this.m_contactListener);
      c = c.GetNext();
    }
  };

  b2ContactManager.s_evalCP = new b2ContactPoint();

  return b2ContactManager;

})();

//# sourceMappingURL=b2ContactManager.js.map

},{"../index":103}],51:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2DebugDraw = (function() {
  b2DebugDraw.e_shapeBit = 0x0001;

  b2DebugDraw.e_jointBit = 0x0002;

  b2DebugDraw.e_aabbBit = 0x0004;

  b2DebugDraw.e_pairBit = 0x0008;

  b2DebugDraw.e_centerOfMassBit = 0x0010;

  b2DebugDraw.e_controllerBit = 0x0020;

  b2DebugDraw.prototype.m_drawScale = 1.0;

  b2DebugDraw.prototype.m_lineThickness = 1.0;

  b2DebugDraw.prototype.m_alpha = 1.0;

  b2DebugDraw.prototype.m_fillAlpha = 1.0;

  b2DebugDraw.prototype.m_xformScale = 1.0;

  b2DebugDraw.prototype.m_drawFlags = 0;

  b2DebugDraw.prototype.m_ctx = null;

  function b2DebugDraw() {
    this.m_sprite = {
      graphics: {
        clear: (function(_this) {
          return function() {
            _this.m_ctx.clearRect(0, 0, _this.m_ctx.canvas.width, _this.m_ctx.canvas.height);
          };
        })(this)
      }
    };
    return;
  }

  b2DebugDraw.prototype._color = function(color, alpha) {
    return "rgba(" + ((color & 0xFF0000) >> 16) + "," + ((color & 0xFF00) >> 8) + "," + (color & 0xFF) + "," + alpha + ")";
  };

  b2DebugDraw.prototype.SetFlags = function(flags) {
    if (flags === undefined) {
      flags = 0;
    }
    this.m_drawFlags = flags;
  };

  b2DebugDraw.prototype.GetFlags = function() {
    return this.m_drawFlags;
  };

  b2DebugDraw.prototype.AppendFlags = function(flags) {
    if (flags === undefined) {
      flags = 0;
    }
    this.m_drawFlags |= flags;
  };

  b2DebugDraw.prototype.ClearFlags = function(flags) {
    if (flags === undefined) {
      flags = 0;
    }
    this.m_drawFlags &= ~flags;
  };

  b2DebugDraw.prototype.SetSprite = function(sprite) {
    this.m_ctx = sprite;
  };

  b2DebugDraw.prototype.GetSprite = function() {
    return this.m_ctx;
  };

  b2DebugDraw.prototype.SetDrawScale = function(drawScale) {
    if (drawScale === undefined) {
      drawScale = 0;
    }
    this.m_drawScale = drawScale;
  };

  b2DebugDraw.prototype.GetDrawScale = function() {
    return this.m_drawScale;
  };

  b2DebugDraw.prototype.SetLineThickness = function(lineThickness) {
    if (lineThickness === undefined) {
      lineThickness = 0;
    }
    this.m_lineThickness = lineThickness;
    this.m_ctx.strokeWidth = lineThickness;
  };

  b2DebugDraw.prototype.GetLineThickness = function() {
    return this.m_lineThickness;
  };

  b2DebugDraw.prototype.SetAlpha = function(alpha) {
    if (alpha === undefined) {
      alpha = 0;
    }
    this.m_alpha = alpha;
  };

  b2DebugDraw.prototype.GetAlpha = function() {
    return this.m_alpha;
  };

  b2DebugDraw.prototype.SetFillAlpha = function(alpha) {
    if (alpha === undefined) {
      alpha = 0;
    }
    this.m_fillAlpha = alpha;
  };

  b2DebugDraw.prototype.GetFillAlpha = function() {
    return this.m_fillAlpha;
  };

  b2DebugDraw.prototype.SetXFormScale = function(xformScale) {
    if (xformScale === undefined) {
      xformScale = 0;
    }
    this.m_xformScale = xformScale;
  };

  b2DebugDraw.prototype.GetXFormScale = function() {
    return this.m_xformScale;
  };

  b2DebugDraw.prototype.DrawPolygon = function(vertices, vertexCount, color) {
    var drawScale, i, s;
    if (!vertexCount) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.moveTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    i = 1;
    while (i < vertexCount) {
      s.lineTo(vertices[i].x * drawScale, vertices[i].y * drawScale);
      i++;
    }
    s.lineTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    s.closePath();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawSolidPolygon = function(vertices, vertexCount, color) {
    var drawScale, i, s;
    if (!vertexCount) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.fillStyle = this._color(color.color, this.m_fillAlpha);
    s.moveTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    i = 1;
    while (i < vertexCount) {
      s.lineTo(vertices[i].x * drawScale, vertices[i].y * drawScale);
      i++;
    }
    s.lineTo(vertices[0].x * drawScale, vertices[0].y * drawScale);
    s.closePath();
    s.fill();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawCircle = function(center, radius, color) {
    var drawScale, s;
    if (!radius) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.arc(center.x * drawScale, center.y * drawScale, radius * drawScale, 0, Math.PI * 2, true);
    s.closePath();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawSolidCircle = function(center, radius, axis, color) {
    var cx, cy, drawScale, s;
    if (!radius) {
      return;
    }
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    cx = center.x * drawScale;
    cy = center.y * drawScale;
    s.moveTo(0, 0);
    s.beginPath();
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.fillStyle = this._color(color.color, this.m_fillAlpha);
    s.arc(cx, cy, radius * drawScale, 0, Math.PI * 2, true);
    s.moveTo(cx, cy);
    s.lineTo((center.x + axis.x * radius) * drawScale, (center.y + axis.y * radius) * drawScale);
    s.closePath();
    s.fill();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawSegment = function(p1, p2, color) {
    var drawScale, s;
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.strokeStyle = this._color(color.color, this.m_alpha);
    s.beginPath();
    s.moveTo(p1.x * drawScale, p1.y * drawScale);
    s.lineTo(p2.x * drawScale, p2.y * drawScale);
    s.closePath();
    s.stroke();
  };

  b2DebugDraw.prototype.DrawTransform = function(xf) {
    var drawScale, s;
    s = this.m_ctx;
    drawScale = this.m_drawScale;
    s.beginPath();
    s.strokeStyle = this._color(0xff0000, this.m_alpha);
    s.moveTo(xf.position.x * drawScale, xf.position.y * drawScale);
    s.lineTo((xf.position.x + this.m_xformScale * xf.R.col1.x) * drawScale, (xf.position.y + this.m_xformScale * xf.R.col1.y) * drawScale);
    s.strokeStyle = this._color(0xff00, this.m_alpha);
    s.moveTo(xf.position.x * drawScale, xf.position.y * drawScale);
    s.lineTo((xf.position.x + this.m_xformScale * xf.R.col2.x) * drawScale, (xf.position.y + this.m_xformScale * xf.R.col2.y) * drawScale);
    s.closePath();
    s.stroke();
  };

  return b2DebugDraw;

})();

//# sourceMappingURL=b2DebugDraw.js.map

},{"../index":103}],52:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2DestructionListener = (function() {
  function b2DestructionListener() {}

  b2DestructionListener.prototype.SayGoodbyeJoint = function(joint) {};

  b2DestructionListener.prototype.SayGoodbyeFixture = function(fixture) {};

  return b2DestructionListener;

})();

//# sourceMappingURL=b2DestructionListener.js.map

},{"../index":103}],53:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2FilterData = (function() {
  function b2FilterData() {}

  b2FilterData.prototype.categoryBits = 0x0001;

  b2FilterData.prototype.maskBits = 0xFFFF;

  b2FilterData.prototype.groupIndex = 0;

  b2FilterData.prototype.Copy = function() {
    var copy;
    copy = new b2FilterData();
    copy.categoryBits = this.categoryBits;
    copy.maskBits = this.maskBits;
    copy.groupIndex = this.groupIndex;
    return copy;
  };

  return b2FilterData;

})();

//# sourceMappingURL=b2FilterData.js.map

},{"../index":103}],54:[function(require,module,exports){
var Box2D, b2AABB, b2FilterData, b2Math, b2Vec2;

Box2D = require('../index');

b2Math = Box2D.Common.Math.b2Math;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2FilterData = Box2D.Dynamics.b2FilterData;

b2AABB = Box2D.Collision.b2AABB;

Box2D.Dynamics.b2Fixture = (function() {
  b2Fixture.prototype.m_filter = null;

  b2Fixture.prototype.m_shape = null;

  b2Fixture.prototype.m_isSensor = false;

  b2Fixture.prototype.m_body = null;

  b2Fixture.prototype.m_next = null;

  b2Fixture.prototype.m_userData = null;

  b2Fixture.prototype.m_density = 0.0;

  b2Fixture.prototype.m_friction = 0.0;

  b2Fixture.prototype.m_restitution = 0.0;

  b2Fixture.prototype.m_aabb = null;

  b2Fixture.prototype.m_proxy = null;

  function b2Fixture() {
    this.m_filter = new b2FilterData();
    this.m_shape.GetType();
  }

  b2Fixture.prototype.GetShape = function() {
    return this.m_shape;
  };

  b2Fixture.prototype.SetSensor = function(sensor) {
    var contact, edge, fixtureA, fixtureB;
    if (this.m_isSensor === sensor) {
      return;
    }
    this.m_isSensor = sensor;
    if (this.m_body == null) {
      return;
    }
    edge = this.m_body.GetContactList();
    while (edge) {
      contact = edge.contact;
      fixtureA = contact.GetFixtureA();
      fixtureB = contact.GetFixtureB();
      if (fixtureA === this || fixtureB === this) {
        contact.SetSensor(fixtureA.IsSensor() || fixtureB.IsSensor());
      }
      edge = edge.next;
    }
  };

  b2Fixture.prototype.IsSensor = function() {
    return this.m_isSensor;
  };

  b2Fixture.prototype.SetFilterData = function(filter) {
    var contact, edge, fixtureA, fixtureB;
    this.m_filter = filter.Copy();
    if (this.m_body) {
      return;
    }
    edge = this.m_body.GetContactList();
    while (edge) {
      contact = edge.contact;
      fixtureA = contact.GetFixtureA();
      fixtureB = contact.GetFixtureB();
      if (fixtureA === this || fixtureB === this) {
        contact.FlagForFiltering();
      }
      edge = edge.next;
    }
  };

  b2Fixture.prototype.GetFilterData = function() {
    return this.m_filter.Copy();
  };

  b2Fixture.prototype.GetBody = function() {
    return this.m_body;
  };

  b2Fixture.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Fixture.prototype.GetUserData = function() {
    return this.m_userData;
  };

  b2Fixture.prototype.SetUserData = function(data) {
    return this.m_userData = data;
  };

  b2Fixture.prototype.TestPoint = function(p) {
    return this.m_shape.TestPoint(this.m_body.GetTransform(), p);
  };

  b2Fixture.prototype.RayCast = function(output, input) {
    return this.m_shape.RayCast(output, input, this.m_body.GetTransform());
  };

  b2Fixture.prototype.GetMassData = function(massData) {
    if (massData === void 0) {
      massData = null;
    }
    if (massData == null) {
      massData = new b2MassData();
    }
    this.m_shape.ComputeMass(massData, this.m_density);
    return massData;
  };

  b2Fixture.prototype.SetDensity = function(density) {
    if (density === void 0) {
      density = 0;
    }
    this.m_density = density;
  };

  b2Fixture.prototype.GetDensity = function() {
    return this.m_density;
  };

  b2Fixture.prototype.GetFriction = function() {
    return this.m_friction;
  };

  b2Fixture.prototype.SetFriction = function(friction) {
    if (friction === void 0) {
      friction = 0;
    }
    this.m_friction = friction;
  };

  b2Fixture.prototype.GetRestitution = function() {
    return this.m_restitution;
  };

  b2Fixture.prototype.SetRestitution = function(restitution) {
    if (restitution === void 0) {
      restitution = 0;
    }
    this.m_restitution = restitution;
  };

  b2Fixture.prototype.GetAABB = function() {
    return this.m_aabb;
  };

  b2Fixture.prototype.Create = function(body, xf, def) {
    this.m_userData = def.userData;
    this.m_friction = def.friction;
    this.m_restitution = def.restitution;
    this.m_body = body;
    this.m_next = null;
    this.m_filter = def.filter.Copy();
    this.m_isSensor = def.isSensor;
    this.m_shape = def.shape.Copy();
    this.m_density = def.density;
  };

  b2Fixture.prototype.Destroy = function() {
    this.m_shape = null;
  };

  b2Fixture.prototype.CreateProxy = function(broadPhase, xf) {
    this.m_shape.ComputeAABB(this.m_aabb, xf);
    this.m_proxy = broadPhase.CreateProxy(this.m_aabb, this);
  };

  b2Fixture.prototype.DestroyProxy = function(broadPhase) {
    if (this.m_proxy == null) {
      return;
    }
    broadPhase.DestroyProxy(this.m_proxy);
    this.m_proxy = null;
  };

  b2Fixture.prototype.Synchronize = function(broadPhase, transform1, transform2) {
    var aabb1, aabb2, displacement;
    if (!this.m_proxy) {
      return;
    }
    aabb1 = new b2AABB();
    aabb2 = new b2AABB();
    this.m_shape.ComputeAABB(aabb1, transform1);
    this.m_shape.ComputeAABB(aabb2, transform2);
    this.m_aabb.Combine(aabb1, aabb2);
    displacement = b2Math.SubtractVV(transform2.position, transform1.position);
    broadPhase.MoveProxy(this.m_proxy, this.m_aabb, displacement);
  };

  return b2Fixture;

})();

//# sourceMappingURL=b2Fixture.js.map

},{"../index":103}],55:[function(require,module,exports){
var Box2D, b2FilterData;

Box2D = require('../index');

b2FilterData = Box2D.Dynamics.b2FilterData;

Box2D.Dynamics.b2FixtureDef = (function() {
  function b2FixtureDef() {}

  b2FixtureDef.prototype.shape = null;

  b2FixtureDef.prototype.userData = null;

  b2FixtureDef.prototype.friction = 0.2;

  b2FixtureDef.prototype.restitution = 0.0;

  b2FixtureDef.prototype.density = 0.0;

  b2FixtureDef.prototype.isSensor = false;

  b2FixtureDef.prototype.filter = null;

  b2FixtureDef.prototype.b2FixtureDef = function() {
    this.filter = new b2FilterData();
    this.filter.categoryBits = 0x0001;
    this.filter.maskBits = 0xFFFF;
    this.filter.groupIndex = 0;
  };

  return b2FixtureDef;

})();

//# sourceMappingURL=b2FixtureDef.js.map

},{"../index":103}],56:[function(require,module,exports){
var Box2D, Vector, b2ContactImpulse;

Box2D = require('../index');

Vector = Box2D.Vector;

b2ContactImpulse = Box2D.Dynamics.b2ContactImpulse;

Box2D.Dynamics.b2Island = (function() {
  b2Island.prototype.m_bodies = null;

  b2Island.prototype.m_contacts = null;

  b2Island.prototype.m_joints = null;

  b2Island.prototype.m_bodyCapacity = 0;

  b2Island.prototype.m_contactCapacity = 0;

  b2Island.prototype.m_jointCapacity = 0;

  b2Island.prototype.m_bodyCount = 0;

  b2Island.prototype.m_contactCount = 0;

  b2Island.prototype.m_jointCount = 0;

  b2Island.prototype.m_allocator = null;

  b2Island.prototype.m_listener = null;

  b2Island.prototype.m_contactSolver = null;

  function b2Island() {
    this.m_bodies = new Vector();
    this.m_contacts = new Vector();
    this.m_joints = new Vector();
    return;
  }

  b2Island.prototype.Initialize = function(bodyCapacity, contactCapacity, jointCapacity, allocator, listener, contactSolver) {
    var i;
    if (bodyCapacity === void 0) {
      bodyCapacity = 0;
    }
    if (contactCapacity === void 0) {
      contactCapacity = 0;
    }
    if (jointCapacity === void 0) {
      jointCapacity = 0;
    }
    i = 0;
    this.m_bodyCapacity = bodyCapacity;
    this.m_contactCapacity = contactCapacity;
    this.m_jointCapacity = jointCapacity;
    this.m_bodyCount = 0;
    this.m_contactCount = 0;
    this.m_jointCount = 0;
    this.m_allocator = allocator;
    this.m_listener = listener;
    this.m_contactSolver = contactSolver;
    i = this.m_bodies.length;
    while (i < bodyCapacity) {
      this.m_bodies[i] = null;
      i++;
    }
    i = this.m_contacts.length;
    while (i < contactCapacity) {
      this.m_contacts[i] = null;
      i++;
    }
    i = this.m_joints.length;
    while (i < jointCapacity) {
      this.m_joints[i] = null;
      i++;
    }
  };

  b2Island.prototype.Clear = function() {
    this.m_bodyCount = 0;
    this.m_contactCount = 0;
    this.m_jointCount = 0;
  };

  b2Island.prototype.Solve = function(step, gravity, allowSleep) {
    var angTolSqr, b, contactSolver, contactsOkay, i, j, joint, jointOkay, jointsOkay, linTolSqr, minSleepTime, rotation, translationX, translationY;
    i = 0;
    j = 0;
    b = void 0;
    joint = void 0;
    i = 0;
    while (i < this.m_bodyCount) {
      b = this.m_bodies[i];
      if (b.GetType() !== b2Body.b2_dynamicBody) {
        continue;
      }
      b.m_linearVelocity.x += step.dt * (gravity.x + b.m_invMass * b.m_force.x);
      b.m_linearVelocity.y += step.dt * (gravity.y + b.m_invMass * b.m_force.y);
      b.m_angularVelocity += step.dt * b.m_invI * b.m_torque;
      b.m_linearVelocity.Multiply(b2Math.Clamp(1.0 - step.dt * b.m_linearDamping, 0.0, 1.0));
      b.m_angularVelocity *= b2Math.Clamp(1.0 - step.dt * b.m_angularDamping, 0.0, 1.0);
      ++i;
    }
    this.m_contactSolver.Initialize(step, this.m_contacts, this.m_contactCount, this.m_allocator);
    contactSolver = this.m_contactSolver;
    contactSolver.InitVelocityConstraints(step);
    i = 0;
    while (i < this.m_jointCount) {
      joint = this.m_joints[i];
      joint.InitVelocityConstraints(step);
      ++i;
    }
    i = 0;
    while (i < step.velocityIterations) {
      j = 0;
      while (j < this.m_jointCount) {
        joint = this.m_joints[j];
        joint.SolveVelocityConstraints(step);
        ++j;
      }
      contactSolver.SolveVelocityConstraints();
      ++i;
    }
    i = 0;
    while (i < this.m_jointCount) {
      joint = this.m_joints[i];
      joint.FinalizeVelocityConstraints();
      ++i;
    }
    contactSolver.FinalizeVelocityConstraints();
    i = 0;
    while (i < this.m_bodyCount) {
      b = this.m_bodies[i];
      if (b.GetType() === b2Body.b2_staticBody) {
        continue;
      }
      translationX = step.dt * b.m_linearVelocity.x;
      translationY = step.dt * b.m_linearVelocity.y;
      if ((translationX * translationX + translationY * translationY) > b2Settings.b2_maxTranslationSquared) {
        b.m_linearVelocity.Normalize();
        b.m_linearVelocity.x *= b2Settings.b2_maxTranslation * step.inv_dt;
        b.m_linearVelocity.y *= b2Settings.b2_maxTranslation * step.inv_dt;
      }
      rotation = step.dt * b.m_angularVelocity;
      if (rotation * rotation > b2Settings.b2_maxRotationSquared) {
        if (b.m_angularVelocity < 0.0) {
          b.m_angularVelocity = -b2Settings.b2_maxRotation * step.inv_dt;
        } else {
          b.m_angularVelocity = b2Settings.b2_maxRotation * step.inv_dt;
        }
      }
      b.m_sweep.c0.SetV(b.m_sweep.c);
      b.m_sweep.a0 = b.m_sweep.a;
      b.m_sweep.c.x += step.dt * b.m_linearVelocity.x;
      b.m_sweep.c.y += step.dt * b.m_linearVelocity.y;
      b.m_sweep.a += step.dt * b.m_angularVelocity;
      b.SynchronizeTransform();
      ++i;
    }
    i = 0;
    while (i < step.positionIterations) {
      contactsOkay = contactSolver.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);
      jointsOkay = true;
      j = 0;
      while (j < this.m_jointCount) {
        joint = this.m_joints[j];
        jointOkay = joint.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);
        jointsOkay = jointsOkay && jointOkay;
        ++j;
      }
      if (contactsOkay && jointsOkay) {
        break;
      }
      ++i;
    }
    this.Report(contactSolver.m_constraints);
    if (allowSleep) {
      minSleepTime = Number.MAX_VALUE;
      linTolSqr = b2Settings.b2_linearSleepTolerance * b2Settings.b2_linearSleepTolerance;
      angTolSqr = b2Settings.b2_angularSleepTolerance * b2Settings.b2_angularSleepTolerance;
      i = 0;
      while (i < this.m_bodyCount) {
        b = this.m_bodies[i];
        if (b.GetType() === b2Body.b2_staticBody) {
          continue;
        }
        if ((b.m_flags & b2Body.e_allowSleepFlag) === 0) {
          b.m_sleepTime = 0.0;
          minSleepTime = 0.0;
        }
        if ((b.m_flags & b2Body.e_allowSleepFlag) === 0 || b.m_angularVelocity * b.m_angularVelocity > angTolSqr || b2Math.Dot(b.m_linearVelocity, b.m_linearVelocity) > linTolSqr) {
          b.m_sleepTime = 0.0;
          minSleepTime = 0.0;
        } else {
          b.m_sleepTime += step.dt;
          minSleepTime = b2Math.Min(minSleepTime, b.m_sleepTime);
        }
        ++i;
      }
      if (minSleepTime >= b2Settings.b2_timeToSleep) {
        i = 0;
        while (i < this.m_bodyCount) {
          b = this.m_bodies[i];
          b.SetAwake(false);
          ++i;
        }
      }
    }
  };

  b2Island.prototype.SolveTOI = function(subStep) {
    var b, contactSolver, contactsOkay, i, j, jointOkay, jointsOkay, k_toiBaumgarte, rotation, translationX, translationY;
    i = 0;
    j = 0;
    this.m_contactSolver.Initialize(subStep, this.m_contacts, this.m_contactCount, this.m_allocator);
    contactSolver = this.m_contactSolver;
    i = 0;
    while (i < this.m_jointCount) {
      this.m_joints[i].InitVelocityConstraints(subStep);
      ++i;
    }
    i = 0;
    while (i < subStep.velocityIterations) {
      contactSolver.SolveVelocityConstraints();
      j = 0;
      while (j < this.m_jointCount) {
        this.m_joints[j].SolveVelocityConstraints(subStep);
        ++j;
      }
      ++i;
    }
    i = 0;
    while (i < this.m_bodyCount) {
      b = this.m_bodies[i];
      if (b.GetType() === b2Body.b2_staticBody) {
        continue;
      }
      translationX = subStep.dt * b.m_linearVelocity.x;
      translationY = subStep.dt * b.m_linearVelocity.y;
      if ((translationX * translationX + translationY * translationY) > b2Settings.b2_maxTranslationSquared) {
        b.m_linearVelocity.Normalize();
        b.m_linearVelocity.x *= b2Settings.b2_maxTranslation * subStep.inv_dt;
        b.m_linearVelocity.y *= b2Settings.b2_maxTranslation * subStep.inv_dt;
      }
      rotation = subStep.dt * b.m_angularVelocity;
      if (rotation * rotation > b2Settings.b2_maxRotationSquared) {
        if (b.m_angularVelocity < 0.0) {
          b.m_angularVelocity = -b2Settings.b2_maxRotation * subStep.inv_dt;
        } else {
          b.m_angularVelocity = b2Settings.b2_maxRotation * subStep.inv_dt;
        }
      }
      b.m_sweep.c0.SetV(b.m_sweep.c);
      b.m_sweep.a0 = b.m_sweep.a;
      b.m_sweep.c.x += subStep.dt * b.m_linearVelocity.x;
      b.m_sweep.c.y += subStep.dt * b.m_linearVelocity.y;
      b.m_sweep.a += subStep.dt * b.m_angularVelocity;
      b.SynchronizeTransform();
      ++i;
    }
    k_toiBaumgarte = 0.75;
    i = 0;
    while (i < subStep.positionIterations) {
      contactsOkay = contactSolver.SolvePositionConstraints(k_toiBaumgarte);
      jointsOkay = true;
      j = 0;
      while (j < this.m_jointCount) {
        jointOkay = this.m_joints[j].SolvePositionConstraints(b2Settings.b2_contactBaumgarte);
        jointsOkay = jointsOkay && jointOkay;
        ++j;
      }
      if (contactsOkay && jointsOkay) {
        break;
      }
      ++i;
    }
    this.Report(contactSolver.m_constraints);
  };

  b2Island.prototype.Report = function(constraints) {
    var c, cc, i, j;
    if (this.m_listener == null) {
      return;
    }
    i = 0;
    while (i < this.m_contactCount) {
      c = this.m_contacts[i];
      cc = constraints[i];
      j = 0;
      while (j < cc.pointCount) {
        b2Island.s_impulse.normalImpulses[j] = cc.points[j].normalImpulse;
        b2Island.s_impulse.tangentImpulses[j] = cc.points[j].tangentImpulse;
        ++j;
      }
      this.m_listener.PostSolve(c, b2Island.s_impulse);
      ++i;
    }
  };

  b2Island.prototype.AddBody = function(body) {
    body.m_islandIndex = this.m_bodyCount;
    this.m_bodies[this.m_bodyCount++] = body;
  };

  b2Island.prototype.AddContact = function(contact) {
    this.m_contacts[this.m_contactCount++] = contact;
  };

  b2Island.prototype.AddJoint = function(joint) {
    this.m_joints[this.m_jointCount++] = joint;
  };

  b2Island.s_impulse = new b2ContactImpulse();

  return b2Island;

})();

//# sourceMappingURL=b2Island.js.map

},{"../index":103}],57:[function(require,module,exports){
var Box2D;

Box2D = require('../index');

Box2D.Dynamics.b2TimeStep = (function() {
  function b2TimeStep() {}

  b2TimeStep.prototype.dt = 0;

  b2TimeStep.prototype.inv_dt = 0;

  b2TimeStep.prototype.positionIterations = 0;

  b2TimeStep.prototype.velocityIterations = 0;

  b2TimeStep.prototype.warmStarting = 0;

  b2TimeStep.prototype.Set = function(step) {
    this.dt = step.dt;
    this.inv_dt = step.inv_dt;
    this.positionIterations = step.positionIterations;
    this.velocityIterations = step.velocityIterations;
    this.warmStarting = step.warmStarting;
  };

  return b2TimeStep;

})();

//# sourceMappingURL=b2TimeStep.js.map

},{"../index":103}],58:[function(require,module,exports){
var Box2D, Vector, b2AABB, b2Body, b2BodyDef, b2Color, b2Contact, b2ContactManager, b2ContactSolver, b2DebugDraw, b2Island, b2Joint, b2RayCastInput, b2RayCastOutput, b2Sweep, b2TimeStep, b2Transform, b2Vec2;

Box2D = require('../index');

Vector = Box2D.Vector;

b2AABB = Box2D.Collision.b2AABB;

b2Color = Box2D.Common.b2Color;

b2Sweep = Box2D.Common.Math.b2Sweep;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Transform = Box2D.Common.Math.b2Transform;

b2Body = Box2D.Dynamics.b2Body;

b2BodyDef = Box2D.Dynamics.b2BodyDef;

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Contact = Box2D.Dynamics.b2Contact;

b2ContactManager = Box2D.Dynamics.b2ContactManager;

b2ContactSolver = Box2D.Dynamics.Contacts.b2ContactSolver;

b2Island = Box2D.Dynamics.b2Island;

b2TimeStep = Box2D.Dynamics.b2TimeStep;

b2DebugDraw = Box2D.Dynamics.b2DebugDraw;

b2RayCastInput = Box2D.Collision.b2RayCastInput;

b2RayCastOutput = Box2D.Collision.b2RayCastOutput;

Box2D.Dynamics.b2World = (function() {
  b2World.prototype.s_stack = null;

  b2World.prototype.m_contactManager = null;

  b2World.prototype.m_contactSolver = null;

  b2World.prototype.m_island = null;

  b2World.prototype.m_destructionListener = null;

  b2World.prototype.m_debugDraw = null;

  b2World.prototype.m_bodyList = null;

  b2World.prototype.m_contactList = null;

  b2World.prototype.m_jointList = null;

  b2World.prototype.m_controllerList = null;

  b2World.prototype.m_bodyCount = 0;

  b2World.prototype.m_contactCount = 0;

  b2World.prototype.m_jointCount = 0;

  b2World.prototype.m_controllerCount = 0;

  b2World.prototype.m_allowSleep = null;

  b2World.prototype.m_gravity = null;

  b2World.prototype.m_inv_dt0 = 0.0;

  b2World.prototype.m_groundBody = null;

  function b2World(gravity, doSleep) {
    var bd;
    this.s_stack = new Vector();
    this.m_contactManager = new b2ContactManager();
    this.m_contactSolver = new b2ContactSolver();
    this.m_island = new b2Island();
    b2World.m_warmStarting = true;
    b2World.m_continuousPhysics = true;
    this.m_allowSleep = doSleep;
    this.m_gravity = gravity;
    this.m_contactManager.m_world = this;
    bd = new b2BodyDef();
    this.m_groundBody = this.CreateBody(bd);
    return;
  }

  b2World.prototype.SetDestructionListener = function(listener) {
    this.m_destructionListener = listener;
  };

  b2World.prototype.SetContactFilter = function(filter) {
    this.m_contactManager.m_contactFilter = filter;
  };

  b2World.prototype.SetContactListener = function(listener) {
    this.m_contactManager.m_contactListener = listener;
  };

  b2World.prototype.SetDebugDraw = function(debugDraw) {
    this.m_debugDraw = debugDraw;
  };

  b2World.prototype.SetBroadPhase = function(broadPhase) {
    var b, f, oldBroadPhase;
    oldBroadPhase = this.m_contactManager.m_broadPhase;
    this.m_contactManager.m_broadPhase = broadPhase;
    b = this.m_bodyList;
    while (b) {
      f = b.m_fixtureList;
      while (f) {
        f.m_proxy = broadPhase.CreateProxy(oldBroadPhase.GetFatAABB(f.m_proxy), f);
        f = f.m_next;
      }
      b = b.m_next;
    }
  };

  b2World.prototype.Validate = function() {
    this.m_contactManager.m_broadPhase.Validate();
  };

  b2World.prototype.GetProxyCount = function() {
    return this.m_contactManager.m_broadPhase.GetProxyCount();
  };

  b2World.prototype.CreateBody = function(def) {
    var b;
    if (this.IsLocked() === true) {
      return null;
    }
    b = new b2Body(def, this);
    b.m_prev = null;
    b.m_next = this.m_bodyList;
    if (this.m_bodyList) {
      this.m_bodyList.m_prev = b;
    }
    this.m_bodyList = b;
    ++this.m_bodyCount;
    return b;
  };

  b2World.prototype.DestroyBody = function(b) {
    var ce, ce0, coe, coe0, f, f0, jn, jn0;
    if (this.IsLocked() === true) {
      return;
    }
    jn = b.m_jointList;
    while (jn) {
      jn0 = jn;
      jn = jn.next;
      if (this.m_destructionListener) {
        this.m_destructionListener.SayGoodbyeJoint(jn0.joint);
      }
      this.DestroyJoint(jn0.joint);
    }
    coe = b.m_controllerList;
    while (coe) {
      coe0 = coe;
      coe = coe.nextController;
      coe0.controller.RemoveBody(b);
    }
    ce = b.m_contactList;
    while (ce) {
      ce0 = ce;
      ce = ce.next;
      this.m_contactManager.Destroy(ce0.contact);
    }
    b.m_contactList = null;
    f = b.m_fixtureList;
    while (f) {
      f0 = f;
      f = f.m_next;
      if (this.m_destructionListener) {
        this.m_destructionListener.SayGoodbyeFixture(f0);
      }
      f0.DestroyProxy(this.m_contactManager.m_broadPhase);
      f0.Destroy();
    }
    b.m_fixtureList = null;
    b.m_fixtureCount = 0;
    if (b.m_prev) {
      b.m_prev.m_next = b.m_next;
    }
    if (b.m_next) {
      b.m_next.m_prev = b.m_prev;
    }
    if (b === this.m_bodyList) {
      this.m_bodyList = b.m_next;
    }
    --this.m_bodyCount;
  };

  b2World.prototype.CreateJoint = function(def) {
    var bodyA, bodyB, edge, j;
    j = b2Joint.Create(def, null);
    j.m_prev = null;
    j.m_next = this.m_jointList;
    if (this.m_jointList) {
      this.m_jointList.m_prev = j;
    }
    this.m_jointList = j;
    ++this.m_jointCount;
    j.m_edgeA.joint = j;
    j.m_edgeA.other = j.m_bodyB;
    j.m_edgeA.prev = null;
    j.m_edgeA.next = j.m_bodyA.m_jointList;
    if (j.m_bodyA.m_jointList) {
      j.m_bodyA.m_jointList.prev = j.m_edgeA;
    }
    j.m_bodyA.m_jointList = j.m_edgeA;
    j.m_edgeB.joint = j;
    j.m_edgeB.other = j.m_bodyA;
    j.m_edgeB.prev = null;
    j.m_edgeB.next = j.m_bodyB.m_jointList;
    if (j.m_bodyB.m_jointList) {
      j.m_bodyB.m_jointList.prev = j.m_edgeB;
    }
    j.m_bodyB.m_jointList = j.m_edgeB;
    bodyA = def.bodyA;
    bodyB = def.bodyB;
    if (def.collideConnected === false) {
      edge = bodyB.GetContactList();
      while (edge) {
        if (edge.other === bodyA) {
          edge.contact.FlagForFiltering();
        }
        edge = edge.next;
      }
    }
    return j;
  };

  b2World.prototype.DestroyJoint = function(j) {
    var bodyA, bodyB, collideConnected, edge;
    collideConnected = j.m_collideConnected;
    if (j.m_prev) {
      j.m_prev.m_next = j.m_next;
    }
    if (j.m_next) {
      j.m_next.m_prev = j.m_prev;
    }
    if (j === this.m_jointList) {
      this.m_jointList = j.m_next;
    }
    bodyA = j.m_bodyA;
    bodyB = j.m_bodyB;
    bodyA.SetAwake(true);
    bodyB.SetAwake(true);
    if (j.m_edgeA.prev) {
      j.m_edgeA.prev.next = j.m_edgeA.next;
    }
    if (j.m_edgeA.next) {
      j.m_edgeA.next.prev = j.m_edgeA.prev;
    }
    if (j.m_edgeA === bodyA.m_jointList) {
      bodyA.m_jointList = j.m_edgeA.next;
    }
    j.m_edgeA.prev = null;
    j.m_edgeA.next = null;
    if (j.m_edgeB.prev) {
      j.m_edgeB.prev.next = j.m_edgeB.next;
    }
    if (j.m_edgeB.next) {
      j.m_edgeB.next.prev = j.m_edgeB.prev;
    }
    if (j.m_edgeB === bodyB.m_jointList) {
      bodyB.m_jointList = j.m_edgeB.next;
    }
    j.m_edgeB.prev = null;
    j.m_edgeB.next = null;
    b2Joint.Destroy(j, null);
    --this.m_jointCount;
    if (collideConnected === false) {
      edge = bodyB.GetContactList();
      while (edge) {
        if (edge.other === bodyA) {
          edge.contact.FlagForFiltering();
        }
        edge = edge.next;
      }
    }
  };

  b2World.prototype.AddController = function(c) {
    c.m_next = this.m_controllerList;
    c.m_prev = null;
    this.m_controllerList = c;
    c.m_world = this;
    this.m_controllerCount++;
    return c;
  };

  b2World.prototype.RemoveController = function(c) {
    if (c.m_prev) {
      c.m_prev.m_next = c.m_next;
    }
    if (c.m_next) {
      c.m_next.m_prev = c.m_prev;
    }
    if (this.m_controllerList === c) {
      this.m_controllerList = c.m_next;
    }
    this.m_controllerCount--;
  };

  b2World.prototype.CreateController = function(controller) {
    if (controller.m_world !== this) {
      throw new Error("Controller can only be a member of one world");
    }
    controller.m_next = this.m_controllerList;
    controller.m_prev = null;
    if (this.m_controllerList) {
      this.m_controllerList.m_prev = controller;
    }
    this.m_controllerList = controller;
    ++this.m_controllerCount;
    controller.m_world = this;
    return controller;
  };

  b2World.prototype.DestroyController = function(controller) {
    controller.Clear();
    if (controller.m_next) {
      controller.m_next.m_prev = controller.m_prev;
    }
    if (controller.m_prev) {
      controller.m_prev.m_next = controller.m_next;
    }
    if (controller === this.m_controllerList) {
      this.m_controllerList = controller.m_next;
    }
    --this.m_controllerCount;
  };

  b2World.prototype.SetWarmStarting = function(flag) {
    b2World.m_warmStarting = flag;
  };

  b2World.prototype.SetContinuousPhysics = function(flag) {
    b2World.m_continuousPhysics = flag;
  };

  b2World.prototype.GetBodyCount = function() {
    return this.m_bodyCount;
  };

  b2World.prototype.GetJointCount = function() {
    return this.m_jointCount;
  };

  b2World.prototype.GetContactCount = function() {
    return this.m_contactCount;
  };

  b2World.prototype.SetGravity = function(gravity) {
    this.m_gravity = gravity;
  };

  b2World.prototype.GetGravity = function() {
    return this.m_gravity;
  };

  b2World.prototype.GetGroundBody = function() {
    return this.m_groundBody;
  };

  b2World.prototype.Step = function(dt, velocityIterations, positionIterations) {
    var step;
    if (dt === void 0) {
      dt = 0;
    }
    if (velocityIterations === void 0) {
      velocityIterations = 0;
    }
    if (positionIterations === void 0) {
      positionIterations = 0;
    }
    if (this.m_flags & b2World.e_newFixture) {
      this.m_contactManager.FindNewContacts();
      this.m_flags &= ~b2World.e_newFixture;
    }
    this.m_flags |= b2World.e_locked;
    step = b2World.s_timestep2;
    step.dt = dt;
    step.velocityIterations = velocityIterations;
    step.positionIterations = positionIterations;
    if (dt > 0.0) {
      step.inv_dt = 1.0 / dt;
    } else {
      step.inv_dt = 0.0;
    }
    step.dtRatio = this.m_inv_dt0 * dt;
    step.warmStarting = b2World.m_warmStarting;
    this.m_contactManager.Collide();
    if (step.dt > 0.0) {
      this.Solve(step);
    }
    if (b2World.m_continuousPhysics && step.dt > 0.0) {
      this.SolveTOI(step);
    }
    if (step.dt > 0.0) {
      this.m_inv_dt0 = step.inv_dt;
    }
    this.m_flags &= ~b2World.e_locked;
  };

  b2World.prototype.ClearForces = function() {
    var body;
    body = this.m_bodyList;
    while (body) {
      body.m_force.SetZero();
      body.m_torque = 0.0;
      body = body.m_next;
    }
  };

  b2World.prototype.DrawDebugData = function() {
    var aabb, b, b1, b2, bp, c, cA, cB, color, contact, f, fixtureA, fixtureB, flags, i, invQ, j, s, vs, x1, x2, xf;
    if (this.m_debugDraw == null) {
      return;
    }
    this.m_debugDraw.m_sprite.graphics.clear();
    flags = this.m_debugDraw.GetFlags();
    i = 0;
    b = void 0;
    f = void 0;
    s = void 0;
    j = void 0;
    bp = void 0;
    invQ = new b2Vec2;
    x1 = new b2Vec2;
    x2 = new b2Vec2;
    xf = void 0;
    b1 = new b2AABB();
    b2 = new b2AABB();
    vs = [new b2Vec2(), new b2Vec2(), new b2Vec2(), new b2Vec2()];
    color = new b2Color(0, 0, 0);
    if (flags & b2DebugDraw.e_shapeBit) {
      b = this.m_bodyList;
      while (b) {
        xf = b.m_xf;
        f = b.GetFixtureList();
        while (f) {
          s = f.GetShape();
          if (b.IsActive() === false) {
            color.Set(0.5, 0.5, 0.3);
            this.DrawShape(s, xf, color);
          } else if (b.GetType() === b2Body.b2_staticBody) {
            color.Set(0.5, 0.9, 0.5);
            this.DrawShape(s, xf, color);
          } else if (b.GetType() === b2Body.b2_kinematicBody) {
            color.Set(0.5, 0.5, 0.9);
            this.DrawShape(s, xf, color);
          } else if (b.IsAwake() === false) {
            color.Set(0.6, 0.6, 0.6);
            this.DrawShape(s, xf, color);
          } else {
            color.Set(0.9, 0.7, 0.7);
            this.DrawShape(s, xf, color);
          }
          f = f.m_next;
        }
        b = b.m_next;
      }
    }
    if (flags & b2DebugDraw.e_jointBit) {
      j = this.m_jointList;
      while (j) {
        this.DrawJoint(j);
        j = j.m_next;
      }
    }
    if (flags & b2DebugDraw.e_controllerBit) {
      c = this.m_controllerList;
      while (c) {
        c.Draw(this.m_debugDraw);
        c = c.m_next;
      }
    }
    if (flags & b2DebugDraw.e_pairBit) {
      color.Set(0.3, 0.9, 0.9);
      contact = this.m_contactManager.m_contactList;
      while (contact) {
        fixtureA = contact.GetFixtureA();
        fixtureB = contact.GetFixtureB();
        cA = fixtureA.GetAABB().GetCenter();
        cB = fixtureB.GetAABB().GetCenter();
        this.m_debugDraw.DrawSegment(cA, cB, color);
        contact = contact.GetNext();
      }
    }
    if (flags & b2DebugDraw.e_aabbBit) {
      bp = this.m_contactManager.m_broadPhase;
      vs = [new b2Vec2(), new b2Vec2(), new b2Vec2(), new b2Vec2()];
      b = this.m_bodyList;
      while (b) {
        if (b.IsActive() === false) {
          continue;
        }
        f = b.GetFixtureList();
        while (f) {
          aabb = bp.GetFatAABB(f.m_proxy);
          vs[0].Set(aabb.lowerBound.x, aabb.lowerBound.y);
          vs[1].Set(aabb.upperBound.x, aabb.lowerBound.y);
          vs[2].Set(aabb.upperBound.x, aabb.upperBound.y);
          vs[3].Set(aabb.lowerBound.x, aabb.upperBound.y);
          this.m_debugDraw.DrawPolygon(vs, 4, color);
          f = f.GetNext();
        }
        b = b.GetNext();
      }
    }
    if (flags & b2DebugDraw.e_centerOfMassBit) {
      b = this.m_bodyList;
      while (b) {
        xf = b2World.s_xf;
        xf.R = b.m_xf.R;
        xf.position = b.GetWorldCenter();
        this.m_debugDraw.DrawTransform(xf);
        b = b.m_next;
      }
    }
  };

  b2World.prototype.QueryAABB = function(callback, aabb) {
    var WorldQueryWrapper, broadPhase, __this;
    WorldQueryWrapper = function(proxy) {
      return callback(broadPhase.GetUserData(proxy));
    };
    __this = this;
    broadPhase = __this.m_contactManager.m_broadPhase;
    broadPhase.Query(WorldQueryWrapper, aabb);
  };

  b2World.prototype.QueryShape = function(callback, shape, transform) {
    var WorldQueryWrapper, aabb, broadPhase, __this;
    WorldQueryWrapper = function(proxy) {
      var fixture;
      fixture = (broadPhase.GetUserData(proxy) instanceof b2Fixture ? broadPhase.GetUserData(proxy) : null);
      if (b2Shape.TestOverlap(shape, transform, fixture.GetShape(), fixture.GetBody().GetTransform())) {
        return callback(fixture);
      }
      return true;
    };
    __this = this;
    if (transform === void 0) {
      transform = null;
    }
    if (transform == null) {
      transform = new b2Transform();
      transform.SetIdentity();
    }
    broadPhase = __this.m_contactManager.m_broadPhase;
    aabb = new b2AABB();
    shape.ComputeAABB(aabb, transform);
    broadPhase.Query(WorldQueryWrapper, aabb);
  };

  b2World.prototype.QueryPoint = function(callback, p) {
    var WorldQueryWrapper, aabb, broadPhase, __this;
    WorldQueryWrapper = function(proxy) {
      var fixture;
      fixture = (broadPhase.GetUserData(proxy) instanceof b2Fixture ? broadPhase.GetUserData(proxy) : null);
      if (fixture.TestPoint(p)) {
        return callback(fixture);
      }
      return true;
    };
    __this = this;
    broadPhase = __this.m_contactManager.m_broadPhase;
    aabb = new b2AABB();
    aabb.lowerBound.Set(p.x - b2Settings.b2_linearSlop, p.y - b2Settings.b2_linearSlop);
    aabb.upperBound.Set(p.x + b2Settings.b2_linearSlop, p.y + b2Settings.b2_linearSlop);
    broadPhase.Query(WorldQueryWrapper, aabb);
  };

  b2World.prototype.RayCast = function(callback, point1, point2) {
    var RayCastWrapper, broadPhase, input, output, __this;
    RayCastWrapper = function(input, proxy) {
      var fixture, fraction, hit, point, userData;
      userData = broadPhase.GetUserData(proxy);
      fixture = (userData instanceof b2Fixture ? userData : null);
      hit = fixture.RayCast(output, input);
      if (hit) {
        fraction = output.fraction;
        point = new b2Vec2((1.0 - fraction) * point1.x + fraction * point2.x, (1.0 - fraction) * point1.y + fraction * point2.y);
        return callback(fixture, point, output.normal, fraction);
      }
      return input.maxFraction;
    };
    __this = this;
    broadPhase = __this.m_contactManager.m_broadPhase;
    output = new b2RayCastOutput;
    input = new b2RayCastInput(point1, point2);
    broadPhase.RayCast(RayCastWrapper, input);
  };

  b2World.prototype.RayCastOne = function(point1, point2) {
    var RayCastOneWrapper, result, __this;
    RayCastOneWrapper = function(fixture, point, normal, fraction) {
      var result;
      if (fraction === void 0) {
        fraction = 0;
      }
      result = fixture;
      return fraction;
    };
    __this = this;
    result = void 0;
    __this.RayCast(RayCastOneWrapper, point1, point2);
    return result;
  };

  b2World.prototype.RayCastAll = function(point1, point2) {
    var RayCastAllWrapper, result, __this;
    RayCastAllWrapper = function(fixture, point, normal, fraction) {
      if (fraction === void 0) {
        fraction = 0;
      }
      result[result.length] = fixture;
      return 1;
    };
    __this = this;
    result = new Vector();
    __this.RayCast(RayCastAllWrapper, point1, point2);
    return result;
  };

  b2World.prototype.GetBodyList = function() {
    return this.m_bodyList;
  };

  b2World.prototype.GetJointList = function() {
    return this.m_jointList;
  };

  b2World.prototype.GetContactList = function() {
    return this.m_contactList;
  };

  b2World.prototype.IsLocked = function() {
    return (this.m_flags & b2World.e_locked) > 0;
  };

  b2World.prototype.Solve = function(step) {
    var b, c, ce, controller, i, island, j, jn, other, seed, stack, stackCount, stackSize;
    b = void 0;
    controller = this.m_controllerList;
    while (controller) {
      controller.Step(step);
      controller = controller.m_next;
    }
    island = this.m_island;
    island.Initialize(this.m_bodyCount, this.m_contactCount, this.m_jointCount, null, this.m_contactManager.m_contactListener, this.m_contactSolver);
    b = this.m_bodyList;
    while (b) {
      b.m_flags &= ~b2Body.e_islandFlag;
      b = b.m_next;
    }
    c = this.m_contactList;
    while (c) {
      c.m_flags &= ~b2Contact.e_islandFlag;
      c = c.m_next;
    }
    j = this.m_jointList;
    while (j) {
      j.m_islandFlag = false;
      j = j.m_next;
    }
    stackSize = parseInt(this.m_bodyCount);
    stack = this.s_stack;
    seed = this.m_bodyList;
    while (seed) {
      if (seed.m_flags & b2Body.e_islandFlag) {
        continue;
      }
      if (seed.IsAwake() === false || seed.IsActive() === false) {
        continue;
      }
      if (seed.GetType() === b2Body.b2_staticBody) {
        continue;
      }
      island.Clear();
      stackCount = 0;
      stack[stackCount++] = seed;
      seed.m_flags |= b2Body.e_islandFlag;
      while (stackCount > 0) {
        b = stack[--stackCount];
        island.AddBody(b);
        if (b.IsAwake() === false) {
          b.SetAwake(true);
        }
        if (b.GetType() === b2Body.b2_staticBody) {
          continue;
        }
        other = void 0;
        ce = b.m_contactList;
        while (ce) {
          if (ce.contact.m_flags & b2Contact.e_islandFlag) {
            continue;
          }
          if (ce.contact.IsSensor() === true || ce.contact.IsEnabled() === false || ce.contact.IsTouching() === false) {
            continue;
          }
          island.AddContact(ce.contact);
          ce.contact.m_flags |= b2Contact.e_islandFlag;
          other = ce.other;
          if (other.m_flags & b2Body.e_islandFlag) {
            continue;
          }
          stack[stackCount++] = other;
          other.m_flags |= b2Body.e_islandFlag;
          ce = ce.next;
        }
        jn = b.m_jointList;
        while (jn) {
          if (jn.joint.m_islandFlag === true) {
            continue;
          }
          other = jn.other;
          if (other.IsActive() === false) {
            continue;
          }
          island.AddJoint(jn.joint);
          jn.joint.m_islandFlag = true;
          if (other.m_flags & b2Body.e_islandFlag) {
            continue;
          }
          stack[stackCount++] = other;
          other.m_flags |= b2Body.e_islandFlag;
          jn = jn.next;
        }
      }
      island.Solve(step, this.m_gravity, this.m_allowSleep);
      i = 0;
      while (i < island.m_bodyCount) {
        b = island.m_bodies[i];
        if (b.GetType() === b2Body.b2_staticBody) {
          b.m_flags &= ~b2Body.e_islandFlag;
        }
        ++i;
      }
      seed = seed.m_next;
    }
    i = 0;
    while (i < stack.length) {
      if (!stack[i]) {
        break;
      }
      stack[i] = null;
      ++i;
    }
    b = this.m_bodyList;
    while (b) {
      if (b.IsAwake() === false || b.IsActive() === false) {
        continue;
      }
      if (b.GetType() === b2Body.b2_staticBody) {
        continue;
      }
      b.SynchronizeFixtures();
      b = b.m_next;
    }
    this.m_contactManager.FindNewContacts();
  };

  b2World.prototype.SolveTOI = function(step) {
    var b, bA, bB, c, cEdge, fA, fB, i, island, j, jEdge, minContact, minTOI, other, queue, queueSize, queueStart, seed, subStep, t0, toi;
    b = void 0;
    fA = void 0;
    fB = void 0;
    bA = void 0;
    bB = void 0;
    cEdge = void 0;
    j = void 0;
    island = this.m_island;
    island.Initialize(this.m_bodyCount, b2Settings.b2_maxTOIContactsPerIsland, b2Settings.b2_maxTOIJointsPerIsland, null, this.m_contactManager.m_contactListener, this.m_contactSolver);
    queue = b2World.s_queue;
    b = this.m_bodyList;
    while (b) {
      b.m_flags &= ~b2Body.e_islandFlag;
      b.m_sweep.t0 = 0.0;
      b = b.m_next;
    }
    c = void 0;
    c = this.m_contactList;
    while (c) {
      c.m_flags &= ~(b2Contact.e_toiFlag | b2Contact.e_islandFlag);
      c = c.m_next;
    }
    j = this.m_jointList;
    while (j) {
      j.m_islandFlag = false;
      j = j.m_next;
    }
    while (true) {
      minContact = null;
      minTOI = 1.0;
      c = this.m_contactList;
      while (c) {
        if (c.IsSensor() === true || c.IsEnabled() === false || c.IsContinuous() === false) {
          continue;
        }
        toi = 1.0;
        if (c.m_flags & b2Contact.e_toiFlag) {
          toi = c.m_toi;
        } else {
          fA = c.m_fixtureA;
          fB = c.m_fixtureB;
          bA = fA.m_body;
          bB = fB.m_body;
          if ((bA.GetType() !== b2Body.b2_dynamicBody || bA.IsAwake() === false) && (bB.GetType() !== b2Body.b2_dynamicBody || bB.IsAwake() === false)) {
            continue;
          }
          t0 = bA.m_sweep.t0;
          if (bA.m_sweep.t0 < bB.m_sweep.t0) {
            t0 = bB.m_sweep.t0;
            bA.m_sweep.Advance(t0);
          } else if (bB.m_sweep.t0 < bA.m_sweep.t0) {
            t0 = bA.m_sweep.t0;
            bB.m_sweep.Advance(t0);
          }
          toi = c.ComputeTOI(bA.m_sweep, bB.m_sweep);
          b2Settings.b2Assert(0.0 <= toi && toi <= 1.0);
          if (toi > 0.0 && toi < 1.0) {
            toi = (1.0 - toi) * t0 + toi;
            if (toi > 1) {
              toi = 1;
            }
          }
          c.m_toi = toi;
          c.m_flags |= b2Contact.e_toiFlag;
        }
        if (Number.MIN_VALUE < toi && toi < minTOI) {
          minContact = c;
          minTOI = toi;
        }
        c = c.m_next;
      }
      if ((minContact == null) || 1.0 - 100.0 * Number.MIN_VALUE < minTOI) {
        break;
      }
      fA = minContact.m_fixtureA;
      fB = minContact.m_fixtureB;
      bA = fA.m_body;
      bB = fB.m_body;
      b2World.s_backupA.Set(bA.m_sweep);
      b2World.s_backupB.Set(bB.m_sweep);
      bA.Advance(minTOI);
      bB.Advance(minTOI);
      minContact.Update(this.m_contactManager.m_contactListener);
      minContact.m_flags &= ~b2Contact.e_toiFlag;
      if (minContact.IsSensor() === true || minContact.IsEnabled() === false) {
        bA.m_sweep.Set(b2World.s_backupA);
        bB.m_sweep.Set(b2World.s_backupB);
        bA.SynchronizeTransform();
        bB.SynchronizeTransform();
        continue;
      }
      if (minContact.IsTouching() === false) {
        continue;
      }
      seed = bA;
      if (seed.GetType() !== b2Body.b2_dynamicBody) {
        seed = bB;
      }
      island.Clear();
      queueStart = 0;
      queueSize = 0;
      queue[queueStart + queueSize++] = seed;
      seed.m_flags |= b2Body.e_islandFlag;
      while (queueSize > 0) {
        b = queue[queueStart++];
        --queueSize;
        island.AddBody(b);
        if (b.IsAwake() === false) {
          b.SetAwake(true);
        }
        if (b.GetType() !== b2Body.b2_dynamicBody) {
          continue;
        }
        cEdge = b.m_contactList;
        while (cEdge) {
          if (island.m_contactCount === island.m_contactCapacity) {
            break;
          }
          if (cEdge.contact.m_flags & b2Contact.e_islandFlag) {
            continue;
          }
          if (cEdge.contact.IsSensor() === true || cEdge.contact.IsEnabled() === false || cEdge.contact.IsTouching() === false) {
            continue;
          }
          island.AddContact(cEdge.contact);
          cEdge.contact.m_flags |= b2Contact.e_islandFlag;
          other = cEdge.other;
          if (other.m_flags & b2Body.e_islandFlag) {
            continue;
          }
          if (other.GetType() !== b2Body.b2_staticBody) {
            other.Advance(minTOI);
            other.SetAwake(true);
          }
          queue[queueStart + queueSize] = other;
          ++queueSize;
          other.m_flags |= b2Body.e_islandFlag;
          cEdge = cEdge.next;
        }
        jEdge = b.m_jointList;
        while (jEdge) {
          if (island.m_jointCount === island.m_jointCapacity) {
            continue;
          }
          if (jEdge.joint.m_islandFlag === true) {
            continue;
          }
          other = jEdge.other;
          if (other.IsActive() === false) {
            continue;
          }
          island.AddJoint(jEdge.joint);
          jEdge.joint.m_islandFlag = true;
          if (other.m_flags & b2Body.e_islandFlag) {
            continue;
          }
          if (other.GetType() !== b2Body.b2_staticBody) {
            other.Advance(minTOI);
            other.SetAwake(true);
          }
          queue[queueStart + queueSize] = other;
          ++queueSize;
          other.m_flags |= b2Body.e_islandFlag;
          jEdge = jEdge.next;
        }
      }
      subStep = b2World.s_timestep;
      subStep.warmStarting = false;
      subStep.dt = (1.0 - minTOI) * step.dt;
      subStep.inv_dt = 1.0 / subStep.dt;
      subStep.dtRatio = 0.0;
      subStep.velocityIterations = step.velocityIterations;
      subStep.positionIterations = step.positionIterations;
      island.SolveTOI(subStep);
      i = 0;
      i = 0;
      while (i < island.m_bodyCount) {
        b = island.m_bodies[i];
        b.m_flags &= ~b2Body.e_islandFlag;
        if (b.IsAwake() === false) {
          continue;
        }
        if (b.GetType() !== b2Body.b2_dynamicBody) {
          continue;
        }
        b.SynchronizeFixtures();
        cEdge = b.m_contactList;
        while (cEdge) {
          cEdge.contact.m_flags &= ~b2Contact.e_toiFlag;
          cEdge = cEdge.next;
        }
        ++i;
      }
      i = 0;
      while (i < island.m_contactCount) {
        c = island.m_contacts[i];
        c.m_flags &= ~(b2Contact.e_toiFlag | b2Contact.e_islandFlag);
        ++i;
      }
      i = 0;
      while (i < island.m_jointCount) {
        j = island.m_joints[i];
        j.m_islandFlag = false;
        ++i;
      }
      this.m_contactManager.FindNewContacts();
    }
  };

  b2World.prototype.DrawJoint = function(joint) {
    var b1, b2, color, p1, p2, pulley, s1, s2, x1, x2, xf1, xf2;
    b1 = joint.GetBodyA();
    b2 = joint.GetBodyB();
    xf1 = b1.m_xf;
    xf2 = b2.m_xf;
    x1 = xf1.position;
    x2 = xf2.position;
    p1 = joint.GetAnchorA();
    p2 = joint.GetAnchorB();
    color = b2World.s_jointColor;
    switch (joint.m_type) {
      case b2Joint.e_distanceJoint:
        this.m_debugDraw.DrawSegment(p1, p2, color);
        break;
      case b2Joint.e_pulleyJoint:
        pulley = (joint instanceof b2PulleyJoint ? joint : null);
        s1 = pulley.GetGroundAnchorA();
        s2 = pulley.GetGroundAnchorB();
        this.m_debugDraw.DrawSegment(s1, p1, color);
        this.m_debugDraw.DrawSegment(s2, p2, color);
        this.m_debugDraw.DrawSegment(s1, s2, color);
        break;
      case b2Joint.e_mouseJoint:
        this.m_debugDraw.DrawSegment(p1, p2, color);
        break;
      default:
        if (b1 !== this.m_groundBody) {
          this.m_debugDraw.DrawSegment(x1, p1, color);
        }
        this.m_debugDraw.DrawSegment(p1, p2, color);
        if (b2 !== this.m_groundBody) {
          this.m_debugDraw.DrawSegment(x2, p2, color);
        }
    }
  };

  b2World.prototype.DrawShape = function(shape, xf, color) {
    var axis, center, circle, edge, i, localVertices, poly, radius, vertexCount, vertices;
    switch (shape.m_type) {
      case b2Shape.e_circleShape:
        circle = (shape instanceof b2CircleShape ? shape : null);
        center = b2Math.MulX(xf, circle.m_p);
        radius = circle.m_radius;
        axis = xf.R.col1;
        return this.m_debugDraw.DrawSolidCircle(center, radius, axis, color);
      case b2Shape.e_polygonShape:
        i = 0;
        poly = (shape instanceof b2PolygonShape ? shape : null);
        vertexCount = parseInt(poly.GetVertexCount());
        localVertices = poly.GetVertices();
        vertices = new Vector(vertexCount);
        i = 0;
        while (i < vertexCount) {
          vertices[i] = b2Math.MulX(xf, localVertices[i]);
          ++i;
        }
        return this.m_debugDraw.DrawSolidPolygon(vertices, vertexCount, color);
      case b2Shape.e_edgeShape:
        edge = (shape instanceof b2EdgeShape ? shape : null);
        return this.m_debugDraw.DrawSegment(b2Math.MulX(xf, edge.GetVertex1()), b2Math.MulX(xf, edge.GetVertex2()), color);
    }
  };

  b2World.s_timestep2 = new b2TimeStep();

  b2World.s_xf = new b2Transform();

  b2World.s_backupA = new b2Sweep();

  b2World.s_backupB = new b2Sweep();

  b2World.s_timestep = new b2TimeStep();

  b2World.s_queue = new Vector();

  b2World.s_jointColor = new b2Color(0.5, 0.8, 0.8);

  b2World.e_newFixture = 0x0001;

  b2World.e_locked = 0x0002;

  return b2World;

})();

//# sourceMappingURL=b2World.js.map

},{"../index":103}],59:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2CircleContact = (function(_super) {
  __extends(b2CircleContact, _super);

  function b2CircleContact() {
    return b2CircleContact.__super__.constructor.apply(this, arguments);
  }

  b2CircleContact.Create = function(allocator) {
    return new b2CircleContact();
  };

  b2CircleContact.Destroy = function(contact, allocator) {};

  b2CircleContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2CircleContact.__super__.Reset.call(this, fixtureA, fixtureB);
  };

  b2CircleContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    b2Collision.CollideCircles(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2CircleShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2CircleShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2CircleContact;

})(b2Contact);

//# sourceMappingURL=b2CircleContact.js.map

},{"../../index":103}],60:[function(require,module,exports){
var Box2D, b2ContactEdge, b2Manifold, b2Settings, b2TOIInput, b2TimeOfImpact;

Box2D = require('../../index');

b2Settings = Box2D.Common.b2Settings;

b2ContactEdge = Box2D.Dynamics.Contacts.b2ContactEdge;

b2Manifold = Box2D.Collision.b2Manifold;

b2TimeOfImpact = Box2D.Collision.b2TimeOfImpact;

b2TOIInput = Box2D.Collision.b2TOIInput;

Box2D.Dynamics.Contacts.b2Contact = (function() {
  b2Contact.e_sensorFlag = 0x0001;

  b2Contact.e_continuousFlag = 0x0002;

  b2Contact.e_islandFlag = 0x0004;

  b2Contact.e_toiFlag = 0x0008;

  b2Contact.e_touchingFlag = 0x0010;

  b2Contact.e_enabledFlag = 0x0020;

  b2Contact.e_filterFlag = 0x0040;

  b2Contact.s_input = new b2TOIInput();

  b2Contact.prototype.m_nodeA = null;

  b2Contact.prototype.m_nodeB = null;

  b2Contact.prototype.m_manifold = null;

  b2Contact.prototype.m_oldManifold = null;

  b2Contact.prototype.m_fixtureA = null;

  b2Contact.prototype.m_fixtureB = null;

  b2Contact.prototype.m_touching = false;

  function b2Contact() {
    this.m_nodeA = new b2ContactEdge();
    this.m_nodeB = new b2ContactEdge();
    this.m_manifold = new b2Manifold();
    this.m_oldManifold = new b2Manifold();
    return;
  }

  b2Contact.prototype.GetManifold = function() {
    return this.m_manifold;
  };

  b2Contact.prototype.GetWorldManifold = function(worldManifold) {
    var bodyA, bodyB, shapeA, shapeB;
    bodyA = this.m_fixtureA.GetBody();
    bodyB = this.m_fixtureB.GetBody();
    shapeA = this.m_fixtureA.GetShape();
    shapeB = this.m_fixtureB.GetShape();
    worldManifold.Initialize(this.m_manifold, bodyA.GetTransform(), shapeA.m_radius, bodyB.GetTransform(), shapeB.m_radius);
  };

  b2Contact.prototype.IsTouching = function() {
    return (this.m_flags & b2Contact.e_touchingFlag) === b2Contact.e_touchingFlag;
  };

  b2Contact.prototype.IsContinuous = function() {
    return (this.m_flags & b2Contact.e_continuousFlag) === b2Contact.e_continuousFlag;
  };

  b2Contact.prototype.SetSensor = function(sensor) {
    if (sensor) {
      this.m_flags |= b2Contact.e_sensorFlag;
    } else {
      this.m_flags &= ~b2Contact.e_sensorFlag;
    }
  };

  b2Contact.prototype.IsSensor = function() {
    return (this.m_flags & b2Contact.e_sensorFlag) === b2Contact.e_sensorFlag;
  };

  b2Contact.prototype.SetEnabled = function(flag) {
    if (flag) {
      this.m_flags |= b2Contact.e_enabledFlag;
    } else {
      this.m_flags &= ~b2Contact.e_enabledFlag;
    }
  };

  b2Contact.prototype.IsEnabled = function() {
    return (this.m_flags & b2Contact.e_enabledFlag) === b2Contact.e_enabledFlag;
  };

  b2Contact.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Contact.prototype.GetFixtureA = function() {
    return this.m_fixtureA;
  };

  b2Contact.prototype.GetFixtureB = function() {
    return this.m_fixtureB;
  };

  b2Contact.prototype.FlagForFiltering = function() {
    this.m_flags |= b2Contact.e_filterFlag;
  };

  b2Contact.prototype.Reset = function(fixtureA, fixtureB) {
    var bodyA, bodyB;
    if (fixtureA === void 0) {
      fixtureA = null;
    }
    if (fixtureB === void 0) {
      fixtureB = null;
    }
    this.m_flags = b2Contact.e_enabledFlag;
    if (!fixtureA || !fixtureB) {
      this.m_fixtureA = null;
      this.m_fixtureB = null;
      return;
    }
    if (fixtureA.IsSensor() || fixtureB.IsSensor()) {
      this.m_flags |= b2Contact.e_sensorFlag;
    }
    bodyA = fixtureA.GetBody();
    bodyB = fixtureB.GetBody();
    if (bodyA.GetType() !== b2Body.b2_dynamicBody || bodyA.IsBullet() || bodyB.GetType() !== b2Body.b2_dynamicBody || bodyB.IsBullet()) {
      this.m_flags |= b2Contact.e_continuousFlag;
    }
    this.m_fixtureA = fixtureA;
    this.m_fixtureB = fixtureB;
    this.m_manifold.m_pointCount = 0;
    this.m_prev = null;
    this.m_next = null;
    this.m_nodeA.contact = null;
    this.m_nodeA.prev = null;
    this.m_nodeA.next = null;
    this.m_nodeA.other = null;
    this.m_nodeB.contact = null;
    this.m_nodeB.prev = null;
    this.m_nodeB.next = null;
    this.m_nodeB.other = null;
  };

  b2Contact.prototype.Update = function(listener) {
    var aabbOverlap, bodyA, bodyB, i, id2, j, mp1, mp2, shapeA, shapeB, tManifold, touching, wasTouching, xfA, xfB;
    tManifold = this.m_oldManifold;
    this.m_oldManifold = this.m_manifold;
    this.m_manifold = tManifold;
    this.m_flags |= b2Contact.e_enabledFlag;
    touching = false;
    wasTouching = (this.m_flags & b2Contact.e_touchingFlag) === b2Contact.e_touchingFlag;
    bodyA = this.m_fixtureA.m_body;
    bodyB = this.m_fixtureB.m_body;
    aabbOverlap = this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);
    if (this.m_flags & b2Contact.e_sensorFlag) {
      if (aabbOverlap) {
        shapeA = this.m_fixtureA.GetShape();
        shapeB = this.m_fixtureB.GetShape();
        xfA = bodyA.GetTransform();
        xfB = bodyB.GetTransform();
        touching = b2Shape.TestOverlap(shapeA, xfA, shapeB, xfB);
      }
      this.m_manifold.m_pointCount = 0;
    } else {
      if (bodyA.GetType() !== b2Body.b2_dynamicBody || bodyA.IsBullet() || bodyB.GetType() !== b2Body.b2_dynamicBody || bodyB.IsBullet()) {
        this.m_flags |= b2Contact.e_continuousFlag;
      } else {
        this.m_flags &= ~b2Contact.e_continuousFlag;
      }
      if (aabbOverlap) {
        this.Evaluate();
        touching = this.m_manifold.m_pointCount > 0;
        i = 0;
        while (i < this.m_manifold.m_pointCount) {
          mp2 = this.m_manifold.m_points[i];
          mp2.m_normalImpulse = 0.0;
          mp2.m_tangentImpulse = 0.0;
          id2 = mp2.m_id;
          j = 0;
          while (j < this.m_oldManifold.m_pointCount) {
            mp1 = this.m_oldManifold.m_points[j];
            if (mp1.m_id.key === id2.key) {
              mp2.m_normalImpulse = mp1.m_normalImpulse;
              mp2.m_tangentImpulse = mp1.m_tangentImpulse;
              break;
            }
            ++j;
          }
          ++i;
        }
      } else {
        this.m_manifold.m_pointCount = 0;
      }
      if (touching !== wasTouching) {
        bodyA.SetAwake(true);
        bodyB.SetAwake(true);
      }
    }
    if (touching) {
      this.m_flags |= b2Contact.e_touchingFlag;
    } else {
      this.m_flags &= ~b2Contact.e_touchingFlag;
    }
    if (wasTouching === false && touching === true) {
      listener.BeginContact(this);
    }
    if (wasTouching === true && touching === false) {
      listener.EndContact(this);
    }
    if ((this.m_flags & b2Contact.e_sensorFlag) === 0) {
      listener.PreSolve(this, this.m_oldManifold);
    }
  };

  b2Contact.prototype.Evaluate = function() {};

  b2Contact.prototype.ComputeTOI = function(sweepA, sweepB) {
    b2Contact.s_input.proxyA.Set(this.m_fixtureA.GetShape());
    b2Contact.s_input.proxyB.Set(this.m_fixtureB.GetShape());
    b2Contact.s_input.sweepA = sweepA;
    b2Contact.s_input.sweepB = sweepB;
    b2Contact.s_input.tolerance = b2Settings.b2_linearSlop;
    return b2TimeOfImpact.TimeOfImpact(b2Contact.s_input);
  };

  return b2Contact;

})();

//# sourceMappingURL=b2Contact.js.map

},{"../../index":103}],61:[function(require,module,exports){
var Box2D, b2ContactEdge, b2Mat22, b2Settings, b2Vec2;

Box2D = require('../../index');

b2Settings = Box2D.Common.b2Settings;

b2ContactEdge = Box2D.Dynamics.Contacts.b2ContactConstraintPoint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Contacts.b2ContactConstraint = (function() {
  b2ContactConstraint.prototype.localPlaneNormal = null;

  b2ContactConstraint.prototype.localPoint = null;

  b2ContactConstraint.prototype.normal = null;

  b2ContactConstraint.prototype.normalMass = null;

  b2ContactConstraint.prototype.K = null;

  b2ContactConstraint.prototype.points = null;

  function b2ContactConstraint() {
    var i;
    this.localPlaneNormal = new b2Vec2();
    this.localPoint = new b2Vec2();
    this.normal = new b2Vec2();
    this.normalMass = new b2Mat22();
    this.K = new b2Mat22();
    this.points = new Vector(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.points[i] = new b2ContactConstraintPoint();
      i++;
    }
    return;
  }

  return b2ContactConstraint;

})();

//# sourceMappingURL=b2ContactConstraint.js.map

},{"../../index":103}],62:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Contacts.b2ContactConstraintPoint = (function() {
  b2ContactConstraintPoint.prototype.localPoint = null;

  b2ContactConstraintPoint.prototype.rA = null;

  b2ContactConstraintPoint.prototype.rB = null;

  function b2ContactConstraintPoint() {
    this.localPoint = new b2Vec2();
    this.rA = new b2Vec2();
    this.rB = new b2Vec2();
    return;
  }

  return b2ContactConstraintPoint;

})();

//# sourceMappingURL=b2ContactConstraintPoint.js.map

},{"../../index":103}],63:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Contacts.b2ContactEdge = (function() {
  function b2ContactEdge() {}

  return b2ContactEdge;

})();

//# sourceMappingURL=b2ContactEdge.js.map

},{"../../index":103}],64:[function(require,module,exports){
var Box2D, Vector, b2CircleContact, b2ContactRegister, b2EdgeAndCircleContact, b2PolyAndCircleContact, b2PolyAndEdgeContact, b2PolygonContact, b2Shape;

Box2D = require('../../index');

Vector = Box2D.Vector;

b2Shape = Box2D.Collision.Shapes.b2Shape;

b2ContactRegister = Box2D.Dynamics.Contacts.b2ContactRegister;

b2CircleContact = Box2D.Dynamics.Contacts.b2CircleContact;

b2PolyAndCircleContact = Box2D.Dynamics.Contacts.b2PolyAndCircleContact;

b2PolygonContact = Box2D.Dynamics.Contacts.b2PolygonContact;

b2EdgeAndCircleContact = Box2D.Dynamics.Contacts.b2EdgeAndCircleContact;

b2PolyAndEdgeContact = Box2D.Dynamics.Contacts.b2PolyAndEdgeContact;

Box2D.Dynamics.Contacts.b2ContactFactory = (function() {
  b2ContactFactory.prototype.m_allocator = null;

  b2ContactFactory.prototype.m_registers = null;

  function b2ContactFactory(allocator) {
    this.m_allocator = allocator;
    this.InitializeRegisters();
    return;
  }

  b2ContactFactory.prototype.AddType = function(createFcn, destroyFcn, type1, type2) {
    if (type1 === void 0) {
      type1 = 0;
    }
    if (type2 === void 0) {
      type2 = 0;
    }
    this.m_registers[type1][type2].createFcn = createFcn;
    this.m_registers[type1][type2].destroyFcn = destroyFcn;
    this.m_registers[type1][type2].primary = true;
    if (type1 !== type2) {
      this.m_registers[type2][type1].createFcn = createFcn;
      this.m_registers[type2][type1].destroyFcn = destroyFcn;
      this.m_registers[type2][type1].primary = false;
    }
  };

  b2ContactFactory.prototype.InitializeRegisters = function() {
    var i, j;
    this.m_registers = new Vector(b2Shape.e_shapeTypeCount);
    i = 0;
    while (i < b2Shape.e_shapeTypeCount) {
      this.m_registers[i] = new Vector(b2Shape.e_shapeTypeCount);
      j = 0;
      while (j < b2Shape.e_shapeTypeCount) {
        this.m_registers[i][j] = new b2ContactRegister();
        j++;
      }
      i++;
    }
    this.AddType(b2CircleContact.Create, b2CircleContact.Destroy, b2Shape.e_circleShape, b2Shape.e_circleShape);
    this.AddType(b2PolyAndCircleContact.Create, b2PolyAndCircleContact.Destroy, b2Shape.e_polygonShape, b2Shape.e_circleShape);
    this.AddType(b2PolygonContact.Create, b2PolygonContact.Destroy, b2Shape.e_polygonShape, b2Shape.e_polygonShape);
    this.AddType(b2EdgeAndCircleContact.Create, b2EdgeAndCircleContact.Destroy, b2Shape.e_edgeShape, b2Shape.e_circleShape);
    this.AddType(b2PolyAndEdgeContact.Create, b2PolyAndEdgeContact.Destroy, b2Shape.e_polygonShape, b2Shape.e_edgeShape);
  };

  b2ContactFactory.prototype.Create = function(fixtureA, fixtureB) {
    var c, createFcn, reg, type1, type2;
    type1 = parseInt(fixtureA.GetType());
    type2 = parseInt(fixtureB.GetType());
    reg = this.m_registers[type1][type2];
    c = void 0;
    if (reg.pool) {
      c = reg.pool;
      reg.pool = c.m_next;
      reg.poolCount--;
      c.Reset(fixtureA, fixtureB);
      return c;
    }
    createFcn = reg.createFcn;
    if (createFcn != null) {
      if (reg.primary) {
        c = createFcn(this.m_allocator);
        c.Reset(fixtureA, fixtureB);
        return c;
      } else {
        c = createFcn(this.m_allocator);
        c.Reset(fixtureB, fixtureA);
        return c;
      }
    } else {
      return null;
    }
  };

  b2ContactFactory.prototype.Destroy = function(contact) {
    var destroyFcn, reg, type1, type2;
    if (contact.m_manifold.m_pointCount > 0) {
      contact.m_fixtureA.m_body.SetAwake(true);
      contact.m_fixtureB.m_body.SetAwake(true);
    }
    type1 = parseInt(contact.m_fixtureA.GetType());
    type2 = parseInt(contact.m_fixtureB.GetType());
    reg = this.m_registers[type1][type2];
    if (true) {
      reg.poolCount++;
      contact.m_next = reg.pool;
      reg.pool = contact;
    }
    destroyFcn = reg.destroyFcn;
    destroyFcn(contact, this.m_allocator);
  };

  return b2ContactFactory;

})();

//# sourceMappingURL=b2ContactFactory.js.map

},{"../../index":103}],65:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Contacts.b2ContactRegister = (function() {
  function b2ContactRegister() {}

  return b2ContactRegister;

})();

//# sourceMappingURL=b2ContactRegister.js.map

},{"../../index":103}],66:[function(require,module,exports){
var Box2D, b2ContactID, b2Vec2;

Box2D = require('../../index');

b2ContactID = Box2D.Collision.b2ContactID;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Contacts.b2ContactResult = (function() {
  b2ContactResult.prototype.position = null;

  b2ContactResult.prototype.normal = null;

  b2ContactResult.prototype.id = null;

  function b2ContactResult() {
    this.position = new b2Vec2();
    this.normal = new b2Vec2();
    this.id = new b2ContactID();
    return;
  }

  return b2ContactResult;

})();

//# sourceMappingURL=b2ContactResult.js.map

},{"../../index":103}],67:[function(require,module,exports){
var Box2D, Vector, b2ContactConstraint, b2PositionSolverManifold, b2TimeStep, b2WorldManifold;

Box2D = require('../../index');

Vector = Box2D.Vector;

b2TimeStep = Box2D.Dynamics.b2TimeStep;

b2ContactConstraint = Box2D.Dynamics.Contacts.b2ContactConstraint;

b2WorldManifold = Box2D.Collision.b2WorldManifold;

b2PositionSolverManifold = Box2D.Dynamics.Contacts.b2PositionSolverManifold;

Box2D.Dynamics.Contacts.b2ContactSolver = (function() {
  b2ContactSolver.s_worldManifold = new b2WorldManifold();

  b2ContactSolver.s_psm = new b2PositionSolverManifold();

  b2ContactSolver.prototype.m_step = null;

  b2ContactSolver.prototype.m_constraints = null;

  b2ContactSolver.prototype.m_allocator = null;

  b2ContactSolver.prototype.m_constraintCount = 0;

  function b2ContactSolver() {
    this.m_step = new b2TimeStep();
    this.m_constraints = new Vector();
    return;
  }

  b2ContactSolver.prototype.Initialize = function(step, contacts, contactCount, allocator) {
    var bodyA, bodyB, cc, ccp, ccp1, ccp2, contact, cp, fixtureA, fixtureB, friction, i, invIA, invIB, invMassA, invMassB, k, k11, k12, k22, kEqualized, kNormal, kTangent, k_maxConditionNumber, manifold, normalX, normalY, rAX, rAY, rBX, rBY, radiusA, radiusB, restitution, rn1A, rn1B, rn2A, rn2B, rnA, rnB, rtA, rtB, shapeA, shapeB, tMat, tVec, tX, tY, tangentX, tangentY, vAX, vAY, vBX, vBY, vRel, wA, wB;
    if (contactCount === void 0) {
      contactCount = 0;
    }
    contact = void 0;
    this.m_step.Set(step);
    this.m_allocator = allocator;
    i = 0;
    tVec = void 0;
    tMat = void 0;
    this.m_constraintCount = contactCount;
    while (this.m_constraints.length < this.m_constraintCount) {
      this.m_constraints[this.m_constraints.length] = new b2ContactConstraint();
    }
    i = 0;
    while (i < contactCount) {
      contact = contacts[i];
      fixtureA = contact.m_fixtureA;
      fixtureB = contact.m_fixtureB;
      shapeA = fixtureA.m_shape;
      shapeB = fixtureB.m_shape;
      radiusA = shapeA.m_radius;
      radiusB = shapeB.m_radius;
      bodyA = fixtureA.m_body;
      bodyB = fixtureB.m_body;
      manifold = contact.GetManifold();
      friction = b2Settings.b2MixFriction(fixtureA.GetFriction(), fixtureB.GetFriction());
      restitution = b2Settings.b2MixRestitution(fixtureA.GetRestitution(), fixtureB.GetRestitution());
      vAX = bodyA.m_linearVelocity.x;
      vAY = bodyA.m_linearVelocity.y;
      vBX = bodyB.m_linearVelocity.x;
      vBY = bodyB.m_linearVelocity.y;
      wA = bodyA.m_angularVelocity;
      wB = bodyB.m_angularVelocity;
      b2Settings.b2Assert(manifold.m_pointCount > 0);
      b2ContactSolver.s_worldManifold.Initialize(manifold, bodyA.m_xf, radiusA, bodyB.m_xf, radiusB);
      normalX = b2ContactSolver.s_worldManifold.m_normal.x;
      normalY = b2ContactSolver.s_worldManifold.m_normal.y;
      cc = this.m_constraints[i];
      cc.bodyA = bodyA;
      cc.bodyB = bodyB;
      cc.manifold = manifold;
      cc.normal.x = normalX;
      cc.normal.y = normalY;
      cc.pointCount = manifold.m_pointCount;
      cc.friction = friction;
      cc.restitution = restitution;
      cc.localPlaneNormal.x = manifold.m_localPlaneNormal.x;
      cc.localPlaneNormal.y = manifold.m_localPlaneNormal.y;
      cc.localPoint.x = manifold.m_localPoint.x;
      cc.localPoint.y = manifold.m_localPoint.y;
      cc.radius = radiusA + radiusB;
      cc.type = manifold.m_type;
      k = 0;
      while (k < cc.pointCount) {
        cp = manifold.m_points[k];
        ccp = cc.points[k];
        ccp.normalImpulse = cp.m_normalImpulse;
        ccp.tangentImpulse = cp.m_tangentImpulse;
        ccp.localPoint.SetV(cp.m_localPoint);
        rAX = ccp.rA.x = b2ContactSolver.s_worldManifold.m_points[k].x - bodyA.m_sweep.c.x;
        rAY = ccp.rA.y = b2ContactSolver.s_worldManifold.m_points[k].y - bodyA.m_sweep.c.y;
        rBX = ccp.rB.x = b2ContactSolver.s_worldManifold.m_points[k].x - bodyB.m_sweep.c.x;
        rBY = ccp.rB.y = b2ContactSolver.s_worldManifold.m_points[k].y - bodyB.m_sweep.c.y;
        rnA = rAX * normalY - rAY * normalX;
        rnB = rBX * normalY - rBY * normalX;
        rnA *= rnA;
        rnB *= rnB;
        kNormal = bodyA.m_invMass + bodyB.m_invMass + bodyA.m_invI * rnA + bodyB.m_invI * rnB;
        ccp.normalMass = 1.0 / kNormal;
        kEqualized = bodyA.m_mass * bodyA.m_invMass + bodyB.m_mass * bodyB.m_invMass;
        kEqualized += bodyA.m_mass * bodyA.m_invI * rnA + bodyB.m_mass * bodyB.m_invI * rnB;
        ccp.equalizedMass = 1.0 / kEqualized;
        tangentX = normalY;
        tangentY = -normalX;
        rtA = rAX * tangentY - rAY * tangentX;
        rtB = rBX * tangentY - rBY * tangentX;
        rtA *= rtA;
        rtB *= rtB;
        kTangent = bodyA.m_invMass + bodyB.m_invMass + bodyA.m_invI * rtA + bodyB.m_invI * rtB;
        ccp.tangentMass = 1.0 / kTangent;
        ccp.velocityBias = 0.0;
        tX = vBX + (-wB * rBY) - vAX - (-wA * rAY);
        tY = vBY + (wB * rBX) - vAY - (wA * rAX);
        vRel = cc.normal.x * tX + cc.normal.y * tY;
        if (vRel < (-b2Settings.b2_velocityThreshold)) {
          ccp.velocityBias += -cc.restitution * vRel;
        }
        ++k;
      }
      if (cc.pointCount === 2) {
        ccp1 = cc.points[0];
        ccp2 = cc.points[1];
        invMassA = bodyA.m_invMass;
        invIA = bodyA.m_invI;
        invMassB = bodyB.m_invMass;
        invIB = bodyB.m_invI;
        rn1A = ccp1.rA.x * normalY - ccp1.rA.y * normalX;
        rn1B = ccp1.rB.x * normalY - ccp1.rB.y * normalX;
        rn2A = ccp2.rA.x * normalY - ccp2.rA.y * normalX;
        rn2B = ccp2.rB.x * normalY - ccp2.rB.y * normalX;
        k11 = invMassA + invMassB + invIA * rn1A * rn1A + invIB * rn1B * rn1B;
        k22 = invMassA + invMassB + invIA * rn2A * rn2A + invIB * rn2B * rn2B;
        k12 = invMassA + invMassB + invIA * rn1A * rn2A + invIB * rn1B * rn2B;
        k_maxConditionNumber = 100.0;
        if (k11 * k11 < k_maxConditionNumber * (k11 * k22 - k12 * k12)) {
          cc.K.col1.Set(k11, k12);
          cc.K.col2.Set(k12, k22);
          cc.K.GetInverse(cc.normalMass);
        } else {
          cc.pointCount = 1;
        }
      }
      ++i;
    }
  };

  b2ContactSolver.prototype.InitVelocityConstraints = function(step) {
    var PX, PY, bodyA, bodyB, c, ccp, ccp2, i, invIA, invIB, invMassA, invMassB, j, normalX, normalY, tCount, tMat, tVec, tVec2, tX, tangentX, tangentY;
    tVec = void 0;
    tVec2 = void 0;
    tMat = void 0;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      bodyA = c.bodyA;
      bodyB = c.bodyB;
      invMassA = bodyA.m_invMass;
      invIA = bodyA.m_invI;
      invMassB = bodyB.m_invMass;
      invIB = bodyB.m_invI;
      normalX = c.normal.x;
      normalY = c.normal.y;
      tangentX = normalY;
      tangentY = -normalX;
      tX = 0;
      j = 0;
      tCount = 0;
      if (step.warmStarting) {
        tCount = c.pointCount;
        j = 0;
        while (j < tCount) {
          ccp = c.points[j];
          ccp.normalImpulse *= step.dtRatio;
          ccp.tangentImpulse *= step.dtRatio;
          PX = ccp.normalImpulse * normalX + ccp.tangentImpulse * tangentX;
          PY = ccp.normalImpulse * normalY + ccp.tangentImpulse * tangentY;
          bodyA.m_angularVelocity -= invIA * (ccp.rA.x * PY - ccp.rA.y * PX);
          bodyA.m_linearVelocity.x -= invMassA * PX;
          bodyA.m_linearVelocity.y -= invMassA * PY;
          bodyB.m_angularVelocity += invIB * (ccp.rB.x * PY - ccp.rB.y * PX);
          bodyB.m_linearVelocity.x += invMassB * PX;
          bodyB.m_linearVelocity.y += invMassB * PY;
          ++j;
        }
      } else {
        tCount = c.pointCount;
        j = 0;
        while (j < tCount) {
          ccp2 = c.points[j];
          ccp2.normalImpulse = 0.0;
          ccp2.tangentImpulse = 0.0;
          ++j;
        }
      }
      ++i;
    }
  };

  b2ContactSolver.prototype.SolveVelocityConstraints = function() {
    var P1X, P1Y, P2X, P2Y, PX, PY, aX, aY, bX, bY, bodyA, bodyB, c, ccp, cp1, cp2, dX, dY, dv1X, dv1Y, dv2X, dv2Y, dvX, dvY, friction, i, invIA, invIB, invMassA, invMassB, j, k_errorTol, lambda, maxFriction, newImpulse, normalX, normalY, rAX, rAY, rBX, rBY, tCount, tMat, tVec, tX, tangentX, tangentY, vA, vB, vn, vn1, vn2, vt, wA, wB, xX, xY;
    j = 0;
    ccp = void 0;
    rAX = 0;
    rAY = 0;
    rBX = 0;
    rBY = 0;
    dvX = 0;
    dvY = 0;
    vn = 0;
    vt = 0;
    lambda = 0;
    maxFriction = 0;
    newImpulse = 0;
    PX = 0;
    PY = 0;
    dX = 0;
    dY = 0;
    P1X = 0;
    P1Y = 0;
    P2X = 0;
    P2Y = 0;
    tMat = void 0;
    tVec = void 0;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      bodyA = c.bodyA;
      bodyB = c.bodyB;
      wA = bodyA.m_angularVelocity;
      wB = bodyB.m_angularVelocity;
      vA = bodyA.m_linearVelocity;
      vB = bodyB.m_linearVelocity;
      invMassA = bodyA.m_invMass;
      invIA = bodyA.m_invI;
      invMassB = bodyB.m_invMass;
      invIB = bodyB.m_invI;
      normalX = c.normal.x;
      normalY = c.normal.y;
      tangentX = normalY;
      tangentY = -normalX;
      friction = c.friction;
      tX = 0;
      j = 0;
      while (j < c.pointCount) {
        ccp = c.points[j];
        dvX = vB.x - wB * ccp.rB.y - vA.x + wA * ccp.rA.y;
        dvY = vB.y + wB * ccp.rB.x - vA.y - wA * ccp.rA.x;
        vt = dvX * tangentX + dvY * tangentY;
        lambda = ccp.tangentMass * (-vt);
        maxFriction = friction * ccp.normalImpulse;
        newImpulse = b2Math.Clamp(ccp.tangentImpulse + lambda, -maxFriction, maxFriction);
        lambda = newImpulse - ccp.tangentImpulse;
        PX = lambda * tangentX;
        PY = lambda * tangentY;
        vA.x -= invMassA * PX;
        vA.y -= invMassA * PY;
        wA -= invIA * (ccp.rA.x * PY - ccp.rA.y * PX);
        vB.x += invMassB * PX;
        vB.y += invMassB * PY;
        wB += invIB * (ccp.rB.x * PY - ccp.rB.y * PX);
        ccp.tangentImpulse = newImpulse;
        j++;
      }
      tCount = parseInt(c.pointCount);
      if (c.pointCount === 1) {
        ccp = c.points[0];
        dvX = vB.x + (-wB * ccp.rB.y) - vA.x - (-wA * ccp.rA.y);
        dvY = vB.y + (wB * ccp.rB.x) - vA.y - (wA * ccp.rA.x);
        vn = dvX * normalX + dvY * normalY;
        lambda = -ccp.normalMass * (vn - ccp.velocityBias);
        newImpulse = ccp.normalImpulse + lambda;
        newImpulse = (newImpulse > 0 ? newImpulse : 0.0);
        lambda = newImpulse - ccp.normalImpulse;
        PX = lambda * normalX;
        PY = lambda * normalY;
        vA.x -= invMassA * PX;
        vA.y -= invMassA * PY;
        wA -= invIA * (ccp.rA.x * PY - ccp.rA.y * PX);
        vB.x += invMassB * PX;
        vB.y += invMassB * PY;
        wB += invIB * (ccp.rB.x * PY - ccp.rB.y * PX);
        ccp.normalImpulse = newImpulse;
      } else {
        cp1 = c.points[0];
        cp2 = c.points[1];
        aX = cp1.normalImpulse;
        aY = cp2.normalImpulse;
        dv1X = vB.x - wB * cp1.rB.y - vA.x + wA * cp1.rA.y;
        dv1Y = vB.y + wB * cp1.rB.x - vA.y - wA * cp1.rA.x;
        dv2X = vB.x - wB * cp2.rB.y - vA.x + wA * cp2.rA.y;
        dv2Y = vB.y + wB * cp2.rB.x - vA.y - wA * cp2.rA.x;
        vn1 = dv1X * normalX + dv1Y * normalY;
        vn2 = dv2X * normalX + dv2Y * normalY;
        bX = vn1 - cp1.velocityBias;
        bY = vn2 - cp2.velocityBias;
        tMat = c.K;
        bX -= tMat.col1.x * aX + tMat.col2.x * aY;
        bY -= tMat.col1.y * aX + tMat.col2.y * aY;
        k_errorTol = 0.001;
        while (true) {
          tMat = c.normalMass;
          xX = -(tMat.col1.x * bX + tMat.col2.x * bY);
          xY = -(tMat.col1.y * bX + tMat.col2.y * bY);
          if (xX >= 0.0 && xY >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          xX = -cp1.normalMass * bX;
          xY = 0.0;
          vn1 = 0.0;
          vn2 = c.K.col1.y * xX + bY;
          if (xX >= 0.0 && vn2 >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          xX = 0.0;
          xY = -cp2.normalMass * bY;
          vn1 = c.K.col2.x * xY + bX;
          vn2 = 0.0;
          if (xY >= 0.0 && vn1 >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          xX = 0.0;
          xY = 0.0;
          vn1 = bX;
          vn2 = bY;
          if (vn1 >= 0.0 && vn2 >= 0.0) {
            dX = xX - aX;
            dY = xY - aY;
            P1X = dX * normalX;
            P1Y = dX * normalY;
            P2X = dY * normalX;
            P2Y = dY * normalY;
            vA.x -= invMassA * (P1X + P2X);
            vA.y -= invMassA * (P1Y + P2Y);
            wA -= invIA * (cp1.rA.x * P1Y - cp1.rA.y * P1X + cp2.rA.x * P2Y - cp2.rA.y * P2X);
            vB.x += invMassB * (P1X + P2X);
            vB.y += invMassB * (P1Y + P2Y);
            wB += invIB * (cp1.rB.x * P1Y - cp1.rB.y * P1X + cp2.rB.x * P2Y - cp2.rB.y * P2X);
            cp1.normalImpulse = xX;
            cp2.normalImpulse = xY;
            break;
          }
          break;
        }
      }
      bodyA.m_angularVelocity = wA;
      bodyB.m_angularVelocity = wB;
      ++i;
    }
  };

  b2ContactSolver.prototype.FinalizeVelocityConstraints = function() {
    var c, i, j, m, point1, point2;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      m = c.manifold;
      j = 0;
      while (j < c.pointCount) {
        point1 = m.m_points[j];
        point2 = c.points[j];
        point1.m_normalImpulse = point2.normalImpulse;
        point1.m_tangentImpulse = point2.tangentImpulse;
        ++j;
      }
      ++i;
    }
  };

  b2ContactSolver.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, PX, PY, bodyA, bodyB, c, ccp, i, impulse, invIA, invIB, invMassA, invMassB, j, minSeparation, normal, point, rAX, rAY, rBX, rBY, separation;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    minSeparation = 0.0;
    i = 0;
    while (i < this.m_constraintCount) {
      c = this.m_constraints[i];
      bodyA = c.bodyA;
      bodyB = c.bodyB;
      invMassA = bodyA.m_mass * bodyA.m_invMass;
      invIA = bodyA.m_mass * bodyA.m_invI;
      invMassB = bodyB.m_mass * bodyB.m_invMass;
      invIB = bodyB.m_mass * bodyB.m_invI;
      b2ContactSolver.s_psm.Initialize(c);
      normal = b2ContactSolver.s_psm.m_normal;
      j = 0;
      while (j < c.pointCount) {
        ccp = c.points[j];
        point = b2ContactSolver.s_psm.m_points[j];
        separation = b2ContactSolver.s_psm.m_separations[j];
        rAX = point.x - bodyA.m_sweep.c.x;
        rAY = point.y - bodyA.m_sweep.c.y;
        rBX = point.x - bodyB.m_sweep.c.x;
        rBY = point.y - bodyB.m_sweep.c.y;
        minSeparation = (minSeparation < separation ? minSeparation : separation);
        C = b2Math.Clamp(baumgarte * (separation + b2Settings.b2_linearSlop), -b2Settings.b2_maxLinearCorrection, 0.0);
        impulse = -ccp.equalizedMass * C;
        PX = impulse * normal.x;
        PY = impulse * normal.y;
        bodyA.m_sweep.c.x -= invMassA * PX;
        bodyA.m_sweep.c.y -= invMassA * PY;
        bodyA.m_sweep.a -= invIA * (rAX * PY - rAY * PX);
        bodyA.SynchronizeTransform();
        bodyB.m_sweep.c.x += invMassB * PX;
        bodyB.m_sweep.c.y += invMassB * PY;
        bodyB.m_sweep.a += invIB * (rBX * PY - rBY * PX);
        bodyB.SynchronizeTransform();
        j++;
      }
      i++;
    }
    return minSeparation > (-1.5 * b2Settings.b2_linearSlop);
  };

  return b2ContactSolver;

})();

//# sourceMappingURL=b2ContactSolver.js.map

},{"../../index":103}],68:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2EdgeAndCircleContact = (function(_super) {
  var b2CollideEdgeAndCircle;

  __extends(b2EdgeAndCircleContact, _super);

  function b2EdgeAndCircleContact() {
    return b2EdgeAndCircleContact.__super__.constructor.apply(this, arguments);
  }

  b2EdgeAndCircleContact.prototype.m_fixtureA = null;

  b2EdgeAndCircleContact.prototype.m_fixtureB = null;

  b2EdgeAndCircleContact.prototype.m_manifold = null;

  b2EdgeAndCircleContact.Create = function(allocator) {
    return new b2EdgeAndCircleContact();
  };

  b2EdgeAndCircleContact.Destroy = function(contact, allocator) {};

  b2EdgeAndCircleContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2EdgeAndCircleContact.__super__.Reset.call(this, fixtureA, fixtureB);
  };

  b2EdgeAndCircleContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    this.b2CollideEdgeAndCircle(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2EdgeShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2CircleShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  b2CollideEdgeAndCircle = function(manifold, edge, xf1, circle, xf2) {};

  return b2EdgeAndCircleContact;

})(b2Contact);

//# sourceMappingURL=b2EdgeAndCircleContact.js.map

},{"../../index":103}],69:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2NullContact = (function(_super) {
  __extends(b2NullContact, _super);

  function b2NullContact() {
    return b2NullContact.__super__.constructor.apply(this, arguments);
  }

  b2NullContact.prototype.Evaluate = function() {};

  return b2NullContact;

})(b2Contact);

//# sourceMappingURL=b2NullContact.js.map

},{"../../index":103}],70:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2PolyAndCircleContact = (function(_super) {
  var Evaluate;

  __extends(b2PolyAndCircleContact, _super);

  function b2PolyAndCircleContact() {
    return b2PolyAndCircleContact.__super__.constructor.apply(this, arguments);
  }

  b2PolyAndCircleContact.Create = function(allocator) {
    return new b2PolyAndCircleContact();
  };

  b2PolyAndCircleContact.Destroy = function(contact, allocator) {};

  b2PolyAndCircleContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2PolyAndCircleContact.__super__.Reset.call(this, fixtureA, fixtureB);
    b2Settings.b2Assert(fixtureA.GetType() === b2Shape.e_polygonShape);
    b2Settings.b2Assert(fixtureB.GetType() === b2Shape.e_circleShape);
  };

  Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.m_body;
    bB = this.m_fixtureB.m_body;
    b2Collision.CollidePolygonAndCircle(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2PolygonShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2CircleShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2PolyAndCircleContact;

})(b2Contact);

//# sourceMappingURL=b2PolyAndCircleContact.js.map

},{"../../index":103}],71:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2PolyAndEdgeContact = (function(_super) {
  __extends(b2PolyAndEdgeContact, _super);

  function b2PolyAndEdgeContact() {
    return b2PolyAndEdgeContact.__super__.constructor.apply(this, arguments);
  }

  b2PolyAndEdgeContact.Create = function(allocator) {
    return new b2PolyAndEdgeContact();
  };

  b2PolyAndEdgeContact.Destroy = function(contact, allocator) {};

  b2PolyAndEdgeContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2PolyAndEdgeContact.__super__.Reset.call(this, fixtureA, fixtureB);
    b2Settings.b2Assert(fixtureA.GetType() === b2Shape.e_polygonShape);
    b2Settings.b2Assert(fixtureB.GetType() === b2Shape.e_edgeShape);
  };

  b2PolyAndEdgeContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    this.b2CollidePolyAndEdge(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2PolygonShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2EdgeShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2PolyAndEdgeContact;

})(b2Contact);

//# sourceMappingURL=b2PolyAndEdgeContact.js.map

},{"../../index":103}],72:[function(require,module,exports){
var Box2D, b2Contact,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Contact = Box2D.Dynamics.Contacts.b2Contact;

Box2D.Dynamics.Contacts.b2PolygonContact = (function(_super) {
  __extends(b2PolygonContact, _super);

  function b2PolygonContact() {
    return b2PolygonContact.__super__.constructor.apply(this, arguments);
  }

  b2PolygonContact.Create = function(allocator) {
    return new b2PolygonContact();
  };

  b2PolygonContact.Destroy = function(contact, allocator) {};

  b2PolygonContact.prototype.Reset = function(fixtureA, fixtureB) {
    b2PolygonContact.__super__.Reset.call(this, fixtureA, fixtureB);
  };

  b2PolygonContact.prototype.Evaluate = function() {
    var bA, bB;
    bA = this.m_fixtureA.GetBody();
    bB = this.m_fixtureB.GetBody();
    b2Collision.CollidePolygons(this.m_manifold, (this.m_fixtureA.GetShape() instanceof b2PolygonShape ? this.m_fixtureA.GetShape() : null), bA.m_xf, (this.m_fixtureB.GetShape() instanceof b2PolygonShape ? this.m_fixtureB.GetShape() : null), bB.m_xf);
  };

  return b2PolygonContact;

})(b2Contact);

//# sourceMappingURL=b2PolygonContact.js.map

},{"../../index":103}],73:[function(require,module,exports){
var Box2D, Vector, b2Settings, b2Vec2;

Box2D = require('../../index');

Vector = Box2D.Vector;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Settings = Box2D.Common.b2Settings;

Box2D.Dynamics.Contacts.b2PositionSolverManifold = (function() {
  b2PositionSolverManifold.prototype.m_normal = null;

  b2PositionSolverManifold.prototype.m_separations = null;

  b2PositionSolverManifold.prototype.m_points = null;

  function b2PositionSolverManifold() {
    var i;
    this.m_normal = new b2Vec2();
    this.m_separations = new Vector(b2Settings.b2_maxManifoldPoints);
    this.m_points = new Vector(b2Settings.b2_maxManifoldPoints);
    i = 0;
    while (i < b2Settings.b2_maxManifoldPoints) {
      this.m_points[i] = new b2Vec2();
      i++;
    }
    return;
  }

  b2PositionSolverManifold.prototype.Initialize = function(cc) {
    var clipPointX, clipPointY, d, d2, dX, dY, i, planePointX, planePointY, pointAX, pointAY, pointBX, pointBY, tMat, tVec, _results;
    b2Settings.b2Assert(cc.pointCount > 0);
    i = 0;
    clipPointX = 0;
    clipPointY = 0;
    tMat = void 0;
    tVec = void 0;
    planePointX = 0;
    planePointY = 0;
    switch (cc.type) {
      case b2Manifold.e_circles:
        tMat = cc.bodyA.m_xf.R;
        tVec = cc.localPoint;
        pointAX = cc.bodyA.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointAY = cc.bodyA.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tMat = cc.bodyB.m_xf.R;
        tVec = cc.points[0].localPoint;
        pointBX = cc.bodyB.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        pointBY = cc.bodyB.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        dX = pointBX - pointAX;
        dY = pointBY - pointAY;
        d2 = dX * dX + dY * dY;
        if (d2 > Number.MIN_VALUE * Number.MIN_VALUE) {
          d = Math.sqrt(d2);
          this.m_normal.x = dX / d;
          this.m_normal.y = dY / d;
        } else {
          this.m_normal.x = 1.0;
          this.m_normal.y = 0.0;
        }
        this.m_points[0].x = 0.5 * (pointAX + pointBX);
        this.m_points[0].y = 0.5 * (pointAY + pointBY);
        return this.m_separations[0] = dX * this.m_normal.x + dY * this.m_normal.y - cc.radius;
      case b2Manifold.e_faceA:
        tMat = cc.bodyA.m_xf.R;
        tVec = cc.localPlaneNormal;
        this.m_normal.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        this.m_normal.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = cc.bodyA.m_xf.R;
        tVec = cc.localPoint;
        planePointX = cc.bodyA.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        planePointY = cc.bodyA.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tMat = cc.bodyB.m_xf.R;
        i = 0;
        _results = [];
        while (i < cc.pointCount) {
          tVec = cc.points[i].localPoint;
          clipPointX = cc.bodyB.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
          clipPointY = cc.bodyB.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
          this.m_separations[i] = (clipPointX - planePointX) * this.m_normal.x + (clipPointY - planePointY) * this.m_normal.y - cc.radius;
          this.m_points[i].x = clipPointX;
          this.m_points[i].y = clipPointY;
          _results.push(++i);
        }
        return _results;
        break;
      case b2Manifold.e_faceB:
        tMat = cc.bodyB.m_xf.R;
        tVec = cc.localPlaneNormal;
        this.m_normal.x = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
        this.m_normal.y = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
        tMat = cc.bodyB.m_xf.R;
        tVec = cc.localPoint;
        planePointX = cc.bodyB.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
        planePointY = cc.bodyB.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
        tMat = cc.bodyA.m_xf.R;
        i = 0;
        while (i < cc.pointCount) {
          tVec = cc.points[i].localPoint;
          clipPointX = cc.bodyA.m_xf.position.x + (tMat.col1.x * tVec.x + tMat.col2.x * tVec.y);
          clipPointY = cc.bodyA.m_xf.position.y + (tMat.col1.y * tVec.x + tMat.col2.y * tVec.y);
          this.m_separations[i] = (clipPointX - planePointX) * this.m_normal.x + (clipPointY - planePointY) * this.m_normal.y - cc.radius;
          this.m_points[i].Set(clipPointX, clipPointY);
          ++i;
        }
        this.m_normal.x *= -1.;
        return this.m_normal.y *= -1.;
    }
  };

  b2PositionSolverManifold.circlePointA = new b2Vec2();

  b2PositionSolverManifold.circlePointB = new b2Vec2();

  return b2PositionSolverManifold;

})();

//# sourceMappingURL=b2PositionSolverManifold.js.map

},{"../../index":103}],74:[function(require,module,exports){
var Box2D, b2Color, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Color = Box2D.Common.b2Color;

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2BuoyancyController = (function(_super) {
  __extends(b2BuoyancyController, _super);

  b2BuoyancyController.prototype.normal = null;

  b2BuoyancyController.prototype.offset = 0;

  b2BuoyancyController.prototype.density = 0;

  b2BuoyancyController.prototype.velocity = null;

  b2BuoyancyController.prototype.linearDrag = 2;

  b2BuoyancyController.prototype.angularDrag = 1;

  b2BuoyancyController.prototype.useDensity = false;

  b2BuoyancyController.prototype.useWorldGravity = true;

  b2BuoyancyController.prototype.gravity = null;

  function b2BuoyancyController() {
    b2BuoyancyController.__super__.constructor.apply(this, arguments);
    this.normal = new b2Vec2(0, -1.);
    this.velocity = new b2Vec2(0, 0);
    return;
  }

  b2BuoyancyController.prototype.Step = function(step) {
    var area, areac, body, buoyancyForce, dragForce, fixture, i, mass, massc, sarea, sc, shapeDensity;
    if (!this.m_bodyList) {
      return;
    }
    if (this.useWorldGravity) {
      this.gravity = this.GetWorld().GetGravity().Copy();
    }
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (body.IsAwake() === false) {
        continue;
      }
      areac = new b2Vec2();
      massc = new b2Vec2();
      area = 0.0;
      mass = 0.0;
      fixture = body.GetFixtureList();
      while (fixture) {
        sc = new b2Vec2();
        sarea = fixture.GetShape().ComputeSubmergedArea(this.normal, this.offset, body.GetTransform(), sc);
        area += sarea;
        areac.x += sarea * sc.x;
        areac.y += sarea * sc.y;
        shapeDensity = 0;
        if (this.useDensity) {
          shapeDensity = 1;
        } else {
          shapeDensity = 1;
        }
        mass += sarea * shapeDensity;
        massc.x += sarea * sc.x * shapeDensity;
        massc.y += sarea * sc.y * shapeDensity;
        fixture = fixture.GetNext();
      }
      areac.x /= area;
      areac.y /= area;
      massc.x /= mass;
      massc.y /= mass;
      if (area < Number.MIN_VALUE) {
        continue;
      }
      buoyancyForce = this.gravity.GetNegative();
      buoyancyForce.Multiply(this.density * area);
      body.ApplyForce(buoyancyForce, massc);
      dragForce = body.GetLinearVelocityFromWorldPoint(areac);
      dragForce.Subtract(this.velocity);
      dragForce.Multiply(-this.linearDrag * area);
      body.ApplyForce(dragForce, areac);
      body.ApplyTorque(-body.GetInertia() / body.GetMass() * area * body.GetAngularVelocity() * this.angularDrag);
      i = i.nextBody;
    }
  };

  b2BuoyancyController.prototype.Draw = function(debugDraw) {
    var color, p1, p2, r;
    r = 1000;
    p1 = new b2Vec2();
    p2 = new b2Vec2();
    p1.x = this.normal.x * this.offset + this.normal.y * r;
    p1.y = this.normal.y * this.offset - this.normal.x * r;
    p2.x = this.normal.x * this.offset - this.normal.y * r;
    p2.y = this.normal.y * this.offset + this.normal.x * r;
    color = new b2Color(0, 0, 1);
    debugDraw.DrawSegment(p1, p2, color);
  };

  return b2BuoyancyController;

})(b2Controller);

//# sourceMappingURL=b2BuoyancyController.js.map

},{"../../index":103}],75:[function(require,module,exports){
var Box2D, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2ConstantAccelController = (function(_super) {
  __extends(b2ConstantAccelController, _super);

  b2ConstantAccelController.prototype.A = null;

  function b2ConstantAccelController() {
    b2ConstantAccelController.__super__.constructor.apply(this, arguments);
    this.A = new b2Vec2(0, 0);
    return;
  }

  b2ConstantAccelController.prototype.Step = function(step) {
    var body, i, smallA;
    smallA = new b2Vec2(this.A.x * step.dt, this.A.y * step.dt);
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (!body.IsAwake()) {
        continue;
      }
      body.SetLinearVelocity(new b2Vec2(body.GetLinearVelocity().x + smallA.x, body.GetLinearVelocity().y + smallA.y));
      i = i.nextBody;
    }
  };

  return b2ConstantAccelController;

})(b2Controller);

//# sourceMappingURL=b2ConstantAccelController.js.map

},{"../../index":103}],76:[function(require,module,exports){
var Box2D, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2ConstantForceController = (function(_super) {
  __extends(b2ConstantForceController, _super);

  b2ConstantForceController.prototype.F = null;

  function b2ConstantForceController() {
    b2ConstantForceController.__super__.constructor.apply(this, arguments);
    this.F = new b2Vec2(0, 0);
    return;
  }

  b2ConstantForceController.prototype.Step = function(step) {
    var body, i;
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (!body.IsAwake()) {
        continue;
      }
      body.ApplyForce(this.F, body.GetWorldCenter());
      i = i.nextBody;
    }
  };

  return b2ConstantForceController;

})(b2Controller);

//# sourceMappingURL=b2ConstantForceController.js.map

},{"../../index":103}],77:[function(require,module,exports){
var Box2D, b2ControllerEdge;

Box2D = require('../../index');

b2ControllerEdge = Box2D.Dynamics.Controllers.b2ControllerEdge;

Box2D.Dynamics.Controllers.b2Controller = (function() {
  function b2Controller() {}

  b2Controller.prototype.m_bodyList = null;

  b2Controller.prototype.m_bodyCount = 0;

  b2Controller.prototype.m_next = null;

  b2Controller.prototype.m_world = null;

  b2Controller.prototype.Step = function(step) {};

  b2Controller.prototype.Draw = function(debugDraw) {};

  b2Controller.prototype.AddBody = function(body) {
    var edge;
    edge = new b2ControllerEdge();
    edge.controller = this;
    edge.body = body;
    edge.nextBody = this.m_bodyList;
    edge.prevBody = null;
    this.m_bodyList = edge;
    if (edge.nextBody) {
      edge.nextBody.prevBody = edge;
    }
    this.m_bodyCount++;
    edge.nextController = body.m_controllerList;
    edge.prevController = null;
    body.m_controllerList = edge;
    if (edge.nextController) {
      edge.nextController.prevController = edge;
    }
    body.m_controllerCount++;
  };

  b2Controller.prototype.RemoveBody = function(body) {
    var edge;
    edge = body.m_controllerList;
    while (edge && edge.controller !== this) {
      edge = edge.nextController;
    }
    if (edge.prevBody) {
      edge.prevBody.nextBody = edge.nextBody;
    }
    if (edge.nextBody) {
      edge.nextBody.prevBody = edge.prevBody;
    }
    if (edge.nextController) {
      edge.nextController.prevController = edge.prevController;
    }
    if (edge.prevController) {
      edge.prevController.nextController = edge.nextController;
    }
    if (this.m_bodyList === edge) {
      this.m_bodyList = edge.nextBody;
    }
    if (body.m_controllerList === edge) {
      body.m_controllerList = edge.nextController;
    }
    body.m_controllerCount--;
    this.m_bodyCount--;
  };

  b2Controller.prototype.Clear = function() {
    while (this.m_bodyList) {
      this.RemoveBody(this.m_bodyList.body);
    }
  };

  b2Controller.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Controller.prototype.GetWorld = function() {
    return this.m_world;
  };

  b2Controller.prototype.GetBodyList = function() {
    return this.m_bodyList;
  };

  return b2Controller;

})();

//# sourceMappingURL=b2Controller.js.map

},{"../../index":103}],78:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Controllers.b2ControllerEdge = (function() {
  function b2ControllerEdge() {}

  return b2ControllerEdge;

})();

//# sourceMappingURL=b2ControllerEdge.js.map

},{"../../index":103}],79:[function(require,module,exports){
var Box2D, b2Controller, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Controllers.b2GravityController = (function(_super) {
  __extends(b2GravityController, _super);

  b2GravityController.prototype.G = 1;

  b2GravityController.prototype.invSqr = true;

  function b2GravityController() {
    b2GravityController.__super__.constructor.apply(this, arguments);
    this.G = 1;
    this.invSqr = true;
    return;
  }

  b2GravityController.prototype.Step = function(step) {
    var body1, body2, dx, dy, f, i, j, mass1, p1, p2, r2;
    i = null;
    body1 = null;
    p1 = null;
    mass1 = 0;
    j = null;
    body2 = null;
    p2 = null;
    dx = 0;
    dy = 0;
    r2 = 0;
    f = null;
    if (this.invSqr) {
      i = this.m_bodyList;
      while (i) {
        body1 = i.body;
        p1 = body1.GetWorldCenter();
        mass1 = body1.GetMass();
        j = this.m_bodyList;
        while (j !== i) {
          body2 = j.body;
          p2 = body2.GetWorldCenter();
          dx = p2.x - p1.x;
          dy = p2.y - p1.y;
          r2 = dx * dx + dy * dy;
          if (r2 < Number.MIN_VALUE) {
            continue;
          }
          f = new b2Vec2(dx, dy);
          f.Multiply(this.G / r2 / Math.sqrt(r2) * mass1 * body2.GetMass());
          if (body1.IsAwake()) {
            body1.ApplyForce(f, p1);
          }
          f.Multiply(-1.);
          if (body2.IsAwake()) {
            body2.ApplyForce(f, p2);
          }
          j = j.nextBody;
        }
        i = i.nextBody;
      }
    } else {
      i = this.m_bodyList;
      while (i) {
        body1 = i.body;
        p1 = body1.GetWorldCenter();
        mass1 = body1.GetMass();
        j = this.m_bodyList;
        while (j !== i) {
          body2 = j.body;
          p2 = body2.GetWorldCenter();
          dx = p2.x - p1.x;
          dy = p2.y - p1.y;
          r2 = dx * dx + dy * dy;
          if (r2 < Number.MIN_VALUE) {
            continue;
          }
          f = new b2Vec2(dx, dy);
          f.Multiply(this.G / r2 * mass1 * body2.GetMass());
          if (body1.IsAwake()) {
            body1.ApplyForce(f, p1);
          }
          f.Multiply(-1.);
          if (body2.IsAwake()) {
            body2.ApplyForce(f, p2);
          }
          j = j.nextBody;
        }
        i = i.nextBody;
      }
    }
  };

  return b2GravityController;

})(b2Controller);

//# sourceMappingURL=b2GravityController.js.map

},{"../../index":103}],80:[function(require,module,exports){
var Box2D, b2Controller, b2Mat22, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Controller = Box2D.Dynamics.Controllers.b2Controller;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Controllers.b2TensorDampingController = (function(_super) {
  __extends(b2TensorDampingController, _super);

  b2TensorDampingController.prototype.T = null;

  b2TensorDampingController.prototype.maxTimestep = 0;

  function b2TensorDampingController() {
    b2TensorDampingController.__super__.constructor.apply(this, arguments);
    this.T = new b2Mat22();
    this.maxTimestep = 0;
    return;
  }

  b2TensorDampingController.prototype.SetAxisAligned = function(xDamping, yDamping) {
    if (xDamping === void 0) {
      xDamping = 0;
    }
    if (yDamping === void 0) {
      yDamping = 0;
    }
    this.T.col1.x = -xDamping;
    this.T.col1.y = 0;
    this.T.col2.x = 0;
    this.T.col2.y = -yDamping;
    if (xDamping > 0 || yDamping > 0) {
      this.maxTimestep = 1 / Math.max(xDamping, yDamping);
    } else {
      this.maxTimestep = 0;
    }
  };

  b2TensorDampingController.prototype.Step = function(step) {
    var body, damping, i, timestep;
    timestep = step.dt;
    if (timestep <= Number.MIN_VALUE) {
      return;
    }
    if (timestep > this.maxTimestep && this.maxTimestep > 0) {
      timestep = this.maxTimestep;
    }
    i = this.m_bodyList;
    while (i) {
      body = i.body;
      if (!body.IsAwake()) {
        continue;
      }
      damping = body.GetWorldVector(b2Math.MulMV(this.T, body.GetLocalVector(body.GetLinearVelocity())));
      body.SetLinearVelocity(new b2Vec2(body.GetLinearVelocity().x + damping.x * timestep, body.GetLinearVelocity().y + damping.y * timestep));
      i = i.nextBody;
    }
  };

  return b2TensorDampingController;

})(b2Controller);

//# sourceMappingURL=b2TensorDampingController.js.map

},{"../../index":103}],81:[function(require,module,exports){
var Box2D, b2Joint, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Joints.b2DistanceJoint = (function(_super) {
  __extends(b2DistanceJoint, _super);

  b2DistanceJoint.prototype.m_u = null;

  b2DistanceJoint.prototype.m_length = 0;

  b2DistanceJoint.prototype.m_frequencyHz = 0;

  b2DistanceJoint.prototype.m_dampingRatio = 0;

  b2DistanceJoint.prototype.m_impulse = 0.0;

  b2DistanceJoint.prototype.m_gamma = 0.0;

  b2DistanceJoint.prototype.m_bias = 0.0;

  function b2DistanceJoint(def) {
    b2DistanceJoint.__super__.constructor.call(this, def);
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_u = new b2Vec2();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_length = def.length;
    this.m_frequencyHz = def.frequencyHz;
    this.m_dampingRatio = def.dampingRatio;
    return;
  }

  b2DistanceJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2DistanceJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2DistanceJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse * this.m_u.x, inv_dt * this.m_impulse * this.m_u.y);
  };

  b2DistanceJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2DistanceJoint.prototype.GetLength = function() {
    return this.m_length;
  };

  b2DistanceJoint.prototype.SetLength = function(length) {
    if (length === void 0) {
      length = 0;
    }
    this.m_length = length;
  };

  b2DistanceJoint.prototype.GetFrequency = function() {
    return this.m_frequencyHz;
  };

  b2DistanceJoint.prototype.SetFrequency = function(hz) {
    if (hz === void 0) {
      hz = 0;
    }
    this.m_frequencyHz = hz;
  };

  b2DistanceJoint.prototype.GetDampingRatio = function() {
    return this.m_dampingRatio;
  };

  b2DistanceJoint.prototype.SetDampingRatio = function(ratio) {
    if (ratio === void 0) {
      ratio = 0;
    }
    this.m_dampingRatio = ratio;
  };

  b2DistanceJoint.prototype.InitVelocityConstraints = function(step) {
    var C, PX, PY, bA, bB, cr1u, cr2u, d, invMass, k, length, omega, r1X, r1Y, r2X, r2Y, tMat, tX;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    this.m_u.x = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    this.m_u.y = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    length = Math.sqrt(this.m_u.x * this.m_u.x + this.m_u.y * this.m_u.y);
    if (length > b2Settings.b2_linearSlop) {
      this.m_u.Multiply(1.0 / length);
    } else {
      this.m_u.SetZero();
    }
    cr1u = r1X * this.m_u.y - r1Y * this.m_u.x;
    cr2u = r2X * this.m_u.y - r2Y * this.m_u.x;
    invMass = bA.m_invMass + bA.m_invI * cr1u * cr1u + bB.m_invMass + bB.m_invI * cr2u * cr2u;
    this.m_mass = (invMass !== 0.0 ? 1.0 / invMass : 0.0);
    if (this.m_frequencyHz > 0.0) {
      C = length - this.m_length;
      omega = 2.0 * Math.PI * this.m_frequencyHz;
      d = 2.0 * this.m_mass * this.m_dampingRatio * omega;
      k = this.m_mass * omega * omega;
      this.m_gamma = step.dt * (d + step.dt * k);
      this.m_gamma = (this.m_gamma !== 0.0 ? 1 / this.m_gamma : 0.0);
      this.m_bias = C * step.dt * k * this.m_gamma;
      this.m_mass = invMass + this.m_gamma;
      this.m_mass = (this.m_mass !== 0.0 ? 1.0 / this.m_mass : 0.0);
    }
    if (step.warmStarting) {
      this.m_impulse *= step.dtRatio;
      PX = this.m_impulse * this.m_u.x;
      PY = this.m_impulse * this.m_u.y;
      bA.m_linearVelocity.x -= bA.m_invMass * PX;
      bA.m_linearVelocity.y -= bA.m_invMass * PY;
      bA.m_angularVelocity -= bA.m_invI * (r1X * PY - r1Y * PX);
      bB.m_linearVelocity.x += bB.m_invMass * PX;
      bB.m_linearVelocity.y += bB.m_invMass * PY;
      bB.m_angularVelocity += bB.m_invI * (r2X * PY - r2Y * PX);
    } else {
      this.m_impulse = 0.0;
    }
  };

  b2DistanceJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, PX, PY, bA, bB, impulse, r1X, r1Y, r2X, r2Y, tMat, tX, v1X, v1Y, v2X, v2Y;
    tMat = void 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    v1X = bA.m_linearVelocity.x + (-bA.m_angularVelocity * r1Y);
    v1Y = bA.m_linearVelocity.y + (bA.m_angularVelocity * r1X);
    v2X = bB.m_linearVelocity.x + (-bB.m_angularVelocity * r2Y);
    v2Y = bB.m_linearVelocity.y + (bB.m_angularVelocity * r2X);
    Cdot = this.m_u.x * (v2X - v1X) + this.m_u.y * (v2Y - v1Y);
    impulse = -this.m_mass * (Cdot + this.m_bias + this.m_gamma * this.m_impulse);
    this.m_impulse += impulse;
    PX = impulse * this.m_u.x;
    PY = impulse * this.m_u.y;
    bA.m_linearVelocity.x -= bA.m_invMass * PX;
    bA.m_linearVelocity.y -= bA.m_invMass * PY;
    bA.m_angularVelocity -= bA.m_invI * (r1X * PY - r1Y * PX);
    bB.m_linearVelocity.x += bB.m_invMass * PX;
    bB.m_linearVelocity.y += bB.m_invMass * PY;
    bB.m_angularVelocity += bB.m_invI * (r2X * PY - r2Y * PX);
  };

  b2DistanceJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, PX, PY, bA, bB, dX, dY, impulse, length, r1X, r1Y, r2X, r2Y, tMat, tX;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    tMat = void 0;
    if (this.m_frequencyHz > 0.0) {
      return true;
    }
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    dY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    length = Math.sqrt(dX * dX + dY * dY);
    dX /= length;
    dY /= length;
    C = length - this.m_length;
    C = b2Math.Clamp(C, -b2Settings.b2_maxLinearCorrection, b2Settings.b2_maxLinearCorrection);
    impulse = -this.m_mass * C;
    this.m_u.Set(dX, dY);
    PX = impulse * this.m_u.x;
    PY = impulse * this.m_u.y;
    bA.m_sweep.c.x -= bA.m_invMass * PX;
    bA.m_sweep.c.y -= bA.m_invMass * PY;
    bA.m_sweep.a -= bA.m_invI * (r1X * PY - r1Y * PX);
    bB.m_sweep.c.x += bB.m_invMass * PX;
    bB.m_sweep.c.y += bB.m_invMass * PY;
    bB.m_sweep.a += bB.m_invI * (r2X * PY - r2Y * PX);
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return b2Math.Abs(C) < b2Settings.b2_linearSlop;
  };

  return b2DistanceJoint;

})(b2Joint);

//# sourceMappingURL=b2DistanceJoint.js.map

},{"../../index":103}],82:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2DistanceJointDef = (function(_super) {
  __extends(b2DistanceJointDef, _super);

  b2DistanceJointDef.prototype.type = 0;

  b2DistanceJointDef.prototype.localAnchorA = null;

  b2DistanceJointDef.prototype.localAnchorB = null;

  b2DistanceJointDef.prototype.userData = null;

  b2DistanceJointDef.prototype.bodyA = null;

  b2DistanceJointDef.prototype.bodyB = null;

  b2DistanceJointDef.prototype.length = 1.0;

  b2DistanceJointDef.prototype.frequencyHz = 0.0;

  b2DistanceJointDef.prototype.dampingRatio = 0.0;

  function b2DistanceJointDef() {
    this.localAnchorA = new b2Vec2();
    this.type = b2Joint.e_distanceJoint;
    return;
  }

  b2DistanceJointDef.prototype.Initialize = function(bA, bB, anchorA, anchorB) {
    var dX, dY;
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchorA));
    this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchorB));
    dX = anchorB.x - anchorA.x;
    dY = anchorB.y - anchorA.y;
    this.length = Math.sqrt(dX * dX + dY * dY);
    this.frequencyHz = 0.0;
    this.dampingRatio = 0.0;
  };

  return b2DistanceJointDef;

})(b2JointDef);

//# sourceMappingURL=b2DistanceJointDef.js.map

},{"../../index":103}],83:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Joints.b2FrictionJoint = (function(_super) {
  __extends(b2FrictionJoint, _super);

  b2FrictionJoint.prototype.m_linearMass = null;

  b2FrictionJoint.prototype.m_linearImpulse = null;

  b2FrictionJoint.prototype.m_angularMass = 0.0;

  b2FrictionJoint.prototype.m_angularImpulse = 0.0;

  b2FrictionJoint.prototype.m_maxForce = 0;

  b2FrictionJoint.prototype.m_maxTorque = 0;

  function b2FrictionJoint(def) {
    b2FrictionJoint.__super__.constructor.call(this, def);
    this.m_localAnchorA = new b2Vec2();
    this.m_localAnchorB = new b2Vec2();
    this.m_linearMass = new b2Mat22();
    this.m_linearImpulse = new b2Vec2();
    this.m_localAnchorA.SetV(def.localAnchorA);
    this.m_localAnchorB.SetV(def.localAnchorB);
    this.m_linearMass.SetZero();
    this.m_linearImpulse.SetZero();
    this.m_maxForce = def.maxForce;
    this.m_maxTorque = def.maxTorque;
    return;
  }

  b2FrictionJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchorA);
  };

  b2FrictionJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchorB);
  };

  b2FrictionJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_linearImpulse.x, inv_dt * this.m_linearImpulse.y);
  };

  b2FrictionJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_angularImpulse;
  };

  b2FrictionJoint.prototype.SetMaxForce = function(force) {
    if (force === void 0) {
      force = 0;
    }
    this.m_maxForce = force;
  };

  b2FrictionJoint.prototype.GetMaxForce = function() {
    return this.m_maxForce;
  };

  b2FrictionJoint.prototype.SetMaxTorque = function(torque) {
    if (torque === void 0) {
      torque = 0;
    }
    this.m_maxTorque = torque;
  };

  b2FrictionJoint.prototype.GetMaxTorque = function() {
    return this.m_maxTorque;
  };

  b2FrictionJoint.prototype.InitVelocityConstraints = function(step) {
    var K, P, bA, bB, iA, iB, mA, mB, rAX, rAY, rBX, rBY, tMat, tX;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    K = new b2Mat22();
    K.col1.x = mA + mB;
    K.col2.x = 0.0;
    K.col1.y = 0.0;
    K.col2.y = mA + mB;
    K.col1.x += iA * rAY * rAY;
    K.col2.x += -iA * rAX * rAY;
    K.col1.y += -iA * rAX * rAY;
    K.col2.y += iA * rAX * rAX;
    K.col1.x += iB * rBY * rBY;
    K.col2.x += -iB * rBX * rBY;
    K.col1.y += -iB * rBX * rBY;
    K.col2.y += iB * rBX * rBX;
    K.GetInverse(this.m_linearMass);
    this.m_angularMass = iA + iB;
    if (this.m_angularMass > 0.0) {
      this.m_angularMass = 1.0 / this.m_angularMass;
    }
    if (step.warmStarting) {
      this.m_linearImpulse.x *= step.dtRatio;
      this.m_linearImpulse.y *= step.dtRatio;
      this.m_angularImpulse *= step.dtRatio;
      P = this.m_linearImpulse;
      bA.m_linearVelocity.x -= mA * P.x;
      bA.m_linearVelocity.y -= mA * P.y;
      bA.m_angularVelocity -= iA * (rAX * P.y - rAY * P.x + this.m_angularImpulse);
      bB.m_linearVelocity.x += mB * P.x;
      bB.m_linearVelocity.y += mB * P.y;
      bB.m_angularVelocity += iB * (rBX * P.y - rBY * P.x + this.m_angularImpulse);
    } else {
      this.m_linearImpulse.SetZero();
      this.m_angularImpulse = 0.0;
    }
  };

  b2FrictionJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, CdotX, CdotY, bA, bB, iA, iB, impulse, impulseV, mA, mB, maxImpulse, oldImpulse, oldImpulseV, rAX, rAY, rBX, rBY, tMat, tX, vA, vB, wA, wB;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    vA = bA.m_linearVelocity;
    wA = bA.m_angularVelocity;
    vB = bB.m_linearVelocity;
    wB = bB.m_angularVelocity;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    maxImpulse = 0;
    Cdot = wB - wA;
    impulse = -this.m_angularMass * Cdot;
    oldImpulse = this.m_angularImpulse;
    maxImpulse = step.dt * this.m_maxTorque;
    this.m_angularImpulse = b2Math.Clamp(this.m_angularImpulse + impulse, -maxImpulse, maxImpulse);
    impulse = this.m_angularImpulse - oldImpulse;
    wA -= iA * impulse;
    wB += iB * impulse;
    CdotX = vB.x - wB * rBY - vA.x + wA * rAY;
    CdotY = vB.y + wB * rBX - vA.y - wA * rAX;
    impulseV = b2Math.MulMV(this.m_linearMass, new b2Vec2(-CdotX, -CdotY));
    oldImpulseV = this.m_linearImpulse.Copy();
    this.m_linearImpulse.Add(impulseV);
    maxImpulse = step.dt * this.m_maxForce;
    if (this.m_linearImpulse.LengthSquared() > maxImpulse * maxImpulse) {
      this.m_linearImpulse.Normalize();
      this.m_linearImpulse.Multiply(maxImpulse);
    }
    impulseV = b2Math.SubtractVV(this.m_linearImpulse, oldImpulseV);
    vA.x -= mA * impulseV.x;
    vA.y -= mA * impulseV.y;
    wA -= iA * (rAX * impulseV.y - rAY * impulseV.x);
    vB.x += mB * impulseV.x;
    vB.y += mB * impulseV.y;
    wB += iB * (rBX * impulseV.y - rBY * impulseV.x);
    bA.m_angularVelocity = wA;
    bB.m_angularVelocity = wB;
  };

  b2FrictionJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    return true;
  };

  return b2FrictionJoint;

})(b2Joint);

//# sourceMappingURL=b2FrictionJoint.js.map

},{"../../index":103}],84:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2FrictionJointDef = (function(_super) {
  __extends(b2FrictionJointDef, _super);

  function b2FrictionJointDef() {
    return b2FrictionJointDef.__super__.constructor.apply(this, arguments);
  }

  b2FrictionJointDef.prototype.type = b2Joint.e_frictionJoint;

  b2FrictionJointDef.prototype.localAnchorA = null;

  b2FrictionJointDef.prototype.localAnchorB = null;

  b2FrictionJointDef.prototype.maxForce = 0.0;

  b2FrictionJointDef.prototype.maxTorque = 0.0;

  return b2FrictionJointDef;

})(b2JointDef);

({
  constructor: function() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
  },
  Initialize: function(bA, bB, anchor) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor));
    this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor));
  }
});

//# sourceMappingURL=b2FrictionJointDef.js.map

},{"../../index":103}],85:[function(require,module,exports){
var Box2D, b2Jacobian, b2Joint, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Jacobian = Box2D.Dynamics.Joints.b2Jacobian;

Box2D.Dynamics.Joints.b2GearJoint = (function(_super) {
  __extends(b2GearJoint, _super);

  b2GearJoint.prototype.m_groundAnchor1 = null;

  b2GearJoint.prototype.m_groundAnchor2 = null;

  b2GearJoint.prototype.m_J = null;

  b2GearJoint.prototype.m_revolute1 = null;

  b2GearJoint.prototype.m_prismatic1 = null;

  b2GearJoint.prototype.m_revolute2 = null;

  b2GearJoint.prototype.m_prismatic2 = null;

  b2GearJoint.prototype.m_ground1 = null;

  b2GearJoint.prototype.m_ground2 = null;

  b2GearJoint.prototype.m_ratio = 0;

  b2GearJoint.prototype.m_constant = 0;

  b2GearJoint.prototype.m_impulse = 0.0;

  function b2GearJoint(def) {
    var coordinate1, coordinate2, type1, type2;
    b2GearJoint.__super__.constructor.call(this, def);
    this.m_groundAnchor1 = new b2Vec2();
    this.m_groundAnchor2 = new b2Vec2();
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_J = new b2Jacobian();
    type1 = parseInt(def.joint1.m_type);
    type2 = parseInt(def.joint2.m_type);
    coordinate1 = 0;
    coordinate2 = 0;
    this.m_ground1 = def.joint1.GetBodyA();
    this.m_bodyA = def.joint1.GetBodyB();
    if (type1 === b2Joint.e_revoluteJoint) {
      this.m_revolute1 = (def.joint1 instanceof b2RevoluteJoint ? def.joint1 : null);
      this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1);
      this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2);
      coordinate1 = this.m_revolute1.GetJointAngle();
    } else {
      this.m_prismatic1 = (def.joint1 instanceof b2PrismaticJoint ? def.joint1 : null);
      this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1);
      this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2);
      coordinate1 = this.m_prismatic1.GetJointTranslation();
    }
    this.m_ground2 = def.joint2.GetBodyA();
    this.m_bodyB = def.joint2.GetBodyB();
    if (type2 === b2Joint.e_revoluteJoint) {
      this.m_revolute2 = (def.joint2 instanceof b2RevoluteJoint ? def.joint2 : null);
      this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1);
      this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2);
      coordinate2 = this.m_revolute2.GetJointAngle();
    } else {
      this.m_prismatic2 = (def.joint2 instanceof b2PrismaticJoint ? def.joint2 : null);
      this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1);
      this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2);
      coordinate2 = this.m_prismatic2.GetJointTranslation();
    }
    this.m_ratio = def.ratio;
    this.m_constant = coordinate1 + this.m_ratio * coordinate2;
    return;
  }

  b2GearJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2GearJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2GearJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse * this.m_J.linearB.x, inv_dt * this.m_impulse * this.m_J.linearB.y);
  };

  b2GearJoint.prototype.GetReactionTorque = function(inv_dt) {
    var PX, PY, rX, rY, tMat, tX;
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    tMat = this.m_bodyB.m_xf.R;
    rX = this.m_localAnchor1.x - this.m_bodyB.m_sweep.localCenter.x;
    rY = this.m_localAnchor1.y - this.m_bodyB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rX + tMat.col2.x * rY;
    rY = tMat.col1.y * rX + tMat.col2.y * rY;
    rX = tX;
    PX = this.m_impulse * this.m_J.linearB.x;
    PY = this.m_impulse * this.m_J.linearB.y;
    return inv_dt * (this.m_impulse * this.m_J.angularB - rX * PY + rY * PX);
  };

  b2GearJoint.prototype.GetRatio = function() {
    return this.m_ratio;
  };

  b2GearJoint.prototype.SetRatio = function(ratio) {
    if (ratio === void 0) {
      ratio = 0;
    }
    this.m_ratio = ratio;
  };

  b2GearJoint.prototype.InitVelocityConstraints = function(step) {
    var K, bA, bB, crug, g1, g2, rX, rY, tMat, tVec, tX, ugX, ugY;
    g1 = this.m_ground1;
    g2 = this.m_ground2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    ugX = 0;
    ugY = 0;
    rX = 0;
    rY = 0;
    tMat = void 0;
    tVec = void 0;
    crug = 0;
    tX = 0;
    K = 0.0;
    this.m_J.SetZero();
    if (this.m_revolute1) {
      this.m_J.angularA = -1.0;
      K += bA.m_invI;
    } else {
      tMat = g1.m_xf.R;
      tVec = this.m_prismatic1.m_localXAxis1;
      ugX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      ugY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tMat = bA.m_xf.R;
      rX = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      rY = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * rX + tMat.col2.x * rY;
      rY = tMat.col1.y * rX + tMat.col2.y * rY;
      rX = tX;
      crug = rX * ugY - rY * ugX;
      this.m_J.linearA.Set(-ugX, -ugY);
      this.m_J.angularA = -crug;
      K += bA.m_invMass + bA.m_invI * crug * crug;
    }
    if (this.m_revolute2) {
      this.m_J.angularB = -this.m_ratio;
      K += this.m_ratio * this.m_ratio * bB.m_invI;
    } else {
      tMat = g2.m_xf.R;
      tVec = this.m_prismatic2.m_localXAxis1;
      ugX = tMat.col1.x * tVec.x + tMat.col2.x * tVec.y;
      ugY = tMat.col1.y * tVec.x + tMat.col2.y * tVec.y;
      tMat = bB.m_xf.R;
      rX = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      rY = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * rX + tMat.col2.x * rY;
      rY = tMat.col1.y * rX + tMat.col2.y * rY;
      rX = tX;
      crug = rX * ugY - rY * ugX;
      this.m_J.linearB.Set(-this.m_ratio * ugX, -this.m_ratio * ugY);
      this.m_J.angularB = -this.m_ratio * crug;
      K += this.m_ratio * this.m_ratio * (bB.m_invMass + bB.m_invI * crug * crug);
    }
    this.m_mass = (K > 0.0 ? 1.0 / K : 0.0);
    if (step.warmStarting) {
      bA.m_linearVelocity.x += bA.m_invMass * this.m_impulse * this.m_J.linearA.x;
      bA.m_linearVelocity.y += bA.m_invMass * this.m_impulse * this.m_J.linearA.y;
      bA.m_angularVelocity += bA.m_invI * this.m_impulse * this.m_J.angularA;
      bB.m_linearVelocity.x += bB.m_invMass * this.m_impulse * this.m_J.linearB.x;
      bB.m_linearVelocity.y += bB.m_invMass * this.m_impulse * this.m_J.linearB.y;
      bB.m_angularVelocity += bB.m_invI * this.m_impulse * this.m_J.angularB;
    } else {
      this.m_impulse = 0.0;
    }
  };

  b2GearJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, bA, bB, impulse;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    Cdot = this.m_J.Compute(bA.m_linearVelocity, bA.m_angularVelocity, bB.m_linearVelocity, bB.m_angularVelocity);
    impulse = -this.m_mass * Cdot;
    this.m_impulse += impulse;
    bA.m_linearVelocity.x += bA.m_invMass * impulse * this.m_J.linearA.x;
    bA.m_linearVelocity.y += bA.m_invMass * impulse * this.m_J.linearA.y;
    bA.m_angularVelocity += bA.m_invI * impulse * this.m_J.angularA;
    bB.m_linearVelocity.x += bB.m_invMass * impulse * this.m_J.linearB.x;
    bB.m_linearVelocity.y += bB.m_invMass * impulse * this.m_J.linearB.y;
    bB.m_angularVelocity += bB.m_invI * impulse * this.m_J.angularB;
  };

  b2GearJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, bA, bB, coordinate1, coordinate2, impulse, linearError;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    linearError = 0.0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    coordinate1 = 0;
    coordinate2 = 0;
    if (this.m_revolute1) {
      coordinate1 = this.m_revolute1.GetJointAngle();
    } else {
      coordinate1 = this.m_prismatic1.GetJointTranslation();
    }
    if (this.m_revolute2) {
      coordinate2 = this.m_revolute2.GetJointAngle();
    } else {
      coordinate2 = this.m_prismatic2.GetJointTranslation();
    }
    C = this.m_constant - (coordinate1 + this.m_ratio * coordinate2);
    impulse = -this.m_mass * C;
    bA.m_sweep.c.x += bA.m_invMass * impulse * this.m_J.linearA.x;
    bA.m_sweep.c.y += bA.m_invMass * impulse * this.m_J.linearA.y;
    bA.m_sweep.a += bA.m_invI * impulse * this.m_J.angularA;
    bB.m_sweep.c.x += bB.m_invMass * impulse * this.m_J.linearB.x;
    bB.m_sweep.c.y += bB.m_invMass * impulse * this.m_J.linearB.y;
    bB.m_sweep.a += bB.m_invI * impulse * this.m_J.angularB;
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return linearError < b2Settings.b2_linearSlop;
  };

  return b2GearJoint;

})(b2Joint);

//# sourceMappingURL=b2GearJoint.js.map

},{"../../index":103}],86:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2GearJointDef = (function(_super) {
  __extends(b2GearJointDef, _super);

  function b2GearJointDef() {
    return b2GearJointDef.__super__.constructor.apply(this, arguments);
  }

  b2GearJointDef.prototype.type = b2Joint.e_gearJoint;

  b2GearJointDef.prototype.joint1 = null;

  b2GearJointDef.prototype.joint2 = null;

  b2GearJointDef.prototype.ratio = 1.0;

  return b2GearJointDef;

})(b2JointDef);

//# sourceMappingURL=b2GearJointDef.js.map

},{"../../index":103}],87:[function(require,module,exports){
var Box2D, b2Vec2;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Joints.b2Jacobian = (function() {
  b2Jacobian.prototype.linearA = null;

  b2Jacobian.prototype.linearB = null;

  b2Jacobian.prototype.angularA = null;

  b2Jacobian.prototype.angularB = null;

  function b2Jacobian() {
    this.linearA = new b2Vec2();
    this.linearB = new b2Vec2();
    return;
  }

  b2Jacobian.prototype.SetZero = function() {
    this.linearA.SetZero();
    this.angularA = 0.0;
    this.linearB.SetZero();
    this.angularB = 0.0;
  };

  b2Jacobian.prototype.Set = function(x1, a1, x2, a2) {
    if (a1 === void 0) {
      a1 = 0;
    }
    if (a2 === void 0) {
      a2 = 0;
    }
    this.linearA.SetV(x1);
    this.angularA = a1;
    this.linearB.SetV(x2);
    this.angularB = a2;
  };

  b2Jacobian.prototype.Compute = function(x1, a1, x2, a2) {
    if (a1 === void 0) {
      a1 = 0;
    }
    if (a2 === void 0) {
      a2 = 0;
    }
    return (this.linearA.x * x1.x + this.linearA.y * x1.y) + this.angularA * a1 + (this.linearB.x * x2.x + this.linearB.y * x2.y) + this.angularB * a2;
  };

  return b2Jacobian;

})();

//# sourceMappingURL=b2Jacobian.js.map

},{"../../index":103}],88:[function(require,module,exports){
var Box2D, b2DistanceJoint, b2DistanceJointDef, b2FrictionJoint, b2FrictionJointDef, b2GearJoint, b2GearJointDef, b2JointEdge, b2LineJoint, b2LineJointDef, b2MouseJoint, b2MouseJointDef, b2PrismaticJoint, b2PrismaticJointDef, b2PulleyJoint, b2PulleyJointDef, b2RevoluteJoint, b2RevoluteJointDef, b2Vec2, b2WeldJoint, b2WeldJointDef;

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointEdge = Box2D.Dynamics.Joints.b2JointEdge;

b2DistanceJoint = Box2D.Dynamics.Joints.b2DistanceJoint;

b2MouseJoint = Box2D.Dynamics.Joints.b2MouseJoint;

b2PrismaticJoint = Box2D.Dynamics.Joints.b2PrismaticJoint;

b2RevoluteJoint = Box2D.Dynamics.Joints.b2RevoluteJoint;

b2PulleyJoint = Box2D.Dynamics.Joints.b2PulleyJoint;

b2GearJoint = Box2D.Dynamics.Joints.b2GearJoint;

b2LineJoint = Box2D.Dynamics.Joints.b2LineJoint;

b2WeldJoint = Box2D.Dynamics.Joints.b2WeldJoint;

b2FrictionJoint = Box2D.Dynamics.Joints.b2FrictionJoint;

b2DistanceJointDef = Box2D.Dynamics.Joints.b2DistanceJointDef;

b2MouseJointDef = Box2D.Dynamics.Joints.b2MouseJointDef;

b2PrismaticJointDef = Box2D.Dynamics.Joints.b2PrismaticJointDef;

b2RevoluteJointDef = Box2D.Dynamics.Joints.b2RevoluteJointDef;

b2PulleyJointDef = Box2D.Dynamics.Joints.b2PulleyJointDef;

b2GearJointDef = Box2D.Dynamics.Joints.b2GearJointDef;

b2LineJointDef = Box2D.Dynamics.Joints.b2LineJointDef;

b2WeldJointDef = Box2D.Dynamics.Joints.b2WeldJointDef;

b2FrictionJointDef = Box2D.Dynamics.Joints.b2FrictionJointDef;

Box2D.Dynamics.Joints.b2Joint = (function() {
  b2Joint.e_unknownJoint = 0;

  b2Joint.e_revoluteJoint = 1;

  b2Joint.e_prismaticJoint = 2;

  b2Joint.e_distanceJoint = 3;

  b2Joint.e_pulleyJoint = 4;

  b2Joint.e_mouseJoint = 5;

  b2Joint.e_gearJoint = 6;

  b2Joint.e_lineJoint = 7;

  b2Joint.e_weldJoint = 8;

  b2Joint.e_frictionJoint = 9;

  b2Joint.e_inactiveLimit = 0;

  b2Joint.e_atLowerLimit = 1;

  b2Joint.e_atUpperLimit = 2;

  b2Joint.e_equalLimits = 3;

  b2Joint.prototype.m_type = b2Joint.e_unknownJoint;

  b2Joint.prototype.m_edgeA = null;

  b2Joint.prototype.m_edgeB = null;

  b2Joint.prototype.m_localAnchor1 = null;

  b2Joint.prototype.m_localAnchor2 = null;

  b2Joint.prototype.m_localCenterA = null;

  b2Joint.prototype.m_localCenterB = null;

  b2Joint.prototype.m_prev = null;

  b2Joint.prototype.m_next = null;

  b2Joint.prototype.m_bodyA = null;

  b2Joint.prototype.m_bodyB = null;

  b2Joint.prototype.m_collideConnected = null;

  b2Joint.prototype.m_islandFlag = null;

  b2Joint.prototype.m_userData = null;

  function b2Joint(def) {
    this.m_edgeA = new b2JointEdge();
    this.m_edgeB = new b2JointEdge();
    this.m_localCenterA = new b2Vec2();
    this.m_localCenterB = new b2Vec2();
    b2Settings.b2Assert(def.bodyA !== def.bodyB);
    this.m_type = def.type;
    this.m_prev = null;
    this.m_next = null;
    this.m_bodyA = def.bodyA;
    this.m_bodyB = def.bodyB;
    this.m_collideConnected = def.collideConnected;
    this.m_islandFlag = false;
    this.m_userData = def.userData;
    return;
  }

  b2Joint.prototype.GetType = function() {
    return this.m_type;
  };

  b2Joint.prototype.GetAnchorA = function() {
    return null;
  };

  b2Joint.prototype.GetAnchorB = function() {
    return null;
  };

  b2Joint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return null;
  };

  b2Joint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2Joint.prototype.GetBodyA = function() {
    return this.m_bodyA;
  };

  b2Joint.prototype.GetBodyB = function() {
    return this.m_bodyB;
  };

  b2Joint.prototype.GetNext = function() {
    return this.m_next;
  };

  b2Joint.prototype.GetUserData = function() {
    return this.m_userData;
  };

  b2Joint.prototype.SetUserData = function(data) {
    this.m_userData = data;
  };

  b2Joint.prototype.IsActive = function() {
    return this.m_bodyA.IsActive() && this.m_bodyB.IsActive();
  };

  b2Joint.Create = function(def, allocator) {
    var joint;
    joint = null;
    switch (def.type) {
      case b2Joint.e_distanceJoint:
        joint = new b2DistanceJoint((def instanceof b2DistanceJointDef ? def : null));
        break;
      case b2Joint.e_mouseJoint:
        joint = new b2MouseJoint((def instanceof b2MouseJointDef ? def : null));
        break;
      case b2Joint.e_prismaticJoint:
        joint = new b2PrismaticJoint((def instanceof b2PrismaticJointDef ? def : null));
        break;
      case b2Joint.e_revoluteJoint:
        joint = new b2RevoluteJoint((def instanceof b2RevoluteJointDef ? def : null));
        break;
      case b2Joint.e_pulleyJoint:
        joint = new b2PulleyJoint((def instanceof b2PulleyJointDef ? def : null));
        break;
      case b2Joint.e_gearJoint:
        joint = new b2GearJoint((def instanceof b2GearJointDef ? def : null));
        break;
      case b2Joint.e_lineJoint:
        joint = new b2LineJoint((def instanceof b2LineJointDef ? def : null));
        break;
      case b2Joint.e_weldJoint:
        joint = new b2WeldJoint((def instanceof b2WeldJointDef ? def : null));
        break;
      case b2Joint.e_frictionJoint:
        joint = new b2FrictionJoint((def instanceof b2FrictionJointDef ? def : null));
        break;
    }
    return joint;
  };

  b2Joint.Destroy = function(joint, allocator) {};

  b2Joint.prototype.InitVelocityConstraints = function(step) {};

  b2Joint.prototype.SolveVelocityConstraints = function(step) {};

  b2Joint.prototype.FinalizeVelocityConstraints = function() {};

  b2Joint.prototype.SolvePositionConstraints = function(baumgarte) {
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    return false;
  };

  return b2Joint;

})();

//# sourceMappingURL=b2Joint.js.map

},{"../../index":103}],89:[function(require,module,exports){
var Box2D, b2Joint;

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

Box2D.Dynamics.Joints.b2JointDef = (function() {
  function b2JointDef() {}

  b2JointDef.prototype.type = b2Joint.e_unknownJoint;

  b2JointDef.prototype.userData = null;

  b2JointDef.prototype.bodyA = null;

  b2JointDef.prototype.bodyB = null;

  b2JointDef.prototype.collideConnected = null;

  return b2JointDef;

})();

//# sourceMappingURL=b2JointDef.js.map

},{"../../index":103}],90:[function(require,module,exports){
var Box2D;

Box2D = require('../../index');

Box2D.Dynamics.Joints.b2JointEdge = (function() {
  function b2JointEdge() {}

  return b2JointEdge;

})();

//# sourceMappingURL=b2JointEdge.js.map

},{"../../index":103}],91:[function(require,module,exports){
var Box2D, b2Joint, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

Box2D.Dynamics.Joints.b2LineJoint = (function(_super) {
  __extends(b2LineJoint, _super);

  b2LineJoint.prototype.m_localXAxis1 = null;

  b2LineJoint.prototype.m_localYAxis1 = null;

  b2LineJoint.prototype.m_axis = null;

  b2LineJoint.prototype.m_perp = null;

  b2LineJoint.prototype.m_K = null;

  b2LineJoint.prototype.m_impulse = null;

  b2LineJoint.prototype.m_motorMass = 0.0;

  b2LineJoint.prototype.m_motorImpulse = 0.0;

  b2LineJoint.prototype.m_lowerTranslation = 0.0;

  b2LineJoint.prototype.m_upperTranslation = 0.0;

  b2LineJoint.prototype.m_maxMotorForce = 0.0;

  b2LineJoint.prototype.m_motorSpeed = 0.0;

  b2LineJoint.prototype.m_enableLimit = false;

  b2LineJoint.prototype.m_enableMotor = false;

  b2LineJoint.prototype.m_limitState = b2Joint.e_inactiveLimit;

  function b2LineJoint(def) {
    b2LineJoint.__super__.constructor.call(this, def);
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_localXAxis1 = new b2Vec2();
    this.m_localYAxis1 = new b2Vec2();
    this.m_axis = new b2Vec2();
    this.m_perp = new b2Vec2();
    this.m_K = new b2Mat22();
    this.m_impulse = new b2Vec2();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_localXAxis1.SetV(def.localAxisA);
    this.m_localYAxis1.x = -this.m_localXAxis1.y;
    this.m_localYAxis1.y = this.m_localXAxis1.x;
    this.m_impulse.SetZero();
    this.m_lowerTranslation = def.lowerTranslation;
    this.m_upperTranslation = def.upperTranslation;
    this.m_maxMotorForce = def.maxMotorForce;
    this.m_motorSpeed = def.motorSpeed;
    this.m_enableLimit = def.enableLimit;
    this.m_enableMotor = def.enableMotor;
    this.m_axis.SetZero();
    this.m_perp.SetZero();
    return;
  }

  b2LineJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2LineJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2LineJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x), inv_dt * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y));
  };

  b2LineJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.y;
  };

  b2LineJoint.prototype.GetJointTranslation = function() {
    var axis, bA, bB, dX, dY, p1, p2, tMat, translation;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    p1 = bA.GetWorldPoint(this.m_localAnchor1);
    p2 = bB.GetWorldPoint(this.m_localAnchor2);
    dX = p2.x - p1.x;
    dY = p2.y - p1.y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    translation = axis.x * dX + axis.y * dY;
    return translation;
  };

  b2LineJoint.prototype.GetJointSpeed = function() {
    var axis, bA, bB, dX, dY, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, speed, tMat, tX, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    p1X = bA.m_sweep.c.x + r1X;
    p1Y = bA.m_sweep.c.y + r1Y;
    p2X = bB.m_sweep.c.x + r2X;
    p2Y = bB.m_sweep.c.y + r2Y;
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    v1 = bA.m_linearVelocity;
    v2 = bB.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    w2 = bB.m_angularVelocity;
    speed = (dX * (-w1 * axis.y) + dY * (w1 * axis.x)) + (axis.x * (((v2.x + (-w2 * r2Y)) - v1.x) - (-w1 * r1Y)) + axis.y * (((v2.y + (w2 * r2X)) - v1.y) - (w1 * r1X)));
    return speed;
  };

  b2LineJoint.prototype.IsLimitEnabled = function() {
    return this.m_enableLimit;
  };

  b2LineJoint.prototype.EnableLimit = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableLimit = flag;
  };

  b2LineJoint.prototype.GetLowerLimit = function() {
    return this.m_lowerTranslation;
  };

  b2LineJoint.prototype.GetUpperLimit = function() {
    return this.m_upperTranslation;
  };

  b2LineJoint.prototype.SetLimits = function(lower, upper) {
    if (lower === void 0) {
      lower = 0;
    }
    if (upper === void 0) {
      upper = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_lowerTranslation = lower;
    this.m_upperTranslation = upper;
  };

  b2LineJoint.prototype.IsMotorEnabled = function() {
    return this.m_enableMotor;
  };

  b2LineJoint.prototype.EnableMotor = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableMotor = flag;
  };

  b2LineJoint.prototype.SetMotorSpeed = function(speed) {
    if (speed === void 0) {
      speed = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_motorSpeed = speed;
  };

  b2LineJoint.prototype.GetMotorSpeed = function() {
    return this.m_motorSpeed;
  };

  b2LineJoint.prototype.SetMaxMotorForce = function(force) {
    if (force === void 0) {
      force = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_maxMotorForce = force;
  };

  b2LineJoint.prototype.GetMaxMotorForce = function() {
    return this.m_maxMotorForce;
  };

  b2LineJoint.prototype.GetMotorForce = function() {
    return this.m_motorImpulse;
  };

  b2LineJoint.prototype.InitVelocityConstraints = function(step) {
    var L1, L2, PX, PY, bA, bB, dX, dY, i1, i2, jointTransition, m1, m2, r1X, r1Y, r2X, r2Y, tMat, tX, xf1, xf2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    this.m_localCenterA.SetV(bA.GetLocalCenter());
    this.m_localCenterB.SetV(bB.GetLocalCenter());
    xf1 = bA.GetTransform();
    xf2 = bB.GetTransform();
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    dY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    this.m_invMassA = bA.m_invMass;
    this.m_invMassB = bB.m_invMass;
    this.m_invIA = bA.m_invI;
    this.m_invIB = bB.m_invI;
    this.m_axis.SetV(b2Math.MulMV(xf1.R, this.m_localXAxis1));
    this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
    this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
    this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2;
    this.m_motorMass = (this.m_motorMass > Number.MIN_VALUE ? 1.0 / this.m_motorMass : 0.0);
    this.m_perp.SetV(b2Math.MulMV(xf1.R, this.m_localYAxis1));
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    m1 = this.m_invMassA;
    m2 = this.m_invMassB;
    i1 = this.m_invIA;
    i2 = this.m_invIB;
    this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
    this.m_K.col1.y = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
    this.m_K.col2.x = this.m_K.col1.y;
    this.m_K.col2.y = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
    if (this.m_enableLimit) {
      jointTransition = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        this.m_limitState = b2Joint.e_equalLimits;
      } else if (jointTransition <= this.m_lowerTranslation) {
        if (this.m_limitState !== b2Joint.e_atLowerLimit) {
          this.m_limitState = b2Joint.e_atLowerLimit;
          this.m_impulse.y = 0.0;
        }
      } else if (jointTransition >= this.m_upperTranslation) {
        if (this.m_limitState !== b2Joint.e_atUpperLimit) {
          this.m_limitState = b2Joint.e_atUpperLimit;
          this.m_impulse.y = 0.0;
        }
      } else {
        this.m_limitState = b2Joint.e_inactiveLimit;
        this.m_impulse.y = 0.0;
      }
    } else {
      this.m_limitState = b2Joint.e_inactiveLimit;
    }
    if (this.m_enableMotor === false) {
      this.m_motorImpulse = 0.0;
    }
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_motorImpulse *= step.dtRatio;
      PX = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.x;
      PY = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.y) * this.m_axis.y;
      L1 = this.m_impulse.x * this.m_s1 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a1;
      L2 = this.m_impulse.x * this.m_s2 + (this.m_motorImpulse + this.m_impulse.y) * this.m_a2;
      bA.m_linearVelocity.x -= this.m_invMassA * PX;
      bA.m_linearVelocity.y -= this.m_invMassA * PY;
      bA.m_angularVelocity -= this.m_invIA * L1;
      bB.m_linearVelocity.x += this.m_invMassB * PX;
      bB.m_linearVelocity.y += this.m_invMassB * PY;
      bB.m_angularVelocity += this.m_invIB * L2;
    } else {
      this.m_impulse.SetZero();
      this.m_motorImpulse = 0.0;
    }
  };

  b2LineJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, Cdot1, Cdot2, L1, L2, PX, PY, b, bA, bB, df, df2, f1, f2r, impulse, maxImpulse, oldImpulse, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    v1 = bA.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    v2 = bB.m_linearVelocity;
    w2 = bB.m_angularVelocity;
    PX = 0;
    PY = 0;
    L1 = 0;
    L2 = 0;
    if (this.m_enableMotor && this.m_limitState !== b2Joint.e_equalLimits) {
      Cdot = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      impulse = this.m_motorMass * (this.m_motorSpeed - Cdot);
      oldImpulse = this.m_motorImpulse;
      maxImpulse = step.dt * this.m_maxMotorForce;
      this.m_motorImpulse = b2Math.Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);
      impulse = this.m_motorImpulse - oldImpulse;
      PX = impulse * this.m_axis.x;
      PY = impulse * this.m_axis.y;
      L1 = impulse * this.m_a1;
      L2 = impulse * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    Cdot1 = this.m_perp.x * (v2.x - v1.x) + this.m_perp.y * (v2.y - v1.y) + this.m_s2 * w2 - this.m_s1 * w1;
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      Cdot2 = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      f1 = this.m_impulse.Copy();
      df = this.m_K.Solve(new b2Vec2(), -Cdot1, -Cdot2);
      this.m_impulse.Add(df);
      if (this.m_limitState === b2Joint.e_atLowerLimit) {
        this.m_impulse.y = b2Math.Max(this.m_impulse.y, 0.0);
      } else {
        if (this.m_limitState === b2Joint.e_atUpperLimit) {
          this.m_impulse.y = b2Math.Min(this.m_impulse.y, 0.0);
        }
      }
      b = (-Cdot1) - (this.m_impulse.y - f1.y) * this.m_K.col2.x;
      f2r = 0;
      if (this.m_K.col1.x !== 0.0) {
        f2r = b / this.m_K.col1.x + f1.x;
      } else {
        f2r = f1.x;
      }
      this.m_impulse.x = f2r;
      df.x = this.m_impulse.x - f1.x;
      df.y = this.m_impulse.y - f1.y;
      PX = df.x * this.m_perp.x + df.y * this.m_axis.x;
      PY = df.x * this.m_perp.y + df.y * this.m_axis.y;
      L1 = df.x * this.m_s1 + df.y * this.m_a1;
      L2 = df.x * this.m_s2 + df.y * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    } else {
      df2 = 0;
      if (this.m_K.col1.x !== 0.0) {
        df2 = (-Cdot1) / this.m_K.col1.x;
      } else {
        df2 = 0.0;
      }
      this.m_impulse.x += df2;
      PX = df2 * this.m_perp.x;
      PY = df2 * this.m_perp.y;
      L1 = df2 * this.m_s1;
      L2 = df2 * this.m_s2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    bA.m_linearVelocity.SetV(v1);
    bA.m_angularVelocity = w1;
    bB.m_linearVelocity.SetV(v2);
    bB.m_angularVelocity = w2;
  };

  b2LineJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C1, C2, L1, L2, PX, PY, R1, R2, a1, a2, active, angularError, bA, bB, c1, c2, dX, dY, i1, i2, impulse, impulse1, k11, limitC, linearError, m1, m2, oldLimitImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, translation;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    limitC = 0;
    oldLimitImpulse = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    c1 = bA.m_sweep.c;
    a1 = bA.m_sweep.a;
    c2 = bB.m_sweep.c;
    a2 = bB.m_sweep.a;
    tMat = void 0;
    tX = 0;
    m1 = 0;
    m2 = 0;
    i1 = 0;
    i2 = 0;
    linearError = 0.0;
    angularError = 0.0;
    active = false;
    C2 = 0.0;
    R1 = b2Mat22.FromAngle(a1);
    R2 = b2Mat22.FromAngle(a2);
    tMat = R1;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = R2;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = c2.x + r2X - c1.x - r1X;
    dY = c2.y + r2Y - c1.y - r1Y;
    if (this.m_enableLimit) {
      this.m_axis = b2Math.MulMV(R1, this.m_localXAxis1);
      this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
      this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
      translation = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        C2 = b2Math.Clamp(translation, -b2Settings.b2_maxLinearCorrection, b2Settings.b2_maxLinearCorrection);
        linearError = b2Math.Abs(translation);
        active = true;
      } else if (translation <= this.m_lowerTranslation) {
        C2 = b2Math.Clamp(translation - this.m_lowerTranslation + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
        linearError = this.m_lowerTranslation - translation;
        active = true;
      } else if (translation >= this.m_upperTranslation) {
        C2 = b2Math.Clamp(translation - this.m_upperTranslation + b2Settings.b2_linearSlop, 0.0, b2Settings.b2_maxLinearCorrection);
        linearError = translation - this.m_upperTranslation;
        active = true;
      }
    }
    this.m_perp = b2Math.MulMV(R1, this.m_localYAxis1);
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    impulse = new b2Vec2();
    C1 = this.m_perp.x * dX + this.m_perp.y * dY;
    linearError = b2Math.Max(linearError, b2Math.Abs(C1));
    angularError = 0.0;
    if (active) {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      this.m_K.col1.y = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
      this.m_K.col2.x = this.m_K.col1.y;
      this.m_K.col2.y = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
      this.m_K.Solve(impulse, -C1, -C2);
    } else {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      k11 = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      impulse1 = 0;
      if (k11 !== 0.0) {
        impulse1 = (-C1) / k11;
      } else {
        impulse1 = 0.0;
      }
      impulse.x = impulse1;
      impulse.y = 0.0;
    }
    PX = impulse.x * this.m_perp.x + impulse.y * this.m_axis.x;
    PY = impulse.x * this.m_perp.y + impulse.y * this.m_axis.y;
    L1 = impulse.x * this.m_s1 + impulse.y * this.m_a1;
    L2 = impulse.x * this.m_s2 + impulse.y * this.m_a2;
    c1.x -= this.m_invMassA * PX;
    c1.y -= this.m_invMassA * PY;
    a1 -= this.m_invIA * L1;
    c2.x += this.m_invMassB * PX;
    c2.y += this.m_invMassB * PY;
    a2 += this.m_invIB * L2;
    bA.m_sweep.a = a1;
    bB.m_sweep.a = a2;
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return linearError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2LineJoint;

})(b2Joint);

//# sourceMappingURL=b2LineJoint.js.map

},{"../../index":103}],92:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2LineJointDef = (function(_super) {
  __extends(b2LineJointDef, _super);

  b2LineJointDef.prototype.type = b2Joint.e_lineJoint;

  b2LineJointDef.prototype.localAnchorA = null;

  b2LineJointDef.prototype.localAnchorB = null;

  b2LineJointDef.prototype.localAxisA = null;

  b2LineJointDef.prototype.enableLimit = false;

  b2LineJointDef.prototype.lowerTranslation = 0.0;

  b2LineJointDef.prototype.upperTranslation = 0.0;

  b2LineJointDef.prototype.enableMotor = false;

  b2LineJointDef.prototype.maxMotorForce = 0.0;

  b2LineJointDef.prototype.motorSpeed = 0.0;

  function b2LineJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.localAxisA = new b2Vec2();
    this.localAxisA.Set(1.0, 0.0);
    return;
  }

  b2LineJointDef.prototype.Initialize = function(bA, bB, anchor, axis) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA = this.bodyA.GetLocalPoint(anchor);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchor);
    this.localAxisA = this.bodyA.GetLocalVector(axis);
  };

  return b2LineJointDef;

})(b2JointDef);

//# sourceMappingURL=b2LineJointDef.js.map

},{"../../index":103}],93:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

Box2D.Dynamics.Joints.b2MouseJoint = (function(_super) {
  __extends(b2MouseJoint, _super);

  b2MouseJoint.prototype.K = null;

  b2MouseJoint.prototype.K1 = null;

  b2MouseJoint.prototype.K2 = null;

  b2MouseJoint.prototype.m_localAnchor = null;

  b2MouseJoint.prototype.m_target = null;

  b2MouseJoint.prototype.m_impulse = null;

  b2MouseJoint.prototype.m_mass = null;

  b2MouseJoint.prototype.m_C = null;

  b2MouseJoint.prototype.m_frequencyHz = 0.0;

  b2MouseJoint.prototype.m_dampingRatio = 0.0;

  b2MouseJoint.prototype.m_beta = 0.0;

  b2MouseJoint.prototype.m_gamma = 0.0;

  function b2MouseJoint(def) {
    var tMat, tX, tY;
    b2MouseJoint.__super__.constructor.call(this, def);
    this.K = new b2Mat22();
    this.K1 = new b2Mat22();
    this.K2 = new b2Mat22();
    this.m_localAnchor = new b2Vec2();
    this.m_target = new b2Vec2();
    this.m_impulse = new b2Vec2();
    this.m_mass = new b2Mat22();
    this.m_C = new b2Vec2();
    this.m_target.SetV(def.target);
    tX = this.m_target.x - this.m_bodyB.m_xf.position.x;
    tY = this.m_target.y - this.m_bodyB.m_xf.position.y;
    tMat = this.m_bodyB.m_xf.R;
    this.m_localAnchor.x = tX * tMat.col1.x + tY * tMat.col1.y;
    this.m_localAnchor.y = tX * tMat.col2.x + tY * tMat.col2.y;
    this.m_maxForce = def.maxForce;
    this.m_impulse.SetZero();
    this.m_frequencyHz = def.frequencyHz;
    this.m_dampingRatio = def.dampingRatio;
    return;
  }

  b2MouseJoint.prototype.GetAnchorA = function() {
    return this.m_target;
  };

  b2MouseJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor);
  };

  b2MouseJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse.x, inv_dt * this.m_impulse.y);
  };

  b2MouseJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2MouseJoint.prototype.GetTarget = function() {
    return this.m_target;
  };

  b2MouseJoint.prototype.SetTarget = function(target) {
    if (this.m_bodyB.IsAwake() === false) {
      this.m_bodyB.SetAwake(true);
    }
    this.m_target = target;
  };

  b2MouseJoint.prototype.GetMaxForce = function() {
    return this.m_maxForce;
  };

  b2MouseJoint.prototype.SetMaxForce = function(maxForce) {
    if (maxForce === void 0) {
      maxForce = 0;
    }
    this.m_maxForce = maxForce;
  };

  b2MouseJoint.prototype.GetFrequency = function() {
    return this.m_frequencyHz;
  };

  b2MouseJoint.prototype.SetFrequency = function(hz) {
    if (hz === void 0) {
      hz = 0;
    }
    this.m_frequencyHz = hz;
  };

  b2MouseJoint.prototype.GetDampingRatio = function() {
    return this.m_dampingRatio;
  };

  b2MouseJoint.prototype.SetDampingRatio = function(ratio) {
    if (ratio === void 0) {
      ratio = 0;
    }
    this.m_dampingRatio = ratio;
  };

  b2MouseJoint.prototype.InitVelocityConstraints = function(step) {
    var b, d, invI, invMass, k, mass, omega, rX, rY, tMat, tX;
    b = this.m_bodyB;
    mass = b.GetMass();
    omega = 2.0 * Math.PI * this.m_frequencyHz;
    d = 2.0 * mass * this.m_dampingRatio * omega;
    k = mass * omega * omega;
    this.m_gamma = step.dt * (d + step.dt * k);
    this.m_gamma = (this.m_gamma !== 0 ? 1 / this.m_gamma : 0.0);
    this.m_beta = step.dt * k * this.m_gamma;
    tMat = void 0;
    tMat = b.m_xf.R;
    rX = this.m_localAnchor.x - b.m_sweep.localCenter.x;
    rY = this.m_localAnchor.y - b.m_sweep.localCenter.y;
    tX = tMat.col1.x * rX + tMat.col2.x * rY;
    rY = tMat.col1.y * rX + tMat.col2.y * rY;
    rX = tX;
    invMass = b.m_invMass;
    invI = b.m_invI;
    this.K1.col1.x = invMass;
    this.K1.col2.x = 0.0;
    this.K1.col1.y = 0.0;
    this.K1.col2.y = invMass;
    this.K2.col1.x = invI * rY * rY;
    this.K2.col2.x = -invI * rX * rY;
    this.K2.col1.y = -invI * rX * rY;
    this.K2.col2.y = invI * rX * rX;
    this.K.SetM(this.K1);
    this.K.AddM(this.K2);
    this.K.col1.x += this.m_gamma;
    this.K.col2.y += this.m_gamma;
    this.K.GetInverse(this.m_mass);
    this.m_C.x = b.m_sweep.c.x + rX - this.m_target.x;
    this.m_C.y = b.m_sweep.c.y + rY - this.m_target.y;
    b.m_angularVelocity *= 0.98;
    this.m_impulse.x *= step.dtRatio;
    this.m_impulse.y *= step.dtRatio;
    b.m_linearVelocity.x += invMass * this.m_impulse.x;
    b.m_linearVelocity.y += invMass * this.m_impulse.y;
    b.m_angularVelocity += invI * (rX * this.m_impulse.y - rY * this.m_impulse.x);
  };

  b2MouseJoint.prototype.SolveVelocityConstraints = function(step) {
    var CdotX, CdotY, b, impulseX, impulseY, maxImpulse, oldImpulseX, oldImpulseY, rX, rY, tMat, tX, tY;
    b = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    tY = 0;
    tMat = b.m_xf.R;
    rX = this.m_localAnchor.x - b.m_sweep.localCenter.x;
    rY = this.m_localAnchor.y - b.m_sweep.localCenter.y;
    tX = tMat.col1.x * rX + tMat.col2.x * rY;
    rY = tMat.col1.y * rX + tMat.col2.y * rY;
    rX = tX;
    CdotX = b.m_linearVelocity.x + (-b.m_angularVelocity * rY);
    CdotY = b.m_linearVelocity.y + (b.m_angularVelocity * rX);
    tMat = this.m_mass;
    tX = CdotX + this.m_beta * this.m_C.x + this.m_gamma * this.m_impulse.x;
    tY = CdotY + this.m_beta * this.m_C.y + this.m_gamma * this.m_impulse.y;
    impulseX = -(tMat.col1.x * tX + tMat.col2.x * tY);
    impulseY = -(tMat.col1.y * tX + tMat.col2.y * tY);
    oldImpulseX = this.m_impulse.x;
    oldImpulseY = this.m_impulse.y;
    this.m_impulse.x += impulseX;
    this.m_impulse.y += impulseY;
    maxImpulse = step.dt * this.m_maxForce;
    if (this.m_impulse.LengthSquared() > maxImpulse * maxImpulse) {
      this.m_impulse.Multiply(maxImpulse / this.m_impulse.Length());
    }
    impulseX = this.m_impulse.x - oldImpulseX;
    impulseY = this.m_impulse.y - oldImpulseY;
    b.m_linearVelocity.x += b.m_invMass * impulseX;
    b.m_linearVelocity.y += b.m_invMass * impulseY;
    b.m_angularVelocity += b.m_invI * (rX * impulseY - rY * impulseX);
  };

  b2MouseJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    return true;
  };

  return b2MouseJoint;

})(b2Joint);

//# sourceMappingURL=b2MouseJoint.js.map

},{"../../index":103}],94:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2MouseJointDef = (function(_super) {
  __extends(b2MouseJointDef, _super);

  b2MouseJointDef.prototype.type = b2Joint.e_mouseJoint;

  b2MouseJointDef.prototype.target = null;

  b2MouseJointDef.prototype.maxForce = 0.0;

  b2MouseJointDef.prototype.frequencyHz = 5.0;

  b2MouseJointDef.prototype.dampingRatio = 0.7;

  function b2MouseJointDef() {
    this.target = new b2Vec2();
    return;
  }

  return b2MouseJointDef;

})(b2JointDef);

//# sourceMappingURL=b2MouseJointDef.js.map

},{"../../index":103}],95:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Math, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Math = Box2D.Common.Math.b2Math;

Box2D.Dynamics.Joints.b2PrismaticJoint = (function(_super) {
  __extends(b2PrismaticJoint, _super);

  b2PrismaticJoint.prototype.m_localXAxis1 = null;

  b2PrismaticJoint.prototype.m_localYAxis1 = null;

  b2PrismaticJoint.prototype.m_axis = null;

  b2PrismaticJoint.prototype.m_perp = null;

  b2PrismaticJoint.prototype.m_K = null;

  b2PrismaticJoint.prototype.m_refAngle = null;

  b2PrismaticJoint.prototype.m_impulse = null;

  b2PrismaticJoint.prototype.m_motorMass = 0.0;

  b2PrismaticJoint.prototype.m_motorImpulse = 0.0;

  b2PrismaticJoint.prototype.m_lowerTranslation = 0.0;

  b2PrismaticJoint.prototype.m_upperTranslation = 0.0;

  b2PrismaticJoint.prototype.m_maxMotorForce = 0.0;

  b2PrismaticJoint.prototype.m_motorSpeed = 0.0;

  b2PrismaticJoint.prototype.m_enableLimit = false;

  b2PrismaticJoint.prototype.m_enableMotor = false;

  b2PrismaticJoint.prototype.m_limitState = b2Joint.e_inactiveLimit;

  function b2PrismaticJoint(def) {
    b2PrismaticJoint.__super__.constructor.apply(this, arguments);
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_localXAxis1 = new b2Vec2();
    this.m_localYAxis1 = new b2Vec2();
    this.m_axis = new b2Vec2();
    this.m_perp = new b2Vec2();
    this.m_K = new b2Mat33();
    this.m_impulse = new b2Vec3();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_localXAxis1.SetV(def.localAxisA);
    this.m_localYAxis1.x = -this.m_localXAxis1.y;
    this.m_localYAxis1.y = this.m_localXAxis1.x;
    this.m_refAngle = def.referenceAngle;
    this.m_impulse.SetZero();
    this.m_motorMass = 0.0;
    this.m_motorImpulse = 0.0;
    this.m_lowerTranslation = def.lowerTranslation;
    this.m_upperTranslation = def.upperTranslation;
    this.m_maxMotorForce = def.maxMotorForce;
    this.m_motorSpeed = def.motorSpeed;
    this.m_enableLimit = def.enableLimit;
    this.m_enableMotor = def.enableMotor;
    this.m_limitState = b2Joint.e_inactiveLimit;
    this.m_axis.SetZero();
    this.m_perp.SetZero();
    return;
  }

  b2PrismaticJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2PrismaticJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2PrismaticJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x), inv_dt * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y));
  };

  b2PrismaticJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.y;
  };

  b2PrismaticJoint.prototype.GetJointTranslation = function() {
    var axis, bA, bB, dX, dY, p1, p2, tMat, translation;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    p1 = bA.GetWorldPoint(this.m_localAnchor1);
    p2 = bB.GetWorldPoint(this.m_localAnchor2);
    dX = p2.x - p1.x;
    dY = p2.y - p1.y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    translation = axis.x * dX + axis.y * dY;
    return translation;
  };

  b2PrismaticJoint.prototype.GetJointSpeed = function() {
    var axis, bA, bB, dX, dY, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, speed, tMat, tX, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    p1X = bA.m_sweep.c.x + r1X;
    p1Y = bA.m_sweep.c.y + r1Y;
    p2X = bB.m_sweep.c.x + r2X;
    p2Y = bB.m_sweep.c.y + r2Y;
    dX = p2X - p1X;
    dY = p2Y - p1Y;
    axis = bA.GetWorldVector(this.m_localXAxis1);
    v1 = bA.m_linearVelocity;
    v2 = bB.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    w2 = bB.m_angularVelocity;
    speed = (dX * (-w1 * axis.y) + dY * (w1 * axis.x)) + (axis.x * (((v2.x + (-w2 * r2Y)) - v1.x) - (-w1 * r1Y)) + axis.y * (((v2.y + (w2 * r2X)) - v1.y) - (w1 * r1X)));
    return speed;
  };

  b2PrismaticJoint.prototype.IsLimitEnabled = function() {
    return this.m_enableLimit;
  };

  b2PrismaticJoint.prototype.EnableLimit = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableLimit = flag;
  };

  b2PrismaticJoint.prototype.GetLowerLimit = function() {
    return this.m_lowerTranslation;
  };

  b2PrismaticJoint.prototype.GetUpperLimit = function() {
    return this.m_upperTranslation;
  };

  b2PrismaticJoint.prototype.SetLimits = function(lower, upper) {
    if (lower === void 0) {
      lower = 0;
    }
    if (upper === void 0) {
      upper = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_lowerTranslation = lower;
    this.m_upperTranslation = upper;
  };

  b2PrismaticJoint.prototype.IsMotorEnabled = function() {
    return this.m_enableMotor;
  };

  b2PrismaticJoint.prototype.EnableMotor = function(flag) {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_enableMotor = flag;
  };

  b2PrismaticJoint.prototype.SetMotorSpeed = function(speed) {
    if (speed === void 0) {
      speed = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_motorSpeed = speed;
  };

  b2PrismaticJoint.prototype.GetMotorSpeed = function() {
    return this.m_motorSpeed;
  };

  b2PrismaticJoint.prototype.SetMaxMotorForce = function(force) {
    if (force === void 0) {
      force = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_maxMotorForce = force;
  };

  b2PrismaticJoint.prototype.GetMotorForce = function() {
    return this.m_motorImpulse;
  };

  b2PrismaticJoint.prototype.InitVelocityConstraints = function(step) {
    var L1, L2, PX, PY, bA, bB, dX, dY, i1, i2, jointTransition, m1, m2, r1X, r1Y, r2X, r2Y, tMat, tX, xf1, xf2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    this.m_localCenterA.SetV(bA.GetLocalCenter());
    this.m_localCenterB.SetV(bB.GetLocalCenter());
    xf1 = bA.GetTransform();
    xf2 = bB.GetTransform();
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    dY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    this.m_invMassA = bA.m_invMass;
    this.m_invMassB = bB.m_invMass;
    this.m_invIA = bA.m_invI;
    this.m_invIB = bB.m_invI;
    this.m_axis.SetV(b2Math.MulMV(xf1.R, this.m_localXAxis1));
    this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
    this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
    this.m_motorMass = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_a1 * this.m_a1 + this.m_invIB * this.m_a2 * this.m_a2;
    if (this.m_motorMass > Number.MIN_VALUE) {
      this.m_motorMass = 1.0 / this.m_motorMass;
    }
    this.m_perp.SetV(b2Math.MulMV(xf1.R, this.m_localYAxis1));
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    m1 = this.m_invMassA;
    m2 = this.m_invMassB;
    i1 = this.m_invIA;
    i2 = this.m_invIB;
    this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
    this.m_K.col1.y = i1 * this.m_s1 + i2 * this.m_s2;
    this.m_K.col1.z = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
    this.m_K.col2.x = this.m_K.col1.y;
    this.m_K.col2.y = i1 + i2;
    this.m_K.col2.z = i1 * this.m_a1 + i2 * this.m_a2;
    this.m_K.col3.x = this.m_K.col1.z;
    this.m_K.col3.y = this.m_K.col2.z;
    this.m_K.col3.z = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
    if (this.m_enableLimit) {
      jointTransition = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        this.m_limitState = b2Joint.e_equalLimits;
      } else if (jointTransition <= this.m_lowerTranslation) {
        if (this.m_limitState !== b2Joint.e_atLowerLimit) {
          this.m_limitState = b2Joint.e_atLowerLimit;
          this.m_impulse.z = 0.0;
        }
      } else if (jointTransition >= this.m_upperTranslation) {
        if (this.m_limitState !== b2Joint.e_atUpperLimit) {
          this.m_limitState = b2Joint.e_atUpperLimit;
          this.m_impulse.z = 0.0;
        }
      } else {
        this.m_limitState = b2Joint.e_inactiveLimit;
        this.m_impulse.z = 0.0;
      }
    } else {
      this.m_limitState = b2Joint.e_inactiveLimit;
    }
    if (this.m_enableMotor === false) {
      this.m_motorImpulse = 0.0;
    }
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_motorImpulse *= step.dtRatio;
      PX = this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x;
      PY = this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y;
      L1 = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1;
      L2 = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a2;
      bA.m_linearVelocity.x -= this.m_invMassA * PX;
      bA.m_linearVelocity.y -= this.m_invMassA * PY;
      bA.m_angularVelocity -= this.m_invIA * L1;
      bB.m_linearVelocity.x += this.m_invMassB * PX;
      bB.m_linearVelocity.y += this.m_invMassB * PY;
      bB.m_angularVelocity += this.m_invIB * L2;
    } else {
      this.m_impulse.SetZero();
      this.m_motorImpulse = 0.0;
    }
  };

  b2PrismaticJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, Cdot1X, Cdot1Y, Cdot2, L1, L2, PX, PY, bA, bB, bX, bY, df, df2, f1, f2r, impulse, maxImpulse, oldImpulse, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    v1 = bA.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    v2 = bB.m_linearVelocity;
    w2 = bB.m_angularVelocity;
    PX = 0;
    PY = 0;
    L1 = 0;
    L2 = 0;
    if (this.m_enableMotor && this.m_limitState !== b2Joint.e_equalLimits) {
      Cdot = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      impulse = this.m_motorMass * (this.m_motorSpeed - Cdot);
      oldImpulse = this.m_motorImpulse;
      maxImpulse = step.dt * this.m_maxMotorForce;
      this.m_motorImpulse = b2Math.Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);
      impulse = this.m_motorImpulse - oldImpulse;
      PX = impulse * this.m_axis.x;
      PY = impulse * this.m_axis.y;
      L1 = impulse * this.m_a1;
      L2 = impulse * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    Cdot1X = this.m_perp.x * (v2.x - v1.x) + this.m_perp.y * (v2.y - v1.y) + this.m_s2 * w2 - this.m_s1 * w1;
    Cdot1Y = w2 - w1;
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      Cdot2 = this.m_axis.x * (v2.x - v1.x) + this.m_axis.y * (v2.y - v1.y) + this.m_a2 * w2 - this.m_a1 * w1;
      f1 = this.m_impulse.Copy();
      df = this.m_K.Solve33(new b2Vec3(), -Cdot1X, -Cdot1Y, -Cdot2);
      this.m_impulse.Add(df);
      if (this.m_limitState === b2Joint.e_atLowerLimit) {
        this.m_impulse.z = b2Math.Max(this.m_impulse.z, 0.0);
      } else {
        if (this.m_limitState === b2Joint.e_atUpperLimit) {
          this.m_impulse.z = b2Math.Min(this.m_impulse.z, 0.0);
        }
      }
      bX = (-Cdot1X) - (this.m_impulse.z - f1.z) * this.m_K.col3.x;
      bY = (-Cdot1Y) - (this.m_impulse.z - f1.z) * this.m_K.col3.y;
      f2r = this.m_K.Solve22(new b2Vec2(), bX, bY);
      f2r.x += f1.x;
      f2r.y += f1.y;
      this.m_impulse.x = f2r.x;
      this.m_impulse.y = f2r.y;
      df.x = this.m_impulse.x - f1.x;
      df.y = this.m_impulse.y - f1.y;
      df.z = this.m_impulse.z - f1.z;
      PX = df.x * this.m_perp.x + df.z * this.m_axis.x;
      PY = df.x * this.m_perp.y + df.z * this.m_axis.y;
      L1 = df.x * this.m_s1 + df.y + df.z * this.m_a1;
      L2 = df.x * this.m_s2 + df.y + df.z * this.m_a2;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    } else {
      df2 = this.m_K.Solve22(new b2Vec2(), -Cdot1X, -Cdot1Y);
      this.m_impulse.x += df2.x;
      this.m_impulse.y += df2.y;
      PX = df2.x * this.m_perp.x;
      PY = df2.x * this.m_perp.y;
      L1 = df2.x * this.m_s1 + df2.y;
      L2 = df2.x * this.m_s2 + df2.y;
      v1.x -= this.m_invMassA * PX;
      v1.y -= this.m_invMassA * PY;
      w1 -= this.m_invIA * L1;
      v2.x += this.m_invMassB * PX;
      v2.y += this.m_invMassB * PY;
      w2 += this.m_invIB * L2;
    }
    bA.m_linearVelocity.SetV(v1);
    bA.m_angularVelocity = w1;
    bB.m_linearVelocity.SetV(v2);
    bB.m_angularVelocity = w2;
  };

  b2PrismaticJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C1X, C1Y, C2, L1, L2, PX, PY, R1, R2, a1, a2, active, angularError, bA, bB, c1, c2, dX, dY, i1, i2, impulse, impulse1, k11, k12, k22, limitC, linearError, m1, m2, oldLimitImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, translation;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    limitC = 0;
    oldLimitImpulse = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    c1 = bA.m_sweep.c;
    a1 = bA.m_sweep.a;
    c2 = bB.m_sweep.c;
    a2 = bB.m_sweep.a;
    tMat = void 0;
    tX = 0;
    m1 = 0;
    m2 = 0;
    i1 = 0;
    i2 = 0;
    linearError = 0.0;
    angularError = 0.0;
    active = false;
    C2 = 0.0;
    R1 = b2Mat22.FromAngle(a1);
    R2 = b2Mat22.FromAngle(a2);
    tMat = R1;
    r1X = this.m_localAnchor1.x - this.m_localCenterA.x;
    r1Y = this.m_localAnchor1.y - this.m_localCenterA.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = R2;
    r2X = this.m_localAnchor2.x - this.m_localCenterB.x;
    r2Y = this.m_localAnchor2.y - this.m_localCenterB.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    dX = c2.x + r2X - c1.x - r1X;
    dY = c2.y + r2Y - c1.y - r1Y;
    if (this.m_enableLimit) {
      this.m_axis = b2Math.MulMV(R1, this.m_localXAxis1);
      this.m_a1 = (dX + r1X) * this.m_axis.y - (dY + r1Y) * this.m_axis.x;
      this.m_a2 = r2X * this.m_axis.y - r2Y * this.m_axis.x;
      translation = this.m_axis.x * dX + this.m_axis.y * dY;
      if (b2Math.Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2.0 * b2Settings.b2_linearSlop) {
        C2 = b2Math.Clamp(translation, -b2Settings.b2_maxLinearCorrection, b2Settings.b2_maxLinearCorrection);
        linearError = b2Math.Abs(translation);
        active = true;
      } else if (translation <= this.m_lowerTranslation) {
        C2 = b2Math.Clamp(translation - this.m_lowerTranslation + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
        linearError = this.m_lowerTranslation - translation;
        active = true;
      } else if (translation >= this.m_upperTranslation) {
        C2 = b2Math.Clamp(translation - this.m_upperTranslation + b2Settings.b2_linearSlop, 0.0, b2Settings.b2_maxLinearCorrection);
        linearError = translation - this.m_upperTranslation;
        active = true;
      }
    }
    this.m_perp = b2Math.MulMV(R1, this.m_localYAxis1);
    this.m_s1 = (dX + r1X) * this.m_perp.y - (dY + r1Y) * this.m_perp.x;
    this.m_s2 = r2X * this.m_perp.y - r2Y * this.m_perp.x;
    impulse = new b2Vec3();
    C1X = this.m_perp.x * dX + this.m_perp.y * dY;
    C1Y = a2 - a1 - this.m_refAngle;
    linearError = b2Math.Max(linearError, b2Math.Abs(C1X));
    angularError = b2Math.Abs(C1Y);
    if (active) {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      this.m_K.col1.x = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      this.m_K.col1.y = i1 * this.m_s1 + i2 * this.m_s2;
      this.m_K.col1.z = i1 * this.m_s1 * this.m_a1 + i2 * this.m_s2 * this.m_a2;
      this.m_K.col2.x = this.m_K.col1.y;
      this.m_K.col2.y = i1 + i2;
      this.m_K.col2.z = i1 * this.m_a1 + i2 * this.m_a2;
      this.m_K.col3.x = this.m_K.col1.z;
      this.m_K.col3.y = this.m_K.col2.z;
      this.m_K.col3.z = m1 + m2 + i1 * this.m_a1 * this.m_a1 + i2 * this.m_a2 * this.m_a2;
      this.m_K.Solve33(impulse, -C1X, -C1Y, -C2);
    } else {
      m1 = this.m_invMassA;
      m2 = this.m_invMassB;
      i1 = this.m_invIA;
      i2 = this.m_invIB;
      k11 = m1 + m2 + i1 * this.m_s1 * this.m_s1 + i2 * this.m_s2 * this.m_s2;
      k12 = i1 * this.m_s1 + i2 * this.m_s2;
      k22 = i1 + i2;
      this.m_K.col1.Set(k11, k12, 0.0);
      this.m_K.col2.Set(k12, k22, 0.0);
      impulse1 = this.m_K.Solve22(new b2Vec2(), -C1X, -C1Y);
      impulse.x = impulse1.x;
      impulse.y = impulse1.y;
      impulse.z = 0.0;
    }
    PX = impulse.x * this.m_perp.x + impulse.z * this.m_axis.x;
    PY = impulse.x * this.m_perp.y + impulse.z * this.m_axis.y;
    L1 = impulse.x * this.m_s1 + impulse.y + impulse.z * this.m_a1;
    L2 = impulse.x * this.m_s2 + impulse.y + impulse.z * this.m_a2;
    c1.x -= this.m_invMassA * PX;
    c1.y -= this.m_invMassA * PY;
    a1 -= this.m_invIA * L1;
    c2.x += this.m_invMassB * PX;
    c2.y += this.m_invMassB * PY;
    a2 += this.m_invIB * L2;
    bA.m_sweep.a = a1;
    bB.m_sweep.a = a2;
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return linearError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2PrismaticJoint;

})(b2Joint);

//# sourceMappingURL=b2PrismaticJoint.js.map

},{"../../index":103}],96:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2PrismaticJointDef = (function(_super) {
  __extends(b2PrismaticJointDef, _super);

  b2PrismaticJointDef.prototype.type = b2Joint.e_prismaticJoint;

  b2PrismaticJointDef.prototype.localAnchorA = null;

  b2PrismaticJointDef.prototype.localAnchorB = null;

  b2PrismaticJointDef.prototype.localAxisA = null;

  b2PrismaticJointDef.prototype.referenceAngle = 0.0;

  b2PrismaticJointDef.prototype.enableLimit = false;

  b2PrismaticJointDef.prototype.lowerTranslation = 0.0;

  b2PrismaticJointDef.prototype.upperTranslation = 0.0;

  b2PrismaticJointDef.prototype.enableMotor = false;

  b2PrismaticJointDef.prototype.maxMotorForce = 0.0;

  b2PrismaticJointDef.prototype.motorSpeed = 0.0;

  function b2PrismaticJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.localAxisA = new b2Vec2();
    this.type = b2Joint.e_prismaticJoint;
    this.localAxisA.Set(1.0, 0.0);
    return;
  }

  b2PrismaticJointDef.prototype.Initialize = function(bA, bB, anchor, axis) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA = this.bodyA.GetLocalPoint(anchor);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchor);
    this.localAxisA = this.bodyA.GetLocalVector(axis);
    this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
  };

  return b2PrismaticJointDef;

})(b2JointDef);

//# sourceMappingURL=b2PrismaticJointDef.js.map

},{"../../index":103}],97:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Math, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Math = Box2D.Common.Math.b2Math;

Box2D.Dynamics.Joints.b2PulleyJoint = (function(_super) {
  __extends(b2PulleyJoint, _super);

  b2PulleyJoint.b2_minPulleyLength = 2.0;

  b2PulleyJoint.prototype.m_localXAxis1 = null;

  b2PulleyJoint.prototype.m_localYAxis1 = null;

  b2PulleyJoint.prototype.m_u1 = null;

  b2PulleyJoint.prototype.m_u2 = null;

  b2PulleyJoint.prototype.m_ground = null;

  b2PulleyJoint.prototype.m_ratio = 0.0;

  b2PulleyJoint.prototype.m_constant = 0.0;

  b2PulleyJoint.prototype.m_maxLength1 = 0.0;

  b2PulleyJoint.prototype.m_maxLength2 = 0.0;

  b2PulleyJoint.prototype.m_impulse = 0.0;

  b2PulleyJoint.prototype.m_limitImpulse1 = 0.0;

  b2PulleyJoint.prototype.m_limitImpulse2 = 0.0;

  function b2PulleyJoint(def) {
    b2PulleyJoint.__super__.constructor.call(this, def);
    this.m_groundAnchor1 = new b2Vec2();
    this.m_groundAnchor2 = new b2Vec2();
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_u1 = new b2Vec2();
    this.m_u2 = new b2Vec2();
    this.m_ground = this.m_bodyA.m_world.m_groundBody;
    this.m_groundAnchor1.x = def.groundAnchorA.x - this.m_ground.m_xf.position.x;
    this.m_groundAnchor1.y = def.groundAnchorA.y - this.m_ground.m_xf.position.y;
    this.m_groundAnchor2.x = def.groundAnchorB.x - this.m_ground.m_xf.position.x;
    this.m_groundAnchor2.y = def.groundAnchorB.y - this.m_ground.m_xf.position.y;
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_ratio = def.ratio;
    this.m_constant = def.lengthA + this.m_ratio * def.lengthB;
    this.m_maxLength1 = b2Math.Min(def.maxLengthA, this.m_constant - this.m_ratio * b2PulleyJoint.b2_minPulleyLength);
    this.m_maxLength2 = b2Math.Min(def.maxLengthB, (this.m_constant - b2PulleyJoint.b2_minPulleyLength) / this.m_ratio);
    this.m_impulse = 0.0;
    this.m_limitImpulse1 = 0.0;
    this.m_limitImpulse2 = 0.0;
    return;
  }

  b2PulleyJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2PulleyJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2PulleyJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse * this.m_u2.x, inv_dt * this.m_impulse * this.m_u2.y);
  };

  b2PulleyJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return 0.0;
  };

  b2PulleyJoint.prototype.GetGroundAnchorA = function() {
    var a;
    a = this.m_ground.m_xf.position.Copy();
    a.Add(this.m_groundAnchor1);
    return a;
  };

  b2PulleyJoint.prototype.GetGroundAnchorB = function() {
    var a;
    a = this.m_ground.m_xf.position.Copy();
    a.Add(this.m_groundAnchor2);
    return a;
  };

  b2PulleyJoint.prototype.GetLength1 = function() {
    var dX, dY, p, sX, sY;
    p = this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
    sX = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x;
    sY = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y;
    dX = p.x - sX;
    dY = p.y - sY;
    return Math.sqrt(dX * dX + dY * dY);
  };

  b2PulleyJoint.prototype.GetLength2 = function() {
    var dX, dY, p, sX, sY;
    p = this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
    sX = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x;
    sY = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
    dX = p.x - sX;
    dY = p.y - sY;
    return Math.sqrt(dX * dX + dY * dY);
  };

  b2PulleyJoint.prototype.GetRatio = function() {
    return this.m_ratio;
  };

  b2PulleyJoint.prototype.InitVelocityConstraints = function(step) {
    var C, P1X, P1Y, P2X, P2Y, bA, bB, cr1u1, cr2u2, length1, length2, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, s1X, s1Y, s2X, s2Y, tMat, tX;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    p1X = bA.m_sweep.c.x + r1X;
    p1Y = bA.m_sweep.c.y + r1Y;
    p2X = bB.m_sweep.c.x + r2X;
    p2Y = bB.m_sweep.c.y + r2Y;
    s1X = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x;
    s1Y = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y;
    s2X = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x;
    s2Y = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
    this.m_u1.Set(p1X - s1X, p1Y - s1Y);
    this.m_u2.Set(p2X - s2X, p2Y - s2Y);
    length1 = this.m_u1.Length();
    length2 = this.m_u2.Length();
    if (length1 > b2Settings.b2_linearSlop) {
      this.m_u1.Multiply(1.0 / length1);
    } else {
      this.m_u1.SetZero();
    }
    if (length2 > b2Settings.b2_linearSlop) {
      this.m_u2.Multiply(1.0 / length2);
    } else {
      this.m_u2.SetZero();
    }
    C = this.m_constant - length1 - this.m_ratio * length2;
    if (C > 0.0) {
      this.m_state = b2Joint.e_inactiveLimit;
      this.m_impulse = 0.0;
    } else {
      this.m_state = b2Joint.e_atUpperLimit;
    }
    if (length1 < this.m_maxLength1) {
      this.m_limitState1 = b2Joint.e_inactiveLimit;
      this.m_limitImpulse1 = 0.0;
    } else {
      this.m_limitState1 = b2Joint.e_atUpperLimit;
    }
    if (length2 < this.m_maxLength2) {
      this.m_limitState2 = b2Joint.e_inactiveLimit;
      this.m_limitImpulse2 = 0.0;
    } else {
      this.m_limitState2 = b2Joint.e_atUpperLimit;
    }
    cr1u1 = r1X * this.m_u1.y - r1Y * this.m_u1.x;
    cr2u2 = r2X * this.m_u2.y - r2Y * this.m_u2.x;
    this.m_limitMass1 = bA.m_invMass + bA.m_invI * cr1u1 * cr1u1;
    this.m_limitMass2 = bB.m_invMass + bB.m_invI * cr2u2 * cr2u2;
    this.m_pulleyMass = this.m_limitMass1 + this.m_ratio * this.m_ratio * this.m_limitMass2;
    this.m_limitMass1 = 1.0 / this.m_limitMass1;
    this.m_limitMass2 = 1.0 / this.m_limitMass2;
    this.m_pulleyMass = 1.0 / this.m_pulleyMass;
    if (step.warmStarting) {
      this.m_impulse *= step.dtRatio;
      this.m_limitImpulse1 *= step.dtRatio;
      this.m_limitImpulse2 *= step.dtRatio;
      P1X = ((-this.m_impulse) - this.m_limitImpulse1) * this.m_u1.x;
      P1Y = ((-this.m_impulse) - this.m_limitImpulse1) * this.m_u1.y;
      P2X = ((-this.m_ratio * this.m_impulse) - this.m_limitImpulse2) * this.m_u2.x;
      P2Y = ((-this.m_ratio * this.m_impulse) - this.m_limitImpulse2) * this.m_u2.y;
      bA.m_linearVelocity.x += bA.m_invMass * P1X;
      bA.m_linearVelocity.y += bA.m_invMass * P1Y;
      bA.m_angularVelocity += bA.m_invI * (r1X * P1Y - r1Y * P1X);
      bB.m_linearVelocity.x += bB.m_invMass * P2X;
      bB.m_linearVelocity.y += bB.m_invMass * P2Y;
      bB.m_angularVelocity += bB.m_invI * (r2X * P2Y - r2Y * P2X);
    } else {
      this.m_impulse = 0.0;
      this.m_limitImpulse1 = 0.0;
      this.m_limitImpulse2 = 0.0;
    }
  };

  b2PulleyJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, P1X, P1Y, P2X, P2Y, bA, bB, impulse, oldImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, v1X, v1Y, v2X, v2Y;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    v1X = 0;
    v1Y = 0;
    v2X = 0;
    v2Y = 0;
    P1X = 0;
    P1Y = 0;
    P2X = 0;
    P2Y = 0;
    Cdot = 0;
    impulse = 0;
    oldImpulse = 0;
    if (this.m_state === b2Joint.e_atUpperLimit) {
      v1X = bA.m_linearVelocity.x + (-bA.m_angularVelocity * r1Y);
      v1Y = bA.m_linearVelocity.y + (bA.m_angularVelocity * r1X);
      v2X = bB.m_linearVelocity.x + (-bB.m_angularVelocity * r2Y);
      v2Y = bB.m_linearVelocity.y + (bB.m_angularVelocity * r2X);
      Cdot = (-(this.m_u1.x * v1X + this.m_u1.y * v1Y)) - this.m_ratio * (this.m_u2.x * v2X + this.m_u2.y * v2Y);
      impulse = this.m_pulleyMass * (-Cdot);
      oldImpulse = this.m_impulse;
      this.m_impulse = b2Math.Max(0.0, this.m_impulse + impulse);
      impulse = this.m_impulse - oldImpulse;
      P1X = -impulse * this.m_u1.x;
      P1Y = -impulse * this.m_u1.y;
      P2X = -this.m_ratio * impulse * this.m_u2.x;
      P2Y = -this.m_ratio * impulse * this.m_u2.y;
      bA.m_linearVelocity.x += bA.m_invMass * P1X;
      bA.m_linearVelocity.y += bA.m_invMass * P1Y;
      bA.m_angularVelocity += bA.m_invI * (r1X * P1Y - r1Y * P1X);
      bB.m_linearVelocity.x += bB.m_invMass * P2X;
      bB.m_linearVelocity.y += bB.m_invMass * P2Y;
      bB.m_angularVelocity += bB.m_invI * (r2X * P2Y - r2Y * P2X);
    }
    if (this.m_limitState1 === b2Joint.e_atUpperLimit) {
      v1X = bA.m_linearVelocity.x + (-bA.m_angularVelocity * r1Y);
      v1Y = bA.m_linearVelocity.y + (bA.m_angularVelocity * r1X);
      Cdot = -(this.m_u1.x * v1X + this.m_u1.y * v1Y);
      impulse = -this.m_limitMass1 * Cdot;
      oldImpulse = this.m_limitImpulse1;
      this.m_limitImpulse1 = b2Math.Max(0.0, this.m_limitImpulse1 + impulse);
      impulse = this.m_limitImpulse1 - oldImpulse;
      P1X = -impulse * this.m_u1.x;
      P1Y = -impulse * this.m_u1.y;
      bA.m_linearVelocity.x += bA.m_invMass * P1X;
      bA.m_linearVelocity.y += bA.m_invMass * P1Y;
      bA.m_angularVelocity += bA.m_invI * (r1X * P1Y - r1Y * P1X);
    }
    if (this.m_limitState2 === b2Joint.e_atUpperLimit) {
      v2X = bB.m_linearVelocity.x + (-bB.m_angularVelocity * r2Y);
      v2Y = bB.m_linearVelocity.y + (bB.m_angularVelocity * r2X);
      Cdot = -(this.m_u2.x * v2X + this.m_u2.y * v2Y);
      impulse = -this.m_limitMass2 * Cdot;
      oldImpulse = this.m_limitImpulse2;
      this.m_limitImpulse2 = b2Math.Max(0.0, this.m_limitImpulse2 + impulse);
      impulse = this.m_limitImpulse2 - oldImpulse;
      P2X = -impulse * this.m_u2.x;
      P2Y = -impulse * this.m_u2.y;
      bB.m_linearVelocity.x += bB.m_invMass * P2X;
      bB.m_linearVelocity.y += bB.m_invMass * P2Y;
      bB.m_angularVelocity += bB.m_invI * (r2X * P2Y - r2Y * P2X);
    }
  };

  b2PulleyJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, bA, bB, impulse, length1, length2, linearError, oldImpulse, oldLimitPositionImpulse, p1X, p1Y, p2X, p2Y, r1X, r1Y, r2X, r2Y, s1X, s1Y, s2X, s2Y, tMat, tX;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    s1X = this.m_ground.m_xf.position.x + this.m_groundAnchor1.x;
    s1Y = this.m_ground.m_xf.position.y + this.m_groundAnchor1.y;
    s2X = this.m_ground.m_xf.position.x + this.m_groundAnchor2.x;
    s2Y = this.m_ground.m_xf.position.y + this.m_groundAnchor2.y;
    r1X = 0;
    r1Y = 0;
    r2X = 0;
    r2Y = 0;
    p1X = 0;
    p1Y = 0;
    p2X = 0;
    p2Y = 0;
    length1 = 0;
    length2 = 0;
    C = 0;
    impulse = 0;
    oldImpulse = 0;
    oldLimitPositionImpulse = 0;
    tX = 0;
    linearError = 0.0;
    if (this.m_state === b2Joint.e_atUpperLimit) {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      p1X = bA.m_sweep.c.x + r1X;
      p1Y = bA.m_sweep.c.y + r1Y;
      p2X = bB.m_sweep.c.x + r2X;
      p2Y = bB.m_sweep.c.y + r2Y;
      this.m_u1.Set(p1X - s1X, p1Y - s1Y);
      this.m_u2.Set(p2X - s2X, p2Y - s2Y);
      length1 = this.m_u1.Length();
      length2 = this.m_u2.Length();
      if (length1 > b2Settings.b2_linearSlop) {
        this.m_u1.Multiply(1.0 / length1);
      } else {
        this.m_u1.SetZero();
      }
      if (length2 > b2Settings.b2_linearSlop) {
        this.m_u2.Multiply(1.0 / length2);
      } else {
        this.m_u2.SetZero();
      }
      C = this.m_constant - length1 - this.m_ratio * length2;
      linearError = b2Math.Max(linearError, -C);
      C = b2Math.Clamp(C + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
      impulse = -this.m_pulleyMass * C;
      p1X = -impulse * this.m_u1.x;
      p1Y = -impulse * this.m_u1.y;
      p2X = -this.m_ratio * impulse * this.m_u2.x;
      p2Y = -this.m_ratio * impulse * this.m_u2.y;
      bA.m_sweep.c.x += bA.m_invMass * p1X;
      bA.m_sweep.c.y += bA.m_invMass * p1Y;
      bA.m_sweep.a += bA.m_invI * (r1X * p1Y - r1Y * p1X);
      bB.m_sweep.c.x += bB.m_invMass * p2X;
      bB.m_sweep.c.y += bB.m_invMass * p2Y;
      bB.m_sweep.a += bB.m_invI * (r2X * p2Y - r2Y * p2X);
      bA.SynchronizeTransform();
      bB.SynchronizeTransform();
    }
    if (this.m_limitState1 === b2Joint.e_atUpperLimit) {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      p1X = bA.m_sweep.c.x + r1X;
      p1Y = bA.m_sweep.c.y + r1Y;
      this.m_u1.Set(p1X - s1X, p1Y - s1Y);
      length1 = this.m_u1.Length();
      if (length1 > b2Settings.b2_linearSlop) {
        this.m_u1.x *= 1.0 / length1;
        this.m_u1.y *= 1.0 / length1;
      } else {
        this.m_u1.SetZero();
      }
      C = this.m_maxLength1 - length1;
      linearError = b2Math.Max(linearError, -C);
      C = b2Math.Clamp(C + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
      impulse = -this.m_limitMass1 * C;
      p1X = -impulse * this.m_u1.x;
      p1Y = -impulse * this.m_u1.y;
      bA.m_sweep.c.x += bA.m_invMass * p1X;
      bA.m_sweep.c.y += bA.m_invMass * p1Y;
      bA.m_sweep.a += bA.m_invI * (r1X * p1Y - r1Y * p1X);
      bA.SynchronizeTransform();
    }
    if (this.m_limitState2 === b2Joint.e_atUpperLimit) {
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      p2X = bB.m_sweep.c.x + r2X;
      p2Y = bB.m_sweep.c.y + r2Y;
      this.m_u2.Set(p2X - s2X, p2Y - s2Y);
      length2 = this.m_u2.Length();
      if (length2 > b2Settings.b2_linearSlop) {
        this.m_u2.x *= 1.0 / length2;
        this.m_u2.y *= 1.0 / length2;
      } else {
        this.m_u2.SetZero();
      }
      C = this.m_maxLength2 - length2;
      linearError = b2Math.Max(linearError, -C);
      C = b2Math.Clamp(C + b2Settings.b2_linearSlop, -b2Settings.b2_maxLinearCorrection, 0.0);
      impulse = -this.m_limitMass2 * C;
      p2X = -impulse * this.m_u2.x;
      p2Y = -impulse * this.m_u2.y;
      bB.m_sweep.c.x += bB.m_invMass * p2X;
      bB.m_sweep.c.y += bB.m_invMass * p2Y;
      bB.m_sweep.a += bB.m_invI * (r2X * p2Y - r2Y * p2X);
      bB.SynchronizeTransform();
    }
    return linearError < b2Settings.b2_linearSlop;
  };

  return b2PulleyJoint;

})(b2Joint);

//# sourceMappingURL=b2PulleyJoint.js.map

},{"../../index":103}],98:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2PulleyJointDef = (function(_super) {
  __extends(b2PulleyJointDef, _super);

  b2PulleyJointDef.prototype.type = b2Joint.e_pulleyJoint;

  b2PulleyJointDef.prototype.groundAnchorA = null;

  b2PulleyJointDef.prototype.groundAnchorB = null;

  b2PulleyJointDef.prototype.localAnchorA = null;

  b2PulleyJointDef.prototype.localAnchorB = null;

  b2PulleyJointDef.prototype.lengthA = 0.0;

  b2PulleyJointDef.prototype.maxLengthA = 0.0;

  b2PulleyJointDef.prototype.lengthB = 0.0;

  b2PulleyJointDef.prototype.maxLengthB = 0.0;

  b2PulleyJointDef.prototype.ratio = 1.0;

  b2PulleyJointDef.prototype.collideConnected = true;

  function b2PulleyJointDef() {
    b2PulleyJointDef.__super__.constructor.apply(this, arguments);
    this.groundAnchorA = new b2Vec2();
    this.groundAnchorB = new b2Vec2();
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.groundAnchorA.Set(-1.0, 1.0);
    this.groundAnchorB.Set(1.0, 1.0);
    this.localAnchorA.Set(-1.0, 0.0);
    this.localAnchorB.Set(1.0, 0.0);
    return;
  }

  b2PulleyJointDef.prototype.Initialize = function(bA, bB, gaA, gaB, anchorA, anchorB, r) {
    var C, d1X, d1Y, d2X, d2Y;
    if (r === void 0) {
      r = 0;
    }
    this.bodyA = bA;
    this.bodyB = bB;
    this.groundAnchorA.SetV(gaA);
    this.groundAnchorB.SetV(gaB);
    this.localAnchorA = this.bodyA.GetLocalPoint(anchorA);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchorB);
    d1X = anchorA.x - gaA.x;
    d1Y = anchorA.y - gaA.y;
    this.lengthA = Math.sqrt(d1X * d1X + d1Y * d1Y);
    d2X = anchorB.x - gaB.x;
    d2Y = anchorB.y - gaB.y;
    this.lengthB = Math.sqrt(d2X * d2X + d2Y * d2Y);
    this.ratio = r;
    C = this.lengthA + this.ratio * this.lengthB;
    this.maxLengthA = C - this.ratio * b2PulleyJoint.b2_minPulleyLength;
    this.maxLengthB = (C - b2PulleyJoint.b2_minPulleyLength) / this.ratio;
  };

  return b2PulleyJointDef;

})(b2JointDef);

//# sourceMappingURL=b2PulleyJointDef.js.map

},{"../../index":103}],99:[function(require,module,exports){
var Box2D, b2Joint, b2Mat22, b2Math, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Mat22 = Box2D.Common.Math.b2Mat22;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Math = Box2D.Common.Math.b2Math;

Box2D.Dynamics.Joints.b2RevoluteJoint = (function(_super) {
  __extends(b2RevoluteJoint, _super);

  b2RevoluteJoint.tImpulse = new b2Vec2();

  b2RevoluteJoint.prototype.K = null;

  b2RevoluteJoint.prototype.K1 = null;

  b2RevoluteJoint.prototype.K2 = null;

  b2RevoluteJoint.prototype.K3 = null;

  b2RevoluteJoint.prototype.impulse2 = null;

  b2RevoluteJoint.prototype.impulse3 = null;

  b2RevoluteJoint.prototype.reduced = null;

  b2RevoluteJoint.prototype.m_impulse = null;

  b2RevoluteJoint.prototype.m_mass = 0.0;

  b2RevoluteJoint.prototype.m_referenceAngle = 0.0;

  b2RevoluteJoint.prototype.m_motorImpulse = 0.0;

  b2RevoluteJoint.prototype.m_lowerAngle = 0.0;

  b2RevoluteJoint.prototype.m_upperAngle = 0.0;

  b2RevoluteJoint.prototype.m_maxMotorTorque = 0.0;

  b2RevoluteJoint.prototype.m_motorSpeed = 0.0;

  b2RevoluteJoint.prototype.m_enableLimit = 0.0;

  b2RevoluteJoint.prototype.m_enableMotor = false;

  b2RevoluteJoint.prototype.m_limitState = b2Joint.e_inactiveLimit;

  function b2RevoluteJoint(def) {
    b2RevoluteJoint.__super__.constructor.call(this, def);
    this.K = new b2Mat22();
    this.K1 = new b2Mat22();
    this.K2 = new b2Mat22();
    this.K3 = new b2Mat22();
    this.impulse3 = new b2Vec3();
    this.impulse2 = new b2Vec2();
    this.reduced = new b2Vec2();
    this.m_localAnchor1 = new b2Vec2();
    this.m_localAnchor2 = new b2Vec2();
    this.m_impulse = new b2Vec3();
    this.m_mass = new b2Mat33();
    this.m_localAnchor1.SetV(def.localAnchorA);
    this.m_localAnchor2.SetV(def.localAnchorB);
    this.m_referenceAngle = def.referenceAngle;
    this.m_impulse.SetZero();
    this.m_lowerAngle = def.lowerAngle;
    this.m_upperAngle = def.upperAngle;
    this.m_maxMotorTorque = def.maxMotorTorque;
    this.m_motorSpeed = def.motorSpeed;
    this.m_enableLimit = def.enableLimit;
    this.m_enableMotor = def.enableMotor;
    return;
  }

  b2RevoluteJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchor1);
  };

  b2RevoluteJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchor2);
  };

  b2RevoluteJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse.x, inv_dt * this.m_impulse.y);
  };

  b2RevoluteJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.z;
  };

  b2RevoluteJoint.prototype.GetJointAngle = function() {
    return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a - this.m_referenceAngle;
  };

  b2RevoluteJoint.prototype.GetJointSpeed = function() {
    return this.m_bodyB.m_angularVelocity - this.m_bodyA.m_angularVelocity;
  };

  b2RevoluteJoint.prototype.IsLimitEnabled = function() {
    return this.m_enableLimit;
  };

  b2RevoluteJoint.prototype.EnableLimit = function(flag) {
    this.m_enableLimit = flag;
  };

  b2RevoluteJoint.prototype.GetLowerLimit = function() {
    return this.m_lowerAngle;
  };

  b2RevoluteJoint.prototype.GetUpperLimit = function() {
    return this.m_upperAngle;
  };

  b2RevoluteJoint.prototype.SetLimits = function(lower, upper) {
    if (lower === void 0) {
      lower = 0;
    }
    if (upper === void 0) {
      upper = 0;
    }
    this.m_lowerAngle = lower;
    this.m_upperAngle = upper;
  };

  b2RevoluteJoint.prototype.IsMotorEnabled = function() {
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    return this.m_enableMotor;
  };

  b2RevoluteJoint.prototype.EnableMotor = function(flag) {
    this.m_enableMotor = flag;
  };

  b2RevoluteJoint.prototype.SetMotorSpeed = function(speed) {
    if (speed === void 0) {
      speed = 0;
    }
    this.m_bodyA.SetAwake(true);
    this.m_bodyB.SetAwake(true);
    this.m_motorSpeed = speed;
  };

  b2RevoluteJoint.prototype.GetMotorSpeed = function() {
    return this.m_motorSpeed;
  };

  b2RevoluteJoint.prototype.SetMaxMotorTorque = function(torque) {
    if (torque === void 0) {
      torque = 0;
    }
    this.m_maxMotorTorque = torque;
  };

  b2RevoluteJoint.prototype.GetMotorTorque = function() {
    return this.m_maxMotorTorque;
  };

  b2RevoluteJoint.prototype.InitVelocityConstraints = function(step) {
    var PX, PY, bA, bB, i1, i2, jointAngle, m1, m2, r1X, r1Y, r2X, r2Y, tMat, tX;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;

    /**
    todo: fix this
     */
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    m1 = bA.m_invMass;
    m2 = bB.m_invMass;
    i1 = bA.m_invI;
    i2 = bB.m_invI;
    this.m_mass.col1.x = m1 + m2 + r1Y * r1Y * i1 + r2Y * r2Y * i2;
    this.m_mass.col2.x = (-r1Y * r1X * i1) - r2Y * r2X * i2;
    this.m_mass.col3.x = (-r1Y * i1) - r2Y * i2;
    this.m_mass.col1.y = this.m_mass.col2.x;
    this.m_mass.col2.y = m1 + m2 + r1X * r1X * i1 + r2X * r2X * i2;
    this.m_mass.col3.y = r1X * i1 + r2X * i2;
    this.m_mass.col1.z = this.m_mass.col3.x;
    this.m_mass.col2.z = this.m_mass.col3.y;
    this.m_mass.col3.z = i1 + i2;
    this.m_motorMass = 1.0 / (i1 + i2);
    if (this.m_enableMotor === false) {
      this.m_motorImpulse = 0.0;
    }
    if (this.m_enableLimit) {
      jointAngle = bB.m_sweep.a - bA.m_sweep.a - this.m_referenceAngle;
      if (b2Math.Abs(this.m_upperAngle - this.m_lowerAngle) < 2.0 * b2Settings.b2_angularSlop) {
        this.m_limitState = b2Joint.e_equalLimits;
      } else if (jointAngle <= this.m_lowerAngle) {
        if (this.m_limitState !== b2Joint.e_atLowerLimit) {
          this.m_impulse.z = 0.0;
        }
        this.m_limitState = b2Joint.e_atLowerLimit;
      } else if (jointAngle >= this.m_upperAngle) {
        if (this.m_limitState !== b2Joint.e_atUpperLimit) {
          this.m_impulse.z = 0.0;
        }
        this.m_limitState = b2Joint.e_atUpperLimit;
      } else {
        this.m_limitState = b2Joint.e_inactiveLimit;
        this.m_impulse.z = 0.0;
      }
    } else {
      this.m_limitState = b2Joint.e_inactiveLimit;
    }
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_motorImpulse *= step.dtRatio;
      PX = this.m_impulse.x;
      PY = this.m_impulse.y;
      bA.m_linearVelocity.x -= m1 * PX;
      bA.m_linearVelocity.y -= m1 * PY;
      bA.m_angularVelocity -= i1 * ((r1X * PY - r1Y * PX) + this.m_motorImpulse + this.m_impulse.z);
      bB.m_linearVelocity.x += m2 * PX;
      bB.m_linearVelocity.y += m2 * PY;
      bB.m_angularVelocity += i2 * ((r2X * PY - r2Y * PX) + this.m_motorImpulse + this.m_impulse.z);
    } else {
      this.m_impulse.SetZero();
      this.m_motorImpulse = 0.0;
    }
  };

  b2RevoluteJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot, Cdot1X, Cdot1Y, Cdot2, CdotX, CdotY, bA, bB, i1, i2, impulse, m1, m2, maxImpulse, newImpulse, oldImpulse, r1X, r1Y, r2X, r2Y, tMat, tX, v1, v2, w1, w2;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = void 0;
    tX = 0;
    newImpulse = 0;
    r1X = 0;
    r1Y = 0;
    r2X = 0;
    r2Y = 0;
    v1 = bA.m_linearVelocity;
    w1 = bA.m_angularVelocity;
    v2 = bB.m_linearVelocity;
    w2 = bB.m_angularVelocity;
    m1 = bA.m_invMass;
    m2 = bB.m_invMass;
    i1 = bA.m_invI;
    i2 = bB.m_invI;
    if (this.m_enableMotor && this.m_limitState !== b2Joint.e_equalLimits) {
      Cdot = w2 - w1 - this.m_motorSpeed;
      impulse = this.m_motorMass * (-Cdot);
      oldImpulse = this.m_motorImpulse;
      maxImpulse = step.dt * this.m_maxMotorTorque;
      this.m_motorImpulse = b2Math.Clamp(this.m_motorImpulse + impulse, -maxImpulse, maxImpulse);
      impulse = this.m_motorImpulse - oldImpulse;
      w1 -= i1 * impulse;
      w2 += i2 * impulse;
    }
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      Cdot1X = v2.x + (-w2 * r2Y) - v1.x - (-w1 * r1Y);
      Cdot1Y = v2.y + (w2 * r2X) - v1.y - (w1 * r1X);
      Cdot2 = w2 - w1;
      this.m_mass.Solve33(this.impulse3, -Cdot1X, -Cdot1Y, -Cdot2);
      if (this.m_limitState === b2Joint.e_equalLimits) {
        this.m_impulse.Add(this.impulse3);
      } else if (this.m_limitState === b2Joint.e_atLowerLimit) {
        newImpulse = this.m_impulse.z + this.impulse3.z;
        if (newImpulse < 0.0) {
          this.m_mass.Solve22(this.reduced, -Cdot1X, -Cdot1Y);
          this.impulse3.x = this.reduced.x;
          this.impulse3.y = this.reduced.y;
          this.impulse3.z = -this.m_impulse.z;
          this.m_impulse.x += this.reduced.x;
          this.m_impulse.y += this.reduced.y;
          this.m_impulse.z = 0.0;
        }
      } else if (this.m_limitState === b2Joint.e_atUpperLimit) {
        newImpulse = this.m_impulse.z + this.impulse3.z;
        if (newImpulse > 0.0) {
          this.m_mass.Solve22(this.reduced, -Cdot1X, -Cdot1Y);
          this.impulse3.x = this.reduced.x;
          this.impulse3.y = this.reduced.y;
          this.impulse3.z = -this.m_impulse.z;
          this.m_impulse.x += this.reduced.x;
          this.m_impulse.y += this.reduced.y;
          this.m_impulse.z = 0.0;
        }
      }
      v1.x -= m1 * this.impulse3.x;
      v1.y -= m1 * this.impulse3.y;
      w1 -= i1 * (r1X * this.impulse3.y - r1Y * this.impulse3.x + this.impulse3.z);
      v2.x += m2 * this.impulse3.x;
      v2.y += m2 * this.impulse3.y;
      w2 += i2 * (r2X * this.impulse3.y - r2Y * this.impulse3.x + this.impulse3.z);
    } else {
      tMat = bA.m_xf.R;
      r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
      r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
      tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
      r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
      r1X = tX;
      tMat = bB.m_xf.R;
      r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
      r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
      tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
      r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
      r2X = tX;
      CdotX = v2.x + (-w2 * r2Y) - v1.x - (-w1 * r1Y);
      CdotY = v2.y + (w2 * r2X) - v1.y - (w1 * r1X);
      this.m_mass.Solve22(this.impulse2, -CdotX, -CdotY);
      this.m_impulse.x += this.impulse2.x;
      this.m_impulse.y += this.impulse2.y;
      v1.x -= m1 * this.impulse2.x;
      v1.y -= m1 * this.impulse2.y;
      w1 -= i1 * (r1X * this.impulse2.y - r1Y * this.impulse2.x);
      v2.x += m2 * this.impulse2.x;
      v2.y += m2 * this.impulse2.y;
      w2 += i2 * (r2X * this.impulse2.y - r2Y * this.impulse2.x);
    }
    bA.m_linearVelocity.SetV(v1);
    bA.m_angularVelocity = w1;
    bB.m_linearVelocity.SetV(v2);
    bB.m_angularVelocity = w2;
  };

  b2RevoluteJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C, CLength, CLengthSquared, CX, CY, angle, angularError, bA, bB, impulseX, impulseY, invI1, invI2, invMass1, invMass2, k, k_allowedStretch, k_beta, limitImpulse, m, oldLimitImpulse, positionError, r1X, r1Y, r2X, r2Y, tMat, tX, uX, uY;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    oldLimitImpulse = 0;
    C = 0;
    tMat = void 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    angularError = 0.0;
    positionError = 0.0;
    tX = 0;
    impulseX = 0;
    impulseY = 0;
    if (this.m_enableLimit && this.m_limitState !== b2Joint.e_inactiveLimit) {
      angle = bB.m_sweep.a - bA.m_sweep.a - this.m_referenceAngle;
      limitImpulse = 0.0;
      if (this.m_limitState === b2Joint.e_equalLimits) {
        C = b2Math.Clamp(angle - this.m_lowerAngle, -b2Settings.b2_maxAngularCorrection, b2Settings.b2_maxAngularCorrection);
        limitImpulse = -this.m_motorMass * C;
        angularError = b2Math.Abs(C);
      } else if (this.m_limitState === b2Joint.e_atLowerLimit) {
        C = angle - this.m_lowerAngle;
        angularError = -C;
        C = b2Math.Clamp(C + b2Settings.b2_angularSlop, -b2Settings.b2_maxAngularCorrection, 0.0);
        limitImpulse = -this.m_motorMass * C;
      } else if (this.m_limitState === b2Joint.e_atUpperLimit) {
        C = angle - this.m_upperAngle;
        angularError = C;
        C = b2Math.Clamp(C - b2Settings.b2_angularSlop, 0.0, b2Settings.b2_maxAngularCorrection);
        limitImpulse = -this.m_motorMass * C;
      }
      bA.m_sweep.a -= bA.m_invI * limitImpulse;
      bB.m_sweep.a += bB.m_invI * limitImpulse;
      bA.SynchronizeTransform();
      bB.SynchronizeTransform();
    }
    tMat = bA.m_xf.R;
    r1X = this.m_localAnchor1.x - bA.m_sweep.localCenter.x;
    r1Y = this.m_localAnchor1.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * r1X + tMat.col2.x * r1Y;
    r1Y = tMat.col1.y * r1X + tMat.col2.y * r1Y;
    r1X = tX;
    tMat = bB.m_xf.R;
    r2X = this.m_localAnchor2.x - bB.m_sweep.localCenter.x;
    r2Y = this.m_localAnchor2.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * r2X + tMat.col2.x * r2Y;
    r2Y = tMat.col1.y * r2X + tMat.col2.y * r2Y;
    r2X = tX;
    CX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
    CY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    CLengthSquared = CX * CX + CY * CY;
    CLength = Math.sqrt(CLengthSquared);
    positionError = CLength;
    invMass1 = bA.m_invMass;
    invMass2 = bB.m_invMass;
    invI1 = bA.m_invI;
    invI2 = bB.m_invI;
    k_allowedStretch = 10.0 * b2Settings.b2_linearSlop;
    if (CLengthSquared > k_allowedStretch * k_allowedStretch) {
      uX = CX / CLength;
      uY = CY / CLength;
      k = invMass1 + invMass2;
      m = 1.0 / k;
      impulseX = m * (-CX);
      impulseY = m * (-CY);
      k_beta = 0.5;
      bA.m_sweep.c.x -= k_beta * invMass1 * impulseX;
      bA.m_sweep.c.y -= k_beta * invMass1 * impulseY;
      bB.m_sweep.c.x += k_beta * invMass2 * impulseX;
      bB.m_sweep.c.y += k_beta * invMass2 * impulseY;
      CX = bB.m_sweep.c.x + r2X - bA.m_sweep.c.x - r1X;
      CY = bB.m_sweep.c.y + r2Y - bA.m_sweep.c.y - r1Y;
    }
    this.K1.col1.x = invMass1 + invMass2;
    this.K1.col2.x = 0.0;
    this.K1.col1.y = 0.0;
    this.K1.col2.y = invMass1 + invMass2;
    this.K2.col1.x = invI1 * r1Y * r1Y;
    this.K2.col2.x = -invI1 * r1X * r1Y;
    this.K2.col1.y = -invI1 * r1X * r1Y;
    this.K2.col2.y = invI1 * r1X * r1X;
    this.K3.col1.x = invI2 * r2Y * r2Y;
    this.K3.col2.x = -invI2 * r2X * r2Y;
    this.K3.col1.y = -invI2 * r2X * r2Y;
    this.K3.col2.y = invI2 * r2X * r2X;
    this.K.SetM(this.K1);
    this.K.AddM(this.K2);
    this.K.AddM(this.K3);
    this.K.Solve(b2RevoluteJoint.tImpulse, -CX, -CY);
    impulseX = b2RevoluteJoint.tImpulse.x;
    impulseY = b2RevoluteJoint.tImpulse.y;
    bA.m_sweep.c.x -= bA.m_invMass * impulseX;
    bA.m_sweep.c.y -= bA.m_invMass * impulseY;
    bA.m_sweep.a -= bA.m_invI * (r1X * impulseY - r1Y * impulseX);
    bB.m_sweep.c.x += bB.m_invMass * impulseX;
    bB.m_sweep.c.y += bB.m_invMass * impulseY;
    bB.m_sweep.a += bB.m_invI * (r2X * impulseY - r2Y * impulseX);
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return positionError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2RevoluteJoint;

})(b2Joint);

//# sourceMappingURL=b2RevoluteJoint.js.map

},{"../../index":103}],100:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2RevoluteJointDef = (function(_super) {
  __extends(b2RevoluteJointDef, _super);

  b2RevoluteJointDef.prototype.type = b2Joint.e_revoluteJoint;

  b2RevoluteJointDef.prototype.localAnchorA = null;

  b2RevoluteJointDef.prototype.localAnchorB = null;

  b2RevoluteJointDef.prototype.referenceAngle = 0.0;

  b2RevoluteJointDef.prototype.lowerAngle = 0.0;

  b2RevoluteJointDef.prototype.upperAngle = 0.0;

  b2RevoluteJointDef.prototype.maxMotorTorque = 0.0;

  b2RevoluteJointDef.prototype.motorSpeed = 0.0;

  b2RevoluteJointDef.prototype.enableLimit = false;

  b2RevoluteJointDef.prototype.enableMotor = false;

  function b2RevoluteJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    this.localAnchorA.Set(0.0, 0.0);
    this.localAnchorB.Set(0.0, 0.0);
    return;
  }

  b2RevoluteJointDef.prototype.Initialize = function(bA, bB, anchor) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA = this.bodyA.GetLocalPoint(anchor);
    this.localAnchorB = this.bodyB.GetLocalPoint(anchor);
    this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
  };

  return b2RevoluteJointDef;

})(b2JointDef);

//# sourceMappingURL=b2RevoluteJointDef.js.map

},{"../../index":103}],101:[function(require,module,exports){
var Box2D, b2Joint, b2Mat33, b2Vec2, b2Vec3,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2Vec3 = Box2D.Common.Math.b2Vec3;

b2Mat33 = Box2D.Common.Math.b2Mat33;

b2Joint = Box2D.Dynamics.Joints.b2Joint;

Box2D.Dynamics.Joints.b2WeldJoint = (function(_super) {
  __extends(b2WeldJoint, _super);

  b2WeldJoint.prototype.m_impulse = null;

  b2WeldJoint.prototype.m_mass = null;

  b2WeldJoint.prototype.m_referenceAngle = 0.0;

  function b2WeldJoint(def) {
    b2WeldJoint.__super__.constructor.call(this, def);
    this.m_localAnchorA = new b2Vec2();
    this.m_localAnchorB = new b2Vec2();
    this.m_impulse = new b2Vec3();
    this.m_mass = new b2Mat33();
    this.m_localAnchorA.SetV(def.localAnchorA);
    this.m_localAnchorB.SetV(def.localAnchorB);
    this.m_referenceAngle = def.referenceAngle;
    this.m_impulse.SetZero();
    this.m_mass = new b2Mat33();
    return;
  }

  b2WeldJoint.prototype.GetAnchorA = function() {
    return this.m_bodyA.GetWorldPoint(this.m_localAnchorA);
  };

  b2WeldJoint.prototype.GetAnchorB = function() {
    return this.m_bodyB.GetWorldPoint(this.m_localAnchorB);
  };

  b2WeldJoint.prototype.GetReactionForce = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return new b2Vec2(inv_dt * this.m_impulse.x, inv_dt * this.m_impulse.y);
  };

  b2WeldJoint.prototype.GetReactionTorque = function(inv_dt) {
    if (inv_dt === void 0) {
      inv_dt = 0;
    }
    return inv_dt * this.m_impulse.z;
  };

  b2WeldJoint.prototype.InitVelocityConstraints = function(step) {
    var bA, bB, iA, iB, mA, mB, rAX, rAY, rBX, rBY, tMat, tX;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    this.m_mass.col1.x = mA + mB + rAY * rAY * iA + rBY * rBY * iB;
    this.m_mass.col2.x = (-rAY * rAX * iA) - rBY * rBX * iB;
    this.m_mass.col3.x = (-rAY * iA) - rBY * iB;
    this.m_mass.col1.y = this.m_mass.col2.x;
    this.m_mass.col2.y = mA + mB + rAX * rAX * iA + rBX * rBX * iB;
    this.m_mass.col3.y = rAX * iA + rBX * iB;
    this.m_mass.col1.z = this.m_mass.col3.x;
    this.m_mass.col2.z = this.m_mass.col3.y;
    this.m_mass.col3.z = iA + iB;
    if (step.warmStarting) {
      this.m_impulse.x *= step.dtRatio;
      this.m_impulse.y *= step.dtRatio;
      this.m_impulse.z *= step.dtRatio;
      bA.m_linearVelocity.x -= mA * this.m_impulse.x;
      bA.m_linearVelocity.y -= mA * this.m_impulse.y;
      bA.m_angularVelocity -= iA * (rAX * this.m_impulse.y - rAY * this.m_impulse.x + this.m_impulse.z);
      bB.m_linearVelocity.x += mB * this.m_impulse.x;
      bB.m_linearVelocity.y += mB * this.m_impulse.y;
      bB.m_angularVelocity += iB * (rBX * this.m_impulse.y - rBY * this.m_impulse.x + this.m_impulse.z);
    } else {
      this.m_impulse.SetZero();
    }
  };

  b2WeldJoint.prototype.SolveVelocityConstraints = function(step) {
    var Cdot1X, Cdot1Y, Cdot2, bA, bB, iA, iB, impulse, mA, mB, rAX, rAY, rBX, rBY, tMat, tX, vA, vB, wA, wB;
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    vA = bA.m_linearVelocity;
    wA = bA.m_angularVelocity;
    vB = bB.m_linearVelocity;
    wB = bB.m_angularVelocity;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    Cdot1X = vB.x - wB * rBY - vA.x + wA * rAY;
    Cdot1Y = vB.y + wB * rBX - vA.y - wA * rAX;
    Cdot2 = wB - wA;
    impulse = new b2Vec3();
    this.m_mass.Solve33(impulse, -Cdot1X, -Cdot1Y, -Cdot2);
    this.m_impulse.Add(impulse);
    vA.x -= mA * impulse.x;
    vA.y -= mA * impulse.y;
    wA -= iA * (rAX * impulse.y - rAY * impulse.x + impulse.z);
    vB.x += mB * impulse.x;
    vB.y += mB * impulse.y;
    wB += iB * (rBX * impulse.y - rBY * impulse.x + impulse.z);
    bA.m_angularVelocity = wA;
    bB.m_angularVelocity = wB;
  };

  b2WeldJoint.prototype.SolvePositionConstraints = function(baumgarte) {
    var C1X, C1Y, C2, angularError, bA, bB, iA, iB, impulse, k_allowedStretch, mA, mB, positionError, rAX, rAY, rBX, rBY, tMat, tX;
    if (baumgarte === void 0) {
      baumgarte = 0;
    }
    tMat = void 0;
    tX = 0;
    bA = this.m_bodyA;
    bB = this.m_bodyB;
    tMat = bA.m_xf.R;
    rAX = this.m_localAnchorA.x - bA.m_sweep.localCenter.x;
    rAY = this.m_localAnchorA.y - bA.m_sweep.localCenter.y;
    tX = tMat.col1.x * rAX + tMat.col2.x * rAY;
    rAY = tMat.col1.y * rAX + tMat.col2.y * rAY;
    rAX = tX;
    tMat = bB.m_xf.R;
    rBX = this.m_localAnchorB.x - bB.m_sweep.localCenter.x;
    rBY = this.m_localAnchorB.y - bB.m_sweep.localCenter.y;
    tX = tMat.col1.x * rBX + tMat.col2.x * rBY;
    rBY = tMat.col1.y * rBX + tMat.col2.y * rBY;
    rBX = tX;
    mA = bA.m_invMass;
    mB = bB.m_invMass;
    iA = bA.m_invI;
    iB = bB.m_invI;
    C1X = bB.m_sweep.c.x + rBX - bA.m_sweep.c.x - rAX;
    C1Y = bB.m_sweep.c.y + rBY - bA.m_sweep.c.y - rAY;
    C2 = bB.m_sweep.a - bA.m_sweep.a - this.m_referenceAngle;
    k_allowedStretch = 10.0 * b2Settings.b2_linearSlop;
    positionError = Math.sqrt(C1X * C1X + C1Y * C1Y);
    angularError = b2Math.Abs(C2);
    if (positionError > k_allowedStretch) {
      iA *= 1.0;
      iB *= 1.0;
    }
    this.m_mass.col1.x = mA + mB + rAY * rAY * iA + rBY * rBY * iB;
    this.m_mass.col2.x = (-rAY * rAX * iA) - rBY * rBX * iB;
    this.m_mass.col3.x = (-rAY * iA) - rBY * iB;
    this.m_mass.col1.y = this.m_mass.col2.x;
    this.m_mass.col2.y = mA + mB + rAX * rAX * iA + rBX * rBX * iB;
    this.m_mass.col3.y = rAX * iA + rBX * iB;
    this.m_mass.col1.z = this.m_mass.col3.x;
    this.m_mass.col2.z = this.m_mass.col3.y;
    this.m_mass.col3.z = iA + iB;
    impulse = new b2Vec3();
    this.m_mass.Solve33(impulse, -C1X, -C1Y, -C2);
    bA.m_sweep.c.x -= mA * impulse.x;
    bA.m_sweep.c.y -= mA * impulse.y;
    bA.m_sweep.a -= iA * (rAX * impulse.y - rAY * impulse.x + impulse.z);
    bB.m_sweep.c.x += mB * impulse.x;
    bB.m_sweep.c.y += mB * impulse.y;
    bB.m_sweep.a += iB * (rBX * impulse.y - rBY * impulse.x + impulse.z);
    bA.SynchronizeTransform();
    bB.SynchronizeTransform();
    return positionError <= b2Settings.b2_linearSlop && angularError <= b2Settings.b2_angularSlop;
  };

  return b2WeldJoint;

})(b2Joint);

//# sourceMappingURL=b2WeldJoint.js.map

},{"../../index":103}],102:[function(require,module,exports){
var Box2D, b2Joint, b2JointDef, b2Vec2,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Box2D = require('../../index');

b2Joint = Box2D.Dynamics.Joints.b2Joint;

b2Vec2 = Box2D.Common.Math.b2Vec2;

b2JointDef = Box2D.Dynamics.Joints.b2JointDef;

Box2D.Dynamics.Joints.b2WeldJointDef = (function(_super) {
  __extends(b2WeldJointDef, _super);

  b2WeldJointDef.prototype.type = b2Joint.e_weldJoint;

  b2WeldJointDef.prototype.referenceAngle = 0.0;

  b2WeldJointDef.prototype.localAnchorA = null;

  b2WeldJointDef.prototype.localAnchorB = null;

  function b2WeldJointDef() {
    this.localAnchorA = new b2Vec2();
    this.localAnchorB = new b2Vec2();
    return;
  }

  b2WeldJointDef.prototype.Initialize = function(bA, bB, anchor) {
    this.bodyA = bA;
    this.bodyB = bB;
    this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor));
    this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor));
    this.referenceAngle = this.bodyB.GetAngle() - this.bodyA.GetAngle();
  };

  return b2WeldJointDef;

})(b2JointDef);

//# sourceMappingURL=b2WeldJointDef.js.map

},{"../../index":103}],103:[function(require,module,exports){

/*
 */
'use strict';
var Box2D;

module.exports = Box2D = (function() {
  function Box2D() {}

  Box2D.parseUInt = function(v) {
    return Math.abs(parseInt(v));
  };

  Box2D.Vector = function(length) {
    var i, tmp;
    if (length == null) {
      length = 0;
    }
    tmp = new Array(length);
    i = 0;
    while (i < length) {
      tmp[i] = 0;
      ++i;
    }
    return tmp;
  };

  Box2D.equals = function(o1, o2) {
    var _ref;
    if (o1 === null) {
      return false;
    }
    if ((o2 instanceof Function) && (o1 instanceof o2)) {
      return true;
    }
    if (((_ref = o1.constructor.__implements) != null ? _ref[o2.name] : void 0)) {
      return true;
    }
    return false;
  };

  Box2D.generateCallback = function(context, cb) {
    return function() {
      cb.apply(context, arguments);
    };
  };

  return Box2D;

})();

Box2D.Common = (function() {
  function Common() {}

  return Common;

})();

Box2D.Common.Math = (function() {
  function Math() {}

  return Math;

})();

require('./common/math/b2Vec2');

require('./common/math/b2Vec3');

require('./common/math/b2Mat22');

require('./common/math/b2Mat33');

require('./common/math/b2Sweep');

require('./common/math/b2Transform');

require('./common/math/b2Math');

require('./common/b2Color');

require('./common/b2Settings');

Box2D.Collision = (function() {
  function Collision() {}

  return Collision;

})();

Box2D.Collision.Shapes = (function() {
  function Shapes() {}

  return Shapes;

})();

require('./collision/shapes/b2Shape');

require('./collision/shapes/b2CircleShape');

require('./collision/shapes/b2PolygonShape');

require('./collision/shapes/b2EdgeChainDef');

require('./collision/shapes/b2EdgeShape');

require('./collision/shapes/b2MassData');

require('./collision/Features');

require('./collision/b2ContactID');

require('./collision/ClipVertex');

require('./collision/b2AABB');

require('./collision/b2Bound');

require('./collision/b2BoundValues');

require('./collision/b2Collision');

require('./collision/b2ContactPoint');

require('./collision/b2SimplexVertex');

require('./collision/b2Simplex');

require('./collision/b2Distance');

require('./collision/b2DistanceInput');

require('./collision/b2DistanceOutput');

require('./collision/b2DistanceProxy');

require('./collision/b2DynamicTree');

require('./collision/b2DynamicTreeBroadPhase');

require('./collision/b2DynamicTreeNode');

require('./collision/b2DynamicTreePair');

require('./collision/b2Manifold');

require('./collision/b2ManifoldPoint');

require('./collision/b2Point');

require('./collision/b2RayCastInput');

require('./collision/b2RayCastOutput');

require('./collision/b2Segment');

require('./collision/b2SeparationFunction');

require('./collision/b2SimplexCache');

require('./collision/b2TimeOfImpact');

require('./collision/b2TOIInput');

require('./collision/b2WorldManifold');

Box2D.Dynamics = (function() {
  function Dynamics() {}

  return Dynamics;

})();

require('./dynamics/b2TimeStep');

Box2D.Dynamics.Contacts = (function() {
  function Contacts() {}

  return Contacts;

})();

require('./dynamics/contacts/b2ContactRegister');

require('./dynamics/contacts/b2ContactResult');

require('./dynamics/contacts/b2ContactEdge');

require('./dynamics/contacts/b2ContactConstraint');

require('./dynamics/contacts/b2ContactConstraintPoint');

require('./dynamics/contacts/b2Contact');

require('./dynamics/contacts/b2CircleContact');

require('./dynamics/contacts/b2PositionSolverManifold');

require('./dynamics/contacts/b2ContactSolver');

require('./dynamics/contacts/b2EdgeAndCircleContact');

require('./dynamics/contacts/b2NullContact');

require('./dynamics/contacts/b2PolyAndCircleContact');

require('./dynamics/contacts/b2PolyAndEdgeContact');

require('./dynamics/contacts/b2PolygonContact');

require('./dynamics/contacts/b2ContactFactory');

Box2D.Dynamics.Controllers = (function() {
  function Controllers() {}

  return Controllers;

})();

require('./dynamics/controllers/b2ControllerEdge');

require('./dynamics/controllers/b2Controller');

require('./dynamics/controllers/b2BuoyancyController');

require('./dynamics/controllers/b2ConstantAccelController');

require('./dynamics/controllers/b2ConstantForceController');

require('./dynamics/controllers/b2GravityController');

require('./dynamics/controllers/b2TensorDampingController');

Box2D.Dynamics.Joints = (function() {
  function Joints() {}

  return Joints;

})();

require('./dynamics/joints/b2Joint');

require('./dynamics/joints/b2JointDef');

require('./dynamics/joints/b2JointEdge');

require('./dynamics/joints/b2Jacobian');

require('./dynamics/joints/b2DistanceJoint');

require('./dynamics/joints/b2DistanceJointDef');

require('./dynamics/joints/b2FrictionJoint');

require('./dynamics/joints/b2FrictionJointDef');

require('./dynamics/joints/b2GearJoint');

require('./dynamics/joints/b2GearJointDef');

require('./dynamics/joints/b2LineJoint');

require('./dynamics/joints/b2LineJointDef');

require('./dynamics/joints/b2MouseJoint');

require('./dynamics/joints/b2MouseJointDef');

require('./dynamics/joints/b2PrismaticJoint');

require('./dynamics/joints/b2PrismaticJointDef');

require('./dynamics/joints/b2PulleyJoint');

require('./dynamics/joints/b2PulleyJointDef');

require('./dynamics/joints/b2RevoluteJoint');

require('./dynamics/joints/b2RevoluteJointDef');

require('./dynamics/joints/b2WeldJoint');

require('./dynamics/joints/b2WeldJointDef');

require('./dynamics/b2ContactListener');

require('./dynamics/b2ContactFilter');

require('./dynamics/b2ContactManager');

require('./dynamics/b2Fixture');

require('./dynamics/b2Body');

require('./dynamics/b2DebugDraw');

require('./dynamics/b2BodyDef');

require('./dynamics/b2ContactFilter');

require('./dynamics/b2ContactImpulse');

require('./dynamics/b2FixtureDef');

require('./dynamics/b2Island');

require('./dynamics/b2World');

require('./dynamics/b2DestructionListener');

require('./dynamics/b2FilterData');

//# sourceMappingURL=index.js.map

},{"./collision/ClipVertex":1,"./collision/Features":2,"./collision/b2AABB":3,"./collision/b2Bound":4,"./collision/b2BoundValues":5,"./collision/b2Collision":6,"./collision/b2ContactID":7,"./collision/b2ContactPoint":8,"./collision/b2Distance":9,"./collision/b2DistanceInput":10,"./collision/b2DistanceOutput":11,"./collision/b2DistanceProxy":12,"./collision/b2DynamicTree":13,"./collision/b2DynamicTreeBroadPhase":14,"./collision/b2DynamicTreeNode":15,"./collision/b2DynamicTreePair":16,"./collision/b2Manifold":17,"./collision/b2ManifoldPoint":18,"./collision/b2Point":19,"./collision/b2RayCastInput":20,"./collision/b2RayCastOutput":21,"./collision/b2Segment":22,"./collision/b2SeparationFunction":23,"./collision/b2Simplex":24,"./collision/b2SimplexCache":25,"./collision/b2SimplexVertex":26,"./collision/b2TOIInput":27,"./collision/b2TimeOfImpact":28,"./collision/b2WorldManifold":29,"./collision/shapes/b2CircleShape":30,"./collision/shapes/b2EdgeChainDef":31,"./collision/shapes/b2EdgeShape":32,"./collision/shapes/b2MassData":33,"./collision/shapes/b2PolygonShape":34,"./collision/shapes/b2Shape":35,"./common/b2Color":36,"./common/b2Settings":37,"./common/math/b2Mat22":38,"./common/math/b2Mat33":39,"./common/math/b2Math":40,"./common/math/b2Sweep":41,"./common/math/b2Transform":42,"./common/math/b2Vec2":43,"./common/math/b2Vec3":44,"./dynamics/b2Body":45,"./dynamics/b2BodyDef":46,"./dynamics/b2ContactFilter":47,"./dynamics/b2ContactImpulse":48,"./dynamics/b2ContactListener":49,"./dynamics/b2ContactManager":50,"./dynamics/b2DebugDraw":51,"./dynamics/b2DestructionListener":52,"./dynamics/b2FilterData":53,"./dynamics/b2Fixture":54,"./dynamics/b2FixtureDef":55,"./dynamics/b2Island":56,"./dynamics/b2TimeStep":57,"./dynamics/b2World":58,"./dynamics/contacts/b2CircleContact":59,"./dynamics/contacts/b2Contact":60,"./dynamics/contacts/b2ContactConstraint":61,"./dynamics/contacts/b2ContactConstraintPoint":62,"./dynamics/contacts/b2ContactEdge":63,"./dynamics/contacts/b2ContactFactory":64,"./dynamics/contacts/b2ContactRegister":65,"./dynamics/contacts/b2ContactResult":66,"./dynamics/contacts/b2ContactSolver":67,"./dynamics/contacts/b2EdgeAndCircleContact":68,"./dynamics/contacts/b2NullContact":69,"./dynamics/contacts/b2PolyAndCircleContact":70,"./dynamics/contacts/b2PolyAndEdgeContact":71,"./dynamics/contacts/b2PolygonContact":72,"./dynamics/contacts/b2PositionSolverManifold":73,"./dynamics/controllers/b2BuoyancyController":74,"./dynamics/controllers/b2ConstantAccelController":75,"./dynamics/controllers/b2ConstantForceController":76,"./dynamics/controllers/b2Controller":77,"./dynamics/controllers/b2ControllerEdge":78,"./dynamics/controllers/b2GravityController":79,"./dynamics/controllers/b2TensorDampingController":80,"./dynamics/joints/b2DistanceJoint":81,"./dynamics/joints/b2DistanceJointDef":82,"./dynamics/joints/b2FrictionJoint":83,"./dynamics/joints/b2FrictionJointDef":84,"./dynamics/joints/b2GearJoint":85,"./dynamics/joints/b2GearJointDef":86,"./dynamics/joints/b2Jacobian":87,"./dynamics/joints/b2Joint":88,"./dynamics/joints/b2JointDef":89,"./dynamics/joints/b2JointEdge":90,"./dynamics/joints/b2LineJoint":91,"./dynamics/joints/b2LineJointDef":92,"./dynamics/joints/b2MouseJoint":93,"./dynamics/joints/b2MouseJointDef":94,"./dynamics/joints/b2PrismaticJoint":95,"./dynamics/joints/b2PrismaticJointDef":96,"./dynamics/joints/b2PulleyJoint":97,"./dynamics/joints/b2PulleyJointDef":98,"./dynamics/joints/b2RevoluteJoint":99,"./dynamics/joints/b2RevoluteJointDef":100,"./dynamics/joints/b2WeldJoint":101,"./dynamics/joints/b2WeldJointDef":102}]},{},[103])(103)
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9DbGlwVmVydGV4LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vRmVhdHVyZXMuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkFBQkIuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkJvdW5kLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJCb3VuZFZhbHVlcy5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyQ29sbGlzaW9uLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJDb250YWN0SUQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkNvbnRhY3RQb2ludC5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyRGlzdGFuY2UuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkRpc3RhbmNlSW5wdXQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkRpc3RhbmNlT3V0cHV0LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJEaXN0YW5jZVByb3h5LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJEeW5hbWljVHJlZS5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyRHluYW1pY1RyZWVCcm9hZFBoYXNlLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJEeW5hbWljVHJlZU5vZGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMkR5bmFtaWNUcmVlUGFpci5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyTWFuaWZvbGQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMk1hbmlmb2xkUG9pbnQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlBvaW50LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJSYXlDYXN0SW5wdXQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlJheUNhc3RPdXRwdXQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlNlZ21lbnQuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9iMlNlcGFyYXRpb25GdW5jdGlvbi5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyU2ltcGxleC5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyU2ltcGxleENhY2hlLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJTaW1wbGV4VmVydGV4LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJUT0lJbnB1dC5qcyIsInRtcC9saWIvY29sbGlzaW9uL2IyVGltZU9mSW1wYWN0LmpzIiwidG1wL2xpYi9jb2xsaXNpb24vYjJXb3JsZE1hbmlmb2xkLmpzIiwidG1wL2xpYi9jb2xsaXNpb24vc2hhcGVzL2IyQ2lyY2xlU2hhcGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9zaGFwZXMvYjJFZGdlQ2hhaW5EZWYuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9zaGFwZXMvYjJFZGdlU2hhcGUuanMiLCJ0bXAvbGliL2NvbGxpc2lvbi9zaGFwZXMvYjJNYXNzRGF0YS5qcyIsInRtcC9saWIvY29sbGlzaW9uL3NoYXBlcy9iMlBvbHlnb25TaGFwZS5qcyIsInRtcC9saWIvY29sbGlzaW9uL3NoYXBlcy9iMlNoYXBlLmpzIiwidG1wL2xpYi9jb21tb24vYjJDb2xvci5qcyIsInRtcC9saWIvY29tbW9uL2IyU2V0dGluZ3MuanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyTWF0MjIuanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyTWF0MzMuanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyTWF0aC5qcyIsInRtcC9saWIvY29tbW9uL21hdGgvYjJTd2VlcC5qcyIsInRtcC9saWIvY29tbW9uL21hdGgvYjJUcmFuc2Zvcm0uanMiLCJ0bXAvbGliL2NvbW1vbi9tYXRoL2IyVmVjMi5qcyIsInRtcC9saWIvY29tbW9uL21hdGgvYjJWZWMzLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkJvZHkuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyQm9keURlZi5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJDb250YWN0RmlsdGVyLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkNvbnRhY3RJbXB1bHNlLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkNvbnRhY3RMaXN0ZW5lci5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJDb250YWN0TWFuYWdlci5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJEZWJ1Z0RyYXcuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyRGVzdHJ1Y3Rpb25MaXN0ZW5lci5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJGaWx0ZXJEYXRhLmpzIiwidG1wL2xpYi9keW5hbWljcy9iMkZpeHR1cmUuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyRml4dHVyZURlZi5qcyIsInRtcC9saWIvZHluYW1pY3MvYjJJc2xhbmQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyVGltZVN0ZXAuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2IyV29ybGQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ2lyY2xlQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJDb250YWN0LmpzIiwidG1wL2xpYi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RDb25zdHJhaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RDb25zdHJhaW50UG9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdEVkZ2UuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdEZhY3RvcnkuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdFJlZ2lzdGVyLmpzIiwidG1wL2xpYi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RSZXN1bHQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdFNvbHZlci5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJOdWxsQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udGFjdHMvYjJQb2x5QW5kRWRnZUNvbnRhY3QuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9seWdvbkNvbnRhY3QuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJCdW95YW5jeUNvbnRyb2xsZXIuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXIuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29udHJvbGxlci5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJDb250cm9sbGVyRWRnZS5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJHcmF2aXR5Q29udHJvbGxlci5qcyIsInRtcC9saWIvZHluYW1pY3MvY29udHJvbGxlcnMvYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlci5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRGlzdGFuY2VKb2ludC5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRGlzdGFuY2VKb2ludERlZi5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRnJpY3Rpb25Kb2ludC5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyRnJpY3Rpb25Kb2ludERlZi5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyR2VhckpvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJHZWFySm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMkphY29iaWFuLmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJKb2ludC5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IySm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMkpvaW50RWRnZS5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyTGluZUpvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJMaW5lSm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMk1vdXNlSm9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMk1vdXNlSm9pbnREZWYuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMlByaXNtYXRpY0pvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJQcmlzbWF0aWNKb2ludERlZi5qcyIsInRtcC9saWIvZHluYW1pY3Mvam9pbnRzL2IyUHVsbGV5Sm9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMlB1bGxleUpvaW50RGVmLmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJSZXZvbHV0ZUpvaW50LmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJSZXZvbHV0ZUpvaW50RGVmLmpzIiwidG1wL2xpYi9keW5hbWljcy9qb2ludHMvYjJXZWxkSm9pbnQuanMiLCJ0bXAvbGliL2R5bmFtaWNzL2pvaW50cy9iMldlbGRKb2ludERlZi5qcyIsInRtcC9saWIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzF6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9UQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3aUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM09BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDek5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25nQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcmRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBCb3gyRCwgYjJDb250YWN0SUQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyQ29udGFjdElEID0gQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdElEO1xuXG5Cb3gyRC5Db2xsaXNpb24uQ2xpcFZlcnRleCA9IChmdW5jdGlvbigpIHtcbiAgQ2xpcFZlcnRleC5wcm90b3R5cGUudiA9IG51bGw7XG5cbiAgQ2xpcFZlcnRleC5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIENsaXBWZXJ0ZXgoKSB7XG4gICAgdGhpcy52ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMuaWQgPSBuZXcgYjJDb250YWN0SUQoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBDbGlwVmVydGV4LnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHRoaXMudi5TZXRWKG90aGVyLnYpO1xuICAgIHRoaXMuaWQuU2V0KG90aGVyLmlkKTtcbiAgfTtcblxuICByZXR1cm4gQ2xpcFZlcnRleDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2xpcFZlcnRleC5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5Db2xsaXNpb24uRmVhdHVyZXMgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIEZlYXR1cmVzKCkge31cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhGZWF0dXJlcy5wcm90b3R5cGUsIHtcbiAgICByZWZlcmVuY2VFZGdlOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZlcmVuY2VFZGdlO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVmZXJlbmNlRWRnZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9tX2lkLl9rZXkgPSAodGhpcy5fbV9pZC5fa2V5ICYgMHhmZmZmZmYwMCkgfCAodGhpcy5fcmVmZXJlbmNlRWRnZSAmIDB4MDAwMDAwZmYpO1xuICAgICAgfVxuICAgIH0sXG4gICAgaW5jaWRlbnRFZGdlOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmNpZGVudEVkZ2U7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pbmNpZGVudEVkZ2UgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fbV9pZC5fa2V5ID0gKHRoaXMuX21faWQuX2tleSAmIDB4ZmZmZjAwZmYpIHwgKCh0aGlzLl9pbmNpZGVudEVkZ2UgPDwgOCkgJiAweDAwMDBmZjAwKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGluY2lkZW50VmVydGV4OiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmNpZGVudFZlcnRleDtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2luY2lkZW50VmVydGV4ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX21faWQuX2tleSA9ICh0aGlzLl9tX2lkLl9rZXkgJiAweGZmMDBmZmZmKSB8ICgodGhpcy5faW5jaWRlbnRWZXJ0ZXggPDwgMTYpICYgMHgwMGZmMDAwMCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBmbGlwOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mbGlwO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmxpcCA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9tX2lkLl9rZXkgPSAodGhpcy5fbV9pZC5fa2V5ICYgMHgwMGZmZmZmZikgfCAoKHRoaXMuX2ZsaXAgPDwgMjQpICYgMHhmZjAwMDAwMCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gRmVhdHVyZXM7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZlYXR1cmVzLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJBQUJCID0gKGZ1bmN0aW9uKCkge1xuICBiMkFBQkIucHJvdG90eXBlLmxvd2VyQm91bmQgPSBudWxsO1xuXG4gIGIyQUFCQi5wcm90b3R5cGUudXBwZXJCb3VuZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJBQUJCKCkge1xuICAgIHRoaXMubG93ZXJCb3VuZCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJBQUJCLnByb3RvdHlwZS5Jc1ZhbGlkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRYLCBkWSwgdmFsaWQ7XG4gICAgZFggPSB0aGlzLnVwcGVyQm91bmQueCAtIHRoaXMubG93ZXJCb3VuZC54O1xuICAgIGRZID0gdGhpcy51cHBlckJvdW5kLnkgLSB0aGlzLmxvd2VyQm91bmQueTtcbiAgICB2YWxpZCA9IGRYID49IDAuMCAmJiBkWSA+PSAwLjA7XG4gICAgdmFsaWQgPSB2YWxpZCAmJiB0aGlzLmxvd2VyQm91bmQuSXNWYWxpZCgpICYmIHRoaXMudXBwZXJCb3VuZC5Jc1ZhbGlkKCk7XG4gICAgcmV0dXJuIHZhbGlkO1xuICB9O1xuXG4gIGIyQUFCQi5wcm90b3R5cGUuR2V0Q2VudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoKHRoaXMubG93ZXJCb3VuZC54ICsgdGhpcy51cHBlckJvdW5kLngpIC8gMiwgKHRoaXMubG93ZXJCb3VuZC55ICsgdGhpcy51cHBlckJvdW5kLnkpIC8gMik7XG4gIH07XG5cbiAgYjJBQUJCLnByb3RvdHlwZS5HZXRFeHRlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoKHRoaXMudXBwZXJCb3VuZC54IC0gdGhpcy5sb3dlckJvdW5kLngpIC8gMiwgKHRoaXMudXBwZXJCb3VuZC55IC0gdGhpcy5sb3dlckJvdW5kLnkpIC8gMik7XG4gIH07XG5cbiAgYjJBQUJCLnByb3RvdHlwZS5Db250YWlucyA9IGZ1bmN0aW9uKGFhYmIpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIHJlc3VsdCA9IHRydWU7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICYmIHRoaXMubG93ZXJCb3VuZC54IDw9IGFhYmIubG93ZXJCb3VuZC54O1xuICAgIHJlc3VsdCA9IHJlc3VsdCAmJiB0aGlzLmxvd2VyQm91bmQueSA8PSBhYWJiLmxvd2VyQm91bmQueTtcbiAgICByZXN1bHQgPSByZXN1bHQgJiYgYWFiYi51cHBlckJvdW5kLnggPD0gdGhpcy51cHBlckJvdW5kLng7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICYmIGFhYmIudXBwZXJCb3VuZC55IDw9IHRoaXMudXBwZXJCb3VuZC55O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgYjJBQUJCLnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24ob3V0cHV0LCBpbnB1dCkge1xuICAgIHZhciBhYnNEWCwgYWJzRFksIGRYLCBkWSwgaW52X2QsIG5vcm1hbCwgcFgsIHBZLCBzLCB0MSwgdDIsIHQzLCB0bWF4LCB0bWluO1xuICAgIHRtaW4gPSAtTnVtYmVyLk1BWF9WQUxVRTtcbiAgICB0bWF4ID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICBwWCA9IGlucHV0LnAxLng7XG4gICAgcFkgPSBpbnB1dC5wMS55O1xuICAgIGRYID0gaW5wdXQucDIueCAtIGlucHV0LnAxLng7XG4gICAgZFkgPSBpbnB1dC5wMi55IC0gaW5wdXQucDEueTtcbiAgICBhYnNEWCA9IE1hdGguYWJzKGRYKTtcbiAgICBhYnNEWSA9IE1hdGguYWJzKGRZKTtcbiAgICBub3JtYWwgPSBvdXRwdXQubm9ybWFsO1xuICAgIGludl9kID0gMDtcbiAgICB0MSA9IDA7XG4gICAgdDIgPSAwO1xuICAgIHQzID0gMDtcbiAgICBzID0gMDtcbiAgICBpZiAoYWJzRFggPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICBpZiAocFggPCB0aGlzLmxvd2VyQm91bmQueCB8fCB0aGlzLnVwcGVyQm91bmQueCA8IHBYKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaW52X2QgPSAxLjAgLyBkWDtcbiAgICAgIHQxID0gKHRoaXMubG93ZXJCb3VuZC54IC0gcFgpICogaW52X2Q7XG4gICAgICB0MiA9ICh0aGlzLnVwcGVyQm91bmQueCAtIHBYKSAqIGludl9kO1xuICAgICAgcyA9IC0xLjA7XG4gICAgICBpZiAodDEgPiB0Mikge1xuICAgICAgICB0MyA9IHQxO1xuICAgICAgICB0MSA9IHQyO1xuICAgICAgICB0MiA9IHQzO1xuICAgICAgICBzID0gMS4wO1xuICAgICAgfVxuICAgICAgaWYgKHQxID4gdG1pbikge1xuICAgICAgICBub3JtYWwueCA9IHM7XG4gICAgICAgIG5vcm1hbC55ID0gMDtcbiAgICAgICAgdG1pbiA9IHQxO1xuICAgICAgfVxuICAgICAgdG1heCA9IE1hdGgubWluKHRtYXgsIHQyKTtcbiAgICAgIGlmICh0bWluID4gdG1heCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhYnNEWSA8IE51bWJlci5NSU5fVkFMVUUpIHtcbiAgICAgIGlmIChwWSA8IHRoaXMubG93ZXJCb3VuZC55IHx8IHRoaXMudXBwZXJCb3VuZC55IDwgcFkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpbnZfZCA9IDEuMCAvIGRZO1xuICAgICAgdDEgPSAodGhpcy5sb3dlckJvdW5kLnkgLSBwWSkgKiBpbnZfZDtcbiAgICAgIHQyID0gKHRoaXMudXBwZXJCb3VuZC55IC0gcFkpICogaW52X2Q7XG4gICAgICBzID0gLTEuMDtcbiAgICAgIGlmICh0MSA+IHQyKSB7XG4gICAgICAgIHQzID0gdDE7XG4gICAgICAgIHQxID0gdDI7XG4gICAgICAgIHQyID0gdDM7XG4gICAgICAgIHMgPSAxLjA7XG4gICAgICB9XG4gICAgICBpZiAodDEgPiB0bWluKSB7XG4gICAgICAgIG5vcm1hbC55ID0gcztcbiAgICAgICAgbm9ybWFsLnggPSAwO1xuICAgICAgICB0bWluID0gdDE7XG4gICAgICB9XG4gICAgICB0bWF4ID0gTWF0aC5taW4odG1heCwgdDIpO1xuICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgb3V0cHV0LmZyYWN0aW9uID0gdG1pbjtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBiMkFBQkIucHJvdG90eXBlLlRlc3RPdmVybGFwID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICB2YXIgZDFYLCBkMVksIGQyWCwgZDJZO1xuICAgIGQxWCA9IG90aGVyLmxvd2VyQm91bmQueCAtIHRoaXMudXBwZXJCb3VuZC54O1xuICAgIGQxWSA9IG90aGVyLmxvd2VyQm91bmQueSAtIHRoaXMudXBwZXJCb3VuZC55O1xuICAgIGQyWCA9IHRoaXMubG93ZXJCb3VuZC54IC0gb3RoZXIudXBwZXJCb3VuZC54O1xuICAgIGQyWSA9IHRoaXMubG93ZXJCb3VuZC55IC0gb3RoZXIudXBwZXJCb3VuZC55O1xuICAgIGlmIChkMVggPiAwLjAgfHwgZDFZID4gMC4wKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkMlggPiAwLjAgfHwgZDJZID4gMC4wKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIGIyQUFCQi5Db21iaW5lID0gZnVuY3Rpb24oYWFiYjEsIGFhYmIyKSB7XG4gICAgdmFyIGFhYmI7XG4gICAgYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgICBhYWJiLkNvbWJpbmUoYWFiYjEsIGFhYmIyKTtcbiAgICByZXR1cm4gYWFiYjtcbiAgfTtcblxuICBiMkFBQkIucHJvdG90eXBlLkNvbWJpbmUgPSBmdW5jdGlvbihhYWJiMSwgYWFiYjIpIHtcbiAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKGFhYmIxLmxvd2VyQm91bmQueCwgYWFiYjIubG93ZXJCb3VuZC54KTtcbiAgICB0aGlzLmxvd2VyQm91bmQueSA9IE1hdGgubWluKGFhYmIxLmxvd2VyQm91bmQueSwgYWFiYjIubG93ZXJCb3VuZC55KTtcbiAgICB0aGlzLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KGFhYmIxLnVwcGVyQm91bmQueCwgYWFiYjIudXBwZXJCb3VuZC54KTtcbiAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KGFhYmIxLnVwcGVyQm91bmQueSwgYWFiYjIudXBwZXJCb3VuZC55KTtcbiAgfTtcblxuICByZXR1cm4gYjJBQUJCO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkFBQkIuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuQm94MkQuQ29sbGlzaW9uLmIyQm91bmQgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyQm91bmQoKSB7fVxuXG4gIGIyQm91bmQucHJvdG90eXBlLnZhbHVlID0gMDtcblxuICBiMkJvdW5kLnByb3RvdHlwZS5wcm94eSA9IG51bGw7XG5cbiAgYjJCb3VuZC5wcm90b3R5cGUuc3RhYmJpbmdDb3VudCA9IDA7XG5cbiAgYjJCb3VuZC5wcm90b3R5cGUuSXNMb3dlciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy52YWx1ZSAmIDEpID09PSAwO1xuICB9O1xuXG4gIGIyQm91bmQucHJvdG90eXBlLklzVXBwZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMudmFsdWUgJiAxKSA9PT0gMTtcbiAgfTtcblxuICBiMkJvdW5kLnByb3RvdHlwZS5Td2FwID0gZnVuY3Rpb24oYikge1xuICAgIHZhciB0ZW1wUHJveHksIHRlbXBTdGFiYmluZ0NvdW50LCB0ZW1wVmFsdWU7XG4gICAgdGVtcFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICB0ZW1wUHJveHkgPSB0aGlzLnByb3h5O1xuICAgIHRlbXBTdGFiYmluZ0NvdW50ID0gdGhpcy5zdGFiYmluZ0NvdW50O1xuICAgIHRoaXMudmFsdWUgPSBiLnZhbHVlO1xuICAgIHRoaXMucHJveHkgPSBiLnByb3h5O1xuICAgIHRoaXMuc3RhYmJpbmdDb3VudCA9IGIuc3RhYmJpbmdDb3VudDtcbiAgICBiLnZhbHVlID0gdGVtcFZhbHVlO1xuICAgIGIucHJveHkgPSB0ZW1wUHJveHk7XG4gICAgYi5zdGFiYmluZ0NvdW50ID0gdGVtcFN0YWJiaW5nQ291bnQ7XG4gIH07XG5cbiAgcmV0dXJuIGIyQm91bmQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQm91bmQuanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvcjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbkJveDJELkNvbGxpc2lvbi5iMkJvdW5kVmFsdWVzID0gKGZ1bmN0aW9uKCkge1xuICBiMkJvdW5kVmFsdWVzLnByb3RvdHlwZS5sb3dlclZhbHVlcyA9IG51bGw7XG5cbiAgYjJCb3VuZFZhbHVlcy5wcm90b3R5cGUudXBwZXJWYWx1ZXMgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQm91bmRWYWx1ZXMoKSB7XG4gICAgdGhpcy5sb3dlclZhbHVlcyA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLmxvd2VyVmFsdWVzWzBdID0gMC4wO1xuICAgIHRoaXMubG93ZXJWYWx1ZXNbMV0gPSAwLjA7XG4gICAgdGhpcy51cHBlclZhbHVlcyA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLnVwcGVyVmFsdWVzWzBdID0gMC4wO1xuICAgIHRoaXMudXBwZXJWYWx1ZXNbMV0gPSAwLjA7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyQm91bmRWYWx1ZXM7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQm91bmRWYWx1ZXMuanMubWFwXG4iLCJ2YXIgQm94MkQsIENsaXBWZXJ0ZXgsIFZlY3RvciwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5DbGlwVmVydGV4ID0gQm94MkQuQ29sbGlzaW9uLkNsaXBWZXJ0ZXg7XG5cbkJveDJELkNvbGxpc2lvbi5iMkNvbGxpc2lvbiA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJDb2xsaXNpb24oKSB7fVxuXG4gIGIyQ29sbGlzaW9uLmIyX251bGxGZWF0dXJlID0gMHgwMDAwMDBmZjtcblxuICBiMkNvbGxpc2lvbi5zX2VkZ2VBTyA9IG5ldyBWZWN0b3IoMSk7XG5cbiAgYjJDb2xsaXNpb24uc19lZGdlQk8gPSBuZXcgVmVjdG9yKDEpO1xuXG4gIGIyQ29sbGlzaW9uLnNfbG9jYWxUYW5nZW50ID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLnNfbG9jYWxOb3JtYWwgPSBuZXcgYjJWZWMyKCk7XG5cbiAgYjJDb2xsaXNpb24uc19wbGFuZVBvaW50ID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLnNfbm9ybWFsID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLnNfdGFuZ2VudCA9IG5ldyBiMlZlYzIoKTtcblxuICBiMkNvbGxpc2lvbi5zX3RhbmdlbnQyID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLnNfdjExID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLnNfdjEyID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLmIyQ29sbGlkZVBvbHlUZW1wVmVjID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyQ29sbGlzaW9uLkNsaXBTZWdtZW50VG9MaW5lID0gZnVuY3Rpb24odk91dCwgdkluLCBub3JtYWwsIG9mZnNldCkge1xuICAgIHZhciBjdiwgY3YyLCBkaXN0YW5jZTAsIGRpc3RhbmNlMSwgaW50ZXJwLCBudW1PdXQsIHRWZWMsIHZJbjAsIHZJbjE7XG4gICAgaWYgKG9mZnNldCA9PT0gdm9pZCAwKSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cbiAgICBjdiA9IHZvaWQgMDtcbiAgICBudW1PdXQgPSAwO1xuICAgIGN2ID0gdkluWzBdO1xuICAgIHZJbjAgPSBjdi52O1xuICAgIGN2ID0gdkluWzFdO1xuICAgIHZJbjEgPSBjdi52O1xuICAgIGRpc3RhbmNlMCA9IG5vcm1hbC54ICogdkluMC54ICsgbm9ybWFsLnkgKiB2SW4wLnkgLSBvZmZzZXQ7XG4gICAgZGlzdGFuY2UxID0gbm9ybWFsLnggKiB2SW4xLnggKyBub3JtYWwueSAqIHZJbjEueSAtIG9mZnNldDtcbiAgICBpZiAoZGlzdGFuY2UwIDw9IDAuMCkge1xuICAgICAgdk91dFtudW1PdXQrK10uU2V0KHZJblswXSk7XG4gICAgfVxuICAgIGlmIChkaXN0YW5jZTEgPD0gMC4wKSB7XG4gICAgICB2T3V0W251bU91dCsrXS5TZXQodkluWzFdKTtcbiAgICB9XG4gICAgaWYgKGRpc3RhbmNlMCAqIGRpc3RhbmNlMSA8IDAuMCkge1xuICAgICAgaW50ZXJwID0gZGlzdGFuY2UwIC8gKGRpc3RhbmNlMCAtIGRpc3RhbmNlMSk7XG4gICAgICBjdiA9IHZPdXRbbnVtT3V0XTtcbiAgICAgIHRWZWMgPSBjdi52O1xuICAgICAgdFZlYy54ID0gdkluMC54ICsgaW50ZXJwICogKHZJbjEueCAtIHZJbjAueCk7XG4gICAgICB0VmVjLnkgPSB2SW4wLnkgKyBpbnRlcnAgKiAodkluMS55IC0gdkluMC55KTtcbiAgICAgIGN2ID0gdk91dFtudW1PdXRdO1xuICAgICAgY3YyID0gdm9pZCAwO1xuICAgICAgaWYgKGRpc3RhbmNlMCA+IDAuMCkge1xuICAgICAgICBjdjIgPSB2SW5bMF07XG4gICAgICAgIGN2LmlkID0gY3YyLmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3YyID0gdkluWzFdO1xuICAgICAgICBjdi5pZCA9IGN2Mi5pZDtcbiAgICAgIH1cbiAgICAgICsrbnVtT3V0O1xuICAgIH1cbiAgICByZXR1cm4gbnVtT3V0O1xuICB9O1xuXG4gIGIyQ29sbGlzaW9uLkVkZ2VTZXBhcmF0aW9uID0gZnVuY3Rpb24ocG9seTEsIHhmMSwgZWRnZTEsIHBvbHkyLCB4ZjIpIHtcbiAgICB2YXIgY291bnQxLCBjb3VudDIsIGRvdCwgaSwgaW5kZXgsIG1pbkRvdCwgbm9ybWFsMVdvcmxkWCwgbm9ybWFsMVdvcmxkWSwgbm9ybWFsMVgsIG5vcm1hbDFZLCBub3JtYWxzMSwgc2VwYXJhdGlvbiwgdE1hdCwgdFZlYywgdjFYLCB2MVksIHYyWCwgdjJZLCB2ZXJ0aWNlczEsIHZlcnRpY2VzMjtcbiAgICBpZiAoZWRnZTEgPT09IHZvaWQgMCkge1xuICAgICAgZWRnZTEgPSAwO1xuICAgIH1cbiAgICBjb3VudDEgPSBwYXJzZUludChwb2x5MS5tX3ZlcnRleENvdW50KTtcbiAgICB2ZXJ0aWNlczEgPSBwb2x5MS5tX3ZlcnRpY2VzO1xuICAgIG5vcm1hbHMxID0gcG9seTEubV9ub3JtYWxzO1xuICAgIGNvdW50MiA9IHBhcnNlSW50KHBvbHkyLm1fdmVydGV4Q291bnQpO1xuICAgIHZlcnRpY2VzMiA9IHBvbHkyLm1fdmVydGljZXM7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHRNYXQgPSB4ZjEuUjtcbiAgICB0VmVjID0gbm9ybWFsczFbZWRnZTFdO1xuICAgIG5vcm1hbDFXb3JsZFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgIG5vcm1hbDFXb3JsZFkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgIHRNYXQgPSB4ZjIuUjtcbiAgICBub3JtYWwxWCA9IHRNYXQuY29sMS54ICogbm9ybWFsMVdvcmxkWCArIHRNYXQuY29sMS55ICogbm9ybWFsMVdvcmxkWTtcbiAgICBub3JtYWwxWSA9IHRNYXQuY29sMi54ICogbm9ybWFsMVdvcmxkWCArIHRNYXQuY29sMi55ICogbm9ybWFsMVdvcmxkWTtcbiAgICBpbmRleCA9IDA7XG4gICAgbWluRG90ID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGNvdW50Mikge1xuICAgICAgdFZlYyA9IHZlcnRpY2VzMltpXTtcbiAgICAgIGRvdCA9IHRWZWMueCAqIG5vcm1hbDFYICsgdFZlYy55ICogbm9ybWFsMVk7XG4gICAgICBpZiAoZG90IDwgbWluRG90KSB7XG4gICAgICAgIG1pbkRvdCA9IGRvdDtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgfVxuICAgICAgKytpO1xuICAgIH1cbiAgICB0VmVjID0gdmVydGljZXMxW2VkZ2UxXTtcbiAgICB0TWF0ID0geGYxLlI7XG4gICAgdjFYID0geGYxLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgdjFZID0geGYxLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgdFZlYyA9IHZlcnRpY2VzMltpbmRleF07XG4gICAgdE1hdCA9IHhmMi5SO1xuICAgIHYyWCA9IHhmMi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIHYyWSA9IHhmMi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgIHYyWCAtPSB2MVg7XG4gICAgdjJZIC09IHYxWTtcbiAgICBzZXBhcmF0aW9uID0gdjJYICogbm9ybWFsMVdvcmxkWCArIHYyWSAqIG5vcm1hbDFXb3JsZFk7XG4gICAgcmV0dXJuIHNlcGFyYXRpb247XG4gIH07XG5cbiAgYjJDb2xsaXNpb24uRmluZE1heFNlcGFyYXRpb24gPSBmdW5jdGlvbihlZGdlSW5kZXgsIHBvbHkxLCB4ZjEsIHBvbHkyLCB4ZjIpIHtcbiAgICB2YXIgYmVzdEVkZ2UsIGJlc3RTZXBhcmF0aW9uLCBjb3VudDEsIGRMb2NhbDFYLCBkTG9jYWwxWSwgZFgsIGRZLCBkb3QsIGVkZ2UsIGksIGluY3JlbWVudCwgbWF4RG90LCBuZXh0RWRnZSwgbm9ybWFsczEsIHByZXZFZGdlLCBzLCBzTmV4dCwgc1ByZXYsIHRNYXQsIHRWZWM7XG4gICAgY291bnQxID0gcGFyc2VJbnQocG9seTEubV92ZXJ0ZXhDb3VudCk7XG4gICAgbm9ybWFsczEgPSBwb2x5MS5tX25vcm1hbHM7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRNYXQgPSB4ZjIuUjtcbiAgICB0VmVjID0gcG9seTIubV9jZW50cm9pZDtcbiAgICBkWCA9IHhmMi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIGRZID0geGYyLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgdE1hdCA9IHhmMS5SO1xuICAgIHRWZWMgPSBwb2x5MS5tX2NlbnRyb2lkO1xuICAgIGRYIC09IHhmMS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIGRZIC09IHhmMS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgIGRMb2NhbDFYID0gZFggKiB4ZjEuUi5jb2wxLnggKyBkWSAqIHhmMS5SLmNvbDEueTtcbiAgICBkTG9jYWwxWSA9IGRYICogeGYxLlIuY29sMi54ICsgZFkgKiB4ZjEuUi5jb2wyLnk7XG4gICAgZWRnZSA9IDA7XG4gICAgbWF4RG90ID0gLU51bWJlci5NQVhfVkFMVUU7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBjb3VudDEpIHtcbiAgICAgIHRWZWMgPSBub3JtYWxzMVtpXTtcbiAgICAgIGRvdCA9IHRWZWMueCAqIGRMb2NhbDFYICsgdFZlYy55ICogZExvY2FsMVk7XG4gICAgICBpZiAoZG90ID4gbWF4RG90KSB7XG4gICAgICAgIG1heERvdCA9IGRvdDtcbiAgICAgICAgZWRnZSA9IGk7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHMgPSBiMkNvbGxpc2lvbi5FZGdlU2VwYXJhdGlvbihwb2x5MSwgeGYxLCBlZGdlLCBwb2x5MiwgeGYyKTtcbiAgICBwcmV2RWRnZSA9IHBhcnNlSW50KChlZGdlIC0gMSA+PSAwID8gZWRnZSAtIDEgOiBjb3VudDEgLSAxKSk7XG4gICAgc1ByZXYgPSBiMkNvbGxpc2lvbi5FZGdlU2VwYXJhdGlvbihwb2x5MSwgeGYxLCBwcmV2RWRnZSwgcG9seTIsIHhmMik7XG4gICAgbmV4dEVkZ2UgPSBwYXJzZUludCgoZWRnZSArIDEgPCBjb3VudDEgPyBlZGdlICsgMSA6IDApKTtcbiAgICBzTmV4dCA9IGIyQ29sbGlzaW9uLkVkZ2VTZXBhcmF0aW9uKHBvbHkxLCB4ZjEsIG5leHRFZGdlLCBwb2x5MiwgeGYyKTtcbiAgICBiZXN0RWRnZSA9IDA7XG4gICAgYmVzdFNlcGFyYXRpb24gPSAwO1xuICAgIGluY3JlbWVudCA9IDA7XG4gICAgaWYgKHNQcmV2ID4gcyAmJiBzUHJldiA+IHNOZXh0KSB7XG4gICAgICBpbmNyZW1lbnQgPSAtMS47XG4gICAgICBiZXN0RWRnZSA9IHByZXZFZGdlO1xuICAgICAgYmVzdFNlcGFyYXRpb24gPSBzUHJldjtcbiAgICB9IGVsc2UgaWYgKHNOZXh0ID4gcykge1xuICAgICAgaW5jcmVtZW50ID0gMTtcbiAgICAgIGJlc3RFZGdlID0gbmV4dEVkZ2U7XG4gICAgICBiZXN0U2VwYXJhdGlvbiA9IHNOZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGdlSW5kZXhbMF0gPSBlZGdlO1xuICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAoaW5jcmVtZW50ID09PSAoLTEpKSB7XG4gICAgICAgIGVkZ2UgPSAoYmVzdEVkZ2UgLSAxID49IDAgPyBiZXN0RWRnZSAtIDEgOiBjb3VudDEgLSAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVkZ2UgPSAoYmVzdEVkZ2UgKyAxIDwgY291bnQxID8gYmVzdEVkZ2UgKyAxIDogMCk7XG4gICAgICB9XG4gICAgICBzID0gYjJDb2xsaXNpb24uRWRnZVNlcGFyYXRpb24ocG9seTEsIHhmMSwgZWRnZSwgcG9seTIsIHhmMik7XG4gICAgICBpZiAocyA+IGJlc3RTZXBhcmF0aW9uKSB7XG4gICAgICAgIGJlc3RFZGdlID0gZWRnZTtcbiAgICAgICAgYmVzdFNlcGFyYXRpb24gPSBzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGVkZ2VJbmRleFswXSA9IGJlc3RFZGdlO1xuICAgIHJldHVybiBiZXN0U2VwYXJhdGlvbjtcbiAgfTtcblxuICBiMkNvbGxpc2lvbi5GaW5kSW5jaWRlbnRFZGdlID0gZnVuY3Rpb24oYywgcG9seTEsIHhmMSwgZWRnZTEsIHBvbHkyLCB4ZjIpIHtcbiAgICB2YXIgY291bnQxLCBjb3VudDIsIGRvdCwgaSwgaTEsIGkyLCBpbmRleCwgbWluRG90LCBub3JtYWwxWCwgbm9ybWFsMVksIG5vcm1hbHMxLCBub3JtYWxzMiwgdENsaXAsIHRNYXQsIHRWZWMsIHRYLCB2ZXJ0aWNlczI7XG4gICAgaWYgKGVkZ2UxID09PSB2b2lkIDApIHtcbiAgICAgIGVkZ2UxID0gMDtcbiAgICB9XG4gICAgY291bnQxID0gcGFyc2VJbnQocG9seTEubV92ZXJ0ZXhDb3VudCk7XG4gICAgbm9ybWFsczEgPSBwb2x5MS5tX25vcm1hbHM7XG4gICAgY291bnQyID0gcGFyc2VJbnQocG9seTIubV92ZXJ0ZXhDb3VudCk7XG4gICAgdmVydGljZXMyID0gcG9seTIubV92ZXJ0aWNlcztcbiAgICBub3JtYWxzMiA9IHBvbHkyLm1fbm9ybWFscztcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgdE1hdCA9IHhmMS5SO1xuICAgIHRWZWMgPSBub3JtYWxzMVtlZGdlMV07XG4gICAgbm9ybWFsMVggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgIG5vcm1hbDFZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICB0TWF0ID0geGYyLlI7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIG5vcm1hbDFYICsgdE1hdC5jb2wxLnkgKiBub3JtYWwxWTtcbiAgICBub3JtYWwxWSA9IHRNYXQuY29sMi54ICogbm9ybWFsMVggKyB0TWF0LmNvbDIueSAqIG5vcm1hbDFZO1xuICAgIG5vcm1hbDFYID0gdFg7XG4gICAgaW5kZXggPSAwO1xuICAgIG1pbkRvdCA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBjb3VudDIpIHtcbiAgICAgIHRWZWMgPSBub3JtYWxzMltpXTtcbiAgICAgIGRvdCA9IG5vcm1hbDFYICogdFZlYy54ICsgbm9ybWFsMVkgKiB0VmVjLnk7XG4gICAgICBpZiAoZG90IDwgbWluRG90KSB7XG4gICAgICAgIG1pbkRvdCA9IGRvdDtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgfVxuICAgICAgKytpO1xuICAgIH1cbiAgICB0Q2xpcCA9IHZvaWQgMDtcbiAgICBpMSA9IHBhcnNlSW50KGluZGV4KTtcbiAgICBpMiA9IHBhcnNlSW50KChpMSArIDEgPCBjb3VudDIgPyBpMSArIDEgOiAwKSk7XG4gICAgdENsaXAgPSBjWzBdO1xuICAgIHRWZWMgPSB2ZXJ0aWNlczJbaTFdO1xuICAgIHRNYXQgPSB4ZjIuUjtcbiAgICB0Q2xpcC52LnggPSB4ZjIucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICB0Q2xpcC52LnkgPSB4ZjIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICB0Q2xpcC5pZC5mZWF0dXJlcy5yZWZlcmVuY2VFZGdlID0gZWRnZTE7XG4gICAgdENsaXAuaWQuZmVhdHVyZXMuaW5jaWRlbnRFZGdlID0gaTE7XG4gICAgdENsaXAuaWQuZmVhdHVyZXMuaW5jaWRlbnRWZXJ0ZXggPSAwO1xuICAgIHRDbGlwID0gY1sxXTtcbiAgICB0VmVjID0gdmVydGljZXMyW2kyXTtcbiAgICB0TWF0ID0geGYyLlI7XG4gICAgdENsaXAudi54ID0geGYyLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgdENsaXAudi55ID0geGYyLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgdENsaXAuaWQuZmVhdHVyZXMucmVmZXJlbmNlRWRnZSA9IGVkZ2UxO1xuICAgIHRDbGlwLmlkLmZlYXR1cmVzLmluY2lkZW50RWRnZSA9IGkyO1xuICAgIHRDbGlwLmlkLmZlYXR1cmVzLmluY2lkZW50VmVydGV4ID0gMTtcbiAgfTtcblxuICBiMkNvbGxpc2lvbi5NYWtlQ2xpcFBvaW50VmVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHI7XG4gICAgciA9IG5ldyBWZWN0b3IoMik7XG4gICAgclswXSA9IG5ldyBDbGlwVmVydGV4KCk7XG4gICAgclsxXSA9IG5ldyBDbGlwVmVydGV4KCk7XG4gICAgcmV0dXJuIHI7XG4gIH07XG5cbiAgYjJDb2xsaXNpb24uQ29sbGlkZVBvbHlnb25zID0gZnVuY3Rpb24obWFuaWZvbGQsIHBvbHlBLCB4ZkEsIHBvbHlCLCB4ZkIpIHtcbiAgICB2YXIgY2xpcFBvaW50czEsIGNsaXBQb2ludHMyLCBjb3VudDEsIGNwLCBjdiwgZWRnZTEsIGVkZ2VBLCBlZGdlQiwgZmxpcCwgZnJvbnRPZmZzZXQsIGksIGluY2lkZW50RWRnZSwga19hYnNvbHV0ZVRvbCwga19yZWxhdGl2ZVRvbCwgbG9jYWxOb3JtYWwsIGxvY2FsVGFuZ2VudCwgbG9jYWxfdjExLCBsb2NhbF92MTIsIG5vcm1hbCwgbnAsIHBsYW5lUG9pbnQsIHBvaW50Q291bnQsIHBvbHkxLCBwb2x5Miwgc2VwYXJhdGlvbiwgc2VwYXJhdGlvbkEsIHNlcGFyYXRpb25CLCBzaWRlT2Zmc2V0MSwgc2lkZU9mZnNldDIsIHRNYXQsIHRYLCB0WSwgdGFuZ2VudCwgdGFuZ2VudDIsIHRvdGFsUmFkaXVzLCB2MTEsIHYxMiwgdmVydGljZXMxLCB4ZjEsIHhmMjtcbiAgICBjdiA9IHZvaWQgMDtcbiAgICBtYW5pZm9sZC5tX3BvaW50Q291bnQgPSAwO1xuICAgIHRvdGFsUmFkaXVzID0gcG9seUEubV9yYWRpdXMgKyBwb2x5Qi5tX3JhZGl1cztcbiAgICBlZGdlQSA9IDA7XG4gICAgYjJDb2xsaXNpb24uc19lZGdlQU9bMF0gPSBlZGdlQTtcbiAgICBzZXBhcmF0aW9uQSA9IGIyQ29sbGlzaW9uLkZpbmRNYXhTZXBhcmF0aW9uKGIyQ29sbGlzaW9uLnNfZWRnZUFPLCBwb2x5QSwgeGZBLCBwb2x5QiwgeGZCKTtcbiAgICBlZGdlQSA9IGIyQ29sbGlzaW9uLnNfZWRnZUFPWzBdO1xuICAgIGlmIChzZXBhcmF0aW9uQSA+IHRvdGFsUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkZ2VCID0gMDtcbiAgICBiMkNvbGxpc2lvbi5zX2VkZ2VCT1swXSA9IGVkZ2VCO1xuICAgIHNlcGFyYXRpb25CID0gYjJDb2xsaXNpb24uRmluZE1heFNlcGFyYXRpb24oYjJDb2xsaXNpb24uc19lZGdlQk8sIHBvbHlCLCB4ZkIsIHBvbHlBLCB4ZkEpO1xuICAgIGVkZ2VCID0gYjJDb2xsaXNpb24uc19lZGdlQk9bMF07XG4gICAgaWYgKHNlcGFyYXRpb25CID4gdG90YWxSYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcG9seTEgPSB2b2lkIDA7XG4gICAgcG9seTIgPSB2b2lkIDA7XG4gICAgeGYxID0gdm9pZCAwO1xuICAgIHhmMiA9IHZvaWQgMDtcbiAgICBlZGdlMSA9IDA7XG4gICAgZmxpcCA9IDA7XG4gICAga19yZWxhdGl2ZVRvbCA9IDAuOTg7XG4gICAga19hYnNvbHV0ZVRvbCA9IDAuMDAxO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgaWYgKHNlcGFyYXRpb25CID4ga19yZWxhdGl2ZVRvbCAqIHNlcGFyYXRpb25BICsga19hYnNvbHV0ZVRvbCkge1xuICAgICAgcG9seTEgPSBwb2x5QjtcbiAgICAgIHBvbHkyID0gcG9seUE7XG4gICAgICB4ZjEgPSB4ZkI7XG4gICAgICB4ZjIgPSB4ZkE7XG4gICAgICBlZGdlMSA9IGVkZ2VCO1xuICAgICAgbWFuaWZvbGQubV90eXBlID0gYjJNYW5pZm9sZC5lX2ZhY2VCO1xuICAgICAgZmxpcCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvbHkxID0gcG9seUE7XG4gICAgICBwb2x5MiA9IHBvbHlCO1xuICAgICAgeGYxID0geGZBO1xuICAgICAgeGYyID0geGZCO1xuICAgICAgZWRnZTEgPSBlZGdlQTtcbiAgICAgIG1hbmlmb2xkLm1fdHlwZSA9IGIyTWFuaWZvbGQuZV9mYWNlQTtcbiAgICAgIGZsaXAgPSAwO1xuICAgIH1cbiAgICBpbmNpZGVudEVkZ2UgPSBiMkNvbGxpc2lvbi5zX2luY2lkZW50RWRnZTtcbiAgICBiMkNvbGxpc2lvbi5GaW5kSW5jaWRlbnRFZGdlKGluY2lkZW50RWRnZSwgcG9seTEsIHhmMSwgZWRnZTEsIHBvbHkyLCB4ZjIpO1xuICAgIGNvdW50MSA9IHBhcnNlSW50KHBvbHkxLm1fdmVydGV4Q291bnQpO1xuICAgIHZlcnRpY2VzMSA9IHBvbHkxLm1fdmVydGljZXM7XG4gICAgbG9jYWxfdjExID0gdmVydGljZXMxW2VkZ2UxXTtcbiAgICBsb2NhbF92MTIgPSB2b2lkIDA7XG4gICAgaWYgKGVkZ2UxICsgMSA8IGNvdW50MSkge1xuICAgICAgbG9jYWxfdjEyID0gdmVydGljZXMxW3BhcnNlSW50KGVkZ2UxICsgMSldO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbF92MTIgPSB2ZXJ0aWNlczFbMF07XG4gICAgfVxuICAgIGxvY2FsVGFuZ2VudCA9IGIyQ29sbGlzaW9uLnNfbG9jYWxUYW5nZW50O1xuICAgIGxvY2FsVGFuZ2VudC5TZXQobG9jYWxfdjEyLnggLSBsb2NhbF92MTEueCwgbG9jYWxfdjEyLnkgLSBsb2NhbF92MTEueSk7XG4gICAgbG9jYWxUYW5nZW50Lk5vcm1hbGl6ZSgpO1xuICAgIGxvY2FsTm9ybWFsID0gYjJDb2xsaXNpb24uc19sb2NhbE5vcm1hbDtcbiAgICBsb2NhbE5vcm1hbC54ID0gbG9jYWxUYW5nZW50Lnk7XG4gICAgbG9jYWxOb3JtYWwueSA9IC1sb2NhbFRhbmdlbnQueDtcbiAgICBwbGFuZVBvaW50ID0gYjJDb2xsaXNpb24uc19wbGFuZVBvaW50O1xuICAgIHBsYW5lUG9pbnQuU2V0KDAuNSAqIChsb2NhbF92MTEueCArIGxvY2FsX3YxMi54KSwgMC41ICogKGxvY2FsX3YxMS55ICsgbG9jYWxfdjEyLnkpKTtcbiAgICB0YW5nZW50ID0gYjJDb2xsaXNpb24uc190YW5nZW50O1xuICAgIHRNYXQgPSB4ZjEuUjtcbiAgICB0YW5nZW50LnggPSB0TWF0LmNvbDEueCAqIGxvY2FsVGFuZ2VudC54ICsgdE1hdC5jb2wyLnggKiBsb2NhbFRhbmdlbnQueTtcbiAgICB0YW5nZW50LnkgPSB0TWF0LmNvbDEueSAqIGxvY2FsVGFuZ2VudC54ICsgdE1hdC5jb2wyLnkgKiBsb2NhbFRhbmdlbnQueTtcbiAgICB0YW5nZW50MiA9IGIyQ29sbGlzaW9uLnNfdGFuZ2VudDI7XG4gICAgdGFuZ2VudDIueCA9IC10YW5nZW50Lng7XG4gICAgdGFuZ2VudDIueSA9IC10YW5nZW50Lnk7XG4gICAgbm9ybWFsID0gYjJDb2xsaXNpb24uc19ub3JtYWw7XG4gICAgbm9ybWFsLnggPSB0YW5nZW50Lnk7XG4gICAgbm9ybWFsLnkgPSAtdGFuZ2VudC54O1xuICAgIHYxMSA9IGIyQ29sbGlzaW9uLnNfdjExO1xuICAgIHYxMiA9IGIyQ29sbGlzaW9uLnNfdjEyO1xuICAgIHYxMS54ID0geGYxLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiBsb2NhbF92MTEueCArIHRNYXQuY29sMi54ICogbG9jYWxfdjExLnkpO1xuICAgIHYxMS55ID0geGYxLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiBsb2NhbF92MTEueCArIHRNYXQuY29sMi55ICogbG9jYWxfdjExLnkpO1xuICAgIHYxMi54ID0geGYxLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiBsb2NhbF92MTIueCArIHRNYXQuY29sMi54ICogbG9jYWxfdjEyLnkpO1xuICAgIHYxMi55ID0geGYxLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiBsb2NhbF92MTIueCArIHRNYXQuY29sMi55ICogbG9jYWxfdjEyLnkpO1xuICAgIGZyb250T2Zmc2V0ID0gbm9ybWFsLnggKiB2MTEueCArIG5vcm1hbC55ICogdjExLnk7XG4gICAgc2lkZU9mZnNldDEgPSAoLXRhbmdlbnQueCAqIHYxMS54KSAtIHRhbmdlbnQueSAqIHYxMS55ICsgdG90YWxSYWRpdXM7XG4gICAgc2lkZU9mZnNldDIgPSB0YW5nZW50LnggKiB2MTIueCArIHRhbmdlbnQueSAqIHYxMi55ICsgdG90YWxSYWRpdXM7XG4gICAgY2xpcFBvaW50czEgPSBiMkNvbGxpc2lvbi5zX2NsaXBQb2ludHMxO1xuICAgIGNsaXBQb2ludHMyID0gYjJDb2xsaXNpb24uc19jbGlwUG9pbnRzMjtcbiAgICBucCA9IDA7XG4gICAgbnAgPSBiMkNvbGxpc2lvbi5DbGlwU2VnbWVudFRvTGluZShjbGlwUG9pbnRzMSwgaW5jaWRlbnRFZGdlLCB0YW5nZW50Miwgc2lkZU9mZnNldDEpO1xuICAgIGlmIChucCA8IDIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbnAgPSBiMkNvbGxpc2lvbi5DbGlwU2VnbWVudFRvTGluZShjbGlwUG9pbnRzMiwgY2xpcFBvaW50czEsIHRhbmdlbnQsIHNpZGVPZmZzZXQyKTtcbiAgICBpZiAobnAgPCAyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5TZXRWKGxvY2FsTm9ybWFsKTtcbiAgICBtYW5pZm9sZC5tX2xvY2FsUG9pbnQuU2V0VihwbGFuZVBvaW50KTtcbiAgICBwb2ludENvdW50ID0gMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpIHtcbiAgICAgIGN2ID0gY2xpcFBvaW50czJbaV07XG4gICAgICBzZXBhcmF0aW9uID0gbm9ybWFsLnggKiBjdi52LnggKyBub3JtYWwueSAqIGN2LnYueSAtIGZyb250T2Zmc2V0O1xuICAgICAgaWYgKHNlcGFyYXRpb24gPD0gdG90YWxSYWRpdXMpIHtcbiAgICAgICAgY3AgPSBtYW5pZm9sZC5tX3BvaW50c1twb2ludENvdW50XTtcbiAgICAgICAgdE1hdCA9IHhmMi5SO1xuICAgICAgICB0WCA9IGN2LnYueCAtIHhmMi5wb3NpdGlvbi54O1xuICAgICAgICB0WSA9IGN2LnYueSAtIHhmMi5wb3NpdGlvbi55O1xuICAgICAgICBjcC5tX2xvY2FsUG9pbnQueCA9IHRYICogdE1hdC5jb2wxLnggKyB0WSAqIHRNYXQuY29sMS55O1xuICAgICAgICBjcC5tX2xvY2FsUG9pbnQueSA9IHRYICogdE1hdC5jb2wyLnggKyB0WSAqIHRNYXQuY29sMi55O1xuICAgICAgICBjcC5tX2lkLlNldChjdi5pZCk7XG4gICAgICAgIGNwLm1faWQuZmVhdHVyZXMuZmxpcCA9IGZsaXA7XG4gICAgICAgICsrcG9pbnRDb3VudDtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gcG9pbnRDb3VudDtcbiAgfTtcblxuICBiMkNvbGxpc2lvbi5Db2xsaWRlQ2lyY2xlcyA9IGZ1bmN0aW9uKG1hbmlmb2xkLCBjaXJjbGUxLCB4ZjEsIGNpcmNsZTIsIHhmMikge1xuICAgIHZhciBkWCwgZFksIGRpc3RTcXIsIHAxWCwgcDFZLCBwMlgsIHAyWSwgcmFkaXVzLCB0TWF0LCB0VmVjO1xuICAgIG1hbmlmb2xkLm1fcG9pbnRDb3VudCA9IDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHRNYXQgPSB4ZjEuUjtcbiAgICB0VmVjID0gY2lyY2xlMS5tX3A7XG4gICAgcDFYID0geGYxLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgcDFZID0geGYxLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgdE1hdCA9IHhmMi5SO1xuICAgIHRWZWMgPSBjaXJjbGUyLm1fcDtcbiAgICBwMlggPSB4ZjIucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICBwMlkgPSB4ZjIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICBkWCA9IHAyWCAtIHAxWDtcbiAgICBkWSA9IHAyWSAtIHAxWTtcbiAgICBkaXN0U3FyID0gZFggKiBkWCArIGRZICogZFk7XG4gICAgcmFkaXVzID0gY2lyY2xlMS5tX3JhZGl1cyArIGNpcmNsZTIubV9yYWRpdXM7XG4gICAgaWYgKGRpc3RTcXIgPiByYWRpdXMgKiByYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbWFuaWZvbGQubV90eXBlID0gYjJNYW5pZm9sZC5lX2NpcmNsZXM7XG4gICAgbWFuaWZvbGQubV9sb2NhbFBvaW50LlNldFYoY2lyY2xlMS5tX3ApO1xuICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5TZXRaZXJvKCk7XG4gICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gMTtcbiAgICBtYW5pZm9sZC5tX3BvaW50c1swXS5tX2xvY2FsUG9pbnQuU2V0VihjaXJjbGUyLm1fcCk7XG4gICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9pZC5rZXkgPSAwO1xuICB9O1xuXG4gIGIyQ29sbGlzaW9uLkNvbGxpZGVQb2x5Z29uQW5kQ2lyY2xlID0gZnVuY3Rpb24obWFuaWZvbGQsIHBvbHlnb24sIHhmMSwgY2lyY2xlLCB4ZjIpIHtcbiAgICB2YXIgY0xvY2FsWCwgY0xvY2FsWSwgY1gsIGNZLCBkWCwgZFksIGRpc3QsIGZhY2VDZW50ZXJYLCBmYWNlQ2VudGVyWSwgaSwgbm9ybWFsSW5kZXgsIG5vcm1hbHMsIHBvc2l0aW9uWCwgcG9zaXRpb25ZLCByYWRpdXMsIHMsIHNlcGFyYXRpb24sIHRNYXQsIHRQb2ludCwgdFZlYywgdTEsIHUyLCB2MSwgdjIsIHZlcnRJbmRleDEsIHZlcnRJbmRleDIsIHZlcnRleENvdW50LCB2ZXJ0aWNlcztcbiAgICBtYW5pZm9sZC5tX3BvaW50Q291bnQgPSAwO1xuICAgIHRQb2ludCA9IHZvaWQgMDtcbiAgICBkWCA9IDA7XG4gICAgZFkgPSAwO1xuICAgIHBvc2l0aW9uWCA9IDA7XG4gICAgcG9zaXRpb25ZID0gMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdE1hdCA9IHhmMi5SO1xuICAgIHRWZWMgPSBjaXJjbGUubV9wO1xuICAgIGNYID0geGYyLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgY1kgPSB4ZjIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICBkWCA9IGNYIC0geGYxLnBvc2l0aW9uLng7XG4gICAgZFkgPSBjWSAtIHhmMS5wb3NpdGlvbi55O1xuICAgIHRNYXQgPSB4ZjEuUjtcbiAgICBjTG9jYWxYID0gZFggKiB0TWF0LmNvbDEueCArIGRZICogdE1hdC5jb2wxLnk7XG4gICAgY0xvY2FsWSA9IGRYICogdE1hdC5jb2wyLnggKyBkWSAqIHRNYXQuY29sMi55O1xuICAgIGRpc3QgPSAwO1xuICAgIG5vcm1hbEluZGV4ID0gMDtcbiAgICBzZXBhcmF0aW9uID0gLU51bWJlci5NQVhfVkFMVUU7XG4gICAgcmFkaXVzID0gcG9seWdvbi5tX3JhZGl1cyArIGNpcmNsZS5tX3JhZGl1cztcbiAgICB2ZXJ0ZXhDb3VudCA9IHBhcnNlSW50KHBvbHlnb24ubV92ZXJ0ZXhDb3VudCk7XG4gICAgdmVydGljZXMgPSBwb2x5Z29uLm1fdmVydGljZXM7XG4gICAgbm9ybWFscyA9IHBvbHlnb24ubV9ub3JtYWxzO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdmVydGV4Q291bnQpIHtcbiAgICAgIHRWZWMgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIGRYID0gY0xvY2FsWCAtIHRWZWMueDtcbiAgICAgIGRZID0gY0xvY2FsWSAtIHRWZWMueTtcbiAgICAgIHRWZWMgPSBub3JtYWxzW2ldO1xuICAgICAgcyA9IHRWZWMueCAqIGRYICsgdFZlYy55ICogZFk7XG4gICAgICBpZiAocyA+IHJhZGl1cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocyA+IHNlcGFyYXRpb24pIHtcbiAgICAgICAgc2VwYXJhdGlvbiA9IHM7XG4gICAgICAgIG5vcm1hbEluZGV4ID0gaTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgdmVydEluZGV4MSA9IHBhcnNlSW50KG5vcm1hbEluZGV4KTtcbiAgICB2ZXJ0SW5kZXgyID0gcGFyc2VJbnQoKHZlcnRJbmRleDEgKyAxIDwgdmVydGV4Q291bnQgPyB2ZXJ0SW5kZXgxICsgMSA6IDApKTtcbiAgICB2MSA9IHZlcnRpY2VzW3ZlcnRJbmRleDFdO1xuICAgIHYyID0gdmVydGljZXNbdmVydEluZGV4Ml07XG4gICAgaWYgKHNlcGFyYXRpb24gPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICBtYW5pZm9sZC5tX3BvaW50Q291bnQgPSAxO1xuICAgICAgbWFuaWZvbGQubV90eXBlID0gYjJNYW5pZm9sZC5lX2ZhY2VBO1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLlNldFYobm9ybWFsc1tub3JtYWxJbmRleF0pO1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBvaW50LnggPSAwLjUgKiAodjEueCArIHYyLngpO1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBvaW50LnkgPSAwLjUgKiAodjEueSArIHYyLnkpO1xuICAgICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9sb2NhbFBvaW50LlNldFYoY2lyY2xlLm1fcCk7XG4gICAgICBtYW5pZm9sZC5tX3BvaW50c1swXS5tX2lkLmtleSA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHUxID0gKGNMb2NhbFggLSB2MS54KSAqICh2Mi54IC0gdjEueCkgKyAoY0xvY2FsWSAtIHYxLnkpICogKHYyLnkgLSB2MS55KTtcbiAgICB1MiA9IChjTG9jYWxYIC0gdjIueCkgKiAodjEueCAtIHYyLngpICsgKGNMb2NhbFkgLSB2Mi55KSAqICh2MS55IC0gdjIueSk7XG4gICAgaWYgKHUxIDw9IDAuMCkge1xuICAgICAgaWYgKChjTG9jYWxYIC0gdjEueCkgKiAoY0xvY2FsWCAtIHYxLngpICsgKGNMb2NhbFkgLSB2MS55KSAqIChjTG9jYWxZIC0gdjEueSkgPiByYWRpdXMgKiByYWRpdXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbWFuaWZvbGQubV9wb2ludENvdW50ID0gMTtcbiAgICAgIG1hbmlmb2xkLm1fdHlwZSA9IGIyTWFuaWZvbGQuZV9mYWNlQTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC54ID0gY0xvY2FsWCAtIHYxLng7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwueSA9IGNMb2NhbFkgLSB2MS55O1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLk5vcm1hbGl6ZSgpO1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBvaW50LlNldFYodjEpO1xuICAgICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9sb2NhbFBvaW50LlNldFYoY2lyY2xlLm1fcCk7XG4gICAgICBtYW5pZm9sZC5tX3BvaW50c1swXS5tX2lkLmtleSA9IDA7XG4gICAgfSBlbHNlIGlmICh1MiA8PSAwKSB7XG4gICAgICBpZiAoKGNMb2NhbFggLSB2Mi54KSAqIChjTG9jYWxYIC0gdjIueCkgKyAoY0xvY2FsWSAtIHYyLnkpICogKGNMb2NhbFkgLSB2Mi55KSA+IHJhZGl1cyAqIHJhZGl1cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBtYW5pZm9sZC5tX3BvaW50Q291bnQgPSAxO1xuICAgICAgbWFuaWZvbGQubV90eXBlID0gYjJNYW5pZm9sZC5lX2ZhY2VBO1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnggPSBjTG9jYWxYIC0gdjIueDtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC55ID0gY0xvY2FsWSAtIHYyLnk7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwuTm9ybWFsaXplKCk7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUG9pbnQuU2V0Vih2Mik7XG4gICAgICBtYW5pZm9sZC5tX3BvaW50c1swXS5tX2xvY2FsUG9pbnQuU2V0VihjaXJjbGUubV9wKTtcbiAgICAgIG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1faWQua2V5ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgZmFjZUNlbnRlclggPSAwLjUgKiAodjEueCArIHYyLngpO1xuICAgICAgZmFjZUNlbnRlclkgPSAwLjUgKiAodjEueSArIHYyLnkpO1xuICAgICAgc2VwYXJhdGlvbiA9IChjTG9jYWxYIC0gZmFjZUNlbnRlclgpICogbm9ybWFsc1t2ZXJ0SW5kZXgxXS54ICsgKGNMb2NhbFkgLSBmYWNlQ2VudGVyWSkgKiBub3JtYWxzW3ZlcnRJbmRleDFdLnk7XG4gICAgICBpZiAoc2VwYXJhdGlvbiA+IHJhZGl1cykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBtYW5pZm9sZC5tX3BvaW50Q291bnQgPSAxO1xuICAgICAgbWFuaWZvbGQubV90eXBlID0gYjJNYW5pZm9sZC5lX2ZhY2VBO1xuICAgICAgbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnggPSBub3JtYWxzW3ZlcnRJbmRleDFdLng7XG4gICAgICBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWwueSA9IG5vcm1hbHNbdmVydEluZGV4MV0ueTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC5Ob3JtYWxpemUoKTtcbiAgICAgIG1hbmlmb2xkLm1fbG9jYWxQb2ludC5TZXQoZmFjZUNlbnRlclgsIGZhY2VDZW50ZXJZKTtcbiAgICAgIG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1fbG9jYWxQb2ludC5TZXRWKGNpcmNsZS5tX3ApO1xuICAgICAgbWFuaWZvbGQubV9wb2ludHNbMF0ubV9pZC5rZXkgPSAwO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbGxpc2lvbi5UZXN0T3ZlcmxhcCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgZDFYLCBkMVksIGQyWCwgZDJZLCB0MSwgdDI7XG4gICAgdDEgPSBiLmxvd2VyQm91bmQ7XG4gICAgdDIgPSBhLnVwcGVyQm91bmQ7XG4gICAgZDFYID0gdDEueCAtIHQyLng7XG4gICAgZDFZID0gdDEueSAtIHQyLnk7XG4gICAgdDEgPSBhLmxvd2VyQm91bmQ7XG4gICAgdDIgPSBiLnVwcGVyQm91bmQ7XG4gICAgZDJYID0gdDEueCAtIHQyLng7XG4gICAgZDJZID0gdDEueSAtIHQyLnk7XG4gICAgaWYgKGQxWCA+IDAuMCB8fCBkMVkgPiAwLjApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGQyWCA+IDAuMCB8fCBkMlkgPiAwLjApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgYjJDb2xsaXNpb24uc19pbmNpZGVudEVkZ2UgPSBiMkNvbGxpc2lvbi5NYWtlQ2xpcFBvaW50VmVjdG9yKCk7XG5cbiAgYjJDb2xsaXNpb24uc19jbGlwUG9pbnRzMSA9IGIyQ29sbGlzaW9uLk1ha2VDbGlwUG9pbnRWZWN0b3IoKTtcblxuICBiMkNvbGxpc2lvbi5zX2NsaXBQb2ludHMyID0gYjJDb2xsaXNpb24uTWFrZUNsaXBQb2ludFZlY3RvcigpO1xuXG4gIHJldHVybiBiMkNvbGxpc2lvbjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb2xsaXNpb24uanMubWFwXG4iLCJ2YXIgQm94MkQsIEZlYXR1cmVzO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkZlYXR1cmVzID0gQm94MkQuQ29sbGlzaW9uLkZlYXR1cmVzO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdElELnByb3RvdHlwZS5rZXkgPSBudWxsO1xuXG4gIGIyQ29udGFjdElELnByb3RvdHlwZS5mZWF0dXJlcyA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJDb250YWN0SUQoKSB7XG4gICAgdGhpcy5mZWF0dXJlcyA9IG5ldyBGZWF0dXJlcygpO1xuICAgIHRoaXMuZmVhdHVyZXMuX21faWQgPSB0aGlzO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ29udGFjdElELnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihpZCkge1xuICAgIHRoaXMua2V5ID0gaWQuX2tleTtcbiAgfTtcblxuICBiMkNvbnRhY3RJRC5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZDtcbiAgICBpZCA9IG5ldyBiMkNvbnRhY3RJRCgpO1xuICAgIGlkLmtleSA9IHRoaXMua2V5O1xuICAgIHJldHVybiBpZDtcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhiMkNvbnRhY3RJRC5wcm90b3R5cGUsIHtcbiAgICBrZXk6IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2tleSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmZlYXR1cmVzLl9yZWZlcmVuY2VFZGdlID0gdGhpcy5fa2V5ICYgMHgwMDAwMDBmZjtcbiAgICAgICAgdGhpcy5mZWF0dXJlcy5faW5jaWRlbnRFZGdlID0gKCh0aGlzLl9rZXkgJiAweDAwMDBmZjAwKSA+PiA4KSAmIDB4MDAwMDAwZmY7XG4gICAgICAgIHRoaXMuZmVhdHVyZXMuX2luY2lkZW50VmVydGV4ID0gKCh0aGlzLl9rZXkgJiAweDAwZmYwMDAwKSA+PiAxNikgJiAweDAwMDAwMGZmO1xuICAgICAgICB0aGlzLmZlYXR1cmVzLl9mbGlwID0gKCh0aGlzLl9rZXkgJiAweGZmMDAwMDAwKSA+PiAyNCkgJiAweDAwMDAwMGZmO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGIyQ29udGFjdElEO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RJRC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0SUQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyQ29udGFjdElEID0gQm94MkQuQ29sbGlzaW9uLmIyQ29udGFjdElEO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJDb250YWN0UG9pbnQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdFBvaW50LnByb3RvdHlwZS5wb3NpdGlvbiA9IG51bGw7XG5cbiAgYjJDb250YWN0UG9pbnQucHJvdG90eXBlLnZlbG9jaXR5ID0gbnVsbDtcblxuICBiMkNvbnRhY3RQb2ludC5wcm90b3R5cGUubm9ybWFsID0gbnVsbDtcblxuICBiMkNvbnRhY3RQb2ludC5wcm90b3R5cGUuaWQgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdFBvaW50KCkge1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm5vcm1hbCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmlkID0gbmV3IGIyQ29udGFjdElEKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyQ29udGFjdFBvaW50O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RQb2ludC5qcy5tYXBcbiIsInZhciBCb3gyRCwgVmVjdG9yLCBiMlNpbXBsZXg7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5iMlNpbXBsZXggPSBCb3gyRC5Db2xsaXNpb24uYjJTaW1wbGV4O1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJEaXN0YW5jZShvdXRwdXQsIGNhY2hlLCBpbnB1dCkge1xuICAgIHZhciBjbG9zZXN0UG9pbnQsIGQsIGRpc3RhbmNlU3FyMSwgZGlzdGFuY2VTcXIyLCBkdXBsaWNhdGUsIGksIGl0ZXIsIGtfbWF4SXRlcnMsIG5vcm1hbCwgcCwgcHJveHlBLCBwcm94eUIsIHJBLCByQiwgc2F2ZUEsIHNhdmVCLCBzYXZlQ291bnQsIHNpbXBsZXgsIHRyYW5zZm9ybUEsIHRyYW5zZm9ybUIsIHZlcnRleCwgdmVydGljZXM7XG4gICAgKytiMkRpc3RhbmNlLmIyX2dqa0NhbGxzO1xuICAgIHByb3h5QSA9IGlucHV0LnByb3h5QTtcbiAgICBwcm94eUIgPSBpbnB1dC5wcm94eUI7XG4gICAgdHJhbnNmb3JtQSA9IGlucHV0LnRyYW5zZm9ybUE7XG4gICAgdHJhbnNmb3JtQiA9IGlucHV0LnRyYW5zZm9ybUI7XG4gICAgc2ltcGxleCA9IGIyRGlzdGFuY2Uuc19zaW1wbGV4O1xuICAgIHNpbXBsZXguUmVhZENhY2hlKGNhY2hlLCBwcm94eUEsIHRyYW5zZm9ybUEsIHByb3h5QiwgdHJhbnNmb3JtQik7XG4gICAgdmVydGljZXMgPSBzaW1wbGV4Lm1fdmVydGljZXM7XG4gICAga19tYXhJdGVycyA9IDIwO1xuICAgIHNhdmVBID0gYjJEaXN0YW5jZS5zX3NhdmVBO1xuICAgIHNhdmVCID0gYjJEaXN0YW5jZS5zX3NhdmVCO1xuICAgIHNhdmVDb3VudCA9IDA7XG4gICAgY2xvc2VzdFBvaW50ID0gc2ltcGxleC5HZXRDbG9zZXN0UG9pbnQoKTtcbiAgICBkaXN0YW5jZVNxcjEgPSBjbG9zZXN0UG9pbnQuTGVuZ3RoU3F1YXJlZCgpO1xuICAgIGRpc3RhbmNlU3FyMiA9IGRpc3RhbmNlU3FyMTtcbiAgICBpID0gMDtcbiAgICBwID0gdm9pZCAwO1xuICAgIGl0ZXIgPSAwO1xuICAgIHdoaWxlIChpdGVyIDwga19tYXhJdGVycykge1xuICAgICAgc2F2ZUNvdW50ID0gc2ltcGxleC5tX2NvdW50O1xuICAgICAgaSA9IDA7XG4gICAgICB3aGlsZSAoaSA8IHNhdmVDb3VudCkge1xuICAgICAgICBzYXZlQVtpXSA9IHZlcnRpY2VzW2ldLmluZGV4QTtcbiAgICAgICAgc2F2ZUJbaV0gPSB2ZXJ0aWNlc1tpXS5pbmRleEI7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoc2ltcGxleC5tX2NvdW50KSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNpbXBsZXguU29sdmUyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzaW1wbGV4LlNvbHZlMygpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgfVxuICAgICAgaWYgKHNpbXBsZXgubV9jb3VudCA9PT0gMykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHAgPSBzaW1wbGV4LkdldENsb3Nlc3RQb2ludCgpO1xuICAgICAgZGlzdGFuY2VTcXIyID0gcC5MZW5ndGhTcXVhcmVkKCk7XG5cbiAgICAgIC8qKlxuICAgICAgdG9kbzogdGhpcyBsb29rcyBsaWtlIGEgYnVnXG4gICAgICAgKi9cbiAgICAgIGRpc3RhbmNlU3FyMSA9IGRpc3RhbmNlU3FyMjtcbiAgICAgIGQgPSBzaW1wbGV4LkdldFNlYXJjaERpcmVjdGlvbigpO1xuICAgICAgaWYgKGQuTGVuZ3RoU3F1YXJlZCgpIDwgTnVtYmVyLk1JTl9WQUxVRSAqIE51bWJlci5NSU5fVkFMVUUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB2ZXJ0ZXggPSB2ZXJ0aWNlc1tzaW1wbGV4Lm1fY291bnRdO1xuICAgICAgdmVydGV4LmluZGV4QSA9IHByb3h5QS5HZXRTdXBwb3J0KGIyTWF0aC5NdWxUTVYodHJhbnNmb3JtQS5SLCBkLkdldE5lZ2F0aXZlKCkpKTtcbiAgICAgIHZlcnRleC53QSA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIHByb3h5QS5HZXRWZXJ0ZXgodmVydGV4LmluZGV4QSkpO1xuICAgICAgdmVydGV4LmluZGV4QiA9IHByb3h5Qi5HZXRTdXBwb3J0KGIyTWF0aC5NdWxUTVYodHJhbnNmb3JtQi5SLCBkKSk7XG4gICAgICB2ZXJ0ZXgud0IgPSBiMk1hdGguTXVsWCh0cmFuc2Zvcm1CLCBwcm94eUIuR2V0VmVydGV4KHZlcnRleC5pbmRleEIpKTtcbiAgICAgIHZlcnRleC53ID0gYjJNYXRoLlN1YnRyYWN0VlYodmVydGV4LndCLCB2ZXJ0ZXgud0EpO1xuICAgICAgKytpdGVyO1xuICAgICAgKytiMkRpc3RhbmNlLmIyX2dqa0l0ZXJzO1xuICAgICAgZHVwbGljYXRlID0gZmFsc2U7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgc2F2ZUNvdW50KSB7XG4gICAgICAgIGlmICh2ZXJ0ZXguaW5kZXhBID09PSBzYXZlQVtpXSAmJiB2ZXJ0ZXguaW5kZXhCID09PSBzYXZlQltpXSkge1xuICAgICAgICAgIGR1cGxpY2F0ZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaSsrO1xuICAgICAgfVxuICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgICsrc2ltcGxleC5tX2NvdW50O1xuICAgIH1cbiAgICBiMkRpc3RhbmNlLmIyX2dqa01heEl0ZXJzID0gYjJNYXRoLk1heChiMkRpc3RhbmNlLmIyX2dqa01heEl0ZXJzLCBpdGVyKTtcbiAgICBzaW1wbGV4LkdldFdpdG5lc3NQb2ludHMob3V0cHV0LnBvaW50QSwgb3V0cHV0LnBvaW50Qik7XG4gICAgb3V0cHV0LmRpc3RhbmNlID0gYjJNYXRoLlN1YnRyYWN0VlYob3V0cHV0LnBvaW50QSwgb3V0cHV0LnBvaW50QikuTGVuZ3RoKCk7XG4gICAgb3V0cHV0Lml0ZXJhdGlvbnMgPSBpdGVyO1xuICAgIHNpbXBsZXguV3JpdGVDYWNoZShjYWNoZSk7XG4gICAgaWYgKGlucHV0LnVzZVJhZGlpKSB7XG4gICAgICByQSA9IHByb3h5QS5tX3JhZGl1cztcbiAgICAgIHJCID0gcHJveHlCLm1fcmFkaXVzO1xuICAgICAgaWYgKG91dHB1dC5kaXN0YW5jZSA+IHJBICsgckIgJiYgb3V0cHV0LmRpc3RhbmNlID4gTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICBvdXRwdXQuZGlzdGFuY2UgLT0gckEgKyByQjtcbiAgICAgICAgbm9ybWFsID0gYjJNYXRoLlN1YnRyYWN0VlYob3V0cHV0LnBvaW50Qiwgb3V0cHV0LnBvaW50QSk7XG4gICAgICAgIG5vcm1hbC5Ob3JtYWxpemUoKTtcbiAgICAgICAgb3V0cHV0LnBvaW50QS54ICs9IHJBICogbm9ybWFsLng7XG4gICAgICAgIG91dHB1dC5wb2ludEEueSArPSByQSAqIG5vcm1hbC55O1xuICAgICAgICBvdXRwdXQucG9pbnRCLnggLT0gckIgKiBub3JtYWwueDtcbiAgICAgICAgb3V0cHV0LnBvaW50Qi55IC09IHJCICogbm9ybWFsLnk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwID0gbmV3IGIyVmVjMigpO1xuICAgICAgICBwLnggPSAuNSAqIChvdXRwdXQucG9pbnRBLnggKyBvdXRwdXQucG9pbnRCLngpO1xuICAgICAgICBwLnkgPSAuNSAqIChvdXRwdXQucG9pbnRBLnkgKyBvdXRwdXQucG9pbnRCLnkpO1xuICAgICAgICBvdXRwdXQucG9pbnRBLnggPSBvdXRwdXQucG9pbnRCLnggPSBwLng7XG4gICAgICAgIG91dHB1dC5wb2ludEEueSA9IG91dHB1dC5wb2ludEIueSA9IHAueTtcbiAgICAgICAgb3V0cHV0LmRpc3RhbmNlID0gMC4wO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBiMkRpc3RhbmNlLnNfc2ltcGxleCA9IG5ldyBiMlNpbXBsZXgoKTtcblxuICBiMkRpc3RhbmNlLnNfc2F2ZUEgPSBuZXcgVmVjdG9yKDMpO1xuXG4gIGIyRGlzdGFuY2Uuc19zYXZlQiA9IG5ldyBWZWN0b3IoMyk7XG5cbiAgcmV0dXJuIGIyRGlzdGFuY2U7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRGlzdGFuY2UuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VJbnB1dCA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJEaXN0YW5jZUlucHV0KCkge31cblxuICByZXR1cm4gYjJEaXN0YW5jZUlucHV0O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkRpc3RhbmNlSW5wdXQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlT3V0cHV0ID0gKGZ1bmN0aW9uKCkge1xuICBiMkRpc3RhbmNlT3V0cHV0LnByb3RvdHlwZS5wb2ludEEgPSBudWxsO1xuXG4gIGIyRGlzdGFuY2VPdXRwdXQucHJvdG90eXBlLnBvaW50QiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJEaXN0YW5jZU91dHB1dCgpIHtcbiAgICB0aGlzLnBvaW50QSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnBvaW50QiA9IG5ldyBiMlZlYzIoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJEaXN0YW5jZU91dHB1dDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJEaXN0YW5jZU91dHB1dC5qcy5tYXBcbiIsInZhciBCb3gyRCwgVmVjdG9yLCBiMkNpcmNsZVNoYXBlLCBiMlNldHRpbmdzO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyQ2lyY2xlU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyQ2lyY2xlU2hhcGU7XG5cblZlY3RvciA9IEJveDJELlZlY3RvcjtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZVByb3h5ID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkRpc3RhbmNlUHJveHkoKSB7fVxuXG4gIGIyRGlzdGFuY2VQcm94eS5wcm90b3R5cGUubV92ZXJ0aWNlcyA9IG51bGw7XG5cbiAgYjJEaXN0YW5jZVByb3h5LnByb3RvdHlwZS5tX2NvdW50ID0gMDtcblxuICBiMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLm1fcmFkaXVzID0gMDtcblxuICBiMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKHNoYXBlKSB7XG4gICAgdmFyIGNpcmNsZSwgcG9seWdvbjtcbiAgICBzd2l0Y2ggKHNoYXBlLkdldFR5cGUoKSkge1xuICAgICAgY2FzZSBiMlNoYXBlLmVfY2lyY2xlU2hhcGU6XG4gICAgICAgIGNpcmNsZSA9IChzaGFwZSBpbnN0YW5jZW9mIGIyQ2lyY2xlU2hhcGUgPyBzaGFwZSA6IG51bGwpO1xuICAgICAgICB0aGlzLm1fdmVydGljZXMgPSBuZXcgVmVjdG9yKDEsIHRydWUpO1xuICAgICAgICB0aGlzLm1fdmVydGljZXNbMF0gPSBjaXJjbGUubV9wO1xuICAgICAgICB0aGlzLm1fY291bnQgPSAxO1xuICAgICAgICB0aGlzLm1fcmFkaXVzID0gY2lyY2xlLm1fcmFkaXVzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgYjJTaGFwZS5lX3BvbHlnb25TaGFwZTpcbiAgICAgICAgcG9seWdvbiA9IChzaGFwZSBpbnN0YW5jZW9mIGIyUG9seWdvblNoYXBlID8gc2hhcGUgOiBudWxsKTtcbiAgICAgICAgdGhpcy5tX3ZlcnRpY2VzID0gcG9seWdvbi5tX3ZlcnRpY2VzO1xuICAgICAgICB0aGlzLm1fY291bnQgPSBwb2x5Z29uLm1fdmVydGV4Q291bnQ7XG4gICAgICAgIHRoaXMubV9yYWRpdXMgPSBwb2x5Z29uLm1fcmFkaXVzO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBiMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLkdldFN1cHBvcnQgPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGJlc3RJbmRleCwgYmVzdFZhbHVlLCBpLCB2YWx1ZTtcbiAgICBiZXN0SW5kZXggPSAwO1xuICAgIGJlc3RWYWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1swXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzWzBdLnkgKiBkLnk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tX3ZlcnRpY2VzW2ldLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbaV0ueSAqIGQueTtcbiAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICBiZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcmV0dXJuIGJlc3RJbmRleDtcbiAgfTtcblxuICBiMkRpc3RhbmNlUHJveHkucHJvdG90eXBlLkdldFN1cHBvcnRWZXJ0ZXggPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGJlc3RJbmRleCwgYmVzdFZhbHVlLCBpLCB2YWx1ZTtcbiAgICBiZXN0SW5kZXggPSAwO1xuICAgIGJlc3RWYWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1swXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzWzBdLnkgKiBkLnk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tX3ZlcnRpY2VzW2ldLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbaV0ueSAqIGQueTtcbiAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICBiZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubV92ZXJ0aWNlc1tiZXN0SW5kZXhdO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VQcm94eS5wcm90b3R5cGUuR2V0VmVydGV4Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvdW50O1xuICB9O1xuXG4gIGIyRGlzdGFuY2VQcm94eS5wcm90b3R5cGUuR2V0VmVydGV4ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkge1xuICAgICAgaW5kZXggPSAwO1xuICAgIH1cbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KDAgPD0gaW5kZXggJiYgaW5kZXggPCB0aGlzLm1fY291bnQpO1xuICAgIHJldHVybiB0aGlzLm1fdmVydGljZXNbaW5kZXhdO1xuICB9O1xuXG4gIHJldHVybiBiMkRpc3RhbmNlUHJveHk7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRGlzdGFuY2VQcm94eS5qcy5tYXBcbiIsInZhciBCb3gyRCwgVmVjdG9yLCBiMkFBQkIsIGIyRHluYW1pY1RyZWVOb2RlLCBiMk1hdGgsIGIyUmF5Q2FzdElucHV0LCBiMlNldHRpbmdzO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cblZlY3RvciA9IEJveDJELlZlY3RvcjtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyQUFCQiA9IEJveDJELkNvbGxpc2lvbi5iMkFBQkI7XG5cbmIyUmF5Q2FzdElucHV0ID0gQm94MkQuQ29sbGlzaW9uLmIyUmF5Q2FzdElucHV0O1xuXG5iMkR5bmFtaWNUcmVlTm9kZSA9IEJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlTm9kZTtcblxuQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWUgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyRHluYW1pY1RyZWUoKSB7XG4gICAgdGhpcy5tX3Jvb3QgPSBudWxsO1xuICAgIHRoaXMubV9mcmVlTGlzdCA9IG51bGw7XG4gICAgdGhpcy5tX3BhdGggPSAwO1xuICAgIHRoaXMubV9pbnNlcnRpb25Db3VudCA9IDA7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuQ3JlYXRlUHJveHkgPSBmdW5jdGlvbihhYWJiLCB1c2VyRGF0YSkge1xuICAgIHZhciBleHRlbmRYLCBleHRlbmRZLCBub2RlO1xuICAgIG5vZGUgPSB0aGlzLkFsbG9jYXRlTm9kZSgpO1xuICAgIGV4dGVuZFggPSBiMlNldHRpbmdzLmIyX2FhYmJFeHRlbnNpb247XG4gICAgZXh0ZW5kWSA9IGIyU2V0dGluZ3MuYjJfYWFiYkV4dGVuc2lvbjtcbiAgICBub2RlLmFhYmIubG93ZXJCb3VuZC54ID0gYWFiYi5sb3dlckJvdW5kLnggLSBleHRlbmRYO1xuICAgIG5vZGUuYWFiYi5sb3dlckJvdW5kLnkgPSBhYWJiLmxvd2VyQm91bmQueSAtIGV4dGVuZFk7XG4gICAgbm9kZS5hYWJiLnVwcGVyQm91bmQueCA9IGFhYmIudXBwZXJCb3VuZC54ICsgZXh0ZW5kWDtcbiAgICBub2RlLmFhYmIudXBwZXJCb3VuZC55ID0gYWFiYi51cHBlckJvdW5kLnkgKyBleHRlbmRZO1xuICAgIG5vZGUudXNlckRhdGEgPSB1c2VyRGF0YTtcbiAgICB0aGlzLkluc2VydExlYWYobm9kZSk7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuRGVzdHJveVByb3h5ID0gZnVuY3Rpb24ocHJveHkpIHtcbiAgICB0aGlzLlJlbW92ZUxlYWYocHJveHkpO1xuICAgIHRoaXMuRnJlZU5vZGUocHJveHkpO1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWUucHJvdG90eXBlLk1vdmVQcm94eSA9IGZ1bmN0aW9uKHByb3h5LCBhYWJiLCBkaXNwbGFjZW1lbnQpIHtcbiAgICB2YXIgZXh0ZW5kWCwgZXh0ZW5kWTtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KHByb3h5LklzTGVhZigpKTtcbiAgICBpZiAocHJveHkuYWFiYi5Db250YWlucyhhYWJiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLlJlbW92ZUxlYWYocHJveHkpO1xuICAgIGV4dGVuZFggPSBiMlNldHRpbmdzLmIyX2FhYmJFeHRlbnNpb24gKyBiMlNldHRpbmdzLmIyX2FhYmJNdWx0aXBsaWVyICogKGRpc3BsYWNlbWVudC54ID4gMCA/IGRpc3BsYWNlbWVudC54IDogLWRpc3BsYWNlbWVudC54KTtcbiAgICBleHRlbmRZID0gYjJTZXR0aW5ncy5iMl9hYWJiRXh0ZW5zaW9uICsgYjJTZXR0aW5ncy5iMl9hYWJiTXVsdGlwbGllciAqIChkaXNwbGFjZW1lbnQueSA+IDAgPyBkaXNwbGFjZW1lbnQueSA6IC1kaXNwbGFjZW1lbnQueSk7XG4gICAgcHJveHkuYWFiYi5sb3dlckJvdW5kLnggPSBhYWJiLmxvd2VyQm91bmQueCAtIGV4dGVuZFg7XG4gICAgcHJveHkuYWFiYi5sb3dlckJvdW5kLnkgPSBhYWJiLmxvd2VyQm91bmQueSAtIGV4dGVuZFk7XG4gICAgcHJveHkuYWFiYi51cHBlckJvdW5kLnggPSBhYWJiLnVwcGVyQm91bmQueCArIGV4dGVuZFg7XG4gICAgcHJveHkuYWFiYi51cHBlckJvdW5kLnkgPSBhYWJiLnVwcGVyQm91bmQueSArIGV4dGVuZFk7XG4gICAgdGhpcy5JbnNlcnRMZWFmKHByb3h5KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5SZWJhbGFuY2UgPSBmdW5jdGlvbihpdGVyYXRpb25zKSB7XG4gICAgdmFyIGJpdCwgaSwgbm9kZTtcbiAgICBpZiAoaXRlcmF0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBpdGVyYXRpb25zID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9yb290ID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBpdGVyYXRpb25zKSB7XG4gICAgICBub2RlID0gdGhpcy5tX3Jvb3Q7XG4gICAgICBiaXQgPSAwO1xuICAgICAgd2hpbGUgKG5vZGUuSXNMZWFmKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIG5vZGUgPSAoKHRoaXMubV9wYXRoID4+IGJpdCkgJiAxID8gbm9kZS5jaGlsZDIgOiBub2RlLmNoaWxkMSk7XG4gICAgICAgIGJpdCA9IChiaXQgKyAxKSAmIDMxO1xuICAgICAgfVxuICAgICAgKyt0aGlzLm1fcGF0aDtcbiAgICAgIHRoaXMuUmVtb3ZlTGVhZihub2RlKTtcbiAgICAgIHRoaXMuSW5zZXJ0TGVhZihub2RlKTtcbiAgICAgIGkrKztcbiAgICB9XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuR2V0RmF0QUFCQiA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgcmV0dXJuIHByb3h5LmFhYmI7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuR2V0VXNlckRhdGEgPSBmdW5jdGlvbihwcm94eSkge1xuICAgIHJldHVybiBwcm94eS51c2VyRGF0YTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5RdWVyeSA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBhYWJiKSB7XG4gICAgdmFyIGNvdW50LCBub2RlLCBwcm9jZWVkLCBzdGFjaztcbiAgICBpZiAodGhpcy5tX3Jvb3QgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzdGFjayA9IG5ldyBWZWN0b3IoKTtcbiAgICBjb3VudCA9IDA7XG4gICAgc3RhY2tbY291bnQrK10gPSB0aGlzLm1fcm9vdDtcbiAgICB3aGlsZSAoY291bnQgPiAwKSB7XG4gICAgICBub2RlID0gc3RhY2tbLS1jb3VudF07XG4gICAgICBpZiAobm9kZS5hYWJiLlRlc3RPdmVybGFwKGFhYmIpKSB7XG4gICAgICAgIGlmIChub2RlLklzTGVhZigpKSB7XG4gICAgICAgICAgcHJvY2VlZCA9IGNhbGxiYWNrKG5vZGUpO1xuICAgICAgICAgIGlmICghcHJvY2VlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGFja1tjb3VudCsrXSA9IG5vZGUuY2hpbGQxO1xuICAgICAgICAgIHN0YWNrW2NvdW50KytdID0gbm9kZS5jaGlsZDI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBpbnB1dCkge1xuICAgIHZhciBhYnNfdiwgYywgY291bnQsIGgsIG1heEZyYWN0aW9uLCBub2RlLCBwMSwgcDIsIHIsIHNlZ21lbnRBQUJCLCBzZXBhcmF0aW9uLCBzdGFjaywgc3ViSW5wdXQsIHRYLCB0WSwgdjtcbiAgICBpZiAodGhpcy5tX3Jvb3QgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwMSA9IGlucHV0LnAxO1xuICAgIHAyID0gaW5wdXQucDI7XG4gICAgciA9IGIyTWF0aC5TdWJ0cmFjdFZWKHAxLCBwMik7XG4gICAgci5Ob3JtYWxpemUoKTtcbiAgICB2ID0gYjJNYXRoLkNyb3NzRlYoMS4wLCByKTtcbiAgICBhYnNfdiA9IGIyTWF0aC5BYnNWKHYpO1xuICAgIG1heEZyYWN0aW9uID0gaW5wdXQubWF4RnJhY3Rpb247XG4gICAgc2VnbWVudEFBQkIgPSBuZXcgYjJBQUJCKCk7XG4gICAgdFggPSAwO1xuICAgIHRZID0gMDtcbiAgICB0WCA9IHAxLnggKyBtYXhGcmFjdGlvbiAqIChwMi54IC0gcDEueCk7XG4gICAgdFkgPSBwMS55ICsgbWF4RnJhY3Rpb24gKiAocDIueSAtIHAxLnkpO1xuICAgIHNlZ21lbnRBQUJCLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHAxLngsIHRYKTtcbiAgICBzZWdtZW50QUFCQi5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbihwMS55LCB0WSk7XG4gICAgc2VnbWVudEFBQkIudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgocDEueCwgdFgpO1xuICAgIHNlZ21lbnRBQUJCLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHAxLnksIHRZKTtcbiAgICBzdGFjayA9IG5ldyBWZWN0b3IoKTtcbiAgICBjb3VudCA9IDA7XG4gICAgc3RhY2tbY291bnQrK10gPSB0aGlzLm1fcm9vdDtcbiAgICB3aGlsZSAoY291bnQgPiAwKSB7XG4gICAgICBub2RlID0gc3RhY2tbLS1jb3VudF07XG4gICAgICBpZiAobm9kZS5hYWJiLlRlc3RPdmVybGFwKHNlZ21lbnRBQUJCKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjID0gbm9kZS5hYWJiLkdldENlbnRlcigpO1xuICAgICAgaCA9IG5vZGUuYWFiYi5HZXRFeHRlbnRzKCk7XG4gICAgICBzZXBhcmF0aW9uID0gTWF0aC5hYnModi54ICogKHAxLnggLSBjLngpICsgdi55ICogKHAxLnkgLSBjLnkpKSAtIGFic192LnggKiBoLnggLSBhYnNfdi55ICogaC55O1xuICAgICAgaWYgKHNlcGFyYXRpb24gPiAwLjApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5Jc0xlYWYoKSkge1xuICAgICAgICBzdWJJbnB1dCA9IG5ldyBiMlJheUNhc3RJbnB1dCgpO1xuICAgICAgICBzdWJJbnB1dC5wMSA9IGlucHV0LnAxO1xuICAgICAgICBzdWJJbnB1dC5wMiA9IGlucHV0LnAyO1xuICAgICAgICBzdWJJbnB1dC5tYXhGcmFjdGlvbiA9IGlucHV0Lm1heEZyYWN0aW9uO1xuICAgICAgICBtYXhGcmFjdGlvbiA9IGNhbGxiYWNrKHN1YklucHV0LCBub2RlKTtcbiAgICAgICAgaWYgKG1heEZyYWN0aW9uID09PSAwLjApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heEZyYWN0aW9uID4gMC4wKSB7XG4gICAgICAgICAgdFggPSBwMS54ICsgbWF4RnJhY3Rpb24gKiAocDIueCAtIHAxLngpO1xuICAgICAgICAgIHRZID0gcDEueSArIG1heEZyYWN0aW9uICogKHAyLnkgLSBwMS55KTtcbiAgICAgICAgICBzZWdtZW50QUFCQi5sb3dlckJvdW5kLnggPSBNYXRoLm1pbihwMS54LCB0WCk7XG4gICAgICAgICAgc2VnbWVudEFBQkIubG93ZXJCb3VuZC55ID0gTWF0aC5taW4ocDEueSwgdFkpO1xuICAgICAgICAgIHNlZ21lbnRBQUJCLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHAxLngsIHRYKTtcbiAgICAgICAgICBzZWdtZW50QUFCQi51cHBlckJvdW5kLnkgPSBNYXRoLm1heChwMS55LCB0WSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrW2NvdW50KytdID0gbm9kZS5jaGlsZDE7XG4gICAgICAgIHN0YWNrW2NvdW50KytdID0gbm9kZS5jaGlsZDI7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGIyRHluYW1pY1RyZWUucHJvdG90eXBlLkFsbG9jYXRlTm9kZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBub2RlO1xuICAgIGlmICh0aGlzLm1fZnJlZUxpc3QpIHtcbiAgICAgIG5vZGUgPSB0aGlzLm1fZnJlZUxpc3Q7XG4gICAgICB0aGlzLm1fZnJlZUxpc3QgPSBub2RlLnBhcmVudDtcbiAgICAgIG5vZGUucGFyZW50ID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQxID0gbnVsbDtcbiAgICAgIG5vZGUuY2hpbGQyID0gbnVsbDtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyRHluYW1pY1RyZWVOb2RlKCk7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZS5wcm90b3R5cGUuRnJlZU5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgbm9kZS5wYXJlbnQgPSB0aGlzLm1fZnJlZUxpc3Q7XG4gICAgdGhpcy5tX2ZyZWVMaXN0ID0gbm9kZTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5JbnNlcnRMZWFmID0gZnVuY3Rpb24obGVhZikge1xuICAgIHZhciBjZW50ZXIsIGNoaWxkMSwgY2hpbGQyLCBub2RlMSwgbm9kZTIsIG5vcm0xLCBub3JtMiwgc2libGluZztcbiAgICArK3RoaXMubV9pbnNlcnRpb25Db3VudDtcbiAgICBpZiAodGhpcy5tX3Jvb3QgPT0gbnVsbCkge1xuICAgICAgdGhpcy5tX3Jvb3QgPSBsZWFmO1xuICAgICAgdGhpcy5tX3Jvb3QucGFyZW50ID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2VudGVyID0gbGVhZi5hYWJiLkdldENlbnRlcigpO1xuICAgIHNpYmxpbmcgPSB0aGlzLm1fcm9vdDtcbiAgICBpZiAoc2libGluZy5Jc0xlYWYoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNoaWxkMSA9IHNpYmxpbmcuY2hpbGQxO1xuICAgICAgICBjaGlsZDIgPSBzaWJsaW5nLmNoaWxkMjtcbiAgICAgICAgbm9ybTEgPSBNYXRoLmFicygoY2hpbGQxLmFhYmIubG93ZXJCb3VuZC54ICsgY2hpbGQxLmFhYmIudXBwZXJCb3VuZC54KSAvIDIgLSBjZW50ZXIueCkgKyBNYXRoLmFicygoY2hpbGQxLmFhYmIubG93ZXJCb3VuZC55ICsgY2hpbGQxLmFhYmIudXBwZXJCb3VuZC55KSAvIDIgLSBjZW50ZXIueSk7XG4gICAgICAgIG5vcm0yID0gTWF0aC5hYnMoKGNoaWxkMi5hYWJiLmxvd2VyQm91bmQueCArIGNoaWxkMi5hYWJiLnVwcGVyQm91bmQueCkgLyAyIC0gY2VudGVyLngpICsgTWF0aC5hYnMoKGNoaWxkMi5hYWJiLmxvd2VyQm91bmQueSArIGNoaWxkMi5hYWJiLnVwcGVyQm91bmQueSkgLyAyIC0gY2VudGVyLnkpO1xuICAgICAgICBpZiAobm9ybTEgPCBub3JtMikge1xuICAgICAgICAgIHNpYmxpbmcgPSBjaGlsZDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2libGluZyA9IGNoaWxkMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2libGluZy5Jc0xlYWYoKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBub2RlMSA9IHNpYmxpbmcucGFyZW50O1xuICAgIG5vZGUyID0gdGhpcy5BbGxvY2F0ZU5vZGUoKTtcbiAgICBub2RlMi5wYXJlbnQgPSBub2RlMTtcbiAgICBub2RlMi51c2VyRGF0YSA9IG51bGw7XG4gICAgbm9kZTIuYWFiYi5Db21iaW5lKGxlYWYuYWFiYiwgc2libGluZy5hYWJiKTtcbiAgICBpZiAobm9kZTEpIHtcbiAgICAgIGlmIChzaWJsaW5nLnBhcmVudC5jaGlsZDEgPT09IHNpYmxpbmcpIHtcbiAgICAgICAgbm9kZTEuY2hpbGQxID0gbm9kZTI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlMS5jaGlsZDIgPSBub2RlMjtcbiAgICAgIH1cbiAgICAgIG5vZGUyLmNoaWxkMSA9IHNpYmxpbmc7XG4gICAgICBub2RlMi5jaGlsZDIgPSBsZWFmO1xuICAgICAgc2libGluZy5wYXJlbnQgPSBub2RlMjtcbiAgICAgIGxlYWYucGFyZW50ID0gbm9kZTI7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAobm9kZTEuYWFiYi5Db250YWlucyhub2RlMi5hYWJiKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUxLmFhYmIuQ29tYmluZShub2RlMS5jaGlsZDEuYWFiYiwgbm9kZTEuY2hpbGQyLmFhYmIpO1xuICAgICAgICBub2RlMiA9IG5vZGUxO1xuICAgICAgICBub2RlMSA9IG5vZGUxLnBhcmVudDtcbiAgICAgICAgaWYgKCFub2RlMSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUyLmNoaWxkMSA9IHNpYmxpbmc7XG4gICAgICBub2RlMi5jaGlsZDIgPSBsZWFmO1xuICAgICAgc2libGluZy5wYXJlbnQgPSBub2RlMjtcbiAgICAgIGxlYWYucGFyZW50ID0gbm9kZTI7XG4gICAgICB0aGlzLm1fcm9vdCA9IG5vZGUyO1xuICAgIH1cbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlLnByb3RvdHlwZS5SZW1vdmVMZWFmID0gZnVuY3Rpb24obGVhZikge1xuICAgIHZhciBub2RlMSwgbm9kZTIsIG9sZEFBQkIsIHNpYmxpbmc7XG4gICAgaWYgKGxlYWYgPT09IHRoaXMubV9yb290KSB7XG4gICAgICB0aGlzLm1fcm9vdCA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIG5vZGUyID0gbGVhZi5wYXJlbnQ7XG4gICAgbm9kZTEgPSBub2RlMi5wYXJlbnQ7XG4gICAgc2libGluZyA9IHZvaWQgMDtcbiAgICBpZiAobm9kZTIuY2hpbGQxID09PSBsZWFmKSB7XG4gICAgICBzaWJsaW5nID0gbm9kZTIuY2hpbGQyO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWJsaW5nID0gbm9kZTIuY2hpbGQxO1xuICAgIH1cbiAgICBpZiAobm9kZTEpIHtcbiAgICAgIGlmIChub2RlMS5jaGlsZDEgPT09IG5vZGUyKSB7XG4gICAgICAgIG5vZGUxLmNoaWxkMSA9IHNpYmxpbmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlMS5jaGlsZDIgPSBzaWJsaW5nO1xuICAgICAgfVxuICAgICAgc2libGluZy5wYXJlbnQgPSBub2RlMTtcbiAgICAgIHRoaXMuRnJlZU5vZGUobm9kZTIpO1xuICAgICAgd2hpbGUgKG5vZGUxKSB7XG4gICAgICAgIG9sZEFBQkIgPSBub2RlMS5hYWJiO1xuICAgICAgICBub2RlMS5hYWJiID0gYjJBQUJCLkNvbWJpbmUobm9kZTEuY2hpbGQxLmFhYmIsIG5vZGUxLmNoaWxkMi5hYWJiKTtcbiAgICAgICAgaWYgKG9sZEFBQkIuQ29udGFpbnMobm9kZTEuYWFiYikpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBub2RlMSA9IG5vZGUxLnBhcmVudDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3Jvb3QgPSBzaWJsaW5nO1xuICAgICAgc2libGluZy5wYXJlbnQgPSBudWxsO1xuICAgICAgdGhpcy5GcmVlTm9kZShub2RlMik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMkR5bmFtaWNUcmVlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkR5bmFtaWNUcmVlLmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3IsIGIyRHluYW1pY1RyZWU7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5iMkR5bmFtaWNUcmVlID0gQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWU7XG5cbkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlQnJvYWRQaGFzZSA9IChmdW5jdGlvbigpIHtcbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLm1fdHJlZSA9IG51bGw7XG5cbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLm1fbW92ZUJ1ZmZlciA9IG51bGw7XG5cbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLm1fcGFpckJ1ZmZlciA9IG51bGw7XG5cbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLm1fcGFpckNvdW50ID0gMDtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5tX3Byb3h5Q291bnQgPSAwO1xuXG4gIGZ1bmN0aW9uIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlKCkge1xuICAgIHRoaXMubV90cmVlID0gbmV3IGIyRHluYW1pY1RyZWUoKTtcbiAgICB0aGlzLm1fbW92ZUJ1ZmZlciA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLm1fcGFpckJ1ZmZlciA9IG5ldyBWZWN0b3IoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuQ3JlYXRlUHJveHkgPSBmdW5jdGlvbihhYWJiLCB1c2VyRGF0YSkge1xuICAgIHZhciBwcm94eTtcbiAgICBwcm94eSA9IHRoaXMubV90cmVlLkNyZWF0ZVByb3h5KGFhYmIsIHVzZXJEYXRhKTtcbiAgICArK3RoaXMubV9wcm94eUNvdW50O1xuICAgIHRoaXMuQnVmZmVyTW92ZShwcm94eSk7XG4gICAgcmV0dXJuIHByb3h5O1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5EZXN0cm95UHJveHkgPSBmdW5jdGlvbihwcm94eSkge1xuICAgIHRoaXMuVW5CdWZmZXJNb3ZlKHByb3h5KTtcbiAgICAtLXRoaXMubV9wcm94eUNvdW50O1xuICAgIHRoaXMubV90cmVlLkRlc3Ryb3lQcm94eShwcm94eSk7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLk1vdmVQcm94eSA9IGZ1bmN0aW9uKHByb3h5LCBhYWJiLCBkaXNwbGFjZW1lbnQpIHtcbiAgICB2YXIgYnVmZmVyO1xuICAgIGJ1ZmZlciA9IHRoaXMubV90cmVlLk1vdmVQcm94eShwcm94eSwgYWFiYiwgZGlzcGxhY2VtZW50KTtcbiAgICBpZiAoYnVmZmVyKSB7XG4gICAgICB0aGlzLkJ1ZmZlck1vdmUocHJveHkpO1xuICAgIH1cbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuVGVzdE92ZXJsYXAgPSBmdW5jdGlvbihwcm94eUEsIHByb3h5Qikge1xuICAgIHZhciBhYWJiQSwgYWFiYkI7XG4gICAgYWFiYkEgPSB0aGlzLm1fdHJlZS5HZXRGYXRBQUJCKHByb3h5QSk7XG4gICAgYWFiYkIgPSB0aGlzLm1fdHJlZS5HZXRGYXRBQUJCKHByb3h5Qik7XG4gICAgcmV0dXJuIGFhYmJBLlRlc3RPdmVybGFwKGFhYmJCKTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuR2V0VXNlckRhdGEgPSBmdW5jdGlvbihwcm94eSkge1xuICAgIHJldHVybiB0aGlzLm1fdHJlZS5HZXRVc2VyRGF0YShwcm94eSk7XG4gIH07XG5cbiAgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2UucHJvdG90eXBlLkdldEZhdEFBQkIgPSBmdW5jdGlvbihwcm94eSkge1xuICAgIHJldHVybiB0aGlzLm1fdHJlZS5HZXRGYXRBQUJCKHByb3h5KTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuR2V0UHJveHlDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fcHJveHlDb3VudDtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuVXBkYXRlUGFpcnMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBRdWVyeUNhbGxiYWNrLCBmYXRBQUJCLCBpLCBwYWlyLCBwcmltYXJ5UGFpciwgcXVlcnlQcm94eSwgdXNlckRhdGFBLCB1c2VyRGF0YUIsIF9fdGhpcztcbiAgICBfX3RoaXMgPSB0aGlzO1xuICAgIF9fdGhpcy5tX3BhaXJDb3VudCA9IDA7XG4gICAgaSA9IDA7XG4gICAgcXVlcnlQcm94eSA9IHZvaWQgMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IF9fdGhpcy5tX21vdmVCdWZmZXIubGVuZ3RoKSB7XG4gICAgICBRdWVyeUNhbGxiYWNrID0gZnVuY3Rpb24ocHJveHkpIHtcbiAgICAgICAgdmFyIHBhaXI7XG4gICAgICAgIGlmIChwcm94eSA9PT0gcXVlcnlQcm94eSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX3RoaXMubV9wYWlyQ291bnQgPT09IF9fdGhpcy5tX3BhaXJCdWZmZXIubGVuZ3RoKSB7XG4gICAgICAgICAgX190aGlzLm1fcGFpckJ1ZmZlcltfX3RoaXMubV9wYWlyQ291bnRdID0gbmV3IGIyRHluYW1pY1RyZWVQYWlyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcGFpciA9IF9fdGhpcy5tX3BhaXJCdWZmZXJbX190aGlzLm1fcGFpckNvdW50XTtcbiAgICAgICAgcGFpci5wcm94eUEgPSAocHJveHkgPCBxdWVyeVByb3h5ID8gcHJveHkgOiBxdWVyeVByb3h5KTtcbiAgICAgICAgcGFpci5wcm94eUIgPSAocHJveHkgPj0gcXVlcnlQcm94eSA/IHByb3h5IDogcXVlcnlQcm94eSk7XG4gICAgICAgICsrX190aGlzLm1fcGFpckNvdW50O1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBxdWVyeVByb3h5ID0gX190aGlzLm1fbW92ZUJ1ZmZlcltpXTtcbiAgICAgIGZhdEFBQkIgPSBfX3RoaXMubV90cmVlLkdldEZhdEFBQkIocXVlcnlQcm94eSk7XG4gICAgICBfX3RoaXMubV90cmVlLlF1ZXJ5KFF1ZXJ5Q2FsbGJhY2ssIGZhdEFBQkIpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBfX3RoaXMubV9tb3ZlQnVmZmVyLmxlbmd0aCA9IDA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBfX3RoaXMubV9wYWlyQ291bnQpIHtcbiAgICAgIHByaW1hcnlQYWlyID0gX190aGlzLm1fcGFpckJ1ZmZlcltpXTtcbiAgICAgIHVzZXJEYXRhQSA9IF9fdGhpcy5tX3RyZWUuR2V0VXNlckRhdGEocHJpbWFyeVBhaXIucHJveHlBKTtcbiAgICAgIHVzZXJEYXRhQiA9IF9fdGhpcy5tX3RyZWUuR2V0VXNlckRhdGEocHJpbWFyeVBhaXIucHJveHlCKTtcbiAgICAgIGNhbGxiYWNrKHVzZXJEYXRhQSwgdXNlckRhdGFCKTtcbiAgICAgICsraTtcbiAgICAgIHdoaWxlIChpIDwgX190aGlzLm1fcGFpckNvdW50KSB7XG4gICAgICAgIHBhaXIgPSBfX3RoaXMubV9wYWlyQnVmZmVyW2ldO1xuICAgICAgICBpZiAocGFpci5wcm94eUEgIT09IHByaW1hcnlQYWlyLnByb3h5QSB8fCBwYWlyLnByb3h5QiAhPT0gcHJpbWFyeVBhaXIucHJveHlCKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgKytpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuUXVlcnkgPSBmdW5jdGlvbihjYWxsYmFjaywgYWFiYikge1xuICAgIHRoaXMubV90cmVlLlF1ZXJ5KGNhbGxiYWNrLCBhYWJiKTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBpbnB1dCkge1xuICAgIHRoaXMubV90cmVlLlJheUNhc3QoY2FsbGJhY2ssIGlucHV0KTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuVmFsaWRhdGUgPSBmdW5jdGlvbigpIHt9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5SZWJhbGFuY2UgPSBmdW5jdGlvbihpdGVyYXRpb25zKSB7XG4gICAgaWYgKGl0ZXJhdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgaXRlcmF0aW9ucyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV90cmVlLlJlYmFsYW5jZShpdGVyYXRpb25zKTtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5wcm90b3R5cGUuQnVmZmVyTW92ZSA9IGZ1bmN0aW9uKHByb3h5KSB7XG4gICAgdGhpcy5tX21vdmVCdWZmZXJbdGhpcy5tX21vdmVCdWZmZXIubGVuZ3RoXSA9IHByb3h5O1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5VbkJ1ZmZlck1vdmUgPSBmdW5jdGlvbihwcm94eSkge1xuICAgIHZhciBpO1xuICAgIGkgPSBwYXJzZUludCh0aGlzLm1fbW92ZUJ1ZmZlci5pbmRleE9mKHByb3h5KSk7XG4gICAgdGhpcy5tX21vdmVCdWZmZXIuc3BsaWNlKGksIDEpO1xuICB9O1xuXG4gIGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLnByb3RvdHlwZS5Db21wYXJlUGFpcnMgPSBmdW5jdGlvbihwYWlyMSwgcGFpcjIpIHtcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICBiMkR5bmFtaWNUcmVlQnJvYWRQaGFzZS5fX2ltcGxlbWVudHMgPSB7XG4gICAgSUJyb2FkUGhhc2U6IHRydWVcbiAgfTtcblxuICByZXR1cm4gYjJEeW5hbWljVHJlZUJyb2FkUGhhc2U7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRHluYW1pY1RyZWVCcm9hZFBoYXNlLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkNvbGxpc2lvbi5iMkR5bmFtaWNUcmVlTm9kZSA9IChmdW5jdGlvbigpIHtcbiAgYjJEeW5hbWljVHJlZU5vZGUucHJvdG90eXBlLmFhYmIgPSBudWxsO1xuXG4gIGIyRHluYW1pY1RyZWVOb2RlLnByb3RvdHlwZS5jaGlsZDEgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyRHluYW1pY1RyZWVOb2RlKCkge1xuICAgIHRoaXMuYWFiYiA9IG5ldyBiMkFBQkIoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkR5bmFtaWNUcmVlTm9kZS5wcm90b3R5cGUuSXNMZWFmID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hpbGQxID09IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIGIyRHluYW1pY1RyZWVOb2RlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkR5bmFtaWNUcmVlTm9kZS5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJEeW5hbWljVHJlZVBhaXIgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyRHluYW1pY1RyZWVQYWlyKCkge31cblxuICByZXR1cm4gYjJEeW5hbWljVHJlZVBhaXI7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRHluYW1pY1RyZWVQYWlyLmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3IsIGIyU2V0dGluZ3MsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJNYW5pZm9sZCA9IChmdW5jdGlvbigpIHtcbiAgYjJNYW5pZm9sZC5lX2NpcmNsZXMgPSAweDAwMDE7XG5cbiAgYjJNYW5pZm9sZC5lX2ZhY2VBID0gMHgwMDAyO1xuXG4gIGIyTWFuaWZvbGQuZV9mYWNlQiA9IDB4MDAwNDtcblxuICBiMk1hbmlmb2xkLnByb3RvdHlwZS5tX3R5cGUgPSAwO1xuXG4gIGIyTWFuaWZvbGQucHJvdG90eXBlLm1fcG9pbnRDb3VudCA9IDA7XG5cbiAgYjJNYW5pZm9sZC5wcm90b3R5cGUubV9wb2ludHMgPSBudWxsO1xuXG4gIGIyTWFuaWZvbGQucHJvdG90eXBlLm1fbG9jYWxQbGFuZU5vcm1hbCA9IG51bGw7XG5cbiAgYjJNYW5pZm9sZC5wcm90b3R5cGUubV9sb2NhbFBvaW50ID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMk1hbmlmb2xkKCkge1xuICAgIHZhciBpO1xuICAgIHRoaXMubV9wb2ludENvdW50ID0gMDtcbiAgICB0aGlzLm1fcG9pbnRzID0gbmV3IFZlY3RvcihiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpIHtcbiAgICAgIHRoaXMubV9wb2ludHNbaV0gPSBuZXcgYjJNYW5pZm9sZFBvaW50KCk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHRoaXMubV9sb2NhbFBsYW5lTm9ybWFsID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbFBvaW50ID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyTWFuaWZvbGQucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgICAodGhpcy5tX3BvaW50c1tpXSBpbnN0YW5jZW9mIGIyTWFuaWZvbGRQb2ludCA/IHRoaXMubV9wb2ludHNbaV0gOiBudWxsKS5SZXNldCgpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICB0aGlzLm1fbG9jYWxQbGFuZU5vcm1hbC5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX2xvY2FsUG9pbnQuU2V0WmVybygpO1xuICAgIHRoaXMubV90eXBlID0gMDtcbiAgICB0aGlzLm1fcG9pbnRDb3VudCA9IDA7XG4gIH07XG5cbiAgYjJNYW5pZm9sZC5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24obSkge1xuICAgIHZhciBpO1xuICAgIHRoaXMubV9wb2ludENvdW50ID0gbS5tX3BvaW50Q291bnQ7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgICAodGhpcy5tX3BvaW50c1tpXSBpbnN0YW5jZW9mIGIyTWFuaWZvbGRQb2ludCA/IHRoaXMubV9wb2ludHNbaV0gOiBudWxsKS5TZXQobS5tX3BvaW50c1tpXSk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHRoaXMubV9sb2NhbFBsYW5lTm9ybWFsLlNldFYobS5tX2xvY2FsUGxhbmVOb3JtYWwpO1xuICAgIHRoaXMubV9sb2NhbFBvaW50LlNldFYobS5tX2xvY2FsUG9pbnQpO1xuICAgIHRoaXMubV90eXBlID0gbS5tX3R5cGU7XG4gIH07XG5cbiAgYjJNYW5pZm9sZC5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb3B5O1xuICAgIGNvcHkgPSBuZXcgYjJNYW5pZm9sZCgpO1xuICAgIGNvcHkuU2V0KHRoaXMpO1xuICAgIHJldHVybiBjb3B5O1xuICB9O1xuXG4gIHJldHVybiBiMk1hbmlmb2xkO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk1hbmlmb2xkLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3RJRCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJDb250YWN0SUQgPSBCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQ7XG5cbkJveDJELkNvbGxpc2lvbi5iMk1hbmlmb2xkUG9pbnQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyTWFuaWZvbGRQb2ludC5wcm90b3R5cGUubV9sb2NhbFBvaW50ID0gbnVsbDtcblxuICBiMk1hbmlmb2xkUG9pbnQucHJvdG90eXBlLm1faWQgPSBudWxsO1xuXG4gIGIyTWFuaWZvbGRQb2ludC5wcm90b3R5cGUubV9sb2NhbFBvaW50ID0gbnVsbDtcblxuICBiMk1hbmlmb2xkUG9pbnQucHJvdG90eXBlLm1fbm9ybWFsSW1wdWxzZSA9IDAuMDtcblxuICBiMk1hbmlmb2xkUG9pbnQucHJvdG90eXBlLm1fdGFuZ2VudEltcHVsc2UgPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJNYW5pZm9sZFBvaW50KCkge1xuICAgIHRoaXMubV9sb2NhbFBvaW50ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9pZCA9IG5ldyBiMkNvbnRhY3RJRCgpO1xuICAgIHRoaXMuUmVzZXQoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMk1hbmlmb2xkUG9pbnQucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tX2xvY2FsUG9pbnQuU2V0WmVybygpO1xuICAgIHRoaXMubV9ub3JtYWxJbXB1bHNlID0gMC4wO1xuICAgIHRoaXMubV90YW5nZW50SW1wdWxzZSA9IDAuMDtcbiAgICB0aGlzLm1faWQua2V5ID0gMDtcbiAgfTtcblxuICBiMk1hbmlmb2xkUG9pbnQucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0aGlzLm1fbG9jYWxQb2ludC5TZXRWKG0ubV9sb2NhbFBvaW50KTtcbiAgICB0aGlzLm1fbm9ybWFsSW1wdWxzZSA9IG0ubV9ub3JtYWxJbXB1bHNlO1xuICAgIHRoaXMubV90YW5nZW50SW1wdWxzZSA9IG0ubV90YW5nZW50SW1wdWxzZTtcbiAgICB0aGlzLm1faWQuU2V0KG0ubV9pZCk7XG4gIH07XG5cbiAgcmV0dXJuIGIyTWFuaWZvbGRQb2ludDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJNYW5pZm9sZFBvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJQb2ludCA9IChmdW5jdGlvbigpIHtcbiAgYjJQb2ludC5wcm90b3R5cGUucCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJQb2ludCgpIHtcbiAgICB0aGlzLnAgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJQb2ludC5wcm90b3R5cGUuU3VwcG9ydCA9IGZ1bmN0aW9uKHhmLCB2WCwgdlkpIHtcbiAgICBpZiAodlggPT09IHZvaWQgMCkge1xuICAgICAgdlggPSAwO1xuICAgIH1cbiAgICBpZiAodlkgPT09IHZvaWQgMCkge1xuICAgICAgdlkgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wO1xuICB9O1xuXG4gIGIyUG9pbnQucHJvdG90eXBlLkdldEZpcnN0VmVydGV4ID0gZnVuY3Rpb24oeGYpIHtcbiAgICByZXR1cm4gdGhpcy5wO1xuICB9O1xuXG4gIHJldHVybiBiMlBvaW50O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlBvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0SW5wdXQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyUmF5Q2FzdElucHV0LnByb3RvdHlwZS5wMSA9IG51bGw7XG5cbiAgYjJSYXlDYXN0SW5wdXQucHJvdG90eXBlLnAyID0gbnVsbDtcblxuICBiMlJheUNhc3RJbnB1dC5wcm90b3R5cGUubWF4RnJhY3Rpb24gPSAxO1xuXG4gIGZ1bmN0aW9uIGIyUmF5Q2FzdElucHV0KHAxLCBwMiwgbWF4RnJhY3Rpb24pIHtcbiAgICB0aGlzLnAxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMucDIgPSBuZXcgYjJWZWMyKCk7XG4gICAgaWYgKHAxID09PSB2b2lkIDApIHtcbiAgICAgIHAxID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHAyID09PSB2b2lkIDApIHtcbiAgICAgIHAyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG1heEZyYWN0aW9uID09PSB2b2lkIDApIHtcbiAgICAgIG1heEZyYWN0aW9uID0gMTtcbiAgICB9XG4gICAgaWYgKHAxKSB7XG4gICAgICB0aGlzLnAxLlNldFYocDEpO1xuICAgIH1cbiAgICBpZiAocDIpIHtcbiAgICAgIHRoaXMucDIuU2V0VihwMik7XG4gICAgfVxuICAgIHRoaXMubWF4RnJhY3Rpb24gPSBtYXhGcmFjdGlvbjtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJSYXlDYXN0SW5wdXQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUmF5Q2FzdElucHV0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJSYXlDYXN0T3V0cHV0ID0gKGZ1bmN0aW9uKCkge1xuICBiMlJheUNhc3RPdXRwdXQucHJvdG90eXBlLm5vcm1hbCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJSYXlDYXN0T3V0cHV0KCkge1xuICAgIHRoaXMubm9ybWFsID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMlJheUNhc3RPdXRwdXQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUmF5Q2FzdE91dHB1dC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29sbGlzaW9uLmIyU2VnbWVudCA9IChmdW5jdGlvbigpIHtcbiAgYjJTZWdtZW50LnByb3RvdHlwZS5wMSA9IG51bGw7XG5cbiAgYjJTZWdtZW50LnByb3RvdHlwZS5wMiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJTZWdtZW50KCkge1xuICAgIHRoaXMucDEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5wMiA9IG5ldyBiMlZlYzIoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlNlZ21lbnQucHJvdG90eXBlLlRlc3RTZWdtZW50ID0gZnVuY3Rpb24obGFtYmRhLCBub3JtYWwsIHNlZ21lbnQsIG1heExhbWJkYSkge1xuICAgIHZhciBhLCBiWCwgYlksIGRYLCBkWSwgZGVub20sIGtfc2xvcCwgbXUyLCBuTGVuLCBuWCwgblksIHJYLCByWSwgcztcbiAgICBpZiAobWF4TGFtYmRhID09PSB2b2lkIDApIHtcbiAgICAgIG1heExhbWJkYSA9IDA7XG4gICAgfVxuICAgIHMgPSBzZWdtZW50LnAxO1xuICAgIHJYID0gc2VnbWVudC5wMi54IC0gcy54O1xuICAgIHJZID0gc2VnbWVudC5wMi55IC0gcy55O1xuICAgIGRYID0gdGhpcy5wMi54IC0gdGhpcy5wMS54O1xuICAgIGRZID0gdGhpcy5wMi55IC0gdGhpcy5wMS55O1xuICAgIG5YID0gZFk7XG4gICAgblkgPSAtZFg7XG4gICAga19zbG9wID0gMTAwLjAgKiBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgIGRlbm9tID0gLShyWCAqIG5YICsgclkgKiBuWSk7XG4gICAgaWYgKGRlbm9tID4ga19zbG9wKSB7XG4gICAgICBiWCA9IHMueCAtIHRoaXMucDEueDtcbiAgICAgIGJZID0gcy55IC0gdGhpcy5wMS55O1xuICAgICAgYSA9IGJYICogblggKyBiWSAqIG5ZO1xuICAgICAgaWYgKDAuMCA8PSBhICYmIGEgPD0gbWF4TGFtYmRhICogZGVub20pIHtcbiAgICAgICAgbXUyID0gKC1yWCAqIGJZKSArIHJZICogYlg7XG4gICAgICAgIGlmICgoLWtfc2xvcCAqIGRlbm9tKSA8PSBtdTIgJiYgbXUyIDw9IGRlbm9tICogKDEuMCArIGtfc2xvcCkpIHtcbiAgICAgICAgICBhIC89IGRlbm9tO1xuICAgICAgICAgIG5MZW4gPSBNYXRoLnNxcnQoblggKiBuWCArIG5ZICogblkpO1xuICAgICAgICAgIG5YIC89IG5MZW47XG4gICAgICAgICAgblkgLz0gbkxlbjtcbiAgICAgICAgICBsYW1iZGFbMF0gPSBhO1xuICAgICAgICAgIG5vcm1hbC5TZXQoblgsIG5ZKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgYjJTZWdtZW50LnByb3RvdHlwZS5FeHRlbmQgPSBmdW5jdGlvbihhYWJiKSB7XG4gICAgdGhpcy5FeHRlbmRGb3J3YXJkKGFhYmIpO1xuICAgIHRoaXMuRXh0ZW5kQmFja3dhcmQoYWFiYik7XG4gIH07XG5cbiAgYjJTZWdtZW50LnByb3RvdHlwZS5FeHRlbmRGb3J3YXJkID0gZnVuY3Rpb24oYWFiYikge1xuICAgIHZhciBkWCwgZFksIGxhbWJkYTtcbiAgICBkWCA9IHRoaXMucDIueCAtIHRoaXMucDEueDtcbiAgICBkWSA9IHRoaXMucDIueSAtIHRoaXMucDEueTtcbiAgICBsYW1iZGEgPSBNYXRoLm1pbigoZFggPiAwID8gKGFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5wMS54KSAvIGRYIDogKGRYIDwgMCA/IChhYWJiLmxvd2VyQm91bmQueCAtIHRoaXMucDEueCkgLyBkWCA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkpLCAoZFkgPiAwID8gKGFhYmIudXBwZXJCb3VuZC55IC0gdGhpcy5wMS55KSAvIGRZIDogKGRZIDwgMCA/IChhYWJiLmxvd2VyQm91bmQueSAtIHRoaXMucDEueSkgLyBkWSA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkpKTtcbiAgICB0aGlzLnAyLnggPSB0aGlzLnAxLnggKyBkWCAqIGxhbWJkYTtcbiAgICB0aGlzLnAyLnkgPSB0aGlzLnAxLnkgKyBkWSAqIGxhbWJkYTtcbiAgfTtcblxuICBiMlNlZ21lbnQucHJvdG90eXBlLkV4dGVuZEJhY2t3YXJkID0gZnVuY3Rpb24oYWFiYikge1xuICAgIHZhciBkWCwgZFksIGxhbWJkYTtcbiAgICBkWCA9ICgtdGhpcy5wMi54KSArIHRoaXMucDEueDtcbiAgICBkWSA9ICgtdGhpcy5wMi55KSArIHRoaXMucDEueTtcbiAgICBsYW1iZGEgPSBNYXRoLm1pbigoZFggPiAwID8gKGFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5wMi54KSAvIGRYIDogKGRYIDwgMCA/IChhYWJiLmxvd2VyQm91bmQueCAtIHRoaXMucDIueCkgLyBkWCA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkpLCAoZFkgPiAwID8gKGFhYmIudXBwZXJCb3VuZC55IC0gdGhpcy5wMi55KSAvIGRZIDogKGRZIDwgMCA/IChhYWJiLmxvd2VyQm91bmQueSAtIHRoaXMucDIueSkgLyBkWSA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkpKTtcbiAgICB0aGlzLnAxLnggPSB0aGlzLnAyLnggKyBkWCAqIGxhbWJkYTtcbiAgICB0aGlzLnAxLnkgPSB0aGlzLnAyLnkgKyBkWSAqIGxhbWJkYTtcbiAgfTtcblxuICByZXR1cm4gYjJTZWdtZW50O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlNlZ21lbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyTWF0aCwgYjJTZXR0aW5ncywgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbGxpc2lvbi5iMlNlcGFyYXRpb25GdW5jdGlvbiA9IChmdW5jdGlvbigpIHtcbiAgYjJTZXBhcmF0aW9uRnVuY3Rpb24ucHJvdG90eXBlLm1fbG9jYWxQb2ludCA9IG51bGw7XG5cbiAgYjJTZXBhcmF0aW9uRnVuY3Rpb24ucHJvdG90eXBlLm1fYXhpcyA9IG51bGw7XG5cbiAgYjJTZXBhcmF0aW9uRnVuY3Rpb24ucHJvdG90eXBlLm1fcHJveHlBID0gbnVsbDtcblxuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5wcm90b3R5cGUubV9wcm94eUIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyU2VwYXJhdGlvbkZ1bmN0aW9uKCkge1xuICAgIHRoaXMubV9sb2NhbFBvaW50ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9heGlzID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyU2VwYXJhdGlvbkZ1bmN0aW9uLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oY2FjaGUsIHByb3h5QSwgdHJhbnNmb3JtQSwgcHJveHlCLCB0cmFuc2Zvcm1CKSB7XG4gICAgdmFyIGEsIGIsIGMsIGNvdW50LCBkQSwgZEIsIGRlbm9tLCBlLCBmLCBsb2NhbFBvaW50QSwgbG9jYWxQb2ludEExLCBsb2NhbFBvaW50QTIsIGxvY2FsUG9pbnRCLCBsb2NhbFBvaW50QjEsIGxvY2FsUG9pbnRCMiwgbm9ybWFsWCwgbm9ybWFsWSwgcEEsIHBCLCBwb2ludEFYLCBwb2ludEFZLCBwb2ludEJYLCBwb2ludEJZLCByLCBzLCBzZ24sIHQsIHRNYXQsIHRWZWM7XG4gICAgdGhpcy5tX3Byb3h5QSA9IHByb3h5QTtcbiAgICB0aGlzLm1fcHJveHlCID0gcHJveHlCO1xuICAgIGNvdW50ID0gcGFyc2VJbnQoY2FjaGUuY291bnQpO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoMCA8IGNvdW50ICYmIGNvdW50IDwgMyk7XG4gICAgbG9jYWxQb2ludEEgPSB2b2lkIDA7XG4gICAgbG9jYWxQb2ludEExID0gdm9pZCAwO1xuICAgIGxvY2FsUG9pbnRBMiA9IHZvaWQgMDtcbiAgICBsb2NhbFBvaW50QiA9IHZvaWQgMDtcbiAgICBsb2NhbFBvaW50QjEgPSB2b2lkIDA7XG4gICAgbG9jYWxQb2ludEIyID0gdm9pZCAwO1xuICAgIHBvaW50QVggPSAwO1xuICAgIHBvaW50QVkgPSAwO1xuICAgIHBvaW50QlggPSAwO1xuICAgIHBvaW50QlkgPSAwO1xuICAgIG5vcm1hbFggPSAwO1xuICAgIG5vcm1hbFkgPSAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICBzID0gMDtcbiAgICBzZ24gPSAwO1xuICAgIGlmIChjb3VudCA9PT0gMSkge1xuICAgICAgdGhpcy5tX3R5cGUgPSBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX3BvaW50cztcbiAgICAgIGxvY2FsUG9pbnRBID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhBWzBdKTtcbiAgICAgIGxvY2FsUG9pbnRCID0gdGhpcy5tX3Byb3h5Qi5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhCWzBdKTtcbiAgICAgIHRWZWMgPSBsb2NhbFBvaW50QTtcbiAgICAgIHRNYXQgPSB0cmFuc2Zvcm1BLlI7XG4gICAgICBwb2ludEFYID0gdHJhbnNmb3JtQS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgcG9pbnRBWSA9IHRyYW5zZm9ybUEucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgIHRWZWMgPSBsb2NhbFBvaW50QjtcbiAgICAgIHRNYXQgPSB0cmFuc2Zvcm1CLlI7XG4gICAgICBwb2ludEJYID0gdHJhbnNmb3JtQi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgcG9pbnRCWSA9IHRyYW5zZm9ybUIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgIHRoaXMubV9heGlzLnggPSBwb2ludEJYIC0gcG9pbnRBWDtcbiAgICAgIHRoaXMubV9heGlzLnkgPSBwb2ludEJZIC0gcG9pbnRBWTtcbiAgICAgIHRoaXMubV9heGlzLk5vcm1hbGl6ZSgpO1xuICAgIH0gZWxzZSBpZiAoY2FjaGUuaW5kZXhCWzBdID09PSBjYWNoZS5pbmRleEJbMV0pIHtcbiAgICAgIHRoaXMubV90eXBlID0gYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQTtcbiAgICAgIGxvY2FsUG9pbnRBMSA9IHRoaXMubV9wcm94eUEuR2V0VmVydGV4KGNhY2hlLmluZGV4QVswXSk7XG4gICAgICBsb2NhbFBvaW50QTIgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFbMV0pO1xuICAgICAgbG9jYWxQb2ludEIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChjYWNoZS5pbmRleEJbMF0pO1xuICAgICAgdGhpcy5tX2xvY2FsUG9pbnQueCA9IDAuNSAqIChsb2NhbFBvaW50QTEueCArIGxvY2FsUG9pbnRBMi54KTtcbiAgICAgIHRoaXMubV9sb2NhbFBvaW50LnkgPSAwLjUgKiAobG9jYWxQb2ludEExLnkgKyBsb2NhbFBvaW50QTIueSk7XG4gICAgICB0aGlzLm1fYXhpcyA9IGIyTWF0aC5Dcm9zc1ZGKGIyTWF0aC5TdWJ0cmFjdFZWKGxvY2FsUG9pbnRBMiwgbG9jYWxQb2ludEExKSwgMS4wKTtcbiAgICAgIHRoaXMubV9heGlzLk5vcm1hbGl6ZSgpO1xuICAgICAgdFZlYyA9IHRoaXMubV9heGlzO1xuICAgICAgdE1hdCA9IHRyYW5zZm9ybUEuUjtcbiAgICAgIG5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgbm9ybWFsWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICB0VmVjID0gdGhpcy5tX2xvY2FsUG9pbnQ7XG4gICAgICB0TWF0ID0gdHJhbnNmb3JtQS5SO1xuICAgICAgcG9pbnRBWCA9IHRyYW5zZm9ybUEucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgIHBvaW50QVkgPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICB0VmVjID0gbG9jYWxQb2ludEI7XG4gICAgICB0TWF0ID0gdHJhbnNmb3JtQi5SO1xuICAgICAgcG9pbnRCWCA9IHRyYW5zZm9ybUIucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgIHBvaW50QlkgPSB0cmFuc2Zvcm1CLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICBzID0gKHBvaW50QlggLSBwb2ludEFYKSAqIG5vcm1hbFggKyAocG9pbnRCWSAtIHBvaW50QVkpICogbm9ybWFsWTtcbiAgICAgIGlmIChzIDwgMC4wKSB7XG4gICAgICAgIHRoaXMubV9heGlzLk5lZ2F0aXZlU2VsZigpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2FjaGUuaW5kZXhBWzBdID09PSBjYWNoZS5pbmRleEFbMF0pIHtcbiAgICAgIHRoaXMubV90eXBlID0gYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQjtcbiAgICAgIGxvY2FsUG9pbnRCMSA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlswXSk7XG4gICAgICBsb2NhbFBvaW50QjIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChjYWNoZS5pbmRleEJbMV0pO1xuICAgICAgbG9jYWxQb2ludEEgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFbMF0pO1xuICAgICAgdGhpcy5tX2xvY2FsUG9pbnQueCA9IDAuNSAqIChsb2NhbFBvaW50QjEueCArIGxvY2FsUG9pbnRCMi54KTtcbiAgICAgIHRoaXMubV9sb2NhbFBvaW50LnkgPSAwLjUgKiAobG9jYWxQb2ludEIxLnkgKyBsb2NhbFBvaW50QjIueSk7XG4gICAgICB0aGlzLm1fYXhpcyA9IGIyTWF0aC5Dcm9zc1ZGKGIyTWF0aC5TdWJ0cmFjdFZWKGxvY2FsUG9pbnRCMiwgbG9jYWxQb2ludEIxKSwgMS4wKTtcbiAgICAgIHRoaXMubV9heGlzLk5vcm1hbGl6ZSgpO1xuICAgICAgdFZlYyA9IHRoaXMubV9heGlzO1xuICAgICAgdE1hdCA9IHRyYW5zZm9ybUIuUjtcbiAgICAgIG5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgbm9ybWFsWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICB0VmVjID0gdGhpcy5tX2xvY2FsUG9pbnQ7XG4gICAgICB0TWF0ID0gdHJhbnNmb3JtQi5SO1xuICAgICAgcG9pbnRCWCA9IHRyYW5zZm9ybUIucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgIHBvaW50QlkgPSB0cmFuc2Zvcm1CLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICB0VmVjID0gbG9jYWxQb2ludEE7XG4gICAgICB0TWF0ID0gdHJhbnNmb3JtQS5SO1xuICAgICAgcG9pbnRBWCA9IHRyYW5zZm9ybUEucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgIHBvaW50QVkgPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICBzID0gKHBvaW50QVggLSBwb2ludEJYKSAqIG5vcm1hbFggKyAocG9pbnRBWSAtIHBvaW50QlkpICogbm9ybWFsWTtcbiAgICAgIGlmIChzIDwgMC4wKSB7XG4gICAgICAgIHRoaXMubV9heGlzLk5lZ2F0aXZlU2VsZigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbFBvaW50QTEgPSB0aGlzLm1fcHJveHlBLkdldFZlcnRleChjYWNoZS5pbmRleEFbMF0pO1xuICAgICAgbG9jYWxQb2ludEEyID0gdGhpcy5tX3Byb3h5QS5HZXRWZXJ0ZXgoY2FjaGUuaW5kZXhBWzFdKTtcbiAgICAgIGxvY2FsUG9pbnRCMSA9IHRoaXMubV9wcm94eUIuR2V0VmVydGV4KGNhY2hlLmluZGV4QlswXSk7XG4gICAgICBsb2NhbFBvaW50QjIgPSB0aGlzLm1fcHJveHlCLkdldFZlcnRleChjYWNoZS5pbmRleEJbMV0pO1xuICAgICAgcEEgPSBiMk1hdGguTXVsWCh0cmFuc2Zvcm1BLCBsb2NhbFBvaW50QSk7XG4gICAgICBkQSA9IGIyTWF0aC5NdWxNVih0cmFuc2Zvcm1BLlIsIGIyTWF0aC5TdWJ0cmFjdFZWKGxvY2FsUG9pbnRBMiwgbG9jYWxQb2ludEExKSk7XG4gICAgICBwQiA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIGxvY2FsUG9pbnRCKTtcbiAgICAgIGRCID0gYjJNYXRoLk11bE1WKHRyYW5zZm9ybUIuUiwgYjJNYXRoLlN1YnRyYWN0VlYobG9jYWxQb2ludEIyLCBsb2NhbFBvaW50QjEpKTtcbiAgICAgIGEgPSBkQS54ICogZEEueCArIGRBLnkgKiBkQS55O1xuICAgICAgZSA9IGRCLnggKiBkQi54ICsgZEIueSAqIGRCLnk7XG4gICAgICByID0gYjJNYXRoLlN1YnRyYWN0VlYoZEIsIGRBKTtcbiAgICAgIGMgPSBkQS54ICogci54ICsgZEEueSAqIHIueTtcbiAgICAgIGYgPSBkQi54ICogci54ICsgZEIueSAqIHIueTtcbiAgICAgIGIgPSBkQS54ICogZEIueCArIGRBLnkgKiBkQi55O1xuICAgICAgZGVub20gPSBhICogZSAtIGIgKiBiO1xuICAgICAgcyA9IDAuMDtcbiAgICAgIGlmIChkZW5vbSAhPT0gMC4wKSB7XG4gICAgICAgIHMgPSBiMk1hdGguQ2xhbXAoKGIgKiBmIC0gYyAqIGUpIC8gZGVub20sIDAuMCwgMS4wKTtcbiAgICAgIH1cbiAgICAgIHQgPSAoYiAqIHMgKyBmKSAvIGU7XG4gICAgICBpZiAodCA8IDAuMCkge1xuICAgICAgICB0ID0gMC4wO1xuICAgICAgICBzID0gYjJNYXRoLkNsYW1wKChiIC0gYykgLyBhLCAwLjAsIDEuMCk7XG4gICAgICB9XG4gICAgICBsb2NhbFBvaW50QSA9IG5ldyBiMlZlYzIoKTtcbiAgICAgIGxvY2FsUG9pbnRBLnggPSBsb2NhbFBvaW50QTEueCArIHMgKiAobG9jYWxQb2ludEEyLnggLSBsb2NhbFBvaW50QTEueCk7XG4gICAgICBsb2NhbFBvaW50QS55ID0gbG9jYWxQb2ludEExLnkgKyBzICogKGxvY2FsUG9pbnRBMi55IC0gbG9jYWxQb2ludEExLnkpO1xuICAgICAgbG9jYWxQb2ludEIgPSBuZXcgYjJWZWMyKCk7XG4gICAgICBsb2NhbFBvaW50Qi54ID0gbG9jYWxQb2ludEIxLnggKyBzICogKGxvY2FsUG9pbnRCMi54IC0gbG9jYWxQb2ludEIxLngpO1xuICAgICAgbG9jYWxQb2ludEIueSA9IGxvY2FsUG9pbnRCMS55ICsgcyAqIChsb2NhbFBvaW50QjIueSAtIGxvY2FsUG9pbnRCMS55KTtcbiAgICAgIGlmIChzID09PSAwLjAgfHwgcyA9PT0gMS4wKSB7XG4gICAgICAgIHRoaXMubV90eXBlID0gYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQjtcbiAgICAgICAgdGhpcy5tX2F4aXMgPSBiMk1hdGguQ3Jvc3NWRihiMk1hdGguU3VidHJhY3RWVihsb2NhbFBvaW50QjIsIGxvY2FsUG9pbnRCMSksIDEuMCk7XG4gICAgICAgIHRoaXMubV9heGlzLk5vcm1hbGl6ZSgpO1xuICAgICAgICB0aGlzLm1fbG9jYWxQb2ludCA9IGxvY2FsUG9pbnRCO1xuICAgICAgICB0VmVjID0gdGhpcy5tX2F4aXM7XG4gICAgICAgIHRNYXQgPSB0cmFuc2Zvcm1CLlI7XG4gICAgICAgIG5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgICBub3JtYWxZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgdFZlYyA9IHRoaXMubV9sb2NhbFBvaW50O1xuICAgICAgICB0TWF0ID0gdHJhbnNmb3JtQi5SO1xuICAgICAgICBwb2ludEJYID0gdHJhbnNmb3JtQi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICBwb2ludEJZID0gdHJhbnNmb3JtQi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgICB0VmVjID0gbG9jYWxQb2ludEE7XG4gICAgICAgIHRNYXQgPSB0cmFuc2Zvcm1BLlI7XG4gICAgICAgIHBvaW50QVggPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICAgIHBvaW50QVkgPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICAgIHNnbiA9IChwb2ludEFYIC0gcG9pbnRCWCkgKiBub3JtYWxYICsgKHBvaW50QVkgLSBwb2ludEJZKSAqIG5vcm1hbFk7XG4gICAgICAgIGlmIChzIDwgMC4wKSB7XG4gICAgICAgICAgdGhpcy5tX2F4aXMuTmVnYXRpdmVTZWxmKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubV90eXBlID0gYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQTtcbiAgICAgICAgdGhpcy5tX2F4aXMgPSBiMk1hdGguQ3Jvc3NWRihiMk1hdGguU3VidHJhY3RWVihsb2NhbFBvaW50QTIsIGxvY2FsUG9pbnRBMSksIDEuMCk7XG4gICAgICAgIHRoaXMubV9sb2NhbFBvaW50ID0gbG9jYWxQb2ludEE7XG4gICAgICAgIHRWZWMgPSB0aGlzLm1fYXhpcztcbiAgICAgICAgdE1hdCA9IHRyYW5zZm9ybUEuUjtcbiAgICAgICAgbm9ybWFsWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgIG5vcm1hbFkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgICB0VmVjID0gdGhpcy5tX2xvY2FsUG9pbnQ7XG4gICAgICAgIHRNYXQgPSB0cmFuc2Zvcm1BLlI7XG4gICAgICAgIHBvaW50QVggPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgICAgIHBvaW50QVkgPSB0cmFuc2Zvcm1BLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICAgIHRWZWMgPSBsb2NhbFBvaW50QjtcbiAgICAgICAgdE1hdCA9IHRyYW5zZm9ybUIuUjtcbiAgICAgICAgcG9pbnRCWCA9IHRyYW5zZm9ybUIucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgICAgcG9pbnRCWSA9IHRyYW5zZm9ybUIucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgICAgc2duID0gKHBvaW50QlggLSBwb2ludEFYKSAqIG5vcm1hbFggKyAocG9pbnRCWSAtIHBvaW50QVkpICogbm9ybWFsWTtcbiAgICAgICAgaWYgKHMgPCAwLjApIHtcbiAgICAgICAgICB0aGlzLm1fYXhpcy5OZWdhdGl2ZVNlbGYoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbih0cmFuc2Zvcm1BLCB0cmFuc2Zvcm1CKSB7XG4gICAgdmFyIGF4aXNBLCBheGlzQiwgbG9jYWxQb2ludEEsIGxvY2FsUG9pbnRCLCBub3JtYWwsIHBvaW50QSwgcG9pbnRCLCBzZXBlcmF0aW9uO1xuICAgIGF4aXNBID0gdm9pZCAwO1xuICAgIGF4aXNCID0gdm9pZCAwO1xuICAgIGxvY2FsUG9pbnRBID0gdm9pZCAwO1xuICAgIGxvY2FsUG9pbnRCID0gdm9pZCAwO1xuICAgIHBvaW50QSA9IHZvaWQgMDtcbiAgICBwb2ludEIgPSB2b2lkIDA7XG4gICAgc2VwZXJhdGlvbiA9IDA7XG4gICAgbm9ybWFsID0gdm9pZCAwO1xuICAgIHN3aXRjaCAodGhpcy5tX3R5cGUpIHtcbiAgICAgIGNhc2UgYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9wb2ludHM6XG4gICAgICAgIGF4aXNBID0gYjJNYXRoLk11bFRNVih0cmFuc2Zvcm1BLlIsIHRoaXMubV9heGlzKTtcbiAgICAgICAgYXhpc0IgPSBiMk1hdGguTXVsVE1WKHRyYW5zZm9ybUIuUiwgdGhpcy5tX2F4aXMuR2V0TmVnYXRpdmUoKSk7XG4gICAgICAgIGxvY2FsUG9pbnRBID0gdGhpcy5tX3Byb3h5QS5HZXRTdXBwb3J0VmVydGV4KGF4aXNBKTtcbiAgICAgICAgbG9jYWxQb2ludEIgPSB0aGlzLm1fcHJveHlCLkdldFN1cHBvcnRWZXJ0ZXgoYXhpc0IpO1xuICAgICAgICBwb2ludEEgPSBiMk1hdGguTXVsWCh0cmFuc2Zvcm1BLCBsb2NhbFBvaW50QSk7XG4gICAgICAgIHBvaW50QiA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIGxvY2FsUG9pbnRCKTtcbiAgICAgICAgc2VwZXJhdGlvbiA9IChwb2ludEIueCAtIHBvaW50QS54KSAqIHRoaXMubV9heGlzLnggKyAocG9pbnRCLnkgLSBwb2ludEEueSkgKiB0aGlzLm1fYXhpcy55O1xuICAgICAgICByZXR1cm4gc2VwZXJhdGlvbjtcbiAgICAgIGNhc2UgYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQTpcbiAgICAgICAgbm9ybWFsID0gYjJNYXRoLk11bE1WKHRyYW5zZm9ybUEuUiwgdGhpcy5tX2F4aXMpO1xuICAgICAgICBwb2ludEEgPSBiMk1hdGguTXVsWCh0cmFuc2Zvcm1BLCB0aGlzLm1fbG9jYWxQb2ludCk7XG4gICAgICAgIGF4aXNCID0gYjJNYXRoLk11bFRNVih0cmFuc2Zvcm1CLlIsIG5vcm1hbC5HZXROZWdhdGl2ZSgpKTtcbiAgICAgICAgbG9jYWxQb2ludEIgPSB0aGlzLm1fcHJveHlCLkdldFN1cHBvcnRWZXJ0ZXgoYXhpc0IpO1xuICAgICAgICBwb2ludEIgPSBiMk1hdGguTXVsWCh0cmFuc2Zvcm1CLCBsb2NhbFBvaW50Qik7XG4gICAgICAgIHNlcGVyYXRpb24gPSAocG9pbnRCLnggLSBwb2ludEEueCkgKiBub3JtYWwueCArIChwb2ludEIueSAtIHBvaW50QS55KSAqIG5vcm1hbC55O1xuICAgICAgICByZXR1cm4gc2VwZXJhdGlvbjtcbiAgICAgIGNhc2UgYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQjpcbiAgICAgICAgbm9ybWFsID0gYjJNYXRoLk11bE1WKHRyYW5zZm9ybUIuUiwgdGhpcy5tX2F4aXMpO1xuICAgICAgICBwb2ludEIgPSBiMk1hdGguTXVsWCh0cmFuc2Zvcm1CLCB0aGlzLm1fbG9jYWxQb2ludCk7XG4gICAgICAgIGF4aXNBID0gYjJNYXRoLk11bFRNVih0cmFuc2Zvcm1BLlIsIG5vcm1hbC5HZXROZWdhdGl2ZSgpKTtcbiAgICAgICAgbG9jYWxQb2ludEEgPSB0aGlzLm1fcHJveHlBLkdldFN1cHBvcnRWZXJ0ZXgoYXhpc0EpO1xuICAgICAgICBwb2ludEEgPSBiMk1hdGguTXVsWCh0cmFuc2Zvcm1BLCBsb2NhbFBvaW50QSk7XG4gICAgICAgIHNlcGVyYXRpb24gPSAocG9pbnRBLnggLSBwb2ludEIueCkgKiBub3JtYWwueCArIChwb2ludEEueSAtIHBvaW50Qi55KSAqIG5vcm1hbC55O1xuICAgICAgICByZXR1cm4gc2VwZXJhdGlvbjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgICByZXR1cm4gMC4wO1xuICAgIH1cbiAgfTtcblxuICBiMlNlcGFyYXRpb25GdW5jdGlvbi5lX3BvaW50cyA9IDB4MDE7XG5cbiAgYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQSA9IDB4MDI7XG5cbiAgYjJTZXBhcmF0aW9uRnVuY3Rpb24uZV9mYWNlQiA9IDB4MDQ7XG5cbiAgcmV0dXJuIGIyU2VwYXJhdGlvbkZ1bmN0aW9uO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlNlcGFyYXRpb25GdW5jdGlvbi5qcy5tYXBcbiIsInZhciBCb3gyRCwgVmVjdG9yLCBiMk1hdGgsIGIyU2V0dGluZ3MsIGIyU2ltcGxleFZlcnRleCwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cblZlY3RvciA9IEJveDJELlZlY3RvcjtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJTaW1wbGV4VmVydGV4ID0gQm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleFZlcnRleDtcblxuQm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleCA9IChmdW5jdGlvbigpIHtcbiAgYjJTaW1wbGV4LnByb3RvdHlwZS5tX3YxID0gbnVsbDtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLm1fdjIgPSBudWxsO1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUubV92MyA9IG51bGw7XG5cbiAgYjJTaW1wbGV4LnByb3RvdHlwZS5tX3ZlcnRpY2VzID0gbnVsbDtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLm1fY291bnQgPSAwO1xuXG4gIGZ1bmN0aW9uIGIyU2ltcGxleCgpIHtcbiAgICB0aGlzLm1fdjEgPSBuZXcgYjJTaW1wbGV4VmVydGV4KCk7XG4gICAgdGhpcy5tX3YyID0gbmV3IGIyU2ltcGxleFZlcnRleCgpO1xuICAgIHRoaXMubV92MyA9IG5ldyBiMlNpbXBsZXhWZXJ0ZXgoKTtcbiAgICB0aGlzLm1fdmVydGljZXMgPSBuZXcgVmVjdG9yKDMpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1swXSA9IHRoaXMubV92MTtcbiAgICB0aGlzLm1fdmVydGljZXNbMV0gPSB0aGlzLm1fdjI7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzJdID0gdGhpcy5tX3YzO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuUmVhZENhY2hlID0gZnVuY3Rpb24oY2FjaGUsIHByb3h5QSwgdHJhbnNmb3JtQSwgcHJveHlCLCB0cmFuc2Zvcm1CKSB7XG4gICAgdmFyIGksIG1ldHJpYzEsIG1ldHJpYzIsIHYsIHZlcnRpY2VzLCB3QUxvY2FsLCB3QkxvY2FsO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoMCA8PSBjYWNoZS5jb3VudCAmJiBjYWNoZS5jb3VudCA8PSAzKTtcbiAgICB3QUxvY2FsID0gdm9pZCAwO1xuICAgIHdCTG9jYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5tX2NvdW50ID0gY2FjaGUuY291bnQ7XG4gICAgdmVydGljZXMgPSB0aGlzLm1fdmVydGljZXM7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIHYgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIHYuaW5kZXhBID0gY2FjaGUuaW5kZXhBW2ldO1xuICAgICAgdi5pbmRleEIgPSBjYWNoZS5pbmRleEJbaV07XG4gICAgICB3QUxvY2FsID0gcHJveHlBLkdldFZlcnRleCh2LmluZGV4QSk7XG4gICAgICB3QkxvY2FsID0gcHJveHlCLkdldFZlcnRleCh2LmluZGV4Qik7XG4gICAgICB2LndBID0gYjJNYXRoLk11bFgodHJhbnNmb3JtQSwgd0FMb2NhbCk7XG4gICAgICB2LndCID0gYjJNYXRoLk11bFgodHJhbnNmb3JtQiwgd0JMb2NhbCk7XG4gICAgICB2LncgPSBiMk1hdGguU3VidHJhY3RWVih2LndCLCB2LndBKTtcbiAgICAgIHYuYSA9IDA7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fY291bnQgPiAxKSB7XG4gICAgICBtZXRyaWMxID0gY2FjaGUubWV0cmljO1xuICAgICAgbWV0cmljMiA9IHRoaXMuR2V0TWV0cmljKCk7XG4gICAgICBpZiAobWV0cmljMiA8IC41ICogbWV0cmljMSB8fCAyLjAgKiBtZXRyaWMxIDwgbWV0cmljMiB8fCBtZXRyaWMyIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICB0aGlzLm1fY291bnQgPSAwO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5tX2NvdW50ID09PSAwKSB7XG4gICAgICB2ID0gdmVydGljZXNbMF07XG4gICAgICB2LmluZGV4QSA9IDA7XG4gICAgICB2LmluZGV4QiA9IDA7XG4gICAgICB3QUxvY2FsID0gcHJveHlBLkdldFZlcnRleCgwKTtcbiAgICAgIHdCTG9jYWwgPSBwcm94eUIuR2V0VmVydGV4KDApO1xuICAgICAgdi53QSA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUEsIHdBTG9jYWwpO1xuICAgICAgdi53QiA9IGIyTWF0aC5NdWxYKHRyYW5zZm9ybUIsIHdCTG9jYWwpO1xuICAgICAgdi53ID0gYjJNYXRoLlN1YnRyYWN0VlYodi53Qiwgdi53QSk7XG4gICAgICB0aGlzLm1fY291bnQgPSAxO1xuICAgIH1cbiAgfTtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLldyaXRlQ2FjaGUgPSBmdW5jdGlvbihjYWNoZSkge1xuICAgIHZhciBpLCB2ZXJ0aWNlcztcbiAgICBjYWNoZS5tZXRyaWMgPSB0aGlzLkdldE1ldHJpYygpO1xuICAgIGNhY2hlLmNvdW50ID0gQm94MkQucGFyc2VVSW50KHRoaXMubV9jb3VudCk7XG4gICAgdmVydGljZXMgPSB0aGlzLm1fdmVydGljZXM7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY291bnQpIHtcbiAgICAgIGNhY2hlLmluZGV4QVtpXSA9IEJveDJELnBhcnNlVUludCh2ZXJ0aWNlc1tpXS5pbmRleEEpO1xuICAgICAgY2FjaGUuaW5kZXhCW2ldID0gQm94MkQucGFyc2VVSW50KHZlcnRpY2VzW2ldLmluZGV4Qik7XG4gICAgICBpKys7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuR2V0U2VhcmNoRGlyZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUxMiwgc2duO1xuICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiB0aGlzLm1fdjEudy5HZXROZWdhdGl2ZSgpO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBlMTIgPSBiMk1hdGguU3VidHJhY3RWVih0aGlzLm1fdjIudywgdGhpcy5tX3YxLncpO1xuICAgICAgICBzZ24gPSBiMk1hdGguQ3Jvc3NWVihlMTIsIHRoaXMubV92MS53LkdldE5lZ2F0aXZlKCkpO1xuICAgICAgICBpZiAoc2duID4gMC4wKSB7XG4gICAgICAgICAgcmV0dXJuIGIyTWF0aC5Dcm9zc0ZWKDEuMCwgZTEyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYjJNYXRoLkNyb3NzVkYoZTEyLCAxLjApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBuZXcgYjJWZWMyKCk7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuR2V0Q2xvc2VzdFBvaW50ID0gZnVuY3Rpb24oKSB7XG4gICAgc3dpdGNoICh0aGlzLm1fY291bnQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBuZXcgYjJWZWMyKCk7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiB0aGlzLm1fdjEudztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIG5ldyBiMlZlYzIodGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEudy54ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIudy54LCB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53LnkgKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53LnkpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiBuZXcgYjJWZWMyKCk7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuR2V0V2l0bmVzc1BvaW50cyA9IGZ1bmN0aW9uKHBBLCBwQikge1xuICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBiMlNldHRpbmdzLmIyQXNzZXJ0KGZhbHNlKTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcEEuU2V0Vih0aGlzLm1fdjEud0EpO1xuICAgICAgICByZXR1cm4gcEIuU2V0Vih0aGlzLm1fdjEud0IpO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBwQS54ID0gdGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEud0EueCArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLndBLng7XG4gICAgICAgIHBBLnkgPSB0aGlzLm1fdjEuYSAqIHRoaXMubV92MS53QS55ICsgdGhpcy5tX3YyLmEgKiB0aGlzLm1fdjIud0EueTtcbiAgICAgICAgcEIueCA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndCLnggKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53Qi54O1xuICAgICAgICByZXR1cm4gcEIueSA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndCLnkgKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53Qi55O1xuICAgICAgY2FzZSAzOlxuICAgICAgICBwQi54ID0gcEEueCA9IHRoaXMubV92MS5hICogdGhpcy5tX3YxLndBLnggKyB0aGlzLm1fdjIuYSAqIHRoaXMubV92Mi53QS54ICsgdGhpcy5tX3YzLmEgKiB0aGlzLm1fdjMud0EueDtcbiAgICAgICAgcmV0dXJuIHBCLnkgPSBwQS55ID0gdGhpcy5tX3YxLmEgKiB0aGlzLm1fdjEud0EueSArIHRoaXMubV92Mi5hICogdGhpcy5tX3YyLndBLnkgKyB0aGlzLm1fdjMuYSAqIHRoaXMubV92My53QS55O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLkdldE1ldHJpYyA9IGZ1bmN0aW9uKCkge1xuICAgIHN3aXRjaCAodGhpcy5tX2NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZmFsc2UpO1xuICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gYjJNYXRoLlN1YnRyYWN0VlYodGhpcy5tX3YxLncsIHRoaXMubV92Mi53KS5MZW5ndGgoKTtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIGIyTWF0aC5Dcm9zc1ZWKGIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92Mi53LCB0aGlzLm1fdjEudyksIGIyTWF0aC5TdWJ0cmFjdFZWKHRoaXMubV92My53LCB0aGlzLm1fdjEudykpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYjJTZXR0aW5ncy5iMkFzc2VydChmYWxzZSk7XG4gICAgICAgIHJldHVybiAwLjA7XG4gICAgfVxuICB9O1xuXG4gIGIyU2ltcGxleC5wcm90b3R5cGUuU29sdmUyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGQxMl8xLCBkMTJfMiwgZTEyLCBpbnZfZDEyLCB3MSwgdzI7XG4gICAgdzEgPSB0aGlzLm1fdjEudztcbiAgICB3MiA9IHRoaXMubV92Mi53O1xuICAgIGUxMiA9IGIyTWF0aC5TdWJ0cmFjdFZWKHcyLCB3MSk7XG4gICAgZDEyXzIgPSAtKHcxLnggKiBlMTIueCArIHcxLnkgKiBlMTIueSk7XG4gICAgaWYgKGQxMl8yIDw9IDAuMCkge1xuICAgICAgdGhpcy5tX3YxLmEgPSAxLjA7XG4gICAgICB0aGlzLm1fY291bnQgPSAxO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkMTJfMSA9IHcyLnggKiBlMTIueCArIHcyLnkgKiBlMTIueTtcbiAgICBpZiAoZDEyXzEgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjIuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Mik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGludl9kMTIgPSAxLjAgLyAoZDEyXzEgKyBkMTJfMik7XG4gICAgdGhpcy5tX3YxLmEgPSBkMTJfMSAqIGludl9kMTI7XG4gICAgdGhpcy5tX3YyLmEgPSBkMTJfMiAqIGludl9kMTI7XG4gICAgdGhpcy5tX2NvdW50ID0gMjtcbiAgfTtcblxuICBiMlNpbXBsZXgucHJvdG90eXBlLlNvbHZlMyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkMTIzXzEsIGQxMjNfMiwgZDEyM18zLCBkMTJfMSwgZDEyXzIsIGQxM18xLCBkMTNfMiwgZDIzXzEsIGQyM18yLCBlMTIsIGUxMywgZTIzLCBpbnZfZDEyLCBpbnZfZDEyMywgaW52X2QxMywgaW52X2QyMywgbjEyMywgdzEsIHcxZTEyLCB3MWUxMywgdzIsIHcyZTEyLCB3MmUyMywgdzMsIHczZTEzLCB3M2UyMztcbiAgICB3MSA9IHRoaXMubV92MS53O1xuICAgIHcyID0gdGhpcy5tX3YyLnc7XG4gICAgdzMgPSB0aGlzLm1fdjMudztcbiAgICBlMTIgPSBiMk1hdGguU3VidHJhY3RWVih3MiwgdzEpO1xuICAgIHcxZTEyID0gYjJNYXRoLkRvdCh3MSwgZTEyKTtcbiAgICB3MmUxMiA9IGIyTWF0aC5Eb3QodzIsIGUxMik7XG4gICAgZDEyXzEgPSB3MmUxMjtcbiAgICBkMTJfMiA9IC13MWUxMjtcbiAgICBlMTMgPSBiMk1hdGguU3VidHJhY3RWVih3MywgdzEpO1xuICAgIHcxZTEzID0gYjJNYXRoLkRvdCh3MSwgZTEzKTtcbiAgICB3M2UxMyA9IGIyTWF0aC5Eb3QodzMsIGUxMyk7XG4gICAgZDEzXzEgPSB3M2UxMztcbiAgICBkMTNfMiA9IC13MWUxMztcbiAgICBlMjMgPSBiMk1hdGguU3VidHJhY3RWVih3MywgdzIpO1xuICAgIHcyZTIzID0gYjJNYXRoLkRvdCh3MiwgZTIzKTtcbiAgICB3M2UyMyA9IGIyTWF0aC5Eb3QodzMsIGUyMyk7XG4gICAgZDIzXzEgPSB3M2UyMztcbiAgICBkMjNfMiA9IC13MmUyMztcbiAgICBuMTIzID0gYjJNYXRoLkNyb3NzVlYoZTEyLCBlMTMpO1xuICAgIGQxMjNfMSA9IG4xMjMgKiBiMk1hdGguQ3Jvc3NWVih3MiwgdzMpO1xuICAgIGQxMjNfMiA9IG4xMjMgKiBiMk1hdGguQ3Jvc3NWVih3MywgdzEpO1xuICAgIGQxMjNfMyA9IG4xMjMgKiBiMk1hdGguQ3Jvc3NWVih3MSwgdzIpO1xuICAgIGlmIChkMTJfMiA8PSAwLjAgJiYgZDEzXzIgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjEuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTJfMSA+IDAuMCAmJiBkMTJfMiA+IDAuMCAmJiBkMTIzXzMgPD0gMC4wKSB7XG4gICAgICBpbnZfZDEyID0gMS4wIC8gKGQxMl8xICsgZDEyXzIpO1xuICAgICAgdGhpcy5tX3YxLmEgPSBkMTJfMSAqIGludl9kMTI7XG4gICAgICB0aGlzLm1fdjIuYSA9IGQxMl8yICogaW52X2QxMjtcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTNfMSA+IDAuMCAmJiBkMTNfMiA+IDAuMCAmJiBkMTIzXzIgPD0gMC4wKSB7XG4gICAgICBpbnZfZDEzID0gMS4wIC8gKGQxM18xICsgZDEzXzIpO1xuICAgICAgdGhpcy5tX3YxLmEgPSBkMTNfMSAqIGludl9kMTM7XG4gICAgICB0aGlzLm1fdjMuYSA9IGQxM18yICogaW52X2QxMztcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICB0aGlzLm1fdjIuU2V0KHRoaXMubV92Myk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTJfMSA8PSAwLjAgJiYgZDIzXzIgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjIuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Mik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMTNfMSA8PSAwLjAgJiYgZDIzXzEgPD0gMC4wKSB7XG4gICAgICB0aGlzLm1fdjMuYSA9IDEuMDtcbiAgICAgIHRoaXMubV9jb3VudCA9IDE7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Myk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkMjNfMSA+IDAuMCAmJiBkMjNfMiA+IDAuMCAmJiBkMTIzXzEgPD0gMC4wKSB7XG4gICAgICBpbnZfZDIzID0gMS4wIC8gKGQyM18xICsgZDIzXzIpO1xuICAgICAgdGhpcy5tX3YyLmEgPSBkMjNfMSAqIGludl9kMjM7XG4gICAgICB0aGlzLm1fdjMuYSA9IGQyM18yICogaW52X2QyMztcbiAgICAgIHRoaXMubV9jb3VudCA9IDI7XG4gICAgICB0aGlzLm1fdjEuU2V0KHRoaXMubV92Myk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGludl9kMTIzID0gMS4wIC8gKGQxMjNfMSArIGQxMjNfMiArIGQxMjNfMyk7XG4gICAgdGhpcy5tX3YxLmEgPSBkMTIzXzEgKiBpbnZfZDEyMztcbiAgICB0aGlzLm1fdjIuYSA9IGQxMjNfMiAqIGludl9kMTIzO1xuICAgIHRoaXMubV92My5hID0gZDEyM18zICogaW52X2QxMjM7XG4gICAgdGhpcy5tX2NvdW50ID0gMztcbiAgfTtcblxuICByZXR1cm4gYjJTaW1wbGV4O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlNpbXBsZXguanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvcjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXhDYWNoZSA9IChmdW5jdGlvbigpIHtcbiAgYjJTaW1wbGV4Q2FjaGUucHJvdG90eXBlLmluZGV4QSA9IG51bGw7XG5cbiAgYjJTaW1wbGV4Q2FjaGUucHJvdG90eXBlLmluZGV4QiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJTaW1wbGV4Q2FjaGUoKSB7XG4gICAgdGhpcy5pbmRleEEgPSBuZXcgVmVjdG9yKDMpO1xuICAgIHRoaXMuaW5kZXhCID0gbmV3IFZlY3RvcigzKTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gYjJTaW1wbGV4Q2FjaGU7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2ltcGxleENhY2hlLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkNvbGxpc2lvbi5iMlNpbXBsZXhWZXJ0ZXggPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyU2ltcGxleFZlcnRleCgpIHt9XG5cbiAgYjJTaW1wbGV4VmVydGV4LnByb3RvdHlwZS5pbmRleEEgPSBudWxsO1xuXG4gIGIyU2ltcGxleFZlcnRleC5wcm90b3R5cGUuaW5kZXhCID0gbnVsbDtcblxuICBiMlNpbXBsZXhWZXJ0ZXgucHJvdG90eXBlLndBID0gbnVsbDtcblxuICBiMlNpbXBsZXhWZXJ0ZXgucHJvdG90eXBlLndCID0gbnVsbDtcblxuICBiMlNpbXBsZXhWZXJ0ZXgucHJvdG90eXBlLncgPSBudWxsO1xuXG4gIGIyU2ltcGxleFZlcnRleC5wcm90b3R5cGUuYSA9IG51bGw7XG5cbiAgYjJTaW1wbGV4VmVydGV4LnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHRoaXMud0EuU2V0VihvdGhlci53QSk7XG4gICAgdGhpcy53Qi5TZXRWKG90aGVyLndCKTtcbiAgICB0aGlzLncuU2V0VihvdGhlci53KTtcbiAgICB0aGlzLmEgPSBvdGhlci5hO1xuICAgIHRoaXMuaW5kZXhBID0gb3RoZXIuaW5kZXhBO1xuICAgIHRoaXMuaW5kZXhCID0gb3RoZXIuaW5kZXhCO1xuICB9O1xuXG4gIHJldHVybiBiMlNpbXBsZXhWZXJ0ZXg7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2ltcGxleFZlcnRleC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJEaXN0YW5jZVByb3h5LCBiMlN3ZWVwO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU3dlZXAgPSBCb3gyRC5Db21tb24uTWF0aC5iMlN3ZWVwO1xuXG5iMkRpc3RhbmNlUHJveHkgPSBCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZVByb3h5O1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJUT0lJbnB1dCA9IChmdW5jdGlvbigpIHtcbiAgYjJUT0lJbnB1dC5wcm90b3R5cGUucHJveHlBID0gbnVsbDtcblxuICBiMlRPSUlucHV0LnByb3RvdHlwZS5wcm94eUIgPSBudWxsO1xuXG4gIGIyVE9JSW5wdXQucHJvdG90eXBlLnN3ZWVwQSA9IG51bGw7XG5cbiAgYjJUT0lJbnB1dC5wcm90b3R5cGUuc3dlZXBCID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMlRPSUlucHV0KCkge1xuICAgIHRoaXMucHJveHlBID0gbmV3IGIyRGlzdGFuY2VQcm94eSgpO1xuICAgIHRoaXMucHJveHlCID0gbmV3IGIyRGlzdGFuY2VQcm94eSgpO1xuICAgIHRoaXMuc3dlZXBBID0gbmV3IGIyU3dlZXAoKTtcbiAgICB0aGlzLnN3ZWVwQiA9IG5ldyBiMlN3ZWVwKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyVE9JSW5wdXQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyVE9JSW5wdXQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyRGlzdGFuY2UsIGIyRGlzdGFuY2VJbnB1dCwgYjJEaXN0YW5jZU91dHB1dCwgYjJNYXRoLCBiMlNlcGFyYXRpb25GdW5jdGlvbiwgYjJTZXR0aW5ncywgYjJTaW1wbGV4Q2FjaGUsIGIyVHJhbnNmb3JtO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMlRyYW5zZm9ybSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtO1xuXG5iMkRpc3RhbmNlID0gQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2U7XG5cbmIyU2ltcGxleENhY2hlID0gQm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleENhY2hlO1xuXG5iMlNlcGFyYXRpb25GdW5jdGlvbiA9IEJveDJELkNvbGxpc2lvbi5iMlNlcGFyYXRpb25GdW5jdGlvbjtcblxuYjJEaXN0YW5jZU91dHB1dCA9IEJveDJELkNvbGxpc2lvbi5iMkRpc3RhbmNlT3V0cHV0O1xuXG5iMkRpc3RhbmNlSW5wdXQgPSBCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZUlucHV0O1xuXG5Cb3gyRC5Db2xsaXNpb24uYjJUaW1lT2ZJbXBhY3QgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyVGltZU9mSW1wYWN0KCkge31cblxuICBiMlRpbWVPZkltcGFjdC5iMl90b2lDYWxscyA9IDA7XG5cbiAgYjJUaW1lT2ZJbXBhY3QuYjJfdG9pSXRlcnMgPSAwO1xuXG4gIGIyVGltZU9mSW1wYWN0LmIyX3RvaU1heEl0ZXJzID0gMDtcblxuICBiMlRpbWVPZkltcGFjdC5iMl90b2lSb290SXRlcnMgPSAwO1xuXG4gIGIyVGltZU9mSW1wYWN0LmIyX3RvaU1heFJvb3RJdGVycyA9IDA7XG5cbiAgYjJUaW1lT2ZJbXBhY3Quc19jYWNoZSA9IG5ldyBiMlNpbXBsZXhDYWNoZSgpO1xuXG4gIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dCA9IG5ldyBiMkRpc3RhbmNlSW5wdXQoKTtcblxuICBiMlRpbWVPZkltcGFjdC5zX3hmQSA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuXG4gIGIyVGltZU9mSW1wYWN0LnNfeGZCID0gbmV3IGIyVHJhbnNmb3JtKCk7XG5cbiAgYjJUaW1lT2ZJbXBhY3Quc19mY24gPSBuZXcgYjJTZXBhcmF0aW9uRnVuY3Rpb24oKTtcblxuICBiMlRpbWVPZkltcGFjdC5zX2Rpc3RhbmNlT3V0cHV0ID0gbmV3IGIyRGlzdGFuY2VPdXRwdXQoKTtcblxuICBiMlRpbWVPZkltcGFjdC5UaW1lT2ZJbXBhY3QgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgIHZhciBhbHBoYSwgZiwgZjEsIGYyLCBpdGVyLCBrX21heEl0ZXJhdGlvbnMsIG5ld0FscGhhLCBwcm94eUEsIHByb3h5QiwgcmFkaXVzLCByb290SXRlckNvdW50LCBzZXBhcmF0aW9uLCBzd2VlcEEsIHN3ZWVwQiwgdGFyZ2V0LCB0b2xlcmFuY2UsIHgsIHgxLCB4MjtcbiAgICArK2IyVGltZU9mSW1wYWN0LmIyX3RvaUNhbGxzO1xuICAgIHByb3h5QSA9IGlucHV0LnByb3h5QTtcbiAgICBwcm94eUIgPSBpbnB1dC5wcm94eUI7XG4gICAgc3dlZXBBID0gaW5wdXQuc3dlZXBBO1xuICAgIHN3ZWVwQiA9IGlucHV0LnN3ZWVwQjtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KHN3ZWVwQS50MCA9PT0gc3dlZXBCLnQwKTtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KDEuMCAtIHN3ZWVwQS50MCA+IE51bWJlci5NSU5fVkFMVUUpO1xuICAgIHJhZGl1cyA9IHByb3h5QS5tX3JhZGl1cyArIHByb3h5Qi5tX3JhZGl1cztcbiAgICB0b2xlcmFuY2UgPSBpbnB1dC50b2xlcmFuY2U7XG4gICAgYWxwaGEgPSAwLjA7XG4gICAga19tYXhJdGVyYXRpb25zID0gMTAwMDtcbiAgICBpdGVyID0gMDtcbiAgICB0YXJnZXQgPSAwLjA7XG4gICAgYjJUaW1lT2ZJbXBhY3Quc19jYWNoZS5jb3VudCA9IDA7XG4gICAgYjJUaW1lT2ZJbXBhY3Quc19kaXN0YW5jZUlucHV0LnVzZVJhZGlpID0gZmFsc2U7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIHN3ZWVwQS5HZXRUcmFuc2Zvcm0oYjJUaW1lT2ZJbXBhY3Quc194ZkEsIGFscGhhKTtcbiAgICAgIHN3ZWVwQi5HZXRUcmFuc2Zvcm0oYjJUaW1lT2ZJbXBhY3Quc194ZkIsIGFscGhhKTtcbiAgICAgIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dC5wcm94eUEgPSBwcm94eUE7XG4gICAgICBiMlRpbWVPZkltcGFjdC5zX2Rpc3RhbmNlSW5wdXQucHJveHlCID0gcHJveHlCO1xuICAgICAgYjJUaW1lT2ZJbXBhY3Quc19kaXN0YW5jZUlucHV0LnRyYW5zZm9ybUEgPSBiMlRpbWVPZkltcGFjdC5zX3hmQTtcbiAgICAgIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dC50cmFuc2Zvcm1CID0gYjJUaW1lT2ZJbXBhY3Quc194ZkI7XG4gICAgICBiMkRpc3RhbmNlLkRpc3RhbmNlKGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VPdXRwdXQsIGIyVGltZU9mSW1wYWN0LnNfY2FjaGUsIGIyVGltZU9mSW1wYWN0LnNfZGlzdGFuY2VJbnB1dCk7XG4gICAgICBpZiAoYjJUaW1lT2ZJbXBhY3Quc19kaXN0YW5jZU91dHB1dC5kaXN0YW5jZSA8PSAwLjApIHtcbiAgICAgICAgYWxwaGEgPSAxLjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgYjJUaW1lT2ZJbXBhY3Quc19mY24uSW5pdGlhbGl6ZShiMlRpbWVPZkltcGFjdC5zX2NhY2hlLCBwcm94eUEsIGIyVGltZU9mSW1wYWN0LnNfeGZBLCBwcm94eUIsIGIyVGltZU9mSW1wYWN0LnNfeGZCKTtcbiAgICAgIHNlcGFyYXRpb24gPSBiMlRpbWVPZkltcGFjdC5zX2Zjbi5FdmFsdWF0ZShiMlRpbWVPZkltcGFjdC5zX3hmQSwgYjJUaW1lT2ZJbXBhY3Quc194ZkIpO1xuICAgICAgaWYgKHNlcGFyYXRpb24gPD0gMC4wKSB7XG4gICAgICAgIGFscGhhID0gMS4wO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChpdGVyID09PSAwKSB7XG4gICAgICAgIGlmIChzZXBhcmF0aW9uID4gcmFkaXVzKSB7XG4gICAgICAgICAgdGFyZ2V0ID0gYjJNYXRoLk1heChyYWRpdXMgLSB0b2xlcmFuY2UsIDAuNzUgKiByYWRpdXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldCA9IGIyTWF0aC5NYXgoc2VwYXJhdGlvbiAtIHRvbGVyYW5jZSwgMC4wMiAqIHJhZGl1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzZXBhcmF0aW9uIC0gdGFyZ2V0IDwgMC41ICogdG9sZXJhbmNlKSB7XG4gICAgICAgIGlmIChpdGVyID09PSAwKSB7XG4gICAgICAgICAgYWxwaGEgPSAxLjA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBuZXdBbHBoYSA9IGFscGhhO1xuICAgICAgeDEgPSBhbHBoYTtcbiAgICAgIHgyID0gMS4wO1xuICAgICAgZjEgPSBzZXBhcmF0aW9uO1xuICAgICAgc3dlZXBBLkdldFRyYW5zZm9ybShiMlRpbWVPZkltcGFjdC5zX3hmQSwgeDIpO1xuICAgICAgc3dlZXBCLkdldFRyYW5zZm9ybShiMlRpbWVPZkltcGFjdC5zX3hmQiwgeDIpO1xuICAgICAgZjIgPSBiMlRpbWVPZkltcGFjdC5zX2Zjbi5FdmFsdWF0ZShiMlRpbWVPZkltcGFjdC5zX3hmQSwgYjJUaW1lT2ZJbXBhY3Quc194ZkIpO1xuICAgICAgaWYgKGYyID49IHRhcmdldCkge1xuICAgICAgICBhbHBoYSA9IDEuMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByb290SXRlckNvdW50ID0gMDtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHggPSAwO1xuICAgICAgICBpZiAocm9vdEl0ZXJDb3VudCAmIDEpIHtcbiAgICAgICAgICB4ID0geDEgKyAodGFyZ2V0IC0gZjEpICogKHgyIC0geDEpIC8gKGYyIC0gZjEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHggPSAwLjUgKiAoeDEgKyB4Mik7XG4gICAgICAgIH1cbiAgICAgICAgc3dlZXBBLkdldFRyYW5zZm9ybShiMlRpbWVPZkltcGFjdC5zX3hmQSwgeCk7XG4gICAgICAgIHN3ZWVwQi5HZXRUcmFuc2Zvcm0oYjJUaW1lT2ZJbXBhY3Quc194ZkIsIHgpO1xuICAgICAgICBmID0gYjJUaW1lT2ZJbXBhY3Quc19mY24uRXZhbHVhdGUoYjJUaW1lT2ZJbXBhY3Quc194ZkEsIGIyVGltZU9mSW1wYWN0LnNfeGZCKTtcbiAgICAgICAgaWYgKGIyTWF0aC5BYnMoZiAtIHRhcmdldCkgPCAwLjAyNSAqIHRvbGVyYW5jZSkge1xuICAgICAgICAgIG5ld0FscGhhID0geDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZiA+IHRhcmdldCkge1xuICAgICAgICAgIHgxID0geDtcbiAgICAgICAgICBmMSA9IGY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgeDIgPSB4O1xuICAgICAgICAgIGYyID0gZjtcbiAgICAgICAgfVxuICAgICAgICArK3Jvb3RJdGVyQ291bnQ7XG4gICAgICAgICsrYjJUaW1lT2ZJbXBhY3QuYjJfdG9pUm9vdEl0ZXJzO1xuICAgICAgICBpZiAocm9vdEl0ZXJDb3VudCA9PT0gNTApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYjJUaW1lT2ZJbXBhY3QuYjJfdG9pTWF4Um9vdEl0ZXJzID0gYjJNYXRoLk1heChiMlRpbWVPZkltcGFjdC5iMl90b2lNYXhSb290SXRlcnMsIHJvb3RJdGVyQ291bnQpO1xuICAgICAgaWYgKG5ld0FscGhhIDwgKDEuMCArIDEwMC4wICogTnVtYmVyLk1JTl9WQUxVRSkgKiBhbHBoYSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGFscGhhID0gbmV3QWxwaGE7XG4gICAgICBpdGVyKys7XG4gICAgICArK2IyVGltZU9mSW1wYWN0LmIyX3RvaUl0ZXJzO1xuICAgICAgaWYgKGl0ZXIgPT09IGtfbWF4SXRlcmF0aW9ucykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgYjJUaW1lT2ZJbXBhY3QuYjJfdG9pTWF4SXRlcnMgPSBiMk1hdGguTWF4KGIyVGltZU9mSW1wYWN0LmIyX3RvaU1heEl0ZXJzLCBpdGVyKTtcbiAgICByZXR1cm4gYWxwaGE7XG4gIH07XG5cbiAgcmV0dXJuIGIyVGltZU9mSW1wYWN0O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlRpbWVPZkltcGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgVmVjdG9yLCBiMlNldHRpbmdzLCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuVmVjdG9yID0gQm94MkQuVmVjdG9yO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29sbGlzaW9uLmIyV29ybGRNYW5pZm9sZCA9IChmdW5jdGlvbigpIHtcbiAgYjJXb3JsZE1hbmlmb2xkLnByb3RvdHlwZS5tX25vcm1hbCA9IG51bGw7XG5cbiAgYjJXb3JsZE1hbmlmb2xkLnByb3RvdHlwZS5tX3BvaW50cyA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJXb3JsZE1hbmlmb2xkKCkge1xuICAgIHZhciBpO1xuICAgIHRoaXMubV9ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3BvaW50cyA9IG5ldyBWZWN0b3IoYjJTZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50cyk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKSB7XG4gICAgICB0aGlzLm1fcG9pbnRzW2ldID0gbmV3IGIyVmVjMigpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBiMldvcmxkTWFuaWZvbGQucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihtYW5pZm9sZCwgeGZBLCByYWRpdXNBLCB4ZkIsIHJhZGl1c0IpIHtcbiAgICB2YXIgY0FYLCBjQVksIGNCWCwgY0JZLCBjbGlwUG9pbnRYLCBjbGlwUG9pbnRZLCBkLCBkMiwgZFgsIGRZLCBpLCBub3JtYWxYLCBub3JtYWxZLCBwbGFuZVBvaW50WCwgcGxhbmVQb2ludFksIHBvaW50QVgsIHBvaW50QVksIHBvaW50QlgsIHBvaW50QlksIHRNYXQsIHRWZWMsIF9yZXN1bHRzLCBfcmVzdWx0czE7XG4gICAgaWYgKHJhZGl1c0EgPT09IHZvaWQgMCkge1xuICAgICAgcmFkaXVzQSA9IDA7XG4gICAgfVxuICAgIGlmIChyYWRpdXNCID09PSB2b2lkIDApIHtcbiAgICAgIHJhZGl1c0IgPSAwO1xuICAgIH1cbiAgICBpZiAobWFuaWZvbGQubV9wb2ludENvdW50ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICBub3JtYWxYID0gMDtcbiAgICBub3JtYWxZID0gMDtcbiAgICBwbGFuZVBvaW50WCA9IDA7XG4gICAgcGxhbmVQb2ludFkgPSAwO1xuICAgIGNsaXBQb2ludFggPSAwO1xuICAgIGNsaXBQb2ludFkgPSAwO1xuICAgIHN3aXRjaCAobWFuaWZvbGQubV90eXBlKSB7XG4gICAgICBjYXNlIGIyTWFuaWZvbGQuZV9jaXJjbGVzOlxuICAgICAgICB0TWF0ID0geGZBLlI7XG4gICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX2xvY2FsUG9pbnQ7XG4gICAgICAgIHBvaW50QVggPSB4ZkEucG9zaXRpb24ueCArIHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgIHBvaW50QVkgPSB4ZkEucG9zaXRpb24ueSArIHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICAgIHRNYXQgPSB4ZkIuUjtcbiAgICAgICAgdFZlYyA9IG1hbmlmb2xkLm1fcG9pbnRzWzBdLm1fbG9jYWxQb2ludDtcbiAgICAgICAgcG9pbnRCWCA9IHhmQi5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgcG9pbnRCWSA9IHhmQi5wb3NpdGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgZFggPSBwb2ludEJYIC0gcG9pbnRBWDtcbiAgICAgICAgZFkgPSBwb2ludEJZIC0gcG9pbnRBWTtcbiAgICAgICAgZDIgPSBkWCAqIGRYICsgZFkgKiBkWTtcbiAgICAgICAgaWYgKGQyID4gTnVtYmVyLk1JTl9WQUxVRSAqIE51bWJlci5NSU5fVkFMVUUpIHtcbiAgICAgICAgICBkID0gTWF0aC5zcXJ0KGQyKTtcbiAgICAgICAgICB0aGlzLm1fbm9ybWFsLnggPSBkWCAvIGQ7XG4gICAgICAgICAgdGhpcy5tX25vcm1hbC55ID0gZFkgLyBkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubV9ub3JtYWwueCA9IDE7XG4gICAgICAgICAgdGhpcy5tX25vcm1hbC55ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBjQVggPSBwb2ludEFYICsgcmFkaXVzQSAqIHRoaXMubV9ub3JtYWwueDtcbiAgICAgICAgY0FZID0gcG9pbnRBWSArIHJhZGl1c0EgKiB0aGlzLm1fbm9ybWFsLnk7XG4gICAgICAgIGNCWCA9IHBvaW50QlggLSByYWRpdXNCICogdGhpcy5tX25vcm1hbC54O1xuICAgICAgICBjQlkgPSBwb2ludEJZIC0gcmFkaXVzQiAqIHRoaXMubV9ub3JtYWwueTtcbiAgICAgICAgdGhpcy5tX3BvaW50c1swXS54ID0gMC41ICogKGNBWCArIGNCWCk7XG4gICAgICAgIHJldHVybiB0aGlzLm1fcG9pbnRzWzBdLnkgPSAwLjUgKiAoY0FZICsgY0JZKTtcbiAgICAgIGNhc2UgYjJNYW5pZm9sZC5lX2ZhY2VBOlxuICAgICAgICB0TWF0ID0geGZBLlI7XG4gICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX2xvY2FsUGxhbmVOb3JtYWw7XG4gICAgICAgIG5vcm1hbFggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgICBub3JtYWxZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgdE1hdCA9IHhmQS5SO1xuICAgICAgICB0VmVjID0gbWFuaWZvbGQubV9sb2NhbFBvaW50O1xuICAgICAgICBwbGFuZVBvaW50WCA9IHhmQS5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgcGxhbmVQb2ludFkgPSB4ZkEucG9zaXRpb24ueSArIHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueCA9IG5vcm1hbFg7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueSA9IG5vcm1hbFk7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBfcmVzdWx0cyA9IFtdO1xuICAgICAgICB3aGlsZSAoaSA8IG1hbmlmb2xkLm1fcG9pbnRDb3VudCkge1xuICAgICAgICAgIHRNYXQgPSB4ZkIuUjtcbiAgICAgICAgICB0VmVjID0gbWFuaWZvbGQubV9wb2ludHNbaV0ubV9sb2NhbFBvaW50O1xuICAgICAgICAgIGNsaXBQb2ludFggPSB4ZkIucG9zaXRpb24ueCArIHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgICAgY2xpcFBvaW50WSA9IHhmQi5wb3NpdGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgICB0aGlzLm1fcG9pbnRzW2ldLnggPSBjbGlwUG9pbnRYICsgMC41ICogKHJhZGl1c0EgLSAoY2xpcFBvaW50WCAtIHBsYW5lUG9pbnRYKSAqIG5vcm1hbFggLSAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIG5vcm1hbFkgLSByYWRpdXNCKSAqIG5vcm1hbFg7XG4gICAgICAgICAgdGhpcy5tX3BvaW50c1tpXS55ID0gY2xpcFBvaW50WSArIDAuNSAqIChyYWRpdXNBIC0gKGNsaXBQb2ludFggLSBwbGFuZVBvaW50WCkgKiBub3JtYWxYIC0gKGNsaXBQb2ludFkgLSBwbGFuZVBvaW50WSkgKiBub3JtYWxZIC0gcmFkaXVzQikgKiBub3JtYWxZO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2goaSsrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMk1hbmlmb2xkLmVfZmFjZUI6XG4gICAgICAgIHRNYXQgPSB4ZkIuUjtcbiAgICAgICAgdFZlYyA9IG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbDtcbiAgICAgICAgbm9ybWFsWCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgIG5vcm1hbFkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgICB0TWF0ID0geGZCLlI7XG4gICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX2xvY2FsUG9pbnQ7XG4gICAgICAgIHBsYW5lUG9pbnRYID0geGZCLnBvc2l0aW9uLnggKyB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgICBwbGFuZVBvaW50WSA9IHhmQi5wb3NpdGlvbi55ICsgdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgdGhpcy5tX25vcm1hbC54ID0gLW5vcm1hbFg7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueSA9IC1ub3JtYWxZO1xuICAgICAgICBpID0gMDtcbiAgICAgICAgX3Jlc3VsdHMxID0gW107XG4gICAgICAgIHdoaWxlIChpIDwgbWFuaWZvbGQubV9wb2ludENvdW50KSB7XG4gICAgICAgICAgdE1hdCA9IHhmQS5SO1xuICAgICAgICAgIHRWZWMgPSBtYW5pZm9sZC5tX3BvaW50c1tpXS5tX2xvY2FsUG9pbnQ7XG4gICAgICAgICAgY2xpcFBvaW50WCA9IHhmQS5wb3NpdGlvbi54ICsgdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgICBjbGlwUG9pbnRZID0geGZBLnBvc2l0aW9uLnkgKyB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgICAgICAgIHRoaXMubV9wb2ludHNbaV0ueCA9IGNsaXBQb2ludFggKyAwLjUgKiAocmFkaXVzQiAtIChjbGlwUG9pbnRYIC0gcGxhbmVQb2ludFgpICogbm9ybWFsWCAtIChjbGlwUG9pbnRZIC0gcGxhbmVQb2ludFkpICogbm9ybWFsWSAtIHJhZGl1c0EpICogbm9ybWFsWDtcbiAgICAgICAgICB0aGlzLm1fcG9pbnRzW2ldLnkgPSBjbGlwUG9pbnRZICsgMC41ICogKHJhZGl1c0IgLSAoY2xpcFBvaW50WCAtIHBsYW5lUG9pbnRYKSAqIG5vcm1hbFggLSAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIG5vcm1hbFkgLSByYWRpdXNBKSAqIG5vcm1hbFk7XG4gICAgICAgICAgX3Jlc3VsdHMxLnB1c2goaSsrKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHMxO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYjJXb3JsZE1hbmlmb2xkO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMldvcmxkTWFuaWZvbGQuanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvciwgYjJNYXRoLCBiMlNldHRpbmdzLCBiMlNoYXBlLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGU7XG5cbkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJDaXJjbGVTaGFwZSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyQ2lyY2xlU2hhcGUsIF9zdXBlcik7XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUubV90eXBlID0gYjJTaGFwZS5lX2NpcmNsZVNoYXBlO1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLm1fcCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJDaXJjbGVTaGFwZShyYWRpdXMpIHtcbiAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHtcbiAgICAgIHJhZGl1cyA9IDA7XG4gICAgfVxuICAgIGIyQ2lyY2xlU2hhcGUuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcmFkaXVzKTtcbiAgICB0aGlzLm1fcCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdHlwZSA9IGIyU2hhcGUuZV9jaXJjbGVTaGFwZTtcbiAgICB0aGlzLm1fcmFkaXVzID0gcmFkaXVzO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcztcbiAgICBzID0gbmV3IGIyQ2lyY2xlU2hhcGUoKTtcbiAgICBzLlNldCh0aGlzKTtcbiAgICByZXR1cm4gcztcbiAgfTtcblxuICBiMkNpcmNsZVNoYXBlLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHZhciBvdGhlcjI7XG4gICAgYjJDaXJjbGVTaGFwZS5fX3N1cGVyX18uU2V0LmNhbGwodGhpcywgb3RoZXIpO1xuICAgIGlmIChCb3gyRC5lcXVhbHMob3RoZXIsIGIyQ2lyY2xlU2hhcGUpKSB7XG4gICAgICBvdGhlcjIgPSAob3RoZXIgaW5zdGFuY2VvZiBiMkNpcmNsZVNoYXBlID8gb3RoZXIgOiBudWxsKTtcbiAgICAgIHRoaXMubV9wLlNldFYob3RoZXIyLm1fcCk7XG4gICAgfVxuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLlRlc3RQb2ludCA9IGZ1bmN0aW9uKHRyYW5zZm9ybSwgcCkge1xuICAgIHZhciBkWCwgZFksIHRNYXQ7XG4gICAgdE1hdCA9IHRyYW5zZm9ybS5SO1xuICAgIGRYID0gdHJhbnNmb3JtLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fcC55KTtcbiAgICBkWSA9IHRyYW5zZm9ybS5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdGhpcy5tX3AueCArIHRNYXQuY29sMi55ICogdGhpcy5tX3AueSk7XG4gICAgZFggPSBwLnggLSBkWDtcbiAgICBkWSA9IHAueSAtIGRZO1xuICAgIHJldHVybiAoZFggKiBkWCArIGRZICogZFkpIDw9IHRoaXMubV9yYWRpdXMgKiB0aGlzLm1fcmFkaXVzO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLlJheUNhc3QgPSBmdW5jdGlvbihvdXRwdXQsIGlucHV0LCB0cmFuc2Zvcm0pIHtcbiAgICB2YXIgYSwgYiwgYywgcG9zaXRpb25YLCBwb3NpdGlvblksIHJYLCByWSwgcnIsIHNYLCBzWSwgc2lnbWEsIHRNYXQ7XG4gICAgdE1hdCA9IHRyYW5zZm9ybS5SO1xuICAgIHBvc2l0aW9uWCA9IHRyYW5zZm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX3AueCArIHRNYXQuY29sMi54ICogdGhpcy5tX3AueSk7XG4gICAgcG9zaXRpb25ZID0gdHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fcC54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fcC55KTtcbiAgICBzWCA9IGlucHV0LnAxLnggLSBwb3NpdGlvblg7XG4gICAgc1kgPSBpbnB1dC5wMS55IC0gcG9zaXRpb25ZO1xuICAgIGIgPSAoc1ggKiBzWCArIHNZICogc1kpIC0gdGhpcy5tX3JhZGl1cyAqIHRoaXMubV9yYWRpdXM7XG4gICAgclggPSBpbnB1dC5wMi54IC0gaW5wdXQucDEueDtcbiAgICByWSA9IGlucHV0LnAyLnkgLSBpbnB1dC5wMS55O1xuICAgIGMgPSBzWCAqIHJYICsgc1kgKiByWTtcbiAgICByciA9IHJYICogclggKyByWSAqIHJZO1xuICAgIHNpZ21hID0gYyAqIGMgLSByciAqIGI7XG4gICAgaWYgKHNpZ21hIDwgMC4wIHx8IHJyIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhID0gLShjICsgTWF0aC5zcXJ0KHNpZ21hKSk7XG4gICAgaWYgKDAuMCA8PSBhICYmIGEgPD0gaW5wdXQubWF4RnJhY3Rpb24gKiBycikge1xuICAgICAgYSAvPSBycjtcbiAgICAgIG91dHB1dC5mcmFjdGlvbiA9IGE7XG4gICAgICBvdXRwdXQubm9ybWFsLnggPSBzWCArIGEgKiByWDtcbiAgICAgIG91dHB1dC5ub3JtYWwueSA9IHNZICsgYSAqIHJZO1xuICAgICAgb3V0cHV0Lm5vcm1hbC5Ob3JtYWxpemUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgYjJDaXJjbGVTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZUFBQkIgPSBmdW5jdGlvbihhYWJiLCB0cmFuc2Zvcm0pIHtcbiAgICB2YXIgcFgsIHBZLCB0TWF0O1xuICAgIHRNYXQgPSB0cmFuc2Zvcm0uUjtcbiAgICBwWCA9IHRyYW5zZm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX3AueCArIHRNYXQuY29sMi54ICogdGhpcy5tX3AueSk7XG4gICAgcFkgPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV9wLnggKyB0TWF0LmNvbDIueSAqIHRoaXMubV9wLnkpO1xuICAgIGFhYmIubG93ZXJCb3VuZC5TZXQocFggLSB0aGlzLm1fcmFkaXVzLCBwWSAtIHRoaXMubV9yYWRpdXMpO1xuICAgIGFhYmIudXBwZXJCb3VuZC5TZXQocFggKyB0aGlzLm1fcmFkaXVzLCBwWSArIHRoaXMubV9yYWRpdXMpO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLkNvbXB1dGVNYXNzID0gZnVuY3Rpb24obWFzc0RhdGEsIGRlbnNpdHkpIHtcbiAgICBpZiAoZGVuc2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZW5zaXR5ID0gMDtcbiAgICB9XG4gICAgbWFzc0RhdGEubWFzcyA9IGRlbnNpdHkgKiBiMlNldHRpbmdzLmIyX3BpICogdGhpcy5tX3JhZGl1cyAqIHRoaXMubV9yYWRpdXM7XG4gICAgbWFzc0RhdGEuY2VudGVyLlNldFYodGhpcy5tX3ApO1xuICAgIG1hc3NEYXRhLkkgPSBtYXNzRGF0YS5tYXNzICogKDAuNSAqIHRoaXMubV9yYWRpdXMgKiB0aGlzLm1fcmFkaXVzICsgKHRoaXMubV9wLnggKiB0aGlzLm1fcC54ICsgdGhpcy5tX3AueSAqIHRoaXMubV9wLnkpKTtcbiAgfTtcblxuICBiMkNpcmNsZVNoYXBlLnByb3RvdHlwZS5Db21wdXRlU3VibWVyZ2VkQXJlYSA9IGZ1bmN0aW9uKG5vcm1hbCwgb2Zmc2V0LCB4ZiwgYykge1xuICAgIHZhciBhcmVhLCBjb20sIGwsIGwyLCBwLCByMjtcbiAgICBpZiAob2Zmc2V0ID09PSB2b2lkIDApIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuICAgIHAgPSBiMk1hdGguTXVsWCh4ZiwgdGhpcy5tX3ApO1xuICAgIGwgPSAtKGIyTWF0aC5Eb3Qobm9ybWFsLCBwKSAtIG9mZnNldCk7XG4gICAgaWYgKGwgPCAoLXRoaXMubV9yYWRpdXMpICsgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChsID4gdGhpcy5tX3JhZGl1cykge1xuICAgICAgYy5TZXRWKHApO1xuICAgICAgcmV0dXJuIE1hdGguUEkgKiB0aGlzLm1fcmFkaXVzICogdGhpcy5tX3JhZGl1cztcbiAgICB9XG4gICAgcjIgPSB0aGlzLm1fcmFkaXVzICogdGhpcy5tX3JhZGl1cztcbiAgICBsMiA9IGwgKiBsO1xuICAgIGFyZWEgPSByMiAqIChNYXRoLmFzaW4obCAvIHRoaXMubV9yYWRpdXMpICsgTWF0aC5QSSAvIDIpICsgbCAqIE1hdGguc3FydChyMiAtIGwyKTtcbiAgICBjb20gPSAtMiAvIDMgKiBNYXRoLnBvdyhyMiAtIGwyLCAxLjUpIC8gYXJlYTtcbiAgICBjLnggPSBwLnggKyBub3JtYWwueCAqIGNvbTtcbiAgICBjLnkgPSBwLnkgKyBub3JtYWwueSAqIGNvbTtcbiAgICByZXR1cm4gYXJlYTtcbiAgfTtcblxuICBiMkNpcmNsZVNoYXBlLnByb3RvdHlwZS5HZXRMb2NhbFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9wO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLlNldExvY2FsUG9zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgIHRoaXMubV9wLlNldFYocG9zaXRpb24pO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLkdldFJhZGl1cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fcmFkaXVzO1xuICB9O1xuXG4gIGIyQ2lyY2xlU2hhcGUucHJvdG90eXBlLlNldFJhZGl1cyA9IGZ1bmN0aW9uKHJhZGl1cykge1xuICAgIGlmIChyYWRpdXMgPT09IHZvaWQgMCkge1xuICAgICAgcmFkaXVzID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX3JhZGl1cyA9IHJhZGl1cztcbiAgfTtcblxuICByZXR1cm4gYjJDaXJjbGVTaGFwZTtcblxufSkoYjJTaGFwZSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ2lyY2xlU2hhcGUuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMkVkZ2VDaGFpbkRlZiA9IChmdW5jdGlvbigpIHtcbiAgYjJFZGdlQ2hhaW5EZWYucHJvdG90eXBlLnZlcnRleENvdW50ID0gMDtcblxuICBiMkVkZ2VDaGFpbkRlZi5wcm90b3R5cGUuaXNBTG9vcCA9IHRydWU7XG5cbiAgYjJFZGdlQ2hhaW5EZWYucHJvdG90eXBlLnZlcnRpY2VzID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkVkZ2VDaGFpbkRlZigpIHtcbiAgICB0aGlzLnZlcnRpY2VzID0gW107XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyRWRnZUNoYWluRGVmO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkVkZ2VDaGFpbkRlZi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJTaGFwZSxcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGU7XG5cbkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJFZGdlU2hhcGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkVkZ2VTaGFwZSwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBiMkVkZ2VTaGFwZSgpIHtcbiAgICBiMkVkZ2VTaGFwZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLnNfc3VwcG9ydFZlYyA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdjEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3YyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9jb3JlVjEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2NvcmVWMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbm9ybWFsID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9kaXJlY3Rpb24gPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2Nvcm5lckRpcjEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2Nvcm5lckRpcjIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3R5cGUgPSBiMlNoYXBlLmVfZWRnZVNoYXBlO1xuICAgIHRoaXMubV9wcmV2RWRnZSA9IG51bGw7XG4gICAgdGhpcy5tX25leHRFZGdlID0gbnVsbDtcbiAgICB0aGlzLm1fdjEgPSB2MTtcbiAgICB0aGlzLm1fdjIgPSB2MjtcbiAgICB0aGlzLm1fZGlyZWN0aW9uLlNldCh0aGlzLm1fdjIueCAtIHRoaXMubV92MS54LCB0aGlzLm1fdjIueSAtIHRoaXMubV92MS55KTtcbiAgICB0aGlzLm1fbGVuZ3RoID0gdGhpcy5tX2RpcmVjdGlvbi5Ob3JtYWxpemUoKTtcbiAgICB0aGlzLm1fbm9ybWFsLlNldCh0aGlzLm1fZGlyZWN0aW9uLnksIC10aGlzLm1fZGlyZWN0aW9uLngpO1xuICAgIHRoaXMubV9jb3JlVjEuU2V0KCgtYjJTZXR0aW5ncy5iMl90b2lTbG9wICogKHRoaXMubV9ub3JtYWwueCAtIHRoaXMubV9kaXJlY3Rpb24ueCkpICsgdGhpcy5tX3YxLngsICgtYjJTZXR0aW5ncy5iMl90b2lTbG9wICogKHRoaXMubV9ub3JtYWwueSAtIHRoaXMubV9kaXJlY3Rpb24ueSkpICsgdGhpcy5tX3YxLnkpO1xuICAgIHRoaXMubV9jb3JlVjIuU2V0KCgtYjJTZXR0aW5ncy5iMl90b2lTbG9wICogKHRoaXMubV9ub3JtYWwueCArIHRoaXMubV9kaXJlY3Rpb24ueCkpICsgdGhpcy5tX3YyLngsICgtYjJTZXR0aW5ncy5iMl90b2lTbG9wICogKHRoaXMubV9ub3JtYWwueSArIHRoaXMubV9kaXJlY3Rpb24ueSkpICsgdGhpcy5tX3YyLnkpO1xuICAgIHRoaXMubV9jb3JuZXJEaXIxID0gdGhpcy5tX25vcm1hbDtcbiAgICB0aGlzLm1fY29ybmVyRGlyMi5TZXQoLXRoaXMubV9ub3JtYWwueCwgLXRoaXMubV9ub3JtYWwueSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLlRlc3RQb2ludCA9IGZ1bmN0aW9uKHRyYW5zZm9ybSwgcCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dCwgaW5wdXQsIHRyYW5zZm9ybSkge1xuICAgIHZhciBhLCBiWCwgYlksIGRlbm9tLCBrX3Nsb3AsIG11MiwgbkxlbiwgblgsIG5ZLCByWCwgclksIHRNYXQsIHYxWCwgdjFZO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgclggPSBpbnB1dC5wMi54IC0gaW5wdXQucDEueDtcbiAgICByWSA9IGlucHV0LnAyLnkgLSBpbnB1dC5wMS55O1xuICAgIHRNYXQgPSB0cmFuc2Zvcm0uUjtcbiAgICB2MVggPSB0cmFuc2Zvcm0ucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV92MS54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fdjEueSk7XG4gICAgdjFZID0gdHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fdjEueCArIHRNYXQuY29sMi55ICogdGhpcy5tX3YxLnkpO1xuICAgIG5YID0gdHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fdjIueCArIHRNYXQuY29sMi55ICogdGhpcy5tX3YyLnkpIC0gdjFZO1xuICAgIG5ZID0gLSh0cmFuc2Zvcm0ucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV92Mi54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fdjIueSkgLSB2MVgpO1xuICAgIGtfc2xvcCA9IDEwMC4wICogTnVtYmVyLk1JTl9WQUxVRTtcbiAgICBkZW5vbSA9IC0oclggKiBuWCArIHJZICogblkpO1xuICAgIGlmIChkZW5vbSA+IGtfc2xvcCkge1xuICAgICAgYlggPSBpbnB1dC5wMS54IC0gdjFYO1xuICAgICAgYlkgPSBpbnB1dC5wMS55IC0gdjFZO1xuICAgICAgYSA9IGJYICogblggKyBiWSAqIG5ZO1xuICAgICAgaWYgKDAuMCA8PSBhICYmIGEgPD0gaW5wdXQubWF4RnJhY3Rpb24gKiBkZW5vbSkge1xuICAgICAgICBtdTIgPSAoLXJYICogYlkpICsgclkgKiBiWDtcbiAgICAgICAgaWYgKCgta19zbG9wICogZGVub20pIDw9IG11MiAmJiBtdTIgPD0gZGVub20gKiAoMS4wICsga19zbG9wKSkge1xuICAgICAgICAgIGEgLz0gZGVub207XG4gICAgICAgICAgb3V0cHV0LmZyYWN0aW9uID0gYTtcbiAgICAgICAgICBuTGVuID0gTWF0aC5zcXJ0KG5YICogblggKyBuWSAqIG5ZKTtcbiAgICAgICAgICBvdXRwdXQubm9ybWFsLnggPSBuWCAvIG5MZW47XG4gICAgICAgICAgb3V0cHV0Lm5vcm1hbC55ID0gblkgLyBuTGVuO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZUFBQkIgPSBmdW5jdGlvbihhYWJiLCB0cmFuc2Zvcm0pIHtcbiAgICB2YXIgdE1hdCwgdjFYLCB2MVksIHYyWCwgdjJZO1xuICAgIHRNYXQgPSB0cmFuc2Zvcm0uUjtcbiAgICB2MVggPSB0cmFuc2Zvcm0ucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV92MS54ICsgdE1hdC5jb2wyLnggKiB0aGlzLm1fdjEueSk7XG4gICAgdjFZID0gdHJhbnNmb3JtLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0aGlzLm1fdjEueCArIHRNYXQuY29sMi55ICogdGhpcy5tX3YxLnkpO1xuICAgIHYyWCA9IHRyYW5zZm9ybS5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdGhpcy5tX3YyLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV92Mi55KTtcbiAgICB2MlkgPSB0cmFuc2Zvcm0ucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV92Mi54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fdjIueSk7XG4gICAgaWYgKHYxWCA8IHYyWCkge1xuICAgICAgYWFiYi5sb3dlckJvdW5kLnggPSB2MVg7XG4gICAgICBhYWJiLnVwcGVyQm91bmQueCA9IHYyWDtcbiAgICB9IGVsc2Uge1xuICAgICAgYWFiYi5sb3dlckJvdW5kLnggPSB2Mlg7XG4gICAgICBhYWJiLnVwcGVyQm91bmQueCA9IHYxWDtcbiAgICB9XG4gICAgaWYgKHYxWSA8IHYyWSkge1xuICAgICAgYWFiYi5sb3dlckJvdW5kLnkgPSB2MVk7XG4gICAgICBhYWJiLnVwcGVyQm91bmQueSA9IHYyWTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWFiYi5sb3dlckJvdW5kLnkgPSB2Mlk7XG4gICAgICBhYWJiLnVwcGVyQm91bmQueSA9IHYxWTtcbiAgICB9XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkNvbXB1dGVNYXNzID0gZnVuY3Rpb24obWFzc0RhdGEsIGRlbnNpdHkpIHtcbiAgICBpZiAoZGVuc2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZW5zaXR5ID0gMDtcbiAgICB9XG4gICAgbWFzc0RhdGEubWFzcyA9IDA7XG4gICAgbWFzc0RhdGEuY2VudGVyLlNldFYodGhpcy5tX3YxKTtcbiAgICBtYXNzRGF0YS5JID0gMDtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29tcHV0ZVN1Ym1lcmdlZEFyZWEgPSBmdW5jdGlvbihub3JtYWwsIG9mZnNldCwgeGYsIGMpIHtcbiAgICB2YXIgZDEsIGQyLCB2MCwgdjEsIHYyO1xuICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgb2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgdjAgPSBuZXcgYjJWZWMyKG5vcm1hbC54ICogb2Zmc2V0LCBub3JtYWwueSAqIG9mZnNldCk7XG4gICAgdjEgPSBiMk1hdGguTXVsWCh4ZiwgdGhpcy5tX3YxKTtcbiAgICB2MiA9IGIyTWF0aC5NdWxYKHhmLCB0aGlzLm1fdjIpO1xuICAgIGQxID0gYjJNYXRoLkRvdChub3JtYWwsIHYxKSAtIG9mZnNldDtcbiAgICBkMiA9IGIyTWF0aC5Eb3Qobm9ybWFsLCB2MikgLSBvZmZzZXQ7XG4gICAgaWYgKGQxID4gMCkge1xuICAgICAgaWYgKGQyID4gMCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHYxLnggPSAoLWQyIC8gKGQxIC0gZDIpICogdjEueCkgKyBkMSAvIChkMSAtIGQyKSAqIHYyLng7XG4gICAgICAgIHYxLnkgPSAoLWQyIC8gKGQxIC0gZDIpICogdjEueSkgKyBkMSAvIChkMSAtIGQyKSAqIHYyLnk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkMiA+IDApIHtcbiAgICAgICAgdjIueCA9ICgtZDIgLyAoZDEgLSBkMikgKiB2MS54KSArIGQxIC8gKGQxIC0gZDIpICogdjIueDtcbiAgICAgICAgdjIueSA9ICgtZDIgLyAoZDEgLSBkMikgKiB2MS55KSArIGQxIC8gKGQxIC0gZDIpICogdjIueTtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgIH1cbiAgICB9XG4gICAgYy54ID0gKHYwLnggKyB2MS54ICsgdjIueCkgLyAzO1xuICAgIGMueSA9ICh2MC55ICsgdjEueSArIHYyLnkpIC8gMztcbiAgICByZXR1cm4gMC41ICogKCh2MS54IC0gdjAueCkgKiAodjIueSAtIHYwLnkpIC0gKHYxLnkgLSB2MC55KSAqICh2Mi54IC0gdjAueCkpO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRMZW5ndGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xlbmd0aDtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0VmVydGV4MSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdjE7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldFZlcnRleDIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3YyO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRDb3JlVmVydGV4MSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29yZVYxO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRDb3JlVmVydGV4MiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29yZVYyO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXROb3JtYWxWZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX25vcm1hbDtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0RGlyZWN0aW9uVmVjdG9yID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9kaXJlY3Rpb247XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldENvcm5lcjFWZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2Nvcm5lckRpcjE7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldENvcm5lcjJWZWN0b3IgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2Nvcm5lckRpcjI7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkNvcm5lcjFJc0NvbnZleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29ybmVyQ29udmV4MTtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuQ29ybmVyMklzQ29udmV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9jb3JuZXJDb252ZXgyO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5HZXRGaXJzdFZlcnRleCA9IGZ1bmN0aW9uKHhmKSB7XG4gICAgdmFyIHRNYXQ7XG4gICAgdE1hdCA9IHhmLlI7XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoeGYucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV9jb3JlVjEueCArIHRNYXQuY29sMi54ICogdGhpcy5tX2NvcmVWMS55KSwgeGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV9jb3JlVjEueCArIHRNYXQuY29sMi55ICogdGhpcy5tX2NvcmVWMS55KSk7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLkdldE5leHRFZGdlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9uZXh0RWRnZTtcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuR2V0UHJldkVkZ2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3ByZXZFZGdlO1xuICB9O1xuXG4gIGIyRWRnZVNoYXBlLnByb3RvdHlwZS5TdXBwb3J0ID0gZnVuY3Rpb24oeGYsIGRYLCBkWSkge1xuICAgIHZhciB0TWF0LCB2MVgsIHYxWSwgdjJYLCB2Mlk7XG4gICAgaWYgKGRYID09PSB2b2lkIDApIHtcbiAgICAgIGRYID0gMDtcbiAgICB9XG4gICAgaWYgKGRZID09PSB2b2lkIDApIHtcbiAgICAgIGRZID0gMDtcbiAgICB9XG4gICAgdE1hdCA9IHhmLlI7XG4gICAgdjFYID0geGYucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRoaXMubV9jb3JlVjEueCArIHRNYXQuY29sMi54ICogdGhpcy5tX2NvcmVWMS55KTtcbiAgICB2MVkgPSB4Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdGhpcy5tX2NvcmVWMS54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLm1fY29yZVYxLnkpO1xuICAgIHYyWCA9IHhmLnBvc2l0aW9uLnggKyAodE1hdC5jb2wxLnggKiB0aGlzLm1fY29yZVYyLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubV9jb3JlVjIueSk7XG4gICAgdjJZID0geGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRoaXMubV9jb3JlVjIueCArIHRNYXQuY29sMi55ICogdGhpcy5tX2NvcmVWMi55KTtcbiAgICBpZiAoKHYxWCAqIGRYICsgdjFZICogZFkpID4gKHYyWCAqIGRYICsgdjJZICogZFkpKSB7XG4gICAgICB0aGlzLnNfc3VwcG9ydFZlYy54ID0gdjFYO1xuICAgICAgdGhpcy5zX3N1cHBvcnRWZWMueSA9IHYxWTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zX3N1cHBvcnRWZWMueCA9IHYyWDtcbiAgICAgIHRoaXMuc19zdXBwb3J0VmVjLnkgPSB2Mlk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNfc3VwcG9ydFZlYztcbiAgfTtcblxuICBiMkVkZ2VTaGFwZS5wcm90b3R5cGUuU2V0UHJldkVkZ2UgPSBmdW5jdGlvbihlZGdlLCBjb3JlLCBjb3JuZXJEaXIsIGNvbnZleCkge1xuICAgIHRoaXMubV9wcmV2RWRnZSA9IGVkZ2U7XG4gICAgdGhpcy5tX2NvcmVWMSA9IGNvcmU7XG4gICAgdGhpcy5tX2Nvcm5lckRpcjEgPSBjb3JuZXJEaXI7XG4gICAgdGhpcy5tX2Nvcm5lckNvbnZleDEgPSBjb252ZXg7XG4gIH07XG5cbiAgYjJFZGdlU2hhcGUucHJvdG90eXBlLlNldE5leHRFZGdlID0gZnVuY3Rpb24oZWRnZSwgY29yZSwgY29ybmVyRGlyLCBjb252ZXgpIHtcbiAgICB0aGlzLm1fbmV4dEVkZ2UgPSBlZGdlO1xuICAgIHRoaXMubV9jb3JlVjIgPSBjb3JlO1xuICAgIHRoaXMubV9jb3JuZXJEaXIyID0gY29ybmVyRGlyO1xuICAgIHRoaXMubV9jb3JuZXJDb252ZXgyID0gY29udmV4O1xuICB9O1xuXG4gIHJldHVybiBiMkVkZ2VTaGFwZTtcblxufSkoYjJTaGFwZSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRWRnZVNoYXBlLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlNoYXBlLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlNoYXBlID0gQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJNYXNzRGF0YSA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyTWFzc0RhdGEsIF9zdXBlcik7XG5cbiAgYjJNYXNzRGF0YS5wcm90b3R5cGUubWFzcyA9IDAuMDtcblxuICBiMk1hc3NEYXRhLnByb3RvdHlwZS5jZW50ZXIgPSBudWxsO1xuXG4gIGIyTWFzc0RhdGEucHJvdG90eXBlLkkgPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJNYXNzRGF0YSgpIHtcbiAgICB0aGlzLmNlbnRlciA9IG5ldyBiMlZlYzIoMCwgMCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyTWFzc0RhdGE7XG5cbn0pKGIyU2hhcGUpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk1hc3NEYXRhLmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3IsIGIyTWF0MjIsIGIyTWF0aCwgYjJTZXR0aW5ncywgYjJTaGFwZSwgYjJUcmFuc2Zvcm0sIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cblZlY3RvciA9IEJveDJELlZlY3RvcjtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyTWF0MjIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyVHJhbnNmb3JtID0gQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm07XG5cbmIyU2hhcGUgPSBCb3gyRC5Db2xsaXNpb24uU2hhcGVzLmIyU2hhcGU7XG5cbkJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJQb2x5Z29uU2hhcGUgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlBvbHlnb25TaGFwZSwgX3N1cGVyKTtcblxuICBiMlBvbHlnb25TaGFwZS5zX21hdCA9IG5ldyBiMk1hdDIyKCk7XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLm1fdHlwZSA9IGIyU2hhcGUuZV9wb2x5Z29uU2hhcGU7XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLm1fY2VudHJvaWQgPSBudWxsO1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5tX3ZlcnRpY2VzID0gbnVsbDtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUubV9ub3JtYWxzID0gbnVsbDtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUubV92ZXJ0ZXhDb3VudCA9IDA7XG5cbiAgZnVuY3Rpb24gYjJQb2x5Z29uU2hhcGUoKSB7XG4gICAgdGhpcy5tX2NlbnRyb2lkID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV92ZXJ0aWNlcyA9IG5ldyBWZWN0b3IoKTtcbiAgICB0aGlzLm1fbm9ybWFscyA9IG5ldyBWZWN0b3IoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzO1xuICAgIHMgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcbiAgICBzLlNldCh0aGlzKTtcbiAgICByZXR1cm4gcztcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICB2YXIgaSwgb3RoZXIyO1xuICAgIGIyUG9seWdvblNoYXBlLl9fc3VwZXJfXy5TZXQuY2FsbCh0aGlzLCBvdGhlcik7XG4gICAgaWYgKEJveDJELmVxdWFscyhvdGhlciwgYjJQb2x5Z29uU2hhcGUpKSB7XG4gICAgICBvdGhlcjIgPSAob3RoZXIgaW5zdGFuY2VvZiBiMlBvbHlnb25TaGFwZSA/IG90aGVyIDogbnVsbCk7XG4gICAgICB0aGlzLm1fY2VudHJvaWQuU2V0VihvdGhlcjIubV9jZW50cm9pZCk7XG4gICAgICB0aGlzLm1fdmVydGV4Q291bnQgPSBvdGhlcjIubV92ZXJ0ZXhDb3VudDtcbiAgICAgIHRoaXMuUmVzZXJ2ZSh0aGlzLm1fdmVydGV4Q291bnQpO1xuICAgICAgaSA9IDA7XG4gICAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgICB0aGlzLm1fdmVydGljZXNbaV0uU2V0VihvdGhlcjIubV92ZXJ0aWNlc1tpXSk7XG4gICAgICAgIHRoaXMubV9ub3JtYWxzW2ldLlNldFYob3RoZXIyLm1fbm9ybWFsc1tpXSk7XG4gICAgICAgIGkrKztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLlNldEFzQXJyYXkgPSBmdW5jdGlvbih2ZXJ0aWNlcywgdmVydGV4Q291bnQpIHtcbiAgICB2YXIgaSwgdFZlYywgdjtcbiAgICBpZiAodmVydGV4Q291bnQgPT09IHZvaWQgMCkge1xuICAgICAgdmVydGV4Q291bnQgPSAwO1xuICAgIH1cbiAgICB2ID0gbmV3IFZlY3RvcigpO1xuICAgIGkgPSAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB2ZXJ0aWNlcy5sZW5ndGgpIHtcbiAgICAgIHRWZWMgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIHYucHVzaCh0VmVjKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgdGhpcy5TZXRBc1ZlY3Rvcih2LCB2ZXJ0ZXhDb3VudCk7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUuQXNBcnJheSA9IGZ1bmN0aW9uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCkge1xuICAgIHZhciBwb2x5Z29uU2hhcGU7XG4gICAgaWYgKHZlcnRleENvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIHZlcnRleENvdW50ID0gMDtcbiAgICB9XG4gICAgcG9seWdvblNoYXBlID0gbmV3IGIyUG9seWdvblNoYXBlKCk7XG4gICAgcG9seWdvblNoYXBlLlNldEFzQXJyYXkodmVydGljZXMsIHZlcnRleENvdW50KTtcbiAgICByZXR1cm4gcG9seWdvblNoYXBlO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5TZXRBc1ZlY3RvciA9IGZ1bmN0aW9uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCkge1xuICAgIHZhciBlZGdlLCBpLCBpMSwgaTI7XG4gICAgaWYgKHZlcnRleENvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIHZlcnRleENvdW50ID0gMDtcbiAgICB9XG4gICAgaWYgKHZlcnRleENvdW50ID09PSAwKSB7XG4gICAgICB2ZXJ0ZXhDb3VudCA9IHZlcnRpY2VzLmxlbmd0aDtcbiAgICB9XG4gICAgYjJTZXR0aW5ncy5iMkFzc2VydCgyIDw9IHZlcnRleENvdW50KTtcbiAgICB0aGlzLm1fdmVydGV4Q291bnQgPSB2ZXJ0ZXhDb3VudDtcbiAgICB0aGlzLlJlc2VydmUodmVydGV4Q291bnQpO1xuICAgIGkgPSAwO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX3ZlcnRleENvdW50KSB7XG4gICAgICB0aGlzLm1fdmVydGljZXNbaV0uU2V0Vih2ZXJ0aWNlc1tpXSk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX3ZlcnRleENvdW50KSB7XG4gICAgICBpMSA9IHBhcnNlSW50KGkpO1xuICAgICAgaTIgPSBwYXJzZUludCgoaSArIDEgPCB0aGlzLm1fdmVydGV4Q291bnQgPyBpICsgMSA6IDApKTtcbiAgICAgIGVkZ2UgPSBiMk1hdGguU3VidHJhY3RWVih0aGlzLm1fdmVydGljZXNbaTJdLCB0aGlzLm1fdmVydGljZXNbaTFdKTtcbiAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZWRnZS5MZW5ndGhTcXVhcmVkKCkgPiBOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgIHRoaXMubV9ub3JtYWxzW2ldLlNldFYoYjJNYXRoLkNyb3NzVkYoZWRnZSwgMS4wKSk7XG4gICAgICB0aGlzLm1fbm9ybWFsc1tpXS5Ob3JtYWxpemUoKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgdGhpcy5tX2NlbnRyb2lkID0gYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZUNlbnRyb2lkKHRoaXMubV92ZXJ0aWNlcywgdGhpcy5tX3ZlcnRleENvdW50KTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5Bc1ZlY3RvciA9IGZ1bmN0aW9uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCkge1xuICAgIHZhciBwb2x5Z29uU2hhcGU7XG4gICAgaWYgKHZlcnRleENvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIHZlcnRleENvdW50ID0gMDtcbiAgICB9XG4gICAgcG9seWdvblNoYXBlID0gbmV3IGIyUG9seWdvblNoYXBlKCk7XG4gICAgcG9seWdvblNoYXBlLlNldEFzVmVjdG9yKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCk7XG4gICAgcmV0dXJuIHBvbHlnb25TaGFwZTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuU2V0QXNCb3ggPSBmdW5jdGlvbihoeCwgaHkpIHtcbiAgICBpZiAoaHggPT09IHZvaWQgMCkge1xuICAgICAgaHggPSAwO1xuICAgIH1cbiAgICBpZiAoaHkgPT09IHZvaWQgMCkge1xuICAgICAgaHkgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fdmVydGV4Q291bnQgPSA0O1xuICAgIHRoaXMuUmVzZXJ2ZSg0KTtcbiAgICB0aGlzLm1fdmVydGljZXNbMF0uU2V0KC1oeCwgLWh5KTtcbiAgICB0aGlzLm1fdmVydGljZXNbMV0uU2V0KGh4LCAtaHkpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1syXS5TZXQoaHgsIGh5KTtcbiAgICB0aGlzLm1fdmVydGljZXNbM10uU2V0KC1oeCwgaHkpO1xuICAgIHRoaXMubV9ub3JtYWxzWzBdLlNldCgwLjAsIC0xLjApO1xuICAgIHRoaXMubV9ub3JtYWxzWzFdLlNldCgxLjAsIDAuMCk7XG4gICAgdGhpcy5tX25vcm1hbHNbMl0uU2V0KDAuMCwgMS4wKTtcbiAgICB0aGlzLm1fbm9ybWFsc1szXS5TZXQoLTEuMCwgMC4wKTtcbiAgICB0aGlzLm1fY2VudHJvaWQuU2V0WmVybygpO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLkFzQm94ID0gZnVuY3Rpb24oaHgsIGh5KSB7XG4gICAgdmFyIHBvbHlnb25TaGFwZTtcbiAgICBpZiAoaHggPT09IHZvaWQgMCkge1xuICAgICAgaHggPSAwO1xuICAgIH1cbiAgICBpZiAoaHkgPT09IHZvaWQgMCkge1xuICAgICAgaHkgPSAwO1xuICAgIH1cbiAgICBwb2x5Z29uU2hhcGUgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcbiAgICBwb2x5Z29uU2hhcGUuU2V0QXNCb3goaHgsIGh5KTtcbiAgICByZXR1cm4gcG9seWdvblNoYXBlO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5TZXRBc09yaWVudGVkQm94ID0gZnVuY3Rpb24oaHgsIGh5LCBjZW50ZXIsIGFuZ2xlKSB7XG4gICAgdmFyIGksIHhmO1xuICAgIGlmIChoeCA9PT0gdm9pZCAwKSB7XG4gICAgICBoeCA9IDA7XG4gICAgfVxuICAgIGlmIChoeSA9PT0gdm9pZCAwKSB7XG4gICAgICBoeSA9IDA7XG4gICAgfVxuICAgIGlmIChjZW50ZXIgPT09IHZvaWQgMCkge1xuICAgICAgY2VudGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGFuZ2xlID09PSB2b2lkIDApIHtcbiAgICAgIGFuZ2xlID0gMC4wO1xuICAgIH1cbiAgICB0aGlzLm1fdmVydGV4Q291bnQgPSA0O1xuICAgIHRoaXMuUmVzZXJ2ZSg0KTtcbiAgICB0aGlzLm1fdmVydGljZXNbMF0uU2V0KC1oeCwgLWh5KTtcbiAgICB0aGlzLm1fdmVydGljZXNbMV0uU2V0KGh4LCAtaHkpO1xuICAgIHRoaXMubV92ZXJ0aWNlc1syXS5TZXQoaHgsIGh5KTtcbiAgICB0aGlzLm1fdmVydGljZXNbM10uU2V0KC1oeCwgaHkpO1xuICAgIHRoaXMubV9ub3JtYWxzWzBdLlNldCgwLjAsIC0xLjApO1xuICAgIHRoaXMubV9ub3JtYWxzWzFdLlNldCgxLjAsIDAuMCk7XG4gICAgdGhpcy5tX25vcm1hbHNbMl0uU2V0KDAuMCwgMS4wKTtcbiAgICB0aGlzLm1fbm9ybWFsc1szXS5TZXQoLTEuMCwgMC4wKTtcbiAgICB0aGlzLm1fY2VudHJvaWQgPSBjZW50ZXI7XG4gICAgeGYgPSBuZXcgYjJUcmFuc2Zvcm0oKTtcbiAgICB4Zi5wb3NpdGlvbiA9IGNlbnRlcjtcbiAgICB4Zi5SLlNldChhbmdsZSk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fdmVydGV4Q291bnQpIHtcbiAgICAgIHRoaXMubV92ZXJ0aWNlc1tpXSA9IGIyTWF0aC5NdWxYKHhmLCB0aGlzLm1fdmVydGljZXNbaV0pO1xuICAgICAgdGhpcy5tX25vcm1hbHNbaV0gPSBiMk1hdGguTXVsTVYoeGYuUiwgdGhpcy5tX25vcm1hbHNbaV0pO1xuICAgICAgKytpO1xuICAgIH1cbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5Bc09yaWVudGVkQm94ID0gZnVuY3Rpb24oaHgsIGh5LCBjZW50ZXIsIGFuZ2xlKSB7XG4gICAgdmFyIHBvbHlnb25TaGFwZTtcbiAgICBpZiAoaHggPT09IHZvaWQgMCkge1xuICAgICAgaHggPSAwO1xuICAgIH1cbiAgICBpZiAoaHkgPT09IHZvaWQgMCkge1xuICAgICAgaHkgPSAwO1xuICAgIH1cbiAgICBpZiAoY2VudGVyID09PSB2b2lkIDApIHtcbiAgICAgIGNlbnRlciA9IG51bGw7XG4gICAgfVxuICAgIGlmIChhbmdsZSA9PT0gdm9pZCAwKSB7XG4gICAgICBhbmdsZSA9IDAuMDtcbiAgICB9XG4gICAgcG9seWdvblNoYXBlID0gbmV3IGIyUG9seWdvblNoYXBlKCk7XG4gICAgcG9seWdvblNoYXBlLlNldEFzT3JpZW50ZWRCb3goaHgsIGh5LCBjZW50ZXIsIGFuZ2xlKTtcbiAgICByZXR1cm4gcG9seWdvblNoYXBlO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5TZXRBc0VkZ2UgPSBmdW5jdGlvbih2MSwgdjIpIHtcbiAgICB0aGlzLm1fdmVydGV4Q291bnQgPSAyO1xuICAgIHRoaXMuUmVzZXJ2ZSgyKTtcbiAgICB0aGlzLm1fdmVydGljZXNbMF0uU2V0Vih2MSk7XG4gICAgdGhpcy5tX3ZlcnRpY2VzWzFdLlNldFYodjIpO1xuICAgIHRoaXMubV9jZW50cm9pZC54ID0gMC41ICogKHYxLnggKyB2Mi54KTtcbiAgICB0aGlzLm1fY2VudHJvaWQueSA9IDAuNSAqICh2MS55ICsgdjIueSk7XG4gICAgdGhpcy5tX25vcm1hbHNbMF0gPSBiMk1hdGguQ3Jvc3NWRihiMk1hdGguU3VidHJhY3RWVih2MiwgdjEpLCAxLjApO1xuICAgIHRoaXMubV9ub3JtYWxzWzBdLk5vcm1hbGl6ZSgpO1xuICAgIHRoaXMubV9ub3JtYWxzWzFdLnggPSAtdGhpcy5tX25vcm1hbHNbMF0ueDtcbiAgICB0aGlzLm1fbm9ybWFsc1sxXS55ID0gLXRoaXMubV9ub3JtYWxzWzBdLnk7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUuQXNFZGdlID0gZnVuY3Rpb24odjEsIHYyKSB7XG4gICAgdmFyIHBvbHlnb25TaGFwZTtcbiAgICBwb2x5Z29uU2hhcGUgPSBuZXcgYjJQb2x5Z29uU2hhcGUoKTtcbiAgICBwb2x5Z29uU2hhcGUuU2V0QXNFZGdlKHYxLCB2Mik7XG4gICAgcmV0dXJuIHBvbHlnb25TaGFwZTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuVGVzdFBvaW50ID0gZnVuY3Rpb24oeGYsIHApIHtcbiAgICB2YXIgZG90LCBpLCBwTG9jYWxYLCBwTG9jYWxZLCB0TWF0LCB0VmVjLCB0WCwgdFk7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0TWF0ID0geGYuUjtcbiAgICB0WCA9IHAueCAtIHhmLnBvc2l0aW9uLng7XG4gICAgdFkgPSBwLnkgLSB4Zi5wb3NpdGlvbi55O1xuICAgIHBMb2NhbFggPSB0WCAqIHRNYXQuY29sMS54ICsgdFkgKiB0TWF0LmNvbDEueTtcbiAgICBwTG9jYWxZID0gdFggKiB0TWF0LmNvbDIueCArIHRZICogdE1hdC5jb2wyLnk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fdmVydGV4Q291bnQpIHtcbiAgICAgIHRWZWMgPSB0aGlzLm1fdmVydGljZXNbaV07XG4gICAgICB0WCA9IHBMb2NhbFggLSB0VmVjLng7XG4gICAgICB0WSA9IHBMb2NhbFkgLSB0VmVjLnk7XG4gICAgICB0VmVjID0gdGhpcy5tX25vcm1hbHNbaV07XG4gICAgICBkb3QgPSB0VmVjLnggKiB0WCArIHRWZWMueSAqIHRZO1xuICAgICAgaWYgKGRvdCA+IDAuMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24ob3V0cHV0LCBpbnB1dCwgdHJhbnNmb3JtKSB7XG4gICAgdmFyIGRYLCBkWSwgZGVub21pbmF0b3IsIGksIGluZGV4LCBsb3dlciwgbnVtZXJhdG9yLCBwMVgsIHAxWSwgcDJYLCBwMlksIHRNYXQsIHRWZWMsIHRYLCB0WSwgdXBwZXI7XG4gICAgbG93ZXIgPSAwLjA7XG4gICAgdXBwZXIgPSBpbnB1dC5tYXhGcmFjdGlvbjtcbiAgICB0WCA9IDA7XG4gICAgdFkgPSAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0WCA9IGlucHV0LnAxLnggLSB0cmFuc2Zvcm0ucG9zaXRpb24ueDtcbiAgICB0WSA9IGlucHV0LnAxLnkgLSB0cmFuc2Zvcm0ucG9zaXRpb24ueTtcbiAgICB0TWF0ID0gdHJhbnNmb3JtLlI7XG4gICAgcDFYID0gdFggKiB0TWF0LmNvbDEueCArIHRZICogdE1hdC5jb2wxLnk7XG4gICAgcDFZID0gdFggKiB0TWF0LmNvbDIueCArIHRZICogdE1hdC5jb2wyLnk7XG4gICAgdFggPSBpbnB1dC5wMi54IC0gdHJhbnNmb3JtLnBvc2l0aW9uLng7XG4gICAgdFkgPSBpbnB1dC5wMi55IC0gdHJhbnNmb3JtLnBvc2l0aW9uLnk7XG4gICAgdE1hdCA9IHRyYW5zZm9ybS5SO1xuICAgIHAyWCA9IHRYICogdE1hdC5jb2wxLnggKyB0WSAqIHRNYXQuY29sMS55O1xuICAgIHAyWSA9IHRYICogdE1hdC5jb2wyLnggKyB0WSAqIHRNYXQuY29sMi55O1xuICAgIGRYID0gcDJYIC0gcDFYO1xuICAgIGRZID0gcDJZIC0gcDFZO1xuICAgIGluZGV4ID0gcGFyc2VJbnQoLTEuKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgdFZlYyA9IHRoaXMubV92ZXJ0aWNlc1tpXTtcbiAgICAgIHRYID0gdFZlYy54IC0gcDFYO1xuICAgICAgdFkgPSB0VmVjLnkgLSBwMVk7XG4gICAgICB0VmVjID0gdGhpcy5tX25vcm1hbHNbaV07XG4gICAgICBudW1lcmF0b3IgPSB0VmVjLnggKiB0WCArIHRWZWMueSAqIHRZO1xuICAgICAgZGVub21pbmF0b3IgPSB0VmVjLnggKiBkWCArIHRWZWMueSAqIGRZO1xuICAgICAgaWYgKGRlbm9taW5hdG9yID09PSAwLjApIHtcbiAgICAgICAgaWYgKG51bWVyYXRvciA8IDAuMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRlbm9taW5hdG9yIDwgMC4wICYmIG51bWVyYXRvciA8IGxvd2VyICogZGVub21pbmF0b3IpIHtcbiAgICAgICAgICBsb3dlciA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xuICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZGVub21pbmF0b3IgPiAwLjAgJiYgbnVtZXJhdG9yIDwgdXBwZXIgKiBkZW5vbWluYXRvcikge1xuICAgICAgICAgICAgdXBwZXIgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh1cHBlciA8IGxvd2VyIC0gTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICBvdXRwdXQuZnJhY3Rpb24gPSBsb3dlcjtcbiAgICAgIHRNYXQgPSB0cmFuc2Zvcm0uUjtcbiAgICAgIHRWZWMgPSB0aGlzLm1fbm9ybWFsc1tpbmRleF07XG4gICAgICBvdXRwdXQubm9ybWFsLnggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgb3V0cHV0Lm5vcm1hbC55ID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLkNvbXB1dGVBQUJCID0gZnVuY3Rpb24oYWFiYiwgeGYpIHtcbiAgICB2YXIgaSwgbG93ZXJYLCBsb3dlclksIHRNYXQsIHRWZWMsIHVwcGVyWCwgdXBwZXJZLCB2WCwgdlk7XG4gICAgdE1hdCA9IHhmLlI7XG4gICAgdFZlYyA9IHRoaXMubV92ZXJ0aWNlc1swXTtcbiAgICBsb3dlclggPSB4Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIGxvd2VyWSA9IHhmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgdXBwZXJYID0gbG93ZXJYO1xuICAgIHVwcGVyWSA9IGxvd2VyWTtcbiAgICBpID0gMTtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgdFZlYyA9IHRoaXMubV92ZXJ0aWNlc1tpXTtcbiAgICAgIHZYID0geGYucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgIHZZID0geGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgIGxvd2VyWCA9IChsb3dlclggPCB2WCA/IGxvd2VyWCA6IHZYKTtcbiAgICAgIGxvd2VyWSA9IChsb3dlclkgPCB2WSA/IGxvd2VyWSA6IHZZKTtcbiAgICAgIHVwcGVyWCA9ICh1cHBlclggPiB2WCA/IHVwcGVyWCA6IHZYKTtcbiAgICAgIHVwcGVyWSA9ICh1cHBlclkgPiB2WSA/IHVwcGVyWSA6IHZZKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgYWFiYi5sb3dlckJvdW5kLnggPSBsb3dlclggLSB0aGlzLm1fcmFkaXVzO1xuICAgIGFhYmIubG93ZXJCb3VuZC55ID0gbG93ZXJZIC0gdGhpcy5tX3JhZGl1cztcbiAgICBhYWJiLnVwcGVyQm91bmQueCA9IHVwcGVyWCArIHRoaXMubV9yYWRpdXM7XG4gICAgYWFiYi51cHBlckJvdW5kLnkgPSB1cHBlclkgKyB0aGlzLm1fcmFkaXVzO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5Db21wdXRlTWFzcyA9IGZ1bmN0aW9uKG1hc3NEYXRhLCBkZW5zaXR5KSB7XG4gICAgdmFyIEQsIEksIGFyZWEsIGNlbnRlclgsIGNlbnRlclksIGUxWCwgZTFZLCBlMlgsIGUyWSwgZXgxLCBleDIsIGV5MSwgZXkyLCBpLCBpbnR4MiwgaW50eTIsIGtfaW52MywgcDFYLCBwMVksIHAyLCBwMywgcHgsIHB5LCB0cmlhbmdsZUFyZWE7XG4gICAgaWYgKGRlbnNpdHkgPT09IHZvaWQgMCkge1xuICAgICAgZGVuc2l0eSA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fdmVydGV4Q291bnQgPT09IDIpIHtcbiAgICAgIG1hc3NEYXRhLmNlbnRlci54ID0gMC41ICogKHRoaXMubV92ZXJ0aWNlc1swXS54ICsgdGhpcy5tX3ZlcnRpY2VzWzFdLngpO1xuICAgICAgbWFzc0RhdGEuY2VudGVyLnkgPSAwLjUgKiAodGhpcy5tX3ZlcnRpY2VzWzBdLnkgKyB0aGlzLm1fdmVydGljZXNbMV0ueSk7XG4gICAgICBtYXNzRGF0YS5tYXNzID0gMC4wO1xuICAgICAgbWFzc0RhdGEuSSA9IDAuMDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2VudGVyWCA9IDAuMDtcbiAgICBjZW50ZXJZID0gMC4wO1xuICAgIGFyZWEgPSAwLjA7XG4gICAgSSA9IDAuMDtcbiAgICBwMVggPSAwLjA7XG4gICAgcDFZID0gMC4wO1xuICAgIGtfaW52MyA9IDEuMCAvIDMuMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgcDIgPSB0aGlzLm1fdmVydGljZXNbaV07XG4gICAgICBwMyA9IChpICsgMSA8IHRoaXMubV92ZXJ0ZXhDb3VudCA/IHRoaXMubV92ZXJ0aWNlc1twYXJzZUludChpICsgMSldIDogdGhpcy5tX3ZlcnRpY2VzWzBdKTtcbiAgICAgIGUxWCA9IHAyLnggLSBwMVg7XG4gICAgICBlMVkgPSBwMi55IC0gcDFZO1xuICAgICAgZTJYID0gcDMueCAtIHAxWDtcbiAgICAgIGUyWSA9IHAzLnkgLSBwMVk7XG4gICAgICBEID0gZTFYICogZTJZIC0gZTFZICogZTJYO1xuICAgICAgdHJpYW5nbGVBcmVhID0gMC41ICogRDtcbiAgICAgIGFyZWEgKz0gdHJpYW5nbGVBcmVhO1xuICAgICAgY2VudGVyWCArPSB0cmlhbmdsZUFyZWEgKiBrX2ludjMgKiAocDFYICsgcDIueCArIHAzLngpO1xuICAgICAgY2VudGVyWSArPSB0cmlhbmdsZUFyZWEgKiBrX2ludjMgKiAocDFZICsgcDIueSArIHAzLnkpO1xuICAgICAgcHggPSBwMVg7XG4gICAgICBweSA9IHAxWTtcbiAgICAgIGV4MSA9IGUxWDtcbiAgICAgIGV5MSA9IGUxWTtcbiAgICAgIGV4MiA9IGUyWDtcbiAgICAgIGV5MiA9IGUyWTtcbiAgICAgIGludHgyID0ga19pbnYzICogKDAuMjUgKiAoZXgxICogZXgxICsgZXgyICogZXgxICsgZXgyICogZXgyKSArIChweCAqIGV4MSArIHB4ICogZXgyKSkgKyAwLjUgKiBweCAqIHB4O1xuICAgICAgaW50eTIgPSBrX2ludjMgKiAoMC4yNSAqIChleTEgKiBleTEgKyBleTIgKiBleTEgKyBleTIgKiBleTIpICsgKHB5ICogZXkxICsgcHkgKiBleTIpKSArIDAuNSAqIHB5ICogcHk7XG4gICAgICBJICs9IEQgKiAoaW50eDIgKyBpbnR5Mik7XG4gICAgICArK2k7XG4gICAgfVxuICAgIG1hc3NEYXRhLm1hc3MgPSBkZW5zaXR5ICogYXJlYTtcbiAgICBjZW50ZXJYICo9IDEuMCAvIGFyZWE7XG4gICAgY2VudGVyWSAqPSAxLjAgLyBhcmVhO1xuICAgIG1hc3NEYXRhLmNlbnRlci5TZXQoY2VudGVyWCwgY2VudGVyWSk7XG4gICAgbWFzc0RhdGEuSSA9IGRlbnNpdHkgKiBJO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5Db21wdXRlU3VibWVyZ2VkQXJlYSA9IGZ1bmN0aW9uKG5vcm1hbCwgb2Zmc2V0LCB4ZiwgYykge1xuICAgIHZhciBhcmVhLCBjZW50ZXIsIGRlcHRocywgZGl2ZUNvdW50LCBpLCBpbnRvSW5kZXgsIGludG9JbmRleDIsIGludG9MYW1kZGEsIGludG9WZWMsIGlzU3VibWVyZ2VkLCBsYXN0U3VibWVyZ2VkLCBtZCwgbm9ybWFsTCwgb2Zmc2V0TCwgb3V0b0luZGV4LCBvdXRvSW5kZXgyLCBvdXRvTGFtZGRhLCBvdXRvVmVjLCBwMiwgcDMsIHRyaWFuZ2xlQXJlYTtcbiAgICBpZiAob2Zmc2V0ID09PSB2b2lkIDApIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuICAgIG5vcm1hbEwgPSBiMk1hdGguTXVsVE1WKHhmLlIsIG5vcm1hbCk7XG4gICAgb2Zmc2V0TCA9IG9mZnNldCAtIGIyTWF0aC5Eb3Qobm9ybWFsLCB4Zi5wb3NpdGlvbik7XG4gICAgZGVwdGhzID0gbmV3IFZlY3RvcigpO1xuICAgIGRpdmVDb3VudCA9IDA7XG4gICAgaW50b0luZGV4ID0gcGFyc2VJbnQoLTEuKTtcbiAgICBvdXRvSW5kZXggPSBwYXJzZUludCgtMS4pO1xuICAgIGxhc3RTdWJtZXJnZWQgPSBmYWxzZTtcbiAgICBpID0gMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV92ZXJ0ZXhDb3VudCkge1xuICAgICAgZGVwdGhzW2ldID0gYjJNYXRoLkRvdChub3JtYWxMLCB0aGlzLm1fdmVydGljZXNbaV0pIC0gb2Zmc2V0TDtcbiAgICAgIGlzU3VibWVyZ2VkID0gZGVwdGhzW2ldIDwgKC1OdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICAgIGlmIChpID4gMCkge1xuICAgICAgICBpZiAoaXNTdWJtZXJnZWQpIHtcbiAgICAgICAgICBpZiAoIWxhc3RTdWJtZXJnZWQpIHtcbiAgICAgICAgICAgIGludG9JbmRleCA9IGkgLSAxO1xuICAgICAgICAgICAgZGl2ZUNvdW50Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChsYXN0U3VibWVyZ2VkKSB7XG4gICAgICAgICAgICBvdXRvSW5kZXggPSBpIC0gMTtcbiAgICAgICAgICAgIGRpdmVDb3VudCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGFzdFN1Ym1lcmdlZCA9IGlzU3VibWVyZ2VkO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBzd2l0Y2ggKGRpdmVDb3VudCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBpZiAobGFzdFN1Ym1lcmdlZCkge1xuICAgICAgICAgIG1kID0gbmV3IGIyTWFzc0RhdGEoKTtcbiAgICAgICAgICB0aGlzLkNvbXB1dGVNYXNzKG1kLCAxKTtcbiAgICAgICAgICBjLlNldFYoYjJNYXRoLk11bFgoeGYsIG1kLmNlbnRlcikpO1xuICAgICAgICAgIHJldHVybiBtZC5tYXNzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAoaW50b0luZGV4ID09PSAoLTEpKSB7XG4gICAgICAgICAgaW50b0luZGV4ID0gdGhpcy5tX3ZlcnRleENvdW50IC0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdXRvSW5kZXggPSB0aGlzLm1fdmVydGV4Q291bnQgLSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGludG9JbmRleDIgPSBwYXJzZUludCgoaW50b0luZGV4ICsgMSkgJSB0aGlzLm1fdmVydGV4Q291bnQpO1xuICAgIG91dG9JbmRleDIgPSBwYXJzZUludCgob3V0b0luZGV4ICsgMSkgJSB0aGlzLm1fdmVydGV4Q291bnQpO1xuICAgIGludG9MYW1kZGEgPSAoMCAtIGRlcHRoc1tpbnRvSW5kZXhdKSAvIChkZXB0aHNbaW50b0luZGV4Ml0gLSBkZXB0aHNbaW50b0luZGV4XSk7XG4gICAgb3V0b0xhbWRkYSA9ICgwIC0gZGVwdGhzW291dG9JbmRleF0pIC8gKGRlcHRoc1tvdXRvSW5kZXgyXSAtIGRlcHRoc1tvdXRvSW5kZXhdKTtcbiAgICBpbnRvVmVjID0gbmV3IGIyVmVjMih0aGlzLm1fdmVydGljZXNbaW50b0luZGV4XS54ICogKDEgLSBpbnRvTGFtZGRhKSArIHRoaXMubV92ZXJ0aWNlc1tpbnRvSW5kZXgyXS54ICogaW50b0xhbWRkYSwgdGhpcy5tX3ZlcnRpY2VzW2ludG9JbmRleF0ueSAqICgxIC0gaW50b0xhbWRkYSkgKyB0aGlzLm1fdmVydGljZXNbaW50b0luZGV4Ml0ueSAqIGludG9MYW1kZGEpO1xuICAgIG91dG9WZWMgPSBuZXcgYjJWZWMyKHRoaXMubV92ZXJ0aWNlc1tvdXRvSW5kZXhdLnggKiAoMSAtIG91dG9MYW1kZGEpICsgdGhpcy5tX3ZlcnRpY2VzW291dG9JbmRleDJdLnggKiBvdXRvTGFtZGRhLCB0aGlzLm1fdmVydGljZXNbb3V0b0luZGV4XS55ICogKDEgLSBvdXRvTGFtZGRhKSArIHRoaXMubV92ZXJ0aWNlc1tvdXRvSW5kZXgyXS55ICogb3V0b0xhbWRkYSk7XG4gICAgYXJlYSA9IDA7XG4gICAgY2VudGVyID0gbmV3IGIyVmVjMigpO1xuICAgIHAyID0gdGhpcy5tX3ZlcnRpY2VzW2ludG9JbmRleDJdO1xuICAgIHAzID0gdm9pZCAwO1xuICAgIGkgPSBpbnRvSW5kZXgyO1xuICAgIHdoaWxlIChpICE9PSBvdXRvSW5kZXgyKSB7XG4gICAgICBpID0gKGkgKyAxKSAlIHRoaXMubV92ZXJ0ZXhDb3VudDtcbiAgICAgIGlmIChpID09PSBvdXRvSW5kZXgyKSB7XG4gICAgICAgIHAzID0gb3V0b1ZlYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAzID0gdGhpcy5tX3ZlcnRpY2VzW2ldO1xuICAgICAgfVxuICAgICAgdHJpYW5nbGVBcmVhID0gMC41ICogKChwMi54IC0gaW50b1ZlYy54KSAqIChwMy55IC0gaW50b1ZlYy55KSAtIChwMi55IC0gaW50b1ZlYy55KSAqIChwMy54IC0gaW50b1ZlYy54KSk7XG4gICAgICBhcmVhICs9IHRyaWFuZ2xlQXJlYTtcbiAgICAgIGNlbnRlci54ICs9IHRyaWFuZ2xlQXJlYSAqIChpbnRvVmVjLnggKyBwMi54ICsgcDMueCkgLyAzO1xuICAgICAgY2VudGVyLnkgKz0gdHJpYW5nbGVBcmVhICogKGludG9WZWMueSArIHAyLnkgKyBwMy55KSAvIDM7XG4gICAgICBwMiA9IHAzO1xuICAgIH1cbiAgICBjZW50ZXIuTXVsdGlwbHkoMSAvIGFyZWEpO1xuICAgIGMuU2V0VihiMk1hdGguTXVsWCh4ZiwgY2VudGVyKSk7XG4gICAgcmV0dXJuIGFyZWE7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLkdldFZlcnRleENvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV92ZXJ0ZXhDb3VudDtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuR2V0VmVydGljZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3ZlcnRpY2VzO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5HZXROb3JtYWxzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ub3JtYWxzO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5HZXRTdXBwb3J0ID0gZnVuY3Rpb24oZCkge1xuICAgIHZhciBiZXN0SW5kZXgsIGJlc3RWYWx1ZSwgaSwgdmFsdWU7XG4gICAgYmVzdEluZGV4ID0gMDtcbiAgICBiZXN0VmFsdWUgPSB0aGlzLm1fdmVydGljZXNbMF0ueCAqIGQueCArIHRoaXMubV92ZXJ0aWNlc1swXS55ICogZC55O1xuICAgIGkgPSAxO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX3ZlcnRleENvdW50KSB7XG4gICAgICB2YWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1tpXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzW2ldLnkgKiBkLnk7XG4gICAgICBpZiAodmFsdWUgPiBiZXN0VmFsdWUpIHtcbiAgICAgICAgYmVzdEluZGV4ID0gaTtcbiAgICAgICAgYmVzdFZhbHVlID0gdmFsdWU7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHJldHVybiBiZXN0SW5kZXg7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUucHJvdG90eXBlLkdldFN1cHBvcnRWZXJ0ZXggPSBmdW5jdGlvbihkKSB7XG4gICAgdmFyIGJlc3RJbmRleCwgYmVzdFZhbHVlLCBpLCB2YWx1ZTtcbiAgICBiZXN0SW5kZXggPSAwO1xuICAgIGJlc3RWYWx1ZSA9IHRoaXMubV92ZXJ0aWNlc1swXS54ICogZC54ICsgdGhpcy5tX3ZlcnRpY2VzWzBdLnkgKiBkLnk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fdmVydGV4Q291bnQpIHtcbiAgICAgIHZhbHVlID0gdGhpcy5tX3ZlcnRpY2VzW2ldLnggKiBkLnggKyB0aGlzLm1fdmVydGljZXNbaV0ueSAqIGQueTtcbiAgICAgIGlmICh2YWx1ZSA+IGJlc3RWYWx1ZSkge1xuICAgICAgICBiZXN0SW5kZXggPSBpO1xuICAgICAgICBiZXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubV92ZXJ0aWNlc1tiZXN0SW5kZXhdO1xuICB9O1xuXG4gIGIyUG9seWdvblNoYXBlLnByb3RvdHlwZS5WYWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5wcm90b3R5cGUuUmVzZXJ2ZSA9IGZ1bmN0aW9uKGNvdW50KSB7XG4gICAgdmFyIGk7XG4gICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIGNvdW50ID0gMDtcbiAgICB9XG4gICAgaSA9IHBhcnNlSW50KHRoaXMubV92ZXJ0aWNlcy5sZW5ndGgpO1xuICAgIHdoaWxlIChpIDwgY291bnQpIHtcbiAgICAgIHRoaXMubV92ZXJ0aWNlc1tpXSA9IG5ldyBiMlZlYzIoKTtcbiAgICAgIHRoaXMubV9ub3JtYWxzW2ldID0gbmV3IGIyVmVjMigpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfTtcblxuICBiMlBvbHlnb25TaGFwZS5Db21wdXRlQ2VudHJvaWQgPSBmdW5jdGlvbih2cywgY291bnQpIHtcbiAgICB2YXIgRCwgYXJlYSwgYywgZTFYLCBlMVksIGUyWCwgZTJZLCBpLCBpbnYzLCBwMVgsIHAxWSwgcDIsIHAzLCB0cmlhbmdsZUFyZWE7XG4gICAgaWYgKGNvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIGNvdW50ID0gMDtcbiAgICB9XG4gICAgYyA9IG5ldyBiMlZlYzIoKTtcbiAgICBhcmVhID0gMC4wO1xuICAgIHAxWCA9IDAuMDtcbiAgICBwMVkgPSAwLjA7XG4gICAgaW52MyA9IDEuMCAvIDMuMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGNvdW50KSB7XG4gICAgICBwMiA9IHZzW2ldO1xuICAgICAgcDMgPSAoaSArIDEgPCBjb3VudCA/IHZzW3BhcnNlSW50KGkgKyAxKV0gOiB2c1swXSk7XG4gICAgICBlMVggPSBwMi54IC0gcDFYO1xuICAgICAgZTFZID0gcDIueSAtIHAxWTtcbiAgICAgIGUyWCA9IHAzLnggLSBwMVg7XG4gICAgICBlMlkgPSBwMy55IC0gcDFZO1xuICAgICAgRCA9IGUxWCAqIGUyWSAtIGUxWSAqIGUyWDtcbiAgICAgIHRyaWFuZ2xlQXJlYSA9IDAuNSAqIEQ7XG4gICAgICBhcmVhICs9IHRyaWFuZ2xlQXJlYTtcbiAgICAgIGMueCArPSB0cmlhbmdsZUFyZWEgKiBpbnYzICogKHAxWCArIHAyLnggKyBwMy54KTtcbiAgICAgIGMueSArPSB0cmlhbmdsZUFyZWEgKiBpbnYzICogKHAxWSArIHAyLnkgKyBwMy55KTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgYy54ICo9IDEuMCAvIGFyZWE7XG4gICAgYy55ICo9IDEuMCAvIGFyZWE7XG4gICAgcmV0dXJuIGM7XG4gIH07XG5cbiAgYjJQb2x5Z29uU2hhcGUuQ29tcHV0ZU9CQiA9IGZ1bmN0aW9uKG9iYiwgdnMsIGNvdW50KSB7XG4gICAgdmFyIGFyZWEsIGNlbnRlclgsIGNlbnRlclksIGRYLCBkWSwgaSwgaiwgbGVuZ3RoLCBsb3dlclgsIGxvd2VyWSwgbWluQXJlYSwgcCwgclgsIHJZLCByb290LCB0TWF0LCB1cHBlclgsIHVwcGVyWSwgdXhYLCB1eFksIHV5WCwgdXlZO1xuICAgIGlmIChjb3VudCA9PT0gdm9pZCAwKSB7XG4gICAgICBjb3VudCA9IDA7XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHAgPSBuZXcgVmVjdG9yKGNvdW50ICsgMSk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBjb3VudCkge1xuICAgICAgcFtpXSA9IHZzW2ldO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBwW2NvdW50XSA9IHBbMF07XG4gICAgbWluQXJlYSA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPD0gY291bnQpIHtcbiAgICAgIHJvb3QgPSBwW3BhcnNlSW50KGkgLSAxKV07XG4gICAgICB1eFggPSBwW2ldLnggLSByb290Lng7XG4gICAgICB1eFkgPSBwW2ldLnkgLSByb290Lnk7XG4gICAgICBsZW5ndGggPSBNYXRoLnNxcnQodXhYICogdXhYICsgdXhZICogdXhZKTtcbiAgICAgIHV4WCAvPSBsZW5ndGg7XG4gICAgICB1eFkgLz0gbGVuZ3RoO1xuICAgICAgdXlYID0gLXV4WTtcbiAgICAgIHV5WSA9IHV4WDtcbiAgICAgIGxvd2VyWCA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICBsb3dlclkgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgICAgdXBwZXJYID0gLU51bWJlci5NQVhfVkFMVUU7XG4gICAgICB1cHBlclkgPSAtTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCBjb3VudCkge1xuICAgICAgICBkWCA9IHBbal0ueCAtIHJvb3QueDtcbiAgICAgICAgZFkgPSBwW2pdLnkgLSByb290Lnk7XG4gICAgICAgIHJYID0gdXhYICogZFggKyB1eFkgKiBkWTtcbiAgICAgICAgclkgPSB1eVggKiBkWCArIHV5WSAqIGRZO1xuICAgICAgICBpZiAoclggPCBsb3dlclgpIHtcbiAgICAgICAgICBsb3dlclggPSByWDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoclkgPCBsb3dlclkpIHtcbiAgICAgICAgICBsb3dlclkgPSByWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoclggPiB1cHBlclgpIHtcbiAgICAgICAgICB1cHBlclggPSByWDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoclkgPiB1cHBlclkpIHtcbiAgICAgICAgICB1cHBlclkgPSByWTtcbiAgICAgICAgfVxuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgICBhcmVhID0gKHVwcGVyWCAtIGxvd2VyWCkgKiAodXBwZXJZIC0gbG93ZXJZKTtcbiAgICAgIGlmIChhcmVhIDwgMC45NSAqIG1pbkFyZWEpIHtcbiAgICAgICAgbWluQXJlYSA9IGFyZWE7XG4gICAgICAgIG9iYi5SLmNvbDEueCA9IHV4WDtcbiAgICAgICAgb2JiLlIuY29sMS55ID0gdXhZO1xuICAgICAgICBvYmIuUi5jb2wyLnggPSB1eVg7XG4gICAgICAgIG9iYi5SLmNvbDIueSA9IHV5WTtcbiAgICAgICAgY2VudGVyWCA9IDAuNSAqIChsb3dlclggKyB1cHBlclgpO1xuICAgICAgICBjZW50ZXJZID0gMC41ICogKGxvd2VyWSArIHVwcGVyWSk7XG4gICAgICAgIHRNYXQgPSBvYmIuUjtcbiAgICAgICAgb2JiLmNlbnRlci54ID0gcm9vdC54ICsgKHRNYXQuY29sMS54ICogY2VudGVyWCArIHRNYXQuY29sMi54ICogY2VudGVyWSk7XG4gICAgICAgIG9iYi5jZW50ZXIueSA9IHJvb3QueSArICh0TWF0LmNvbDEueSAqIGNlbnRlclggKyB0TWF0LmNvbDIueSAqIGNlbnRlclkpO1xuICAgICAgICBvYmIuZXh0ZW50cy54ID0gMC41ICogKHVwcGVyWCAtIGxvd2VyWCk7XG4gICAgICAgIG9iYi5leHRlbnRzLnkgPSAwLjUgKiAodXBwZXJZIC0gbG93ZXJZKTtcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGIyUG9seWdvblNoYXBlO1xuXG59KShiMlNoYXBlKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJQb2x5Z29uU2hhcGUuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyRGlzdGFuY2UsIGIyRGlzdGFuY2VJbnB1dCwgYjJEaXN0YW5jZU91dHB1dCwgYjJEaXN0YW5jZVByb3h5LCBiMlNldHRpbmdzLCBiMlNpbXBsZXhDYWNoZTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyU2ltcGxleENhY2hlID0gQm94MkQuQ29sbGlzaW9uLmIyU2ltcGxleENhY2hlO1xuXG5iMkRpc3RhbmNlID0gQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2U7XG5cbmIyRGlzdGFuY2VPdXRwdXQgPSBCb3gyRC5Db2xsaXNpb24uYjJEaXN0YW5jZU91dHB1dDtcblxuYjJEaXN0YW5jZUlucHV0ID0gQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VJbnB1dDtcblxuYjJEaXN0YW5jZVByb3h5ID0gQm94MkQuQ29sbGlzaW9uLmIyRGlzdGFuY2VQcm94eTtcblxuQm94MkQuQ29sbGlzaW9uLlNoYXBlcy5iMlNoYXBlID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMlNoYXBlKCkge31cblxuICBiMlNoYXBlLmVfdW5rbm93blNoYXBlID0gcGFyc2VJbnQoLTEuKTtcblxuICBiMlNoYXBlLmVfY2lyY2xlU2hhcGUgPSAwO1xuXG4gIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUgPSAxO1xuXG4gIGIyU2hhcGUuZV9lZGdlU2hhcGUgPSAyO1xuXG4gIGIyU2hhcGUuZV9zaGFwZVR5cGVDb3VudCA9IDM7XG5cbiAgYjJTaGFwZS5lX2hpdENvbGxpZGUgPSAxO1xuXG4gIGIyU2hhcGUuZV9taXNzQ29sbGlkZSA9IDA7XG5cbiAgYjJTaGFwZS5lX3N0YXJ0c0luc2lkZUNvbGxpZGUgPSBwYXJzZUludCgtMS4pO1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLm1fdHlwZSA9IGIyU2hhcGUuZV91bmtub3duU2hhcGU7XG5cbiAgYjJTaGFwZS5wcm90b3R5cGUubV9yYWRpdXMgPSBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7XG5cbiAgYjJTaGFwZS5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgdGhpcy5tX3JhZGl1cyA9IG90aGVyLm1fcmFkaXVzO1xuICB9O1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLkdldFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3R5cGU7XG4gIH07XG5cbiAgYjJTaGFwZS5wcm90b3R5cGUuVGVzdFBvaW50ID0gZnVuY3Rpb24oeGYsIHApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgYjJTaGFwZS5wcm90b3R5cGUuUmF5Q2FzdCA9IGZ1bmN0aW9uKG91dHB1dCwgaW5wdXQsIHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBiMlNoYXBlLnByb3RvdHlwZS5Db21wdXRlQUFCQiA9IGZ1bmN0aW9uKGFhYmIsIHhmKSB7fTtcblxuICBiMlNoYXBlLnByb3RvdHlwZS5Db21wdXRlTWFzcyA9IGZ1bmN0aW9uKG1hc3NEYXRhLCBkZW5zaXR5KSB7XG4gICAgaWYgKGRlbnNpdHkgPT09IHZvaWQgMCkge1xuICAgICAgZGVuc2l0eSA9IDA7XG4gICAgfVxuICB9O1xuXG4gIGIyU2hhcGUucHJvdG90eXBlLkNvbXB1dGVTdWJtZXJnZWRBcmVhID0gZnVuY3Rpb24obm9ybWFsLCBvZmZzZXQsIHhmLCBjKSB7XG4gICAgaWYgKG9mZnNldCA9PT0gdm9pZCAwKSB7XG4gICAgICBvZmZzZXQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICBiMlNoYXBlLlRlc3RPdmVybGFwID0gZnVuY3Rpb24oc2hhcGUxLCB0cmFuc2Zvcm0xLCBzaGFwZTIsIHRyYW5zZm9ybTIpIHtcbiAgICB2YXIgaW5wdXQsIG91dHB1dCwgc2ltcGxleENhY2hlO1xuICAgIGlucHV0ID0gbmV3IGIyRGlzdGFuY2VJbnB1dCgpO1xuICAgIGlucHV0LnByb3h5QSA9IG5ldyBiMkRpc3RhbmNlUHJveHkoKTtcbiAgICBpbnB1dC5wcm94eUEuU2V0KHNoYXBlMSk7XG4gICAgaW5wdXQucHJveHlCID0gbmV3IGIyRGlzdGFuY2VQcm94eSgpO1xuICAgIGlucHV0LnByb3h5Qi5TZXQoc2hhcGUyKTtcbiAgICBpbnB1dC50cmFuc2Zvcm1BID0gdHJhbnNmb3JtMTtcbiAgICBpbnB1dC50cmFuc2Zvcm1CID0gdHJhbnNmb3JtMjtcbiAgICBpbnB1dC51c2VSYWRpaSA9IHRydWU7XG4gICAgc2ltcGxleENhY2hlID0gbmV3IGIyU2ltcGxleENhY2hlKCk7XG4gICAgc2ltcGxleENhY2hlLmNvdW50ID0gMDtcbiAgICBvdXRwdXQgPSBuZXcgYjJEaXN0YW5jZU91dHB1dCgpO1xuICAgIGIyRGlzdGFuY2UuRGlzdGFuY2Uob3V0cHV0LCBzaW1wbGV4Q2FjaGUsIGlucHV0KTtcbiAgICByZXR1cm4gb3V0cHV0LmRpc3RhbmNlIDwgMTAuMCAqIE51bWJlci5NSU5fVkFMVUU7XG4gIH07XG5cbiAgcmV0dXJuIGIyU2hhcGU7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2hhcGUuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyTWF0aCwgcGFyc2VVSW50O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyTWF0aCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aDtcblxucGFyc2VVSW50ID0gZnVuY3Rpb24odikge1xuICByZXR1cm4gTWF0aC5hYnMocGFyc2VJbnQodikpO1xufTtcblxuQm94MkQuQ29tbW9uLmIyQ29sb3IgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29sb3IucHJvdG90eXBlLl9yID0gMDtcblxuICBiMkNvbG9yLnByb3RvdHlwZS5fZyA9IDA7XG5cbiAgYjJDb2xvci5wcm90b3R5cGUuX2IgPSAwO1xuXG4gIGZ1bmN0aW9uIGIyQ29sb3IocnIsIGdnLCBiYikge1xuICAgIGlmIChyciA9PT0gdm9pZCAwKSB7XG4gICAgICByciA9IDA7XG4gICAgfVxuICAgIGlmIChnZyA9PT0gdm9pZCAwKSB7XG4gICAgICBnZyA9IDA7XG4gICAgfVxuICAgIGlmIChiYiA9PT0gdm9pZCAwKSB7XG4gICAgICBiYiA9IDA7XG4gICAgfVxuICAgIHRoaXMuX3IgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKHJyLCAwLjAsIDEuMCkpO1xuICAgIHRoaXMuX2cgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKGdnLCAwLjAsIDEuMCkpO1xuICAgIHRoaXMuX2IgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKGJiLCAwLjAsIDEuMCkpO1xuICB9XG5cbiAgYjJDb2xvci5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24ocnIsIGdnLCBiYikge1xuICAgIGlmIChyciA9PT0gdm9pZCAwKSB7XG4gICAgICByciA9IDA7XG4gICAgfVxuICAgIGlmIChnZyA9PT0gdm9pZCAwKSB7XG4gICAgICBnZyA9IDA7XG4gICAgfVxuICAgIGlmIChiYiA9PT0gdm9pZCAwKSB7XG4gICAgICBiYiA9IDA7XG4gICAgfVxuICAgIHRoaXMuX3IgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKHJyLCAwLjAsIDEuMCkpO1xuICAgIHRoaXMuX2cgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKGdnLCAwLjAsIDEuMCkpO1xuICAgIHRoaXMuX2IgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKGJiLCAwLjAsIDEuMCkpO1xuICB9O1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGIyQ29sb3IucHJvdG90eXBlLCB7XG4gICAgcjoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcjtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHJyKSB7XG4gICAgICAgIGlmIChyciA9PSBudWxsKSB7XG4gICAgICAgICAgcnIgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yID0gcGFyc2VVSW50KDI1NSAqIGIyTWF0aC5DbGFtcChyciwgMC4wLCAxLjApKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGc6IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2c7XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbihnZykge1xuICAgICAgICBpZiAoZ2cgPT0gbnVsbCkge1xuICAgICAgICAgIGdnID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZyA9IHBhcnNlVUludCgyNTUgKiBiMk1hdGguQ2xhbXAoZ2csIDAuMCwgMS4wKSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBiOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24oYmIpIHtcbiAgICAgICAgaWYgKGJiID09IG51bGwpIHtcbiAgICAgICAgICBiYiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2IgPSBwYXJzZVVJbnQoMjU1ICogYjJNYXRoLkNsYW1wKGJiLCAwLjAsIDEuMCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgY29sb3I6IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLl9yIDw8IDE2KSB8ICh0aGlzLl9nIDw8IDgpIHwgdGhpcy5fYjtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBiMkNvbG9yO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbG9yLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkNvbW1vbi5iMlNldHRpbmdzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMlNldHRpbmdzKCkge31cblxuICBiMlNldHRpbmdzLlZFUlNJT04gPSBcIjIuMWFscGhhXCI7XG5cbiAgYjJTZXR0aW5ncy5VU0hSVF9NQVggPSAweDAwMDBmZmZmO1xuXG4gIGIyU2V0dGluZ3MuYjJfcGkgPSBNYXRoLlBJO1xuXG4gIGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMgPSAyO1xuXG4gIGIyU2V0dGluZ3MuYjJfYWFiYkV4dGVuc2lvbiA9IDAuMTtcblxuICBiMlNldHRpbmdzLmIyX2FhYmJNdWx0aXBsaWVyID0gMi4wO1xuXG4gIGIyU2V0dGluZ3MuYjJfcG9seWdvblJhZGl1cyA9IDIuMCAqIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcDtcblxuICBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AgPSAwLjAwNTtcblxuICBiMlNldHRpbmdzLmIyX2FuZ3VsYXJTbG9wID0gMi4wIC8gMTgwLjAgKiBiMlNldHRpbmdzLmIyX3BpO1xuXG4gIGIyU2V0dGluZ3MuYjJfdG9pU2xvcCA9IDguMCAqIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcDtcblxuICBiMlNldHRpbmdzLmIyX21heFRPSUNvbnRhY3RzUGVySXNsYW5kID0gMzI7XG5cbiAgYjJTZXR0aW5ncy5iMl9tYXhUT0lKb2ludHNQZXJJc2xhbmQgPSAzMjtcblxuICBiMlNldHRpbmdzLmIyX3ZlbG9jaXR5VGhyZXNob2xkID0gMS4wO1xuXG4gIGIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbiA9IDAuMjtcblxuICBiMlNldHRpbmdzLmIyX21heEFuZ3VsYXJDb3JyZWN0aW9uID0gOC4wIC8gMTgwLjAgKiBiMlNldHRpbmdzLmIyX3BpO1xuXG4gIGIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb24gPSAyLjA7XG5cbiAgYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvblNxdWFyZWQgPSBiMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uICogYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvbjtcblxuICBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uID0gMC41ICogYjJTZXR0aW5ncy5iMl9waTtcblxuICBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uU3F1YXJlZCA9IGIyU2V0dGluZ3MuYjJfbWF4Um90YXRpb24gKiBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uO1xuXG4gIGIyU2V0dGluZ3MuYjJfY29udGFjdEJhdW1nYXJ0ZSA9IDAuMjtcblxuICBiMlNldHRpbmdzLmIyX3RpbWVUb1NsZWVwID0gMC41O1xuXG4gIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xlZXBUb2xlcmFuY2UgPSAwLjAxO1xuXG4gIGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsZWVwVG9sZXJhbmNlID0gMi4wIC8gMTgwLjAgKiBiMlNldHRpbmdzLmIyX3BpO1xuXG4gIGIyU2V0dGluZ3MuYjJNaXhGcmljdGlvbiA9IGZ1bmN0aW9uKGZyaWN0aW9uMSwgZnJpY3Rpb24yKSB7XG4gICAgaWYgKGZyaWN0aW9uMSA9PT0gdm9pZCAwKSB7XG4gICAgICBmcmljdGlvbjEgPSAwO1xuICAgIH1cbiAgICBpZiAoZnJpY3Rpb24yID09PSB2b2lkIDApIHtcbiAgICAgIGZyaWN0aW9uMiA9IDA7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLnNxcnQoZnJpY3Rpb24xICogZnJpY3Rpb24yKTtcbiAgfTtcblxuICBiMlNldHRpbmdzLmIyTWl4UmVzdGl0dXRpb24gPSBmdW5jdGlvbihyZXN0aXR1dGlvbjEsIHJlc3RpdHV0aW9uMikge1xuICAgIHZhciBfcmVmO1xuICAgIGlmIChyZXN0aXR1dGlvbjEgPT09IHZvaWQgMCkge1xuICAgICAgcmVzdGl0dXRpb24xID0gMDtcbiAgICB9XG4gICAgaWYgKHJlc3RpdHV0aW9uMiA9PT0gdm9pZCAwKSB7XG4gICAgICByZXN0aXR1dGlvbjIgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gKF9yZWYgPSByZXN0aXR1dGlvbjEgPiByZXN0aXR1dGlvbjIpICE9IG51bGwgPyBfcmVmIDoge1xuICAgICAgcmVzdGl0dXRpb24xOiByZXN0aXR1dGlvbjJcbiAgICB9O1xuICB9O1xuXG4gIGIyU2V0dGluZ3MuYjJBc3NlcnQgPSBmdW5jdGlvbihhKSB7XG4gICAgaWYgKCFhKSB7XG4gICAgICB0aHJvdyBcIkFzc2VydGlvbiBGYWlsZWRcIjtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGIyU2V0dGluZ3M7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyU2V0dGluZ3MuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjIgPSAoZnVuY3Rpb24oKSB7XG4gIGIyTWF0MjIucHJvdG90eXBlLmNvbDEgPSBudWxsO1xuXG4gIGIyTWF0MjIucHJvdG90eXBlLmNvbDIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyTWF0MjIoKSB7XG4gICAgdGhpcy5jb2wxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMuY29sMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLlNldElkZW50aXR5KCk7XG4gIH1cblxuICBiMk1hdDIyLkZyb21BbmdsZSA9IGZ1bmN0aW9uKGFuZ2xlKSB7XG4gICAgdmFyIG1hdDtcbiAgICBpZiAoYW5nbGUgPT0gbnVsbCkge1xuICAgICAgYW5nbGUgPSAwO1xuICAgIH1cbiAgICBtYXQgPSBuZXcgYjJNYXQyMigpO1xuICAgIG1hdC5TZXQoYW5nbGUpO1xuICAgIHJldHVybiBtYXQ7XG4gIH07XG5cbiAgYjJNYXQyMi5Gcm9tVlYgPSBmdW5jdGlvbihjMSwgYzIpIHtcbiAgICB2YXIgbWF0O1xuICAgIG1hdCA9IG5ldyBiMk1hdDIyKCk7XG4gICAgbWF0LlNldFZWKGMxLCBjMik7XG4gICAgcmV0dXJuIG1hdDtcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihhbmdsZSkge1xuICAgIHZhciBjLCBzO1xuICAgIGlmIChhbmdsZSA9PSBudWxsKSB7XG4gICAgICBhbmdsZSA9IDA7XG4gICAgfVxuICAgIGMgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgcyA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB0aGlzLmNvbDEueCA9IGM7XG4gICAgdGhpcy5jb2wyLnggPSAtcztcbiAgICB0aGlzLmNvbDEueSA9IHM7XG4gICAgdGhpcy5jb2wyLnkgPSBjO1xuICB9O1xuXG4gIGIyTWF0MjIucHJvdG90eXBlLlNldFZWID0gZnVuY3Rpb24oYzEsIGMyKSB7XG4gICAgdGhpcy5jb2wxLlNldFYoYzEpO1xuICAgIHRoaXMuY29sMi5TZXRWKGMyKTtcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1hdDtcbiAgICBtYXQgPSBuZXcgYjJNYXQyMigpO1xuICAgIG1hdC5TZXRNKHRoaXMpO1xuICAgIHJldHVybiBtYXQ7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuU2V0TSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0aGlzLmNvbDEuU2V0VihtLmNvbDEpO1xuICAgIHRoaXMuY29sMi5TZXRWKG0uY29sMik7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuQWRkTSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0aGlzLmNvbDEueCArPSBtLmNvbDEueDtcbiAgICB0aGlzLmNvbDEueSArPSBtLmNvbDEueTtcbiAgICB0aGlzLmNvbDIueCArPSBtLmNvbDIueDtcbiAgICB0aGlzLmNvbDIueSArPSBtLmNvbDIueTtcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5TZXRJZGVudGl0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29sMS54ID0gMS4wO1xuICAgIHRoaXMuY29sMi54ID0gMC4wO1xuICAgIHRoaXMuY29sMS55ID0gMC4wO1xuICAgIHRoaXMuY29sMi55ID0gMS4wO1xuICB9O1xuXG4gIGIyTWF0MjIucHJvdG90eXBlLlNldFplcm8gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbDEueCA9IDAuMDtcbiAgICB0aGlzLmNvbDIueCA9IDAuMDtcbiAgICB0aGlzLmNvbDEueSA9IDAuMDtcbiAgICB0aGlzLmNvbDIueSA9IDAuMDtcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5HZXRBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMuY29sMS55LCB0aGlzLmNvbDEueCk7XG4gIH07XG5cbiAgYjJNYXQyMi5wcm90b3R5cGUuR2V0SW52ZXJzZSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIHZhciBhLCBiLCBjLCBkLCBkZXQ7XG4gICAgYSA9IHRoaXMuY29sMS54O1xuICAgIGIgPSB0aGlzLmNvbDIueDtcbiAgICBjID0gdGhpcy5jb2wxLnk7XG4gICAgZCA9IHRoaXMuY29sMi55O1xuICAgIGRldCA9IGEgKiBkIC0gYiAqIGM7XG4gICAgaWYgKGRldCAhPT0gMC4wKSB7XG4gICAgICBkZXQgPSAxLjAgLyBkZXQ7XG4gICAgfVxuICAgIG91dC5jb2wxLnggPSBkZXQgKiBkO1xuICAgIG91dC5jb2wyLnggPSAtZGV0ICogYjtcbiAgICBvdXQuY29sMS55ID0gLWRldCAqIGM7XG4gICAgb3V0LmNvbDIueSA9IGRldCAqIGE7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5Tb2x2ZSA9IGZ1bmN0aW9uKG91dCwgYlgsIGJZKSB7XG4gICAgdmFyIGExMSwgYTEyLCBhMjEsIGEyMiwgZGV0O1xuICAgIGlmIChiWCA9PSBudWxsKSB7XG4gICAgICBiWCA9IDA7XG4gICAgfVxuICAgIGlmIChiWSA9PSBudWxsKSB7XG4gICAgICBiWSA9IDA7XG4gICAgfVxuICAgIGExMSA9IHRoaXMuY29sMS54O1xuICAgIGExMiA9IHRoaXMuY29sMi54O1xuICAgIGEyMSA9IHRoaXMuY29sMS55O1xuICAgIGEyMiA9IHRoaXMuY29sMi55O1xuICAgIGRldCA9IGExMSAqIGEyMiAtIGExMiAqIGEyMTtcbiAgICBpZiAoZGV0ICE9PSAwLjApIHtcbiAgICAgIGRldCA9IDEuMCAvIGRldDtcbiAgICB9XG4gICAgb3V0LnggPSBkZXQgKiAoYTIyICogYlggLSBhMTIgKiBiWSk7XG4gICAgb3V0LnkgPSBkZXQgKiAoYTExICogYlkgLSBhMjEgKiBiWCk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcblxuICBiMk1hdDIyLnByb3RvdHlwZS5BYnMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbDEuQWJzKCk7XG4gICAgdGhpcy5jb2wyLkFicygpO1xuICB9O1xuXG4gIHJldHVybiBiMk1hdDIyO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk1hdDIyLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5Db21tb24uTWF0aC5iMk1hdDMzID0gKGZ1bmN0aW9uKCkge1xuICBiMk1hdDMzLnByb3RvdHlwZS5jb2wxID0gbnVsbDtcblxuICBiMk1hdDMzLnByb3RvdHlwZS5jb2wyID0gbnVsbDtcblxuICBiMk1hdDMzLnByb3RvdHlwZS5jb2wzID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMk1hdDMzKGMxLCBjMiwgYzMpIHtcbiAgICBpZiAoYzEgPT09IHZvaWQgMCkge1xuICAgICAgYzEgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoYzIgPT09IHZvaWQgMCkge1xuICAgICAgYzIgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoYzMgPT09IHZvaWQgMCkge1xuICAgICAgYzMgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmNvbDEgPSBuZXcgYjJWZWMzKCk7XG4gICAgdGhpcy5jb2wyID0gbmV3IGIyVmVjMygpO1xuICAgIHRoaXMuY29sMyA9IG5ldyBiMlZlYzMoKTtcbiAgICBpZiAoIWMxICYmICFjMiAmJiAhYzMpIHtcbiAgICAgIHRoaXMuY29sMS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLmNvbDIuU2V0WmVybygpO1xuICAgICAgdGhpcy5jb2wzLlNldFplcm8oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb2wxLlNldFYoYzEpO1xuICAgICAgdGhpcy5jb2wyLlNldFYoYzIpO1xuICAgICAgdGhpcy5jb2wzLlNldFYoYzMpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBiMk1hdDMzLnByb3RvdHlwZS5TZXRWVlYgPSBmdW5jdGlvbihjMSwgYzIsIGMzKSB7XG4gICAgdGhpcy5jb2wxLlNldFYoYzEpO1xuICAgIHRoaXMuY29sMi5TZXRWKGMyKTtcbiAgICB0aGlzLmNvbDMuU2V0VihjMyk7XG4gIH07XG5cbiAgYjJNYXQzMy5wcm90b3R5cGUuQ29weSA9IGZ1bmN0aW9uKCkge1xuICAgIG5ldyBiMk1hdDMzKHRoaXMuY29sMSwgdGhpcy5jb2wyLCB0aGlzLmNvbDMpO1xuICB9O1xuXG4gIGIyTWF0MzMucHJvdG90eXBlLlNldE0gPSBmdW5jdGlvbihtKSB7XG4gICAgdGhpcy5jb2wxLlNldFYobS5jb2wxKTtcbiAgICB0aGlzLmNvbDIuU2V0VihtLmNvbDIpO1xuICAgIHRoaXMuY29sMy5TZXRWKG0uY29sMyk7XG4gIH07XG5cbiAgYjJNYXQzMy5wcm90b3R5cGUuQWRkTSA9IGZ1bmN0aW9uKG0pIHtcbiAgICB0aGlzLmNvbDEueCArPSBtLmNvbDEueDtcbiAgICB0aGlzLmNvbDEueSArPSBtLmNvbDEueTtcbiAgICB0aGlzLmNvbDEueiArPSBtLmNvbDEuejtcbiAgICB0aGlzLmNvbDIueCArPSBtLmNvbDIueDtcbiAgICB0aGlzLmNvbDIueSArPSBtLmNvbDIueTtcbiAgICB0aGlzLmNvbDIueiArPSBtLmNvbDIuejtcbiAgICB0aGlzLmNvbDMueCArPSBtLmNvbDMueDtcbiAgICB0aGlzLmNvbDMueSArPSBtLmNvbDMueTtcbiAgICB0aGlzLmNvbDMueiArPSBtLmNvbDMuejtcbiAgfTtcblxuICBiMk1hdDMzLnByb3RvdHlwZS5TZXRJZGVudGl0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29sMS54ID0gMS4wO1xuICAgIHRoaXMuY29sMi54ID0gMC4wO1xuICAgIHRoaXMuY29sMy54ID0gMC4wO1xuICAgIHRoaXMuY29sMS55ID0gMC4wO1xuICAgIHRoaXMuY29sMi55ID0gMS4wO1xuICAgIHRoaXMuY29sMy55ID0gMC4wO1xuICAgIHRoaXMuY29sMS56ID0gMC4wO1xuICAgIHRoaXMuY29sMi56ID0gMC4wO1xuICAgIHRoaXMuY29sMy56ID0gMS4wO1xuICB9O1xuXG4gIGIyTWF0MzMucHJvdG90eXBlLlNldFplcm8gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbDEueCA9IDAuMDtcbiAgICB0aGlzLmNvbDIueCA9IDAuMDtcbiAgICB0aGlzLmNvbDMueCA9IDAuMDtcbiAgICB0aGlzLmNvbDEueSA9IDAuMDtcbiAgICB0aGlzLmNvbDIueSA9IDAuMDtcbiAgICB0aGlzLmNvbDMueSA9IDAuMDtcbiAgICB0aGlzLmNvbDEueiA9IDAuMDtcbiAgICB0aGlzLmNvbDIueiA9IDAuMDtcbiAgICB0aGlzLmNvbDMueiA9IDAuMDtcbiAgfTtcblxuICBiMk1hdDMzLnByb3RvdHlwZS5Tb2x2ZTIyID0gZnVuY3Rpb24ob3V0LCBiWCwgYlkpIHtcbiAgICB2YXIgYTExLCBhMTIsIGEyMSwgYTIyLCBkZXQ7XG4gICAgaWYgKGJYID09PSB2b2lkIDApIHtcbiAgICAgIGJYID0gMDtcbiAgICB9XG4gICAgaWYgKGJZID09PSB2b2lkIDApIHtcbiAgICAgIGJZID0gMDtcbiAgICB9XG4gICAgYTExID0gdGhpcy5jb2wxLng7XG4gICAgYTEyID0gdGhpcy5jb2wyLng7XG4gICAgYTIxID0gdGhpcy5jb2wxLnk7XG4gICAgYTIyID0gdGhpcy5jb2wyLnk7XG4gICAgZGV0ID0gYTExICogYTIyIC0gYTEyICogYTIxO1xuICAgIGlmIChkZXQgIT09IDAuMCkge1xuICAgICAgZGV0ID0gMS4wIC8gZGV0O1xuICAgIH1cbiAgICBvdXQueCA9IGRldCAqIChhMjIgKiBiWCAtIGExMiAqIGJZKTtcbiAgICBvdXQueSA9IGRldCAqIChhMTEgKiBiWSAtIGEyMSAqIGJYKTtcbiAgICByZXR1cm4gb3V0O1xuICB9O1xuXG4gIGIyTWF0MzMucHJvdG90eXBlLlNvbHZlMzMgPSBmdW5jdGlvbihvdXQsIGJYLCBiWSwgYlopIHtcbiAgICB2YXIgYTExLCBhMTIsIGExMywgYTIxLCBhMjIsIGEyMywgYTMxLCBhMzIsIGEzMywgZGV0O1xuICAgIGlmIChiWCA9PT0gdm9pZCAwKSB7XG4gICAgICBiWCA9IDA7XG4gICAgfVxuICAgIGlmIChiWSA9PT0gdm9pZCAwKSB7XG4gICAgICBiWSA9IDA7XG4gICAgfVxuICAgIGlmIChiWiA9PT0gdm9pZCAwKSB7XG4gICAgICBiWiA9IDA7XG4gICAgfVxuICAgIGExMSA9IHRoaXMuY29sMS54O1xuICAgIGEyMSA9IHRoaXMuY29sMS55O1xuICAgIGEzMSA9IHRoaXMuY29sMS56O1xuICAgIGExMiA9IHRoaXMuY29sMi54O1xuICAgIGEyMiA9IHRoaXMuY29sMi55O1xuICAgIGEzMiA9IHRoaXMuY29sMi56O1xuICAgIGExMyA9IHRoaXMuY29sMy54O1xuICAgIGEyMyA9IHRoaXMuY29sMy55O1xuICAgIGEzMyA9IHRoaXMuY29sMy56O1xuICAgIGRldCA9IGExMSAqIChhMjIgKiBhMzMgLSBhMzIgKiBhMjMpICsgYTIxICogKGEzMiAqIGExMyAtIGExMiAqIGEzMykgKyBhMzEgKiAoYTEyICogYTIzIC0gYTIyICogYTEzKTtcbiAgICBpZiAoZGV0ICE9PSAwLjApIHtcbiAgICAgIGRldCA9IDEuMCAvIGRldDtcbiAgICB9XG4gICAgb3V0LnggPSBkZXQgKiAoYlggKiAoYTIyICogYTMzIC0gYTMyICogYTIzKSArIGJZICogKGEzMiAqIGExMyAtIGExMiAqIGEzMykgKyBiWiAqIChhMTIgKiBhMjMgLSBhMjIgKiBhMTMpKTtcbiAgICBvdXQueSA9IGRldCAqIChhMTEgKiAoYlkgKiBhMzMgLSBiWiAqIGEyMykgKyBhMjEgKiAoYlogKiBhMTMgLSBiWCAqIGEzMykgKyBhMzEgKiAoYlggKiBhMjMgLSBiWSAqIGExMykpO1xuICAgIG91dC56ID0gZGV0ICogKGExMSAqIChhMjIgKiBiWiAtIGEzMiAqIGJZKSArIGEyMSAqIChhMzIgKiBiWCAtIGExMiAqIGJaKSArIGEzMSAqIChhMTIgKiBiWSAtIGEyMiAqIGJYKSk7XG4gICAgcmV0dXJuIG91dDtcbiAgfTtcblxuICByZXR1cm4gYjJNYXQzMztcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJNYXQzMy5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJNYXQyMiwgYjJNYXRoLCBiMlRyYW5zZm9ybSwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyTWF0MjIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyVHJhbnNmb3JtID0gQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm07XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMk1hdGgoKSB7fVxuXG4gIGIyTWF0aC5Jc1ZhbGlkID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSB2b2lkIDApIHtcbiAgICAgIHggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gaXNGaW5pdGUoeCk7XG4gIH07XG5cbiAgYjJNYXRoLkRvdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYS54ICogYi54ICsgYS55ICogYi55O1xuICB9O1xuXG4gIGIyTWF0aC5Dcm9zc1ZWID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhLnggKiBiLnkgLSBhLnkgKiBiLng7XG4gIH07XG5cbiAgYjJNYXRoLkNyb3NzVkYgPSBmdW5jdGlvbihhLCBzKSB7XG4gICAgdmFyIHY7XG4gICAgaWYgKHMgPT09IHZvaWQgMCkge1xuICAgICAgcyA9IDA7XG4gICAgfVxuICAgIHYgPSBuZXcgYjJWZWMyKHMgKiBhLnksIC1zICogYS54KTtcbiAgICByZXR1cm4gdjtcbiAgfTtcblxuICBiMk1hdGguQ3Jvc3NGViA9IGZ1bmN0aW9uKHMsIGEpIHtcbiAgICB2YXIgdjtcbiAgICBpZiAocyA9PT0gdm9pZCAwKSB7XG4gICAgICBzID0gMDtcbiAgICB9XG4gICAgdiA9IG5ldyBiMlZlYzIoLXMgKiBhLnksIHMgKiBhLngpO1xuICAgIHJldHVybiB2O1xuICB9O1xuXG4gIGIyTWF0aC5NdWxNViA9IGZ1bmN0aW9uKEEsIHYpIHtcbiAgICB2YXIgdTtcbiAgICB1ID0gbmV3IGIyVmVjMihBLmNvbDEueCAqIHYueCArIEEuY29sMi54ICogdi55LCBBLmNvbDEueSAqIHYueCArIEEuY29sMi55ICogdi55KTtcbiAgICByZXR1cm4gdTtcbiAgfTtcblxuICBiMk1hdGguTXVsVE1WID0gZnVuY3Rpb24oQSwgdikge1xuICAgIHZhciB1O1xuICAgIHUgPSBuZXcgYjJWZWMyKGIyTWF0aC5Eb3QodiwgQS5jb2wxKSwgYjJNYXRoLkRvdCh2LCBBLmNvbDIpKTtcbiAgICByZXR1cm4gdTtcbiAgfTtcblxuICBiMk1hdGguTXVsWCA9IGZ1bmN0aW9uKFQsIHYpIHtcbiAgICB2YXIgYTtcbiAgICBhID0gYjJNYXRoLk11bE1WKFQuUiwgdik7XG4gICAgYS54ICs9IFQucG9zaXRpb24ueDtcbiAgICBhLnkgKz0gVC5wb3NpdGlvbi55O1xuICAgIHJldHVybiBhO1xuICB9O1xuXG4gIGIyTWF0aC5NdWxYVCA9IGZ1bmN0aW9uKFQsIHYpIHtcbiAgICB2YXIgYSwgdFg7XG4gICAgYSA9IGIyTWF0aC5TdWJ0cmFjdFZWKHYsIFQucG9zaXRpb24pO1xuICAgIHRYID0gYS54ICogVC5SLmNvbDEueCArIGEueSAqIFQuUi5jb2wxLnk7XG4gICAgYS55ID0gYS54ICogVC5SLmNvbDIueCArIGEueSAqIFQuUi5jb2wyLnk7XG4gICAgYS54ID0gdFg7XG4gICAgcmV0dXJuIGE7XG4gIH07XG5cbiAgYjJNYXRoLkFkZFZWID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciB2O1xuICAgIHYgPSBuZXcgYjJWZWMyKGEueCArIGIueCwgYS55ICsgYi55KTtcbiAgICByZXR1cm4gdjtcbiAgfTtcblxuICBiMk1hdGguU3VidHJhY3RWViA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgdjtcbiAgICB2ID0gbmV3IGIyVmVjMihhLnggLSBiLngsIGEueSAtIGIueSk7XG4gICAgcmV0dXJuIHY7XG4gIH07XG5cbiAgYjJNYXRoLkRpc3RhbmNlID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciBjWCwgY1k7XG4gICAgY1ggPSBhLnggLSBiLng7XG4gICAgY1kgPSBhLnkgLSBiLnk7XG4gICAgcmV0dXJuIE1hdGguc3FydChjWCAqIGNYICsgY1kgKiBjWSk7XG4gIH07XG5cbiAgYjJNYXRoLkRpc3RhbmNlU3F1YXJlZCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgY1gsIGNZO1xuICAgIGNYID0gYS54IC0gYi54O1xuICAgIGNZID0gYS55IC0gYi55O1xuICAgIHJldHVybiBjWCAqIGNYICsgY1kgKiBjWTtcbiAgfTtcblxuICBiMk1hdGguTXVsRlYgPSBmdW5jdGlvbihzLCBhKSB7XG4gICAgdmFyIHY7XG4gICAgaWYgKHMgPT09IHZvaWQgMCkge1xuICAgICAgcyA9IDA7XG4gICAgfVxuICAgIHYgPSBuZXcgYjJWZWMyKHMgKiBhLngsIHMgKiBhLnkpO1xuICAgIHJldHVybiB2O1xuICB9O1xuXG4gIGIyTWF0aC5BZGRNTSA9IGZ1bmN0aW9uKEEsIEIpIHtcbiAgICB2YXIgQztcbiAgICBDID0gYjJNYXQyMi5Gcm9tVlYoYjJNYXRoLkFkZFZWKEEuY29sMSwgQi5jb2wxKSwgYjJNYXRoLkFkZFZWKEEuY29sMiwgQi5jb2wyKSk7XG4gICAgcmV0dXJuIEM7XG4gIH07XG5cbiAgYjJNYXRoLk11bE1NID0gZnVuY3Rpb24oQSwgQikge1xuICAgIHZhciBDO1xuICAgIEMgPSBiMk1hdDIyLkZyb21WVihiMk1hdGguTXVsTVYoQSwgQi5jb2wxKSwgYjJNYXRoLk11bE1WKEEsIEIuY29sMikpO1xuICAgIHJldHVybiBDO1xuICB9O1xuXG4gIGIyTWF0aC5NdWxUTU0gPSBmdW5jdGlvbihBLCBCKSB7XG4gICAgdmFyIEMsIGMxLCBjMjtcbiAgICBjMSA9IG5ldyBiMlZlYzIoYjJNYXRoLkRvdChBLmNvbDEsIEIuY29sMSksIGIyTWF0aC5Eb3QoQS5jb2wyLCBCLmNvbDEpKTtcbiAgICBjMiA9IG5ldyBiMlZlYzIoYjJNYXRoLkRvdChBLmNvbDEsIEIuY29sMiksIGIyTWF0aC5Eb3QoQS5jb2wyLCBCLmNvbDIpKTtcbiAgICBDID0gYjJNYXQyMi5Gcm9tVlYoYzEsIGMyKTtcbiAgICByZXR1cm4gQztcbiAgfTtcblxuICBiMk1hdGguQWJzID0gZnVuY3Rpb24oYSkge1xuICAgIGlmIChhID09PSB2b2lkIDApIHtcbiAgICAgIGEgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gKGEgPiAwLjAgPyBhIDogLWEpO1xuICB9O1xuXG4gIGIyTWF0aC5BYnNWID0gZnVuY3Rpb24oYSkge1xuICAgIHZhciBiO1xuICAgIGIgPSBuZXcgYjJWZWMyKGIyTWF0aC5BYnMoYS54KSwgYjJNYXRoLkFicyhhLnkpKTtcbiAgICByZXR1cm4gYjtcbiAgfTtcblxuICBiMk1hdGguQWJzTSA9IGZ1bmN0aW9uKEEpIHtcbiAgICB2YXIgQjtcbiAgICBCID0gYjJNYXQyMi5Gcm9tVlYoYjJNYXRoLkFic1YoQS5jb2wxKSwgYjJNYXRoLkFic1YoQS5jb2wyKSk7XG4gICAgcmV0dXJuIEI7XG4gIH07XG5cbiAgYjJNYXRoLk1pbiA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gdm9pZCAwKSB7XG4gICAgICBhID0gMDtcbiAgICB9XG4gICAgaWYgKGIgPT09IHZvaWQgMCkge1xuICAgICAgYiA9IDA7XG4gICAgfVxuICAgIHJldHVybiAoYSA8IGIgPyBhIDogYik7XG4gIH07XG5cbiAgYjJNYXRoLk1pblYgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIGM7XG4gICAgYyA9IG5ldyBiMlZlYzIoYjJNYXRoLk1pbihhLngsIGIueCksIGIyTWF0aC5NaW4oYS55LCBiLnkpKTtcbiAgICByZXR1cm4gYztcbiAgfTtcblxuICBiMk1hdGguTWF4ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIGlmIChhID09PSB2b2lkIDApIHtcbiAgICAgIGEgPSAwO1xuICAgIH1cbiAgICBpZiAoYiA9PT0gdm9pZCAwKSB7XG4gICAgICBiID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIChhID4gYiA/IGEgOiBiKTtcbiAgfTtcblxuICBiMk1hdGguTWF4ViA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgYztcbiAgICBjID0gbmV3IGIyVmVjMihiMk1hdGguTWF4KGEueCwgYi54KSwgYjJNYXRoLk1heChhLnksIGIueSkpO1xuICAgIHJldHVybiBjO1xuICB9O1xuXG4gIGIyTWF0aC5DbGFtcCA9IGZ1bmN0aW9uKGEsIGxvdywgaGlnaCkge1xuICAgIGlmIChhID09PSB2b2lkIDApIHtcbiAgICAgIGEgPSAwO1xuICAgIH1cbiAgICBpZiAobG93ID09PSB2b2lkIDApIHtcbiAgICAgIGxvdyA9IDA7XG4gICAgfVxuICAgIGlmIChoaWdoID09PSB2b2lkIDApIHtcbiAgICAgIGhpZ2ggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gKGEgPCBsb3cgPyBsb3cgOiAoYSA+IGhpZ2ggPyBoaWdoIDogYSkpO1xuICB9O1xuXG4gIGIyTWF0aC5DbGFtcFYgPSBmdW5jdGlvbihhLCBsb3csIGhpZ2gpIHtcbiAgICByZXR1cm4gYjJNYXRoLk1heFYobG93LCBiMk1hdGguTWluVihhLCBoaWdoKSk7XG4gIH07XG5cbiAgYjJNYXRoLlN3YXAgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHRtcDtcbiAgICB0bXAgPSBhWzBdO1xuICAgIGFbMF0gPSBiWzBdO1xuICAgIGJbMF0gPSB0bXA7XG4gIH07XG5cbiAgYjJNYXRoLlJhbmRvbSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogMiAtIDE7XG4gIH07XG5cbiAgYjJNYXRoLlJhbmRvbVJhbmdlID0gZnVuY3Rpb24obG8sIGhpKSB7XG4gICAgdmFyIHI7XG4gICAgaWYgKGxvID09PSB2b2lkIDApIHtcbiAgICAgIGxvID0gMDtcbiAgICB9XG4gICAgaWYgKGhpID09PSB2b2lkIDApIHtcbiAgICAgIGhpID0gMDtcbiAgICB9XG4gICAgciA9IE1hdGgucmFuZG9tKCk7XG4gICAgciA9IChoaSAtIGxvKSAqIHIgKyBsbztcbiAgICByZXR1cm4gcjtcbiAgfTtcblxuICBiMk1hdGguTmV4dFBvd2VyT2ZUd28gPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09IHZvaWQgMCkge1xuICAgICAgeCA9IDA7XG4gICAgfVxuICAgIHggfD0gKHggPj4gMSkgJiAweDdGRkZGRkZGO1xuICAgIHggfD0gKHggPj4gMikgJiAweDNGRkZGRkZGO1xuICAgIHggfD0gKHggPj4gNCkgJiAweDBGRkZGRkZGO1xuICAgIHggfD0gKHggPj4gOCkgJiAweDAwRkZGRkZGO1xuICAgIHggfD0gKHggPj4gMTYpICYgMHgwMDAwRkZGRjtcbiAgICByZXR1cm4geCArIDE7XG4gIH07XG5cbiAgYjJNYXRoLklzUG93ZXJPZlR3byA9IGZ1bmN0aW9uKHgpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGlmICh4ID09PSB2b2lkIDApIHtcbiAgICAgIHggPSAwO1xuICAgIH1cbiAgICByZXN1bHQgPSB4ID4gMCAmJiAoeCAmICh4IC0gMSkpID09PSAwO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgYjJNYXRoLmIyVmVjMl96ZXJvID0gbmV3IGIyVmVjMigwLjAsIDAuMCk7XG5cbiAgYjJNYXRoLmIyTWF0MjJfaWRlbnRpdHkgPSBiMk1hdDIyLkZyb21WVihuZXcgYjJWZWMyKDEuMCwgMC4wKSwgbmV3IGIyVmVjMigwLjAsIDEuMCkpO1xuXG4gIGIyTWF0aC5iMlRyYW5zZm9ybV9pZGVudGl0eSA9IG5ldyBiMlRyYW5zZm9ybShiMk1hdGguYjJWZWMyX3plcm8sIGIyTWF0aC5iMk1hdDIyX2lkZW50aXR5KTtcblxuICByZXR1cm4gYjJNYXRoO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk1hdGguanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkNvbW1vbi5NYXRoLmIyU3dlZXAgPSAoZnVuY3Rpb24oKSB7XG4gIGIyU3dlZXAucHJvdG90eXBlLmxvY2FsQ2VudGVyID0gbnVsbDtcblxuICBiMlN3ZWVwLnByb3RvdHlwZS5jMCA9IG51bGw7XG5cbiAgYjJTd2VlcC5wcm90b3R5cGUuYyA9IG51bGw7XG5cbiAgYjJTd2VlcC5wcm90b3R5cGUuYTAgPSBudWxsO1xuXG4gIGIyU3dlZXAucHJvdG90eXBlLmEgPSBudWxsO1xuXG4gIGIyU3dlZXAucHJvdG90eXBlLnQwID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMlN3ZWVwKCkge1xuICAgIHRoaXMubG9jYWxDZW50ZXIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5jMCA9IG5ldyBiMlZlYzI7XG4gICAgdGhpcy5jID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyU3dlZXAucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgdGhpcy5sb2NhbENlbnRlci5TZXRWKG90aGVyLmxvY2FsQ2VudGVyKTtcbiAgICB0aGlzLmMwLlNldFYob3RoZXIuYzApO1xuICAgIHRoaXMuYy5TZXRWKG90aGVyLmMpO1xuICAgIHRoaXMuYTAgPSBvdGhlci5hMDtcbiAgICB0aGlzLmEgPSBvdGhlci5hO1xuICAgIHRoaXMudDAgPSBvdGhlci50MDtcbiAgfTtcblxuICBiMlN3ZWVwLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvcHk7XG4gICAgY29weSA9IG5ldyBiMlN3ZWVwKCk7XG4gICAgY29weS5sb2NhbENlbnRlci5TZXRWKHRoaXMubG9jYWxDZW50ZXIpO1xuICAgIGNvcHkuYzAuU2V0Vih0aGlzLmMwKTtcbiAgICBjb3B5LmMuU2V0Vih0aGlzLmMpO1xuICAgIGNvcHkuYTAgPSB0aGlzLmEwO1xuICAgIGNvcHkuYSA9IHRoaXMuYTtcbiAgICBjb3B5LnQwID0gdGhpcy50MDtcbiAgICByZXR1cm4gY29weTtcbiAgfTtcblxuICBiMlN3ZWVwLnByb3RvdHlwZS5HZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbih4ZiwgYWxwaGEpIHtcbiAgICB2YXIgYW5nbGUsIHRNYXQ7XG4gICAgaWYgKGFscGhhID09PSB2b2lkIDApIHtcbiAgICAgIGFscGhhID0gMDtcbiAgICB9XG4gICAgeGYucG9zaXRpb24ueCA9ICgxLjAgLSBhbHBoYSkgKiB0aGlzLmMwLnggKyBhbHBoYSAqIHRoaXMuYy54O1xuICAgIHhmLnBvc2l0aW9uLnkgPSAoMS4wIC0gYWxwaGEpICogdGhpcy5jMC55ICsgYWxwaGEgKiB0aGlzLmMueTtcbiAgICBhbmdsZSA9ICgxLjAgLSBhbHBoYSkgKiB0aGlzLmEwICsgYWxwaGEgKiB0aGlzLmE7XG4gICAgeGYuUi5TZXQoYW5nbGUpO1xuICAgIHRNYXQgPSB4Zi5SO1xuICAgIHhmLnBvc2l0aW9uLnggLT0gdE1hdC5jb2wxLnggKiB0aGlzLmxvY2FsQ2VudGVyLnggKyB0TWF0LmNvbDIueCAqIHRoaXMubG9jYWxDZW50ZXIueTtcbiAgICB4Zi5wb3NpdGlvbi55IC09IHRNYXQuY29sMS55ICogdGhpcy5sb2NhbENlbnRlci54ICsgdE1hdC5jb2wyLnkgKiB0aGlzLmxvY2FsQ2VudGVyLnk7XG4gIH07XG5cbiAgYjJTd2VlcC5wcm90b3R5cGUuQWR2YW5jZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgYWxwaGE7XG4gICAgaWYgKHQgPT09IHZvaWQgMCkge1xuICAgICAgdCA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLnQwIDwgdCAmJiAxLjAgLSB0aGlzLnQwID4gTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgYWxwaGEgPSAodCAtIHRoaXMudDApIC8gKDEuMCAtIHRoaXMudDApO1xuICAgICAgdGhpcy5jMC54ID0gKDEuMCAtIGFscGhhKSAqIHRoaXMuYzAueCArIGFscGhhICogdGhpcy5jLng7XG4gICAgICB0aGlzLmMwLnkgPSAoMS4wIC0gYWxwaGEpICogdGhpcy5jMC55ICsgYWxwaGEgKiB0aGlzLmMueTtcbiAgICAgIHRoaXMuYTAgPSAoMS4wIC0gYWxwaGEpICogdGhpcy5hMCArIGFscGhhICogdGhpcy5hO1xuICAgICAgdGhpcy50MCA9IHQ7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMlN3ZWVwO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlN3ZWVwLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMk1hdDIyLCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuQ29tbW9uLk1hdGguYjJUcmFuc2Zvcm0gPSAoZnVuY3Rpb24oKSB7XG4gIGIyVHJhbnNmb3JtLnByb3RvdHlwZS5wb3NpdGlvbiA9IG51bGw7XG5cbiAgYjJUcmFuc2Zvcm0ucHJvdG90eXBlLlIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyVHJhbnNmb3JtKHBvcywgcikge1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgYjJWZWMyO1xuICAgIHRoaXMuUiA9IG5ldyBiMk1hdDIyKCk7XG4gICAgaWYgKHBvcyA9PT0gdm9pZCAwKSB7XG4gICAgICBwb3MgPSBudWxsO1xuICAgIH1cbiAgICBpZiAociA9PT0gdm9pZCAwKSB7XG4gICAgICByID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBvcykge1xuICAgICAgdGhpcy5wb3NpdGlvbi5TZXRWKHBvcyk7XG4gICAgICB0aGlzLlIuU2V0TShyKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJUcmFuc2Zvcm0ucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihwb3MsIHIpIHtcbiAgICB0aGlzLnBvc2l0aW9uLlNldFYocG9zKTtcbiAgICB0aGlzLlIuU2V0TShyKTtcbiAgfTtcblxuICBiMlRyYW5zZm9ybS5wcm90b3R5cGUuU2V0SWRlbnRpdHkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnBvc2l0aW9uLlNldFplcm8oKTtcbiAgICB0aGlzLlIuU2V0SWRlbnRpdHkoKTtcbiAgfTtcblxuICBiMlRyYW5zZm9ybS5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24oeCkge1xuICAgIHRoaXMucG9zaXRpb24uU2V0Vih4LnBvc2l0aW9uKTtcbiAgICB0aGlzLlIuU2V0TSh4LlIpO1xuICB9O1xuXG4gIGIyVHJhbnNmb3JtLnByb3RvdHlwZS5HZXRBbmdsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMuUi5jb2wxLnksIHRoaXMuUi5jb2wxLngpO1xuICB9O1xuXG4gIHJldHVybiBiMlRyYW5zZm9ybTtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJUcmFuc2Zvcm0uanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyTWF0aDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbkJveDJELkNvbW1vbi5NYXRoLmIyVmVjMiA9IChmdW5jdGlvbigpIHtcbiAgYjJWZWMyLnByb3RvdHlwZS54ID0gMDtcblxuICBiMlZlYzIucHJvdG90eXBlLnkgPSAwO1xuXG4gIGZ1bmN0aW9uIGIyVmVjMih4XywgeV8pIHtcbiAgICBpZiAoeF8gPT09IHZvaWQgMCkge1xuICAgICAgeF8gPSAwO1xuICAgIH1cbiAgICBpZiAoeV8gPT09IHZvaWQgMCkge1xuICAgICAgeV8gPSAwO1xuICAgIH1cbiAgICB0aGlzLnggPSB4XztcbiAgICB0aGlzLnkgPSB5XztcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlZlYzIucHJvdG90eXBlLlNldFplcm8gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnggPSAwLjA7XG4gICAgdGhpcy55ID0gMC4wO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24oeF8sIHlfKSB7XG4gICAgaWYgKHhfID09PSB2b2lkIDApIHtcbiAgICAgIHhfID0gMDtcbiAgICB9XG4gICAgaWYgKHlfID09PSB2b2lkIDApIHtcbiAgICAgIHlfID0gMDtcbiAgICB9XG4gICAgdGhpcy54ID0geF87XG4gICAgdGhpcy55ID0geV87XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5TZXRWID0gZnVuY3Rpb24odikge1xuICAgIHRoaXMueCA9IHYueDtcbiAgICB0aGlzLnkgPSB2Lnk7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5HZXROZWdhdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgYjJWZWMyKC10aGlzLngsIC10aGlzLnkpO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuTmVnYXRpdmVTZWxmID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy54ID0gLXRoaXMueDtcbiAgICB0aGlzLnkgPSAtdGhpcy55O1xuICB9O1xuXG4gIGIyVmVjMi5NYWtlID0gZnVuY3Rpb24oeF8sIHlfKSB7XG4gICAgaWYgKHhfID09PSB2b2lkIDApIHtcbiAgICAgIHhfID0gMDtcbiAgICB9XG4gICAgaWYgKHlfID09PSB2b2lkIDApIHtcbiAgICAgIHlfID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoeF8sIHlfKTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLkNvcHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IGIyVmVjMih0aGlzLngsIHRoaXMueSk7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5BZGQgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy54ICs9IHYueDtcbiAgICB0aGlzLnkgKz0gdi55O1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuU3VidHJhY3QgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy54IC09IHYueDtcbiAgICB0aGlzLnkgLT0gdi55O1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuTXVsdGlwbHkgPSBmdW5jdGlvbihhKSB7XG4gICAgaWYgKGEgPT09IHZvaWQgMCkge1xuICAgICAgYSA9IDA7XG4gICAgfVxuICAgIHRoaXMueCAqPSBhO1xuICAgIHRoaXMueSAqPSBhO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuTXVsTSA9IGZ1bmN0aW9uKEEpIHtcbiAgICB2YXIgdFg7XG4gICAgdFggPSB0aGlzLng7XG4gICAgdGhpcy54ID0gQS5jb2wxLnggKiB0WCArIEEuY29sMi54ICogdGhpcy55O1xuICAgIHRoaXMueSA9IEEuY29sMS55ICogdFggKyBBLmNvbDIueSAqIHRoaXMueTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLk11bFRNID0gZnVuY3Rpb24oQSkge1xuICAgIHZhciB0WDtcbiAgICB0WCA9IGIyTWF0aC5Eb3QodGhpcywgQS5jb2wxKTtcbiAgICB0aGlzLnkgPSBiMk1hdGguRG90KHRoaXMsIEEuY29sMik7XG4gICAgdGhpcy54ID0gdFg7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5Dcm9zc1ZGID0gZnVuY3Rpb24ocykge1xuICAgIHZhciB0WDtcbiAgICBpZiAocyA9PT0gdm9pZCAwKSB7XG4gICAgICBzID0gMDtcbiAgICB9XG4gICAgdFggPSB0aGlzLng7XG4gICAgdGhpcy54ID0gcyAqIHRoaXMueTtcbiAgICB0aGlzLnkgPSAtcyAqIHRYO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuQ3Jvc3NGViA9IGZ1bmN0aW9uKHMpIHtcbiAgICB2YXIgdFg7XG4gICAgaWYgKHMgPT09IHZvaWQgMCkge1xuICAgICAgcyA9IDA7XG4gICAgfVxuICAgIHRYID0gdGhpcy54O1xuICAgIHRoaXMueCA9IC1zICogdGhpcy55O1xuICAgIHRoaXMueSA9IHMgKiB0WDtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLk1pblYgPSBmdW5jdGlvbihiKSB7XG4gICAgdGhpcy54ID0gKHRoaXMueCA8IGIueCA/IHRoaXMueCA6IGIueCk7XG4gICAgdGhpcy55ID0gKHRoaXMueSA8IGIueSA/IHRoaXMueSA6IGIueSk7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5NYXhWID0gZnVuY3Rpb24oYikge1xuICAgIHRoaXMueCA9ICh0aGlzLnggPiBiLnggPyB0aGlzLnggOiBiLngpO1xuICAgIHRoaXMueSA9ICh0aGlzLnkgPiBiLnkgPyB0aGlzLnkgOiBiLnkpO1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuQWJzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMueCA8IDApIHtcbiAgICAgIHRoaXMueCA9IC10aGlzLng7XG4gICAgfVxuICAgIGlmICh0aGlzLnkgPCAwKSB7XG4gICAgICB0aGlzLnkgPSAtdGhpcy55O1xuICAgIH1cbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLkxlbmd0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55KTtcbiAgfTtcblxuICBiMlZlYzIucHJvdG90eXBlLkxlbmd0aFNxdWFyZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55O1xuICB9O1xuXG4gIGIyVmVjMi5wcm90b3R5cGUuTm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGludkxlbmd0aCwgbGVuZ3RoO1xuICAgIGxlbmd0aCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xuICAgIGlmIChsZW5ndGggPCBOdW1iZXIuTUlOX1ZBTFVFKSB7XG4gICAgICByZXR1cm4gMC4wO1xuICAgIH1cbiAgICBpbnZMZW5ndGggPSAxLjAgLyBsZW5ndGg7XG4gICAgdGhpcy54ICo9IGludkxlbmd0aDtcbiAgICB0aGlzLnkgKj0gaW52TGVuZ3RoO1xuICAgIHJldHVybiBsZW5ndGg7XG4gIH07XG5cbiAgYjJWZWMyLnByb3RvdHlwZS5Jc1ZhbGlkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGIyTWF0aC5Jc1ZhbGlkKHRoaXMueCkgJiYgYjJNYXRoLklzVmFsaWQodGhpcy55KTtcbiAgfTtcblxuICByZXR1cm4gYjJWZWMyO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlZlYzIuanMubWFwXG4iLCJ2YXIgQm94MkQ7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuQm94MkQuQ29tbW9uLk1hdGguYjJWZWMzID0gKGZ1bmN0aW9uKCkge1xuICBiMlZlYzMucHJvdG90eXBlLnggPSAwO1xuXG4gIGIyVmVjMy5wcm90b3R5cGUueSA9IDA7XG5cbiAgYjJWZWMzLnByb3RvdHlwZS56ID0gMDtcblxuICBmdW5jdGlvbiBiMlZlYzMoeCwgeSwgeikge1xuICAgIGlmICh4ID09PSB2b2lkIDApIHtcbiAgICAgIHggPSAwO1xuICAgIH1cbiAgICBpZiAoeSA9PT0gdm9pZCAwKSB7XG4gICAgICB5ID0gMDtcbiAgICB9XG4gICAgaWYgKHogPT09IHZvaWQgMCkge1xuICAgICAgeiA9IDA7XG4gICAgfVxuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyVmVjMy5wcm90b3R5cGUuU2V0WmVybyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMueCA9IHRoaXMueSA9IHRoaXMueiA9IDAuMDtcbiAgfTtcblxuICBiMlZlYzMucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgICBpZiAoeCA9PT0gdm9pZCAwKSB7XG4gICAgICB4ID0gMDtcbiAgICB9XG4gICAgaWYgKHkgPT09IHZvaWQgMCkge1xuICAgICAgeSA9IDA7XG4gICAgfVxuICAgIGlmICh6ID09PSB2b2lkIDApIHtcbiAgICAgIHogPSAwO1xuICAgIH1cbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgfTtcblxuICBiMlZlYzMucHJvdG90eXBlLlNldFYgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy54ID0gdi54O1xuICAgIHRoaXMueSA9IHYueTtcbiAgICB0aGlzLnogPSB2Lno7XG4gIH07XG5cbiAgYjJWZWMzLnByb3RvdHlwZS5HZXROZWdhdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgYjJWZWMzKC10aGlzLngsIC10aGlzLnksIC10aGlzLnopO1xuICB9O1xuXG4gIGIyVmVjMy5wcm90b3R5cGUuTmVnYXRpdmVTZWxmID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy54ID0gLXRoaXMueDtcbiAgICB0aGlzLnkgPSAtdGhpcy55O1xuICAgIHRoaXMueiA9IC10aGlzLno7XG4gIH07XG5cbiAgYjJWZWMzLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBiMlZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7XG4gIH07XG5cbiAgYjJWZWMzLnByb3RvdHlwZS5BZGQgPSBmdW5jdGlvbih2KSB7XG4gICAgdGhpcy54ICs9IHYueDtcbiAgICB0aGlzLnkgKz0gdi55O1xuICAgIHRoaXMueiArPSB2Lno7XG4gIH07XG5cbiAgYjJWZWMzLnByb3RvdHlwZS5TdWJ0cmFjdCA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0aGlzLnggLT0gdi54O1xuICAgIHRoaXMueSAtPSB2Lnk7XG4gICAgdGhpcy56IC09IHYuejtcbiAgfTtcblxuICBiMlZlYzMucHJvdG90eXBlLk11bHRpcGx5ID0gZnVuY3Rpb24oYSkge1xuICAgIGlmIChhID09PSB2b2lkIDApIHtcbiAgICAgIGEgPSAwO1xuICAgIH1cbiAgICB0aGlzLnggKj0gYTtcbiAgICB0aGlzLnkgKj0gYTtcbiAgICB0aGlzLnogKj0gYTtcbiAgfTtcblxuICByZXR1cm4gYjJWZWMzO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlZlYzMuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQm9keURlZiwgYjJGaXh0dXJlLCBiMkZpeHR1cmVEZWYsIGIyTWF0aCwgYjJTd2VlcCwgYjJUcmFuc2Zvcm0sIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyU3dlZXAgPSBCb3gyRC5Db21tb24uTWF0aC5iMlN3ZWVwO1xuXG5iMlRyYW5zZm9ybSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyRml4dHVyZSA9IEJveDJELkR5bmFtaWNzLmIyRml4dHVyZTtcblxuYjJGaXh0dXJlRGVmID0gQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlRGVmO1xuXG5iMkJvZHlEZWYgPSBCb3gyRC5EeW5hbWljcy5iMkJvZHlEZWY7XG5cbkJveDJELkR5bmFtaWNzLmIyQm9keSA9IChmdW5jdGlvbigpIHtcbiAgYjJCb2R5LnNfeGYxID0gbmV3IGIyVHJhbnNmb3JtKCk7XG5cbiAgYjJCb2R5LmVfaXNsYW5kRmxhZyA9IDB4MDAwMTtcblxuICBiMkJvZHkuZV9hd2FrZUZsYWcgPSAweDAwMDI7XG5cbiAgYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWcgPSAweDAwMDQ7XG5cbiAgYjJCb2R5LmVfYnVsbGV0RmxhZyA9IDB4MDAwODtcblxuICBiMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZyA9IDB4MDAxMDtcblxuICBiMkJvZHkuZV9hY3RpdmVGbGFnID0gMHgwMDIwO1xuXG4gIGIyQm9keS5iMl9zdGF0aWNCb2R5ID0gMDtcblxuICBiMkJvZHkuYjJfa2luZW1hdGljQm9keSA9IDE7XG5cbiAgYjJCb2R5LmIyX2R5bmFtaWNCb2R5ID0gMjtcblxuICBiMkJvZHkucHJvdG90eXBlLm1feGYgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9zd2VlcCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX2xpbmVhclZlbG9jaXR5ID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fZm9yY2UgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9mbGFncyA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3dvcmxkID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fam9pbnRMaXN0ID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fY29udHJvbGxlckxpc3QgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9jb250YWN0TGlzdCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX2NvbnRyb2xsZXJDb3VudCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3ByZXYgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9uZXh0ID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fbGluZWFyVmVsb2NpdHkgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9hbmd1bGFyVmVsb2NpdHkgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9saW5lYXJEYW1waW5nID0gbnVsbDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fYW5ndWxhckRhbXBpbmcgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9mb3JjZSA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3RvcnF1ZSA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3NsZWVwVGltZSA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX3R5cGUgPSAwO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9tYXNzID0gMDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1faW52TWFzcyA9IDA7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX0kgPSAwO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9pbnZJID0gMDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1faW5lcnRpYVNjYWxlID0gMDtcblxuICBiMkJvZHkucHJvdG90eXBlLm1fdXNlckRhdGEgPSBudWxsO1xuXG4gIGIyQm9keS5wcm90b3R5cGUubV9maXh0dXJlTGlzdCA9IG51bGw7XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5tX2ZpeHR1cmVDb3VudCA9IDA7XG5cbiAgZnVuY3Rpb24gYjJCb2R5KGJkLCB3b3JsZCkge1xuICAgIHZhciB0TWF0LCB0VmVjO1xuICAgIHRoaXMubV94ZiA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuICAgIHRoaXMubV9zd2VlcCA9IG5ldyBiMlN3ZWVwKCk7XG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9mb3JjZSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fZmxhZ3MgPSAwO1xuICAgIGlmIChiZC5idWxsZXQpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9idWxsZXRGbGFnO1xuICAgIH1cbiAgICBpZiAoYmQuZml4ZWRSb3RhdGlvbikge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQm9keS5lX2ZpeGVkUm90YXRpb25GbGFnO1xuICAgIH1cbiAgICBpZiAoYmQuYWxsb3dTbGVlcCkge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQm9keS5lX2FsbG93U2xlZXBGbGFnO1xuICAgIH1cbiAgICBpZiAoYmQuYXdha2UpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9hd2FrZUZsYWc7XG4gICAgfVxuICAgIGlmIChiZC5hY3RpdmUpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9hY3RpdmVGbGFnO1xuICAgIH1cbiAgICB0aGlzLm1fd29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLm1feGYucG9zaXRpb24uU2V0VihiZC5wb3NpdGlvbik7XG4gICAgdGhpcy5tX3hmLlIuU2V0KGJkLmFuZ2xlKTtcbiAgICB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIuU2V0WmVybygpO1xuICAgIHRoaXMubV9zd2VlcC50MCA9IDEuMDtcbiAgICB0aGlzLm1fc3dlZXAuYTAgPSB0aGlzLm1fc3dlZXAuYSA9IGJkLmFuZ2xlO1xuICAgIHRNYXQgPSB0aGlzLm1feGYuUjtcbiAgICB0VmVjID0gdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICAgIHRoaXMubV9zd2VlcC5jLnggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgIHRoaXMubV9zd2VlcC5jLnkgPSB0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55O1xuICAgIHRoaXMubV9zd2VlcC5jLnggKz0gdGhpcy5tX3hmLnBvc2l0aW9uLng7XG4gICAgdGhpcy5tX3N3ZWVwLmMueSArPSB0aGlzLm1feGYucG9zaXRpb24ueTtcbiAgICB0aGlzLm1fc3dlZXAuYzAuU2V0Vih0aGlzLm1fc3dlZXAuYyk7XG4gICAgdGhpcy5tX2pvaW50TGlzdCA9IG51bGw7XG4gICAgdGhpcy5tX2NvbnRyb2xsZXJMaXN0ID0gbnVsbDtcbiAgICB0aGlzLm1fY29udGFjdExpc3QgPSBudWxsO1xuICAgIHRoaXMubV9jb250cm9sbGVyQ291bnQgPSAwO1xuICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbmV4dCA9IG51bGw7XG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LlNldFYoYmQubGluZWFyVmVsb2NpdHkpO1xuICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSBiZC5hbmd1bGFyVmVsb2NpdHk7XG4gICAgdGhpcy5tX2xpbmVhckRhbXBpbmcgPSBiZC5saW5lYXJEYW1waW5nO1xuICAgIHRoaXMubV9hbmd1bGFyRGFtcGluZyA9IGJkLmFuZ3VsYXJEYW1waW5nO1xuICAgIHRoaXMubV9mb3JjZS5TZXQoMC4wLCAwLjApO1xuICAgIHRoaXMubV90b3JxdWUgPSAwLjA7XG4gICAgdGhpcy5tX3NsZWVwVGltZSA9IDAuMDtcbiAgICB0aGlzLm1fdHlwZSA9IGJkLnR5cGU7XG4gICAgaWYgKHRoaXMubV90eXBlID09PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgIHRoaXMubV9tYXNzID0gMS4wO1xuICAgICAgdGhpcy5tX2ludk1hc3MgPSAxLjA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9tYXNzID0gMC4wO1xuICAgICAgdGhpcy5tX2ludk1hc3MgPSAwLjA7XG4gICAgfVxuICAgIHRoaXMubV9JID0gMC4wO1xuICAgIHRoaXMubV9pbnZJID0gMC4wO1xuICAgIHRoaXMubV9pbmVydGlhU2NhbGUgPSBiZC5pbmVydGlhU2NhbGU7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gYmQudXNlckRhdGE7XG4gICAgdGhpcy5tX2ZpeHR1cmVMaXN0ID0gbnVsbDtcbiAgICB0aGlzLm1fZml4dHVyZUNvdW50ID0gMDtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkJvZHkucHJvdG90eXBlLkNvbm5lY3RFZGdlcyA9IGZ1bmN0aW9uKHMxLCBzMiwgYW5nbGUxKSB7XG4gICAgdmFyIGFuZ2xlMiwgY29udmV4LCBjb3JlLCBjb3JlT2Zmc2V0LCBjb3JuZXJEaXI7XG4gICAgaWYgKGFuZ2xlMSA9PT0gdm9pZCAwKSB7XG4gICAgICBhbmdsZTEgPSAwO1xuICAgIH1cbiAgICBhbmdsZTIgPSBNYXRoLmF0YW4yKHMyLkdldERpcmVjdGlvblZlY3RvcigpLnksIHMyLkdldERpcmVjdGlvblZlY3RvcigpLngpO1xuICAgIGNvcmVPZmZzZXQgPSBNYXRoLnRhbigoYW5nbGUyIC0gYW5nbGUxKSAqIDAuNSk7XG4gICAgY29yZSA9IGIyTWF0aC5NdWxGVihjb3JlT2Zmc2V0LCBzMi5HZXREaXJlY3Rpb25WZWN0b3IoKSk7XG4gICAgY29yZSA9IGIyTWF0aC5TdWJ0cmFjdFZWKGNvcmUsIHMyLkdldE5vcm1hbFZlY3RvcigpKTtcbiAgICBjb3JlID0gYjJNYXRoLk11bEZWKGIyU2V0dGluZ3MuYjJfdG9pU2xvcCwgY29yZSk7XG4gICAgY29yZSA9IGIyTWF0aC5BZGRWVihjb3JlLCBzMi5HZXRWZXJ0ZXgxKCkpO1xuICAgIGNvcm5lckRpciA9IGIyTWF0aC5BZGRWVihzMS5HZXREaXJlY3Rpb25WZWN0b3IoKSwgczIuR2V0RGlyZWN0aW9uVmVjdG9yKCkpO1xuICAgIGNvcm5lckRpci5Ob3JtYWxpemUoKTtcbiAgICBjb252ZXggPSBiMk1hdGguRG90KHMxLkdldERpcmVjdGlvblZlY3RvcigpLCBzMi5HZXROb3JtYWxWZWN0b3IoKSkgPiAwLjA7XG4gICAgczEuU2V0TmV4dEVkZ2UoczIsIGNvcmUsIGNvcm5lckRpciwgY29udmV4KTtcbiAgICBzMi5TZXRQcmV2RWRnZShzMSwgY29yZSwgY29ybmVyRGlyLCBjb252ZXgpO1xuICAgIHJldHVybiBhbmdsZTI7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5DcmVhdGVGaXh0dXJlID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgdmFyIGJyb2FkUGhhc2UsIGZpeHR1cmU7XG4gICAgaWYgKHRoaXMubV93b3JsZC5Jc0xvY2tlZCgpID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZml4dHVyZSA9IG5ldyBiMkZpeHR1cmUoKTtcbiAgICBmaXh0dXJlLkNyZWF0ZSh0aGlzLCB0aGlzLm1feGYsIGRlZik7XG4gICAgaWYgKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2FjdGl2ZUZsYWcpIHtcbiAgICAgIGJyb2FkUGhhc2UgPSB0aGlzLm1fd29ybGQubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgICBmaXh0dXJlLkNyZWF0ZVByb3h5KGJyb2FkUGhhc2UsIHRoaXMubV94Zik7XG4gICAgfVxuICAgIGZpeHR1cmUubV9uZXh0ID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgIHRoaXMubV9maXh0dXJlTGlzdCA9IGZpeHR1cmU7XG4gICAgKyt0aGlzLm1fZml4dHVyZUNvdW50O1xuICAgIGZpeHR1cmUubV9ib2R5ID0gdGhpcztcbiAgICBpZiAoZml4dHVyZS5tX2RlbnNpdHkgPiAwLjApIHtcbiAgICAgIHRoaXMuUmVzZXRNYXNzRGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLm1fd29ybGQubV9mbGFncyB8PSBiMldvcmxkLmVfbmV3Rml4dHVyZTtcbiAgICByZXR1cm4gZml4dHVyZTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkNyZWF0ZUZpeHR1cmUyID0gZnVuY3Rpb24oc2hhcGUsIGRlbnNpdHkpIHtcbiAgICB2YXIgZGVmO1xuICAgIGlmIChkZW5zaXR5ID09PSB2b2lkIDApIHtcbiAgICAgIGRlbnNpdHkgPSAwLjA7XG4gICAgfVxuICAgIGRlZiA9IG5ldyBiMkZpeHR1cmVEZWYoKTtcbiAgICBkZWYuc2hhcGUgPSBzaGFwZTtcbiAgICBkZWYuZGVuc2l0eSA9IGRlbnNpdHk7XG4gICAgcmV0dXJuIHRoaXMuQ3JlYXRlRml4dHVyZShkZWYpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuRGVzdHJveUZpeHR1cmUgPSBmdW5jdGlvbihmaXh0dXJlKSB7XG4gICAgdmFyIGJyb2FkUGhhc2UsIGMsIGVkZ2UsIGZpeHR1cmVBLCBmaXh0dXJlQiwgZm91bmQsIG5vZGUsIHBwRjtcbiAgICBpZiAodGhpcy5tX3dvcmxkLklzTG9ja2VkKCkgPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbm9kZSA9IHRoaXMubV9maXh0dXJlTGlzdDtcbiAgICBwcEYgPSBudWxsO1xuICAgIGZvdW5kID0gZmFsc2U7XG4gICAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xuICAgICAgaWYgKG5vZGUgPT09IGZpeHR1cmUpIHtcbiAgICAgICAgaWYgKHBwRikge1xuICAgICAgICAgIHBwRi5tX25leHQgPSBmaXh0dXJlLm1fbmV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1fZml4dHVyZUxpc3QgPSBmaXh0dXJlLm1fbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcHBGID0gbm9kZTtcbiAgICAgIG5vZGUgPSBub2RlLm1fbmV4dDtcbiAgICB9XG4gICAgZWRnZSA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICB3aGlsZSAoZWRnZSkge1xuICAgICAgYyA9IGVkZ2UuY29udGFjdDtcbiAgICAgIGVkZ2UgPSBlZGdlLm5leHQ7XG4gICAgICBmaXh0dXJlQSA9IGMuR2V0Rml4dHVyZUEoKTtcbiAgICAgIGZpeHR1cmVCID0gYy5HZXRGaXh0dXJlQigpO1xuICAgICAgaWYgKGZpeHR1cmUgPT09IGZpeHR1cmVBIHx8IGZpeHR1cmUgPT09IGZpeHR1cmVCKSB7XG4gICAgICAgIHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLkRlc3Ryb3koYyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9hY3RpdmVGbGFnKSB7XG4gICAgICBicm9hZFBoYXNlID0gdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlO1xuICAgICAgZml4dHVyZS5EZXN0cm95UHJveHkoYnJvYWRQaGFzZSk7XG4gICAgfSBlbHNlIHtcblxuICAgIH1cbiAgICBmaXh0dXJlLkRlc3Ryb3koKTtcbiAgICBmaXh0dXJlLm1fYm9keSA9IG51bGw7XG4gICAgZml4dHVyZS5tX25leHQgPSBudWxsO1xuICAgIC0tdGhpcy5tX2ZpeHR1cmVDb3VudDtcbiAgICB0aGlzLlJlc2V0TWFzc0RhdGEoKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldFBvc2l0aW9uQW5kQW5nbGUgPSBmdW5jdGlvbihwb3NpdGlvbiwgYW5nbGUpIHtcbiAgICB2YXIgYnJvYWRQaGFzZSwgZiwgdE1hdCwgdFZlYztcbiAgICBpZiAoYW5nbGUgPT09IHZvaWQgMCkge1xuICAgICAgYW5nbGUgPSAwO1xuICAgIH1cbiAgICBmID0gdm9pZCAwO1xuICAgIGlmICh0aGlzLm1fd29ybGQuSXNMb2NrZWQoKSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1feGYuUi5TZXQoYW5nbGUpO1xuICAgIHRoaXMubV94Zi5wb3NpdGlvbi5TZXRWKHBvc2l0aW9uKTtcbiAgICB0TWF0ID0gdGhpcy5tX3hmLlI7XG4gICAgdFZlYyA9IHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICB0aGlzLm1fc3dlZXAuYy54ID0gdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICB0aGlzLm1fc3dlZXAuYy55ID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICB0aGlzLm1fc3dlZXAuYy54ICs9IHRoaXMubV94Zi5wb3NpdGlvbi54O1xuICAgIHRoaXMubV9zd2VlcC5jLnkgKz0gdGhpcy5tX3hmLnBvc2l0aW9uLnk7XG4gICAgdGhpcy5tX3N3ZWVwLmMwLlNldFYodGhpcy5tX3N3ZWVwLmMpO1xuICAgIHRoaXMubV9zd2VlcC5hMCA9IHRoaXMubV9zd2VlcC5hID0gYW5nbGU7XG4gICAgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICBmID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgIHdoaWxlIChmKSB7XG4gICAgICBmLlN5bmNocm9uaXplKGJyb2FkUGhhc2UsIHRoaXMubV94ZiwgdGhpcy5tX3hmKTtcbiAgICAgIGYgPSBmLm1fbmV4dDtcbiAgICB9XG4gICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIuRmluZE5ld0NvbnRhY3RzKCk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbih4Zikge1xuICAgIHRoaXMuU2V0UG9zaXRpb25BbmRBbmdsZSh4Zi5wb3NpdGlvbiwgeGYuR2V0QW5nbGUoKSk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3hmO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0UG9zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3hmLnBvc2l0aW9uO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0UG9zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgIHRoaXMuU2V0UG9zaXRpb25BbmRBbmdsZShwb3NpdGlvbiwgdGhpcy5HZXRBbmdsZSgpKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldEFuZ2xlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9zd2VlcC5hO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0QW5nbGUgPSBmdW5jdGlvbihhbmdsZSkge1xuICAgIGlmIChhbmdsZSA9PT0gdm9pZCAwKSB7XG4gICAgICBhbmdsZSA9IDA7XG4gICAgfVxuICAgIHRoaXMuU2V0UG9zaXRpb25BbmRBbmdsZSh0aGlzLkdldFBvc2l0aW9uKCksIGFuZ2xlKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldFdvcmxkQ2VudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9zd2VlcC5jO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0TG9jYWxDZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0TGluZWFyVmVsb2NpdHkgPSBmdW5jdGlvbih2KSB7XG4gICAgaWYgKHRoaXMubV90eXBlID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkuU2V0Vih2KTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldExpbmVhclZlbG9jaXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9saW5lYXJWZWxvY2l0eTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldEFuZ3VsYXJWZWxvY2l0eSA9IGZ1bmN0aW9uKG9tZWdhKSB7XG4gICAgaWYgKG9tZWdhID09PSB2b2lkIDApIHtcbiAgICAgIG9tZWdhID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV90eXBlID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ID0gb21lZ2E7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRBbmd1bGFyVmVsb2NpdHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldERlZmluaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYmQ7XG4gICAgYmQgPSBuZXcgYjJCb2R5RGVmKCk7XG4gICAgYmQudHlwZSA9IHRoaXMuR2V0VHlwZSgpO1xuICAgIGJkLmFsbG93U2xlZXAgPSAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWcpID09PSBiMkJvZHkuZV9hbGxvd1NsZWVwRmxhZztcbiAgICBiZC5hbmdsZSA9IHRoaXMuR2V0QW5nbGUoKTtcbiAgICBiZC5hbmd1bGFyRGFtcGluZyA9IHRoaXMubV9hbmd1bGFyRGFtcGluZztcbiAgICBiZC5hbmd1bGFyVmVsb2NpdHkgPSB0aGlzLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIGJkLmZpeGVkUm90YXRpb24gPSAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfZml4ZWRSb3RhdGlvbkZsYWcpID09PSBiMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZztcbiAgICBiZC5idWxsZXQgPSAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfYnVsbGV0RmxhZykgPT09IGIyQm9keS5lX2J1bGxldEZsYWc7XG4gICAgYmQuYXdha2UgPSAodGhpcy5tX2ZsYWdzICYgYjJCb2R5LmVfYXdha2VGbGFnKSA9PT0gYjJCb2R5LmVfYXdha2VGbGFnO1xuICAgIGJkLmxpbmVhckRhbXBpbmcgPSB0aGlzLm1fbGluZWFyRGFtcGluZztcbiAgICBiZC5saW5lYXJWZWxvY2l0eS5TZXRWKHRoaXMuR2V0TGluZWFyVmVsb2NpdHkoKSk7XG4gICAgYmQucG9zaXRpb24gPSB0aGlzLkdldFBvc2l0aW9uKCk7XG4gICAgYmQudXNlckRhdGEgPSB0aGlzLkdldFVzZXJEYXRhKCk7XG4gICAgcmV0dXJuIGJkO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuQXBwbHlGb3JjZSA9IGZ1bmN0aW9uKGZvcmNlLCBwb2ludCkge1xuICAgIGlmICh0aGlzLm1fdHlwZSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLklzQXdha2UoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMubV9mb3JjZS54ICs9IGZvcmNlLng7XG4gICAgdGhpcy5tX2ZvcmNlLnkgKz0gZm9yY2UueTtcbiAgICB0aGlzLm1fdG9ycXVlICs9IChwb2ludC54IC0gdGhpcy5tX3N3ZWVwLmMueCkgKiBmb3JjZS55IC0gKHBvaW50LnkgLSB0aGlzLm1fc3dlZXAuYy55KSAqIGZvcmNlLng7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5BcHBseVRvcnF1ZSA9IGZ1bmN0aW9uKHRvcnF1ZSkge1xuICAgIGlmICh0b3JxdWUgPT09IHZvaWQgMCkge1xuICAgICAgdG9ycXVlID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV90eXBlICE9PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuSXNBd2FrZSgpID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5TZXRBd2FrZSh0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5tX3RvcnF1ZSArPSB0b3JxdWU7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5BcHBseUltcHVsc2UgPSBmdW5jdGlvbihpbXB1bHNlLCBwb2ludCkge1xuICAgIGlmICh0aGlzLm1fdHlwZSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLklzQXdha2UoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS54ICs9IHRoaXMubV9pbnZNYXNzICogaW1wdWxzZS54O1xuICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS55ICs9IHRoaXMubV9pbnZNYXNzICogaW1wdWxzZS55O1xuICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKz0gdGhpcy5tX2ludkkgKiAoKHBvaW50LnggLSB0aGlzLm1fc3dlZXAuYy54KSAqIGltcHVsc2UueSAtIChwb2ludC55IC0gdGhpcy5tX3N3ZWVwLmMueSkgKiBpbXB1bHNlLngpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU3BsaXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBhbmd1bGFyVmVsb2NpdHksIGJvZHkxLCBib2R5MiwgY2VudGVyLCBjZW50ZXIxLCBjZW50ZXIyLCBmLCBsaW5lYXJWZWxvY2l0eSwgbmV4dCwgcHJldiwgdmVsb2NpdHkxLCB2ZWxvY2l0eTI7XG4gICAgbGluZWFyVmVsb2NpdHkgPSB0aGlzLkdldExpbmVhclZlbG9jaXR5KCkuQ29weSgpO1xuICAgIGFuZ3VsYXJWZWxvY2l0eSA9IHRoaXMuR2V0QW5ndWxhclZlbG9jaXR5KCk7XG4gICAgY2VudGVyID0gdGhpcy5HZXRXb3JsZENlbnRlcigpO1xuICAgIGJvZHkxID0gdGhpcztcbiAgICBib2R5MiA9IHRoaXMubV93b3JsZC5DcmVhdGVCb2R5KHRoaXMuR2V0RGVmaW5pdGlvbigpKTtcbiAgICBwcmV2ID0gdm9pZCAwO1xuICAgIGYgPSBib2R5MS5tX2ZpeHR1cmVMaXN0O1xuICAgIHdoaWxlIChmKSB7XG4gICAgICBpZiAoY2FsbGJhY2soZikpIHtcbiAgICAgICAgbmV4dCA9IGYubV9uZXh0O1xuICAgICAgICBpZiAocHJldikge1xuICAgICAgICAgIHByZXYubV9uZXh0ID0gbmV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBib2R5MS5tX2ZpeHR1cmVMaXN0ID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBib2R5MS5tX2ZpeHR1cmVDb3VudC0tO1xuICAgICAgICBmLm1fbmV4dCA9IGJvZHkyLm1fZml4dHVyZUxpc3Q7XG4gICAgICAgIGJvZHkyLm1fZml4dHVyZUxpc3QgPSBmO1xuICAgICAgICBib2R5Mi5tX2ZpeHR1cmVDb3VudCsrO1xuICAgICAgICBmLm1fYm9keSA9IGJvZHkyO1xuICAgICAgICBmID0gbmV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXYgPSBmO1xuICAgICAgICBmID0gZi5tX25leHQ7XG4gICAgICB9XG4gICAgfVxuICAgIGJvZHkxLlJlc2V0TWFzc0RhdGEoKTtcbiAgICBib2R5Mi5SZXNldE1hc3NEYXRhKCk7XG4gICAgY2VudGVyMSA9IGJvZHkxLkdldFdvcmxkQ2VudGVyKCk7XG4gICAgY2VudGVyMiA9IGJvZHkyLkdldFdvcmxkQ2VudGVyKCk7XG4gICAgdmVsb2NpdHkxID0gYjJNYXRoLkFkZFZWKGxpbmVhclZlbG9jaXR5LCBiMk1hdGguQ3Jvc3NGVihhbmd1bGFyVmVsb2NpdHksIGIyTWF0aC5TdWJ0cmFjdFZWKGNlbnRlcjEsIGNlbnRlcikpKTtcbiAgICB2ZWxvY2l0eTIgPSBiMk1hdGguQWRkVlYobGluZWFyVmVsb2NpdHksIGIyTWF0aC5Dcm9zc0ZWKGFuZ3VsYXJWZWxvY2l0eSwgYjJNYXRoLlN1YnRyYWN0VlYoY2VudGVyMiwgY2VudGVyKSkpO1xuICAgIGJvZHkxLlNldExpbmVhclZlbG9jaXR5KHZlbG9jaXR5MSk7XG4gICAgYm9keTIuU2V0TGluZWFyVmVsb2NpdHkodmVsb2NpdHkyKTtcbiAgICBib2R5MS5TZXRBbmd1bGFyVmVsb2NpdHkoYW5ndWxhclZlbG9jaXR5KTtcbiAgICBib2R5Mi5TZXRBbmd1bGFyVmVsb2NpdHkoYW5ndWxhclZlbG9jaXR5KTtcbiAgICBib2R5MS5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7XG4gICAgYm9keTIuU3luY2hyb25pemVGaXh0dXJlcygpO1xuICAgIHJldHVybiBib2R5MjtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLk1lcmdlID0gZnVuY3Rpb24ob3RoZXIpIHtcbiAgICB2YXIgYW5ndWxhciwgYW5ndWxhcjEsIGJvZHkxLCBib2R5MiwgY2VudGVyMSwgY2VudGVyMiwgZiwgbmV4dCwgdmVsb2NpdHkxLCB2ZWxvY2l0eTI7XG4gICAgZiA9IHZvaWQgMDtcbiAgICBmID0gb3RoZXIubV9maXh0dXJlTGlzdDtcbiAgICB3aGlsZSAoZikge1xuICAgICAgbmV4dCA9IGYubV9uZXh0O1xuICAgICAgb3RoZXIubV9maXh0dXJlQ291bnQtLTtcbiAgICAgIGYubV9uZXh0ID0gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICAgICAgdGhpcy5tX2ZpeHR1cmVMaXN0ID0gZjtcbiAgICAgIHRoaXMubV9maXh0dXJlQ291bnQrKztcbiAgICAgIGYubV9ib2R5ID0gYm9keTI7XG4gICAgICBmID0gbmV4dDtcbiAgICB9XG4gICAgYm9keTEubV9maXh0dXJlQ291bnQgPSAwO1xuICAgIGJvZHkxID0gdGhpcztcbiAgICBib2R5MiA9IG90aGVyO1xuICAgIGNlbnRlcjEgPSBib2R5MS5HZXRXb3JsZENlbnRlcigpO1xuICAgIGNlbnRlcjIgPSBib2R5Mi5HZXRXb3JsZENlbnRlcigpO1xuICAgIHZlbG9jaXR5MSA9IGJvZHkxLkdldExpbmVhclZlbG9jaXR5KCkuQ29weSgpO1xuICAgIHZlbG9jaXR5MiA9IGJvZHkyLkdldExpbmVhclZlbG9jaXR5KCkuQ29weSgpO1xuICAgIGFuZ3VsYXIxID0gYm9keTEuR2V0QW5ndWxhclZlbG9jaXR5KCk7XG4gICAgYW5ndWxhciA9IGJvZHkyLkdldEFuZ3VsYXJWZWxvY2l0eSgpO1xuICAgIGJvZHkxLlJlc2V0TWFzc0RhdGEoKTtcbiAgICB0aGlzLlN5bmNocm9uaXplRml4dHVyZXMoKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldE1hc3MgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21hc3M7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRJbmVydGlhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9JO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0TWFzc0RhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgZGF0YS5tYXNzID0gdGhpcy5tX21hc3M7XG4gICAgZGF0YS5JID0gdGhpcy5tX0k7XG4gICAgZGF0YS5jZW50ZXIuU2V0Vih0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0TWFzc0RhdGEgPSBmdW5jdGlvbihtYXNzRGF0YSkge1xuICAgIHZhciBvbGRDZW50ZXI7XG4gICAgYjJTZXR0aW5ncy5iMkFzc2VydCh0aGlzLm1fd29ybGQuSXNMb2NrZWQoKSA9PT0gZmFsc2UpO1xuICAgIGlmICh0aGlzLm1fd29ybGQuSXNMb2NrZWQoKSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX3R5cGUgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1faW52TWFzcyA9IDAuMDtcbiAgICB0aGlzLm1fSSA9IDAuMDtcbiAgICB0aGlzLm1faW52SSA9IDAuMDtcbiAgICB0aGlzLm1fbWFzcyA9IG1hc3NEYXRhLm1hc3M7XG4gICAgaWYgKHRoaXMubV9tYXNzIDw9IDAuMCkge1xuICAgICAgdGhpcy5tX21hc3MgPSAxLjA7XG4gICAgfVxuICAgIHRoaXMubV9pbnZNYXNzID0gMS4wIC8gdGhpcy5tX21hc3M7XG4gICAgaWYgKG1hc3NEYXRhLkkgPiAwLjAgJiYgKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2ZpeGVkUm90YXRpb25GbGFnKSA9PT0gMCkge1xuICAgICAgdGhpcy5tX0kgPSBtYXNzRGF0YS5JIC0gdGhpcy5tX21hc3MgKiAobWFzc0RhdGEuY2VudGVyLnggKiBtYXNzRGF0YS5jZW50ZXIueCArIG1hc3NEYXRhLmNlbnRlci55ICogbWFzc0RhdGEuY2VudGVyLnkpO1xuICAgICAgdGhpcy5tX2ludkkgPSAxLjAgLyB0aGlzLm1fSTtcbiAgICB9XG4gICAgb2xkQ2VudGVyID0gdGhpcy5tX3N3ZWVwLmMuQ29weSgpO1xuICAgIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlci5TZXRWKG1hc3NEYXRhLmNlbnRlcik7XG4gICAgdGhpcy5tX3N3ZWVwLmMwLlNldFYoYjJNYXRoLk11bFgodGhpcy5tX3hmLCB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIpKTtcbiAgICB0aGlzLm1fc3dlZXAuYy5TZXRWKHRoaXMubV9zd2VlcC5jMCk7XG4gICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LnggKz0gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSAqICgtKHRoaXMubV9zd2VlcC5jLnkgLSBvbGRDZW50ZXIueSkpO1xuICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS55ICs9IHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKiAoKyh0aGlzLm1fc3dlZXAuYy54IC0gb2xkQ2VudGVyLngpKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlJlc2V0TWFzc0RhdGEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2VudGVyLCBmLCBtYXNzRGF0YSwgb2xkQ2VudGVyO1xuICAgIHRoaXMubV9tYXNzID0gMC4wO1xuICAgIHRoaXMubV9pbnZNYXNzID0gMC4wO1xuICAgIHRoaXMubV9JID0gMC4wO1xuICAgIHRoaXMubV9pbnZJID0gMC4wO1xuICAgIHRoaXMubV9zd2VlcC5sb2NhbENlbnRlci5TZXRaZXJvKCk7XG4gICAgaWYgKHRoaXMubV90eXBlID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSB8fCB0aGlzLm1fdHlwZSA9PT0gYjJCb2R5LmIyX2tpbmVtYXRpY0JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2VudGVyID0gYjJWZWMyLk1ha2UoMCwgMCk7XG4gICAgZiA9IHRoaXMubV9maXh0dXJlTGlzdDtcbiAgICB3aGlsZSAoZikge1xuICAgICAgaWYgKGYubV9kZW5zaXR5ID09PSAwLjApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBtYXNzRGF0YSA9IGYuR2V0TWFzc0RhdGEoKTtcbiAgICAgIHRoaXMubV9tYXNzICs9IG1hc3NEYXRhLm1hc3M7XG4gICAgICBjZW50ZXIueCArPSBtYXNzRGF0YS5jZW50ZXIueCAqIG1hc3NEYXRhLm1hc3M7XG4gICAgICBjZW50ZXIueSArPSBtYXNzRGF0YS5jZW50ZXIueSAqIG1hc3NEYXRhLm1hc3M7XG4gICAgICB0aGlzLm1fSSArPSBtYXNzRGF0YS5JO1xuICAgICAgZiA9IGYubV9uZXh0O1xuICAgIH1cbiAgICBpZiAodGhpcy5tX21hc3MgPiAwLjApIHtcbiAgICAgIHRoaXMubV9pbnZNYXNzID0gMS4wIC8gdGhpcy5tX21hc3M7XG4gICAgICBjZW50ZXIueCAqPSB0aGlzLm1faW52TWFzcztcbiAgICAgIGNlbnRlci55ICo9IHRoaXMubV9pbnZNYXNzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbWFzcyA9IDEuMDtcbiAgICAgIHRoaXMubV9pbnZNYXNzID0gMS4wO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX0kgPiAwLjAgJiYgKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2ZpeGVkUm90YXRpb25GbGFnKSA9PT0gMCkge1xuICAgICAgdGhpcy5tX0kgLT0gdGhpcy5tX21hc3MgKiAoY2VudGVyLnggKiBjZW50ZXIueCArIGNlbnRlci55ICogY2VudGVyLnkpO1xuICAgICAgdGhpcy5tX0kgKj0gdGhpcy5tX2luZXJ0aWFTY2FsZTtcbiAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQodGhpcy5tX0kgPiAwKTtcbiAgICAgIHRoaXMubV9pbnZJID0gMS4wIC8gdGhpcy5tX0k7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9JID0gMC4wO1xuICAgICAgdGhpcy5tX2ludkkgPSAwLjA7XG4gICAgfVxuICAgIG9sZENlbnRlciA9IHRoaXMubV9zd2VlcC5jLkNvcHkoKTtcbiAgICB0aGlzLm1fc3dlZXAubG9jYWxDZW50ZXIuU2V0VihjZW50ZXIpO1xuICAgIHRoaXMubV9zd2VlcC5jMC5TZXRWKGIyTWF0aC5NdWxYKHRoaXMubV94ZiwgdGhpcy5tX3N3ZWVwLmxvY2FsQ2VudGVyKSk7XG4gICAgdGhpcy5tX3N3ZWVwLmMuU2V0Vih0aGlzLm1fc3dlZXAuYzApO1xuICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS54ICs9IHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKiAoLSh0aGlzLm1fc3dlZXAuYy55IC0gb2xkQ2VudGVyLnkpKTtcbiAgICB0aGlzLm1fbGluZWFyVmVsb2NpdHkueSArPSB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKCsodGhpcy5tX3N3ZWVwLmMueCAtIG9sZENlbnRlci54KSk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRXb3JsZFBvaW50ID0gZnVuY3Rpb24obG9jYWxQb2ludCkge1xuICAgIHZhciBBLCB1O1xuICAgIEEgPSB0aGlzLm1feGYuUjtcbiAgICB1ID0gbmV3IGIyVmVjMihBLmNvbDEueCAqIGxvY2FsUG9pbnQueCArIEEuY29sMi54ICogbG9jYWxQb2ludC55LCBBLmNvbDEueSAqIGxvY2FsUG9pbnQueCArIEEuY29sMi55ICogbG9jYWxQb2ludC55KTtcbiAgICB1LnggKz0gdGhpcy5tX3hmLnBvc2l0aW9uLng7XG4gICAgdS55ICs9IHRoaXMubV94Zi5wb3NpdGlvbi55O1xuICAgIHJldHVybiB1O1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0V29ybGRWZWN0b3IgPSBmdW5jdGlvbihsb2NhbFZlY3Rvcikge1xuICAgIHJldHVybiBiMk1hdGguTXVsTVYodGhpcy5tX3hmLlIsIGxvY2FsVmVjdG9yKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldExvY2FsUG9pbnQgPSBmdW5jdGlvbih3b3JsZFBvaW50KSB7XG4gICAgcmV0dXJuIGIyTWF0aC5NdWxYVCh0aGlzLm1feGYsIHdvcmxkUG9pbnQpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0TG9jYWxWZWN0b3IgPSBmdW5jdGlvbih3b3JsZFZlY3Rvcikge1xuICAgIHJldHVybiBiMk1hdGguTXVsVE1WKHRoaXMubV94Zi5SLCB3b3JsZFZlY3Rvcik7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50ID0gZnVuY3Rpb24od29ybGRQb2ludCkge1xuICAgIHJldHVybiBuZXcgYjJWZWMyKHRoaXMubV9saW5lYXJWZWxvY2l0eS54IC0gdGhpcy5tX2FuZ3VsYXJWZWxvY2l0eSAqICh3b3JsZFBvaW50LnkgLSB0aGlzLm1fc3dlZXAuYy55KSwgdGhpcy5tX2xpbmVhclZlbG9jaXR5LnkgKyB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKHdvcmxkUG9pbnQueCAtIHRoaXMubV9zd2VlcC5jLngpKTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldExpbmVhclZlbG9jaXR5RnJvbUxvY2FsUG9pbnQgPSBmdW5jdGlvbihsb2NhbFBvaW50KSB7XG4gICAgdmFyIEEsIHdvcmxkUG9pbnQ7XG4gICAgQSA9IHRoaXMubV94Zi5SO1xuICAgIHdvcmxkUG9pbnQgPSBuZXcgYjJWZWMyKEEuY29sMS54ICogbG9jYWxQb2ludC54ICsgQS5jb2wyLnggKiBsb2NhbFBvaW50LnksIEEuY29sMS55ICogbG9jYWxQb2ludC54ICsgQS5jb2wyLnkgKiBsb2NhbFBvaW50LnkpO1xuICAgIHdvcmxkUG9pbnQueCArPSB0aGlzLm1feGYucG9zaXRpb24ueDtcbiAgICB3b3JsZFBvaW50LnkgKz0gdGhpcy5tX3hmLnBvc2l0aW9uLnk7XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIodGhpcy5tX2xpbmVhclZlbG9jaXR5LnggLSB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ICogKHdvcmxkUG9pbnQueSAtIHRoaXMubV9zd2VlcC5jLnkpLCB0aGlzLm1fbGluZWFyVmVsb2NpdHkueSArIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgKiAod29ybGRQb2ludC54IC0gdGhpcy5tX3N3ZWVwLmMueCkpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0TGluZWFyRGFtcGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbGluZWFyRGFtcGluZztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldExpbmVhckRhbXBpbmcgPSBmdW5jdGlvbihsaW5lYXJEYW1waW5nKSB7XG4gICAgaWYgKGxpbmVhckRhbXBpbmcgPT09IHZvaWQgMCkge1xuICAgICAgbGluZWFyRGFtcGluZyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9saW5lYXJEYW1waW5nID0gbGluZWFyRGFtcGluZztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldEFuZ3VsYXJEYW1waW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9hbmd1bGFyRGFtcGluZztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldEFuZ3VsYXJEYW1waW5nID0gZnVuY3Rpb24oYW5ndWxhckRhbXBpbmcpIHtcbiAgICBpZiAoYW5ndWxhckRhbXBpbmcgPT09IHZvaWQgMCkge1xuICAgICAgYW5ndWxhckRhbXBpbmcgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fYW5ndWxhckRhbXBpbmcgPSBhbmd1bGFyRGFtcGluZztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldFR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgdmFyIGNlO1xuICAgIGlmICh0eXBlID09PSB2b2lkIDApIHtcbiAgICAgIHR5cGUgPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX3R5cGUgPT09IHR5cGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tX3R5cGUgPSB0eXBlO1xuICAgIHRoaXMuUmVzZXRNYXNzRGF0YSgpO1xuICAgIGlmICh0aGlzLm1fdHlwZSA9PT0gYjJCb2R5LmIyX3N0YXRpY0JvZHkpIHtcbiAgICAgIHRoaXMubV9saW5lYXJWZWxvY2l0eS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fYW5ndWxhclZlbG9jaXR5ID0gMC4wO1xuICAgIH1cbiAgICB0aGlzLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9mb3JjZS5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX3RvcnF1ZSA9IDAuMDtcbiAgICBjZSA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICB3aGlsZSAoY2UpIHtcbiAgICAgIGNlLmNvbnRhY3QuRmxhZ0ZvckZpbHRlcmluZygpO1xuICAgICAgY2UgPSBjZS5uZXh0O1xuICAgIH1cbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3R5cGU7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRCdWxsZXQgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgaWYgKGZsYWcpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9idWxsZXRGbGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyQm9keS5lX2J1bGxldEZsYWc7XG4gICAgfVxuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuSXNCdWxsZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2J1bGxldEZsYWcpID09PSBiMkJvZHkuZV9idWxsZXRGbGFnO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0U2xlZXBpbmdBbGxvd2VkID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChmbGFnKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJCb2R5LmVfYWxsb3dTbGVlcEZsYWc7XG4gICAgICB0aGlzLlNldEF3YWtlKHRydWUpO1xuICAgIH1cbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlNldEF3YWtlID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChmbGFnKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJCb2R5LmVfYXdha2VGbGFnO1xuICAgICAgdGhpcy5tX3NsZWVwVGltZSA9IDAuMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ZsYWdzICY9IH5iMkJvZHkuZV9hd2FrZUZsYWc7XG4gICAgICB0aGlzLm1fc2xlZXBUaW1lID0gMC4wO1xuICAgICAgdGhpcy5tX2xpbmVhclZlbG9jaXR5LlNldFplcm8oKTtcbiAgICAgIHRoaXMubV9hbmd1bGFyVmVsb2NpdHkgPSAwLjA7XG4gICAgICB0aGlzLm1fZm9yY2UuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX3RvcnF1ZSA9IDAuMDtcbiAgICB9XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5Jc0F3YWtlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9hd2FrZUZsYWcpID09PSBiMkJvZHkuZV9hd2FrZUZsYWc7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRGaXhlZFJvdGF0aW9uID0gZnVuY3Rpb24oZml4ZWQpIHtcbiAgICBpZiAoZml4ZWQpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ZsYWdzICY9IH5iMkJvZHkuZV9maXhlZFJvdGF0aW9uRmxhZztcbiAgICB9XG4gICAgdGhpcy5SZXNldE1hc3NEYXRhKCk7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5Jc0ZpeGVkUm90YXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKHRoaXMubV9mbGFncyAmIGIyQm9keS5lX2ZpeGVkUm90YXRpb25GbGFnKSA9PT0gYjJCb2R5LmVfZml4ZWRSb3RhdGlvbkZsYWc7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5TZXRBY3RpdmUgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgdmFyIGJyb2FkUGhhc2UsIGNlLCBjZTAsIGY7XG4gICAgaWYgKGZsYWcgPT09IHRoaXMuSXNBY3RpdmUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBicm9hZFBoYXNlID0gdm9pZCAwO1xuICAgIGYgPSB2b2lkIDA7XG4gICAgaWYgKGZsYWcpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkJvZHkuZV9hY3RpdmVGbGFnO1xuICAgICAgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICAgIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7XG4gICAgICB3aGlsZSAoZikge1xuICAgICAgICBmLkNyZWF0ZVByb3h5KGJyb2FkUGhhc2UsIHRoaXMubV94Zik7XG4gICAgICAgIGYgPSBmLm1fbmV4dDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ZsYWdzICY9IH5iMkJvZHkuZV9hY3RpdmVGbGFnO1xuICAgICAgYnJvYWRQaGFzZSA9IHRoaXMubV93b3JsZC5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICAgIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7XG4gICAgICB3aGlsZSAoZikge1xuICAgICAgICBmLkRlc3Ryb3lQcm94eShicm9hZFBoYXNlKTtcbiAgICAgICAgZiA9IGYubV9uZXh0O1xuICAgICAgfVxuICAgICAgY2UgPSB0aGlzLm1fY29udGFjdExpc3Q7XG4gICAgICB3aGlsZSAoY2UpIHtcbiAgICAgICAgY2UwID0gY2U7XG4gICAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIuRGVzdHJveShjZTAuY29udGFjdCk7XG4gICAgICB9XG4gICAgICB0aGlzLm1fY29udGFjdExpc3QgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLklzQWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9hY3RpdmVGbGFnKSA9PT0gYjJCb2R5LmVfYWN0aXZlRmxhZztcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLklzU2xlZXBpbmdBbGxvd2VkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkJvZHkuZV9hbGxvd1NsZWVwRmxhZykgPT09IGIyQm9keS5lX2FsbG93U2xlZXBGbGFnO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0Rml4dHVyZUxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2ZpeHR1cmVMaXN0O1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0Sm9pbnRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9qb2ludExpc3Q7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRDb250cm9sbGVyTGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29udHJvbGxlckxpc3Q7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXRDb250YWN0TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29udGFjdExpc3Q7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5HZXROZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9uZXh0O1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuR2V0VXNlckRhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3VzZXJEYXRhO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2V0VXNlckRhdGEgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLkdldFdvcmxkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV93b3JsZDtcbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlN5bmNocm9uaXplRml4dHVyZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYnJvYWRQaGFzZSwgZiwgdE1hdCwgdFZlYywgeGYxO1xuICAgIHhmMSA9IGIyQm9keS5zX3hmMTtcbiAgICB4ZjEuUi5TZXQodGhpcy5tX3N3ZWVwLmEwKTtcbiAgICB0TWF0ID0geGYxLlI7XG4gICAgdFZlYyA9IHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICB4ZjEucG9zaXRpb24ueCA9IHRoaXMubV9zd2VlcC5jMC54IC0gKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgIHhmMS5wb3NpdGlvbi55ID0gdGhpcy5tX3N3ZWVwLmMwLnkgLSAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgZiA9IHZvaWQgMDtcbiAgICBicm9hZFBoYXNlID0gdGhpcy5tX3dvcmxkLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlO1xuICAgIGYgPSB0aGlzLm1fZml4dHVyZUxpc3Q7XG4gICAgd2hpbGUgKGYpIHtcbiAgICAgIGYuU3luY2hyb25pemUoYnJvYWRQaGFzZSwgeGYxLCB0aGlzLm1feGYpO1xuICAgICAgZiA9IGYubV9uZXh0O1xuICAgIH1cbiAgfTtcblxuICBiMkJvZHkucHJvdG90eXBlLlN5bmNocm9uaXplVHJhbnNmb3JtID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRNYXQsIHRWZWM7XG4gICAgdGhpcy5tX3hmLlIuU2V0KHRoaXMubV9zd2VlcC5hKTtcbiAgICB0TWF0ID0gdGhpcy5tX3hmLlI7XG4gICAgdFZlYyA9IHRoaXMubV9zd2VlcC5sb2NhbENlbnRlcjtcbiAgICB0aGlzLm1feGYucG9zaXRpb24ueCA9IHRoaXMubV9zd2VlcC5jLnggLSAodE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueSk7XG4gICAgdGhpcy5tX3hmLnBvc2l0aW9uLnkgPSB0aGlzLm1fc3dlZXAuYy55IC0gKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICB9O1xuXG4gIGIyQm9keS5wcm90b3R5cGUuU2hvdWxkQ29sbGlkZSA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgdmFyIGpuO1xuICAgIGlmICh0aGlzLm1fdHlwZSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5ICYmIG90aGVyLm1fdHlwZSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGpuID0gdGhpcy5tX2pvaW50TGlzdDtcbiAgICB3aGlsZSAoam4pIHtcbiAgICAgIGlmIChqbi5vdGhlciA9PT0gb3RoZXIpIHtcbiAgICAgICAgaWYgKGpuLmpvaW50Lm1fY29sbGlkZUNvbm5lY3RlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGpuID0gam4ubmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgYjJCb2R5LnByb3RvdHlwZS5BZHZhbmNlID0gZnVuY3Rpb24odCkge1xuICAgIGlmICh0ID09PSB2b2lkIDApIHtcbiAgICAgIHQgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fc3dlZXAuQWR2YW5jZSh0KTtcbiAgICB0aGlzLm1fc3dlZXAuYy5TZXRWKHRoaXMubV9zd2VlcC5jMCk7XG4gICAgdGhpcy5tX3N3ZWVwLmEgPSB0aGlzLm1fc3dlZXAuYTA7XG4gICAgdGhpcy5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICB9O1xuXG4gIHJldHVybiBiMkJvZHk7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQm9keS5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJCb2R5LCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkJvZHkgPSBCb3gyRC5EeW5hbWljcy5iMkJvZHk7XG5cbkJveDJELkR5bmFtaWNzLmIyQm9keURlZiA9IChmdW5jdGlvbigpIHtcbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5wb3NpdGlvbiA9IG51bGw7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5saW5lYXJWZWxvY2l0eSA9IG51bGw7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS51c2VyRGF0YSA9IG51bGw7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5hbmdsZSA9IDAuMDtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmxpbmVhclZlbG9jaXR5ID0gbnVsbDtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmFuZ3VsYXJWZWxvY2l0eSA9IDAuMDtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmxpbmVhckRhbXBpbmcgPSAwLjA7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5hbmd1bGFyRGFtcGluZyA9IDAuMDtcblxuICBiMkJvZHlEZWYucHJvdG90eXBlLmFsbG93U2xlZXAgPSB0cnVlO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUuYXdha2UgPSB0cnVlO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUuZml4ZWRSb3RhdGlvbiA9IGZhbHNlO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUuYnVsbGV0ID0gZmFsc2U7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS50eXBlID0gYjJCb2R5LmIyX3N0YXRpY0JvZHk7XG5cbiAgYjJCb2R5RGVmLnByb3RvdHlwZS5hY3RpdmUgPSB0cnVlO1xuXG4gIGIyQm9keURlZi5wcm90b3R5cGUuaW5lcnRpYVNjYWxlID0gMS4wO1xuXG4gIGZ1bmN0aW9uIGIyQm9keURlZigpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMucG9zaXRpb24uU2V0KDAuMCwgMC4wKTtcbiAgICB0aGlzLmxpbmVhclZlbG9jaXR5ID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubGluZWFyVmVsb2NpdHkuU2V0KDAsIDApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkJvZHlEZWY7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQm9keURlZi5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RGaWx0ZXIgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyQ29udGFjdEZpbHRlcigpIHt9XG5cbiAgYjJDb250YWN0RmlsdGVyLnByb3RvdHlwZS5TaG91bGRDb2xsaWRlID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7XG4gICAgdmFyIGNvbGxpZGUsIGZpbHRlcjEsIGZpbHRlcjI7XG4gICAgZmlsdGVyMSA9IGZpeHR1cmVBLkdldEZpbHRlckRhdGEoKTtcbiAgICBmaWx0ZXIyID0gZml4dHVyZUIuR2V0RmlsdGVyRGF0YSgpO1xuICAgIGlmIChmaWx0ZXIxLmdyb3VwSW5kZXggPT09IGZpbHRlcjIuZ3JvdXBJbmRleCAmJiBmaWx0ZXIxLmdyb3VwSW5kZXggIT09IDApIHtcbiAgICAgIHJldHVybiBmaWx0ZXIxLmdyb3VwSW5kZXggPiAwO1xuICAgIH1cbiAgICBjb2xsaWRlID0gKGZpbHRlcjEubWFza0JpdHMgJiBmaWx0ZXIyLmNhdGVnb3J5Qml0cykgIT09IDAgJiYgKGZpbHRlcjEuY2F0ZWdvcnlCaXRzICYgZmlsdGVyMi5tYXNrQml0cykgIT09IDA7XG4gICAgcmV0dXJuIGNvbGxpZGU7XG4gIH07XG5cbiAgYjJDb250YWN0RmlsdGVyLnByb3RvdHlwZS5SYXlDb2xsaWRlID0gZnVuY3Rpb24odXNlckRhdGEsIGZpeHR1cmUpIHtcbiAgICBpZiAoIXVzZXJEYXRhKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuU2hvdWxkQ29sbGlkZSgodXNlckRhdGEgaW5zdGFuY2VvZiBiMkZpeHR1cmUgPyB1c2VyRGF0YSA6IG51bGwpLCBmaXh0dXJlKTtcbiAgfTtcblxuICBiMkNvbnRhY3RGaWx0ZXIuYjJfZGVmYXVsdEZpbHRlciA9IG5ldyBiMkNvbnRhY3RGaWx0ZXIoKTtcblxuICByZXR1cm4gYjJDb250YWN0RmlsdGVyO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RGaWx0ZXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvciwgYjJTZXR0aW5ncztcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuQm94MkQuRHluYW1pY3MuYjJDb250YWN0SW1wdWxzZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJDb250YWN0SW1wdWxzZSgpIHt9XG5cbiAgYjJDb250YWN0SW1wdWxzZS5wcm90b3R5cGUubm9ybWFsSW1wdWxzZXMgPSBudWxsO1xuXG4gIGIyQ29udGFjdEltcHVsc2UucHJvdG90eXBlLnRhbmdlbnRJbXB1bHNlcyA9IG51bGw7XG5cbiAgYjJDb250YWN0SW1wdWxzZS5iMkNvbnRhY3RJbXB1bHNlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5ub3JtYWxJbXB1bHNlcyA9IG5ldyBWZWN0b3IoYjJTZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50cyk7XG4gICAgdGhpcy50YW5nZW50SW1wdWxzZXMgPSBuZXcgVmVjdG9yKGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICB9O1xuXG4gIHJldHVybiBiMkNvbnRhY3RJbXB1bHNlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RJbXB1bHNlLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLmIyQ29udGFjdExpc3RlbmVyID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkNvbnRhY3RMaXN0ZW5lcigpIHt9XG5cbiAgYjJDb250YWN0TGlzdGVuZXIucHJvdG90eXBlLkJlZ2luQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHt9O1xuXG4gIGIyQ29udGFjdExpc3RlbmVyLnByb3RvdHlwZS5FbmRDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdCkge307XG5cbiAgYjJDb250YWN0TGlzdGVuZXIucHJvdG90eXBlLlByZVNvbHZlID0gZnVuY3Rpb24oY29udGFjdCwgb2xkTWFuaWZvbGQpIHt9O1xuXG4gIGIyQ29udGFjdExpc3RlbmVyLnByb3RvdHlwZS5Qb3N0U29sdmUgPSBmdW5jdGlvbihjb250YWN0LCBpbXB1bHNlKSB7fTtcblxuICBiMkNvbnRhY3RMaXN0ZW5lci5iMl9kZWZhdWx0TGlzdGVuZXIgPSBuZXcgYjJDb250YWN0TGlzdGVuZXIoKTtcblxuICByZXR1cm4gYjJDb250YWN0TGlzdGVuZXI7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udGFjdExpc3RlbmVyLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3RGYWN0b3J5LCBiMkNvbnRhY3RGaWx0ZXIsIGIyQ29udGFjdExpc3RlbmVyLCBiMkNvbnRhY3RQb2ludCwgYjJEeW5hbWljVHJlZUJyb2FkUGhhc2U7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vaW5kZXgnKTtcblxuYjJDb250YWN0RmlsdGVyID0gQm94MkQuRHluYW1pY3MuYjJDb250YWN0RmlsdGVyO1xuXG5iMkNvbnRhY3RMaXN0ZW5lciA9IEJveDJELkR5bmFtaWNzLmIyQ29udGFjdExpc3RlbmVyO1xuXG5iMkNvbnRhY3RGYWN0b3J5ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0RmFjdG9yeTtcblxuYjJDb250YWN0UG9pbnQgPSBCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0UG9pbnQ7XG5cbmIyRHluYW1pY1RyZWVCcm9hZFBoYXNlID0gQm94MkQuQ29sbGlzaW9uLmIyRHluYW1pY1RyZWVCcm9hZFBoYXNlO1xuXG5Cb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RNYW5hZ2VyID0gKGZ1bmN0aW9uKCkge1xuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5tX3dvcmxkID0gbnVsbDtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5tX2NvbnRhY3RDb3VudCA9IG51bGw7XG5cbiAgYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUubV9jb250YWN0RmlsdGVyID0gbnVsbDtcblxuICBiMkNvbnRhY3RNYW5hZ2VyLnByb3RvdHlwZS5tX2NvbnRhY3RMaXN0ZW5lciA9IG51bGw7XG5cbiAgYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUubV9jb250YWN0RmFjdG9yeSA9IG51bGw7XG5cbiAgYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUubV9icm9hZFBoYXNlID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkNvbnRhY3RNYW5hZ2VyKCkge1xuICAgIHRoaXMubV93b3JsZCA9IG51bGw7XG4gICAgdGhpcy5tX2NvbnRhY3RDb3VudCA9IDA7XG4gICAgdGhpcy5tX2NvbnRhY3RGaWx0ZXIgPSBiMkNvbnRhY3RGaWx0ZXIuYjJfZGVmYXVsdEZpbHRlcjtcbiAgICB0aGlzLm1fY29udGFjdExpc3RlbmVyID0gYjJDb250YWN0TGlzdGVuZXIuYjJfZGVmYXVsdExpc3RlbmVyO1xuICAgIHRoaXMubV9jb250YWN0RmFjdG9yeSA9IG5ldyBiMkNvbnRhY3RGYWN0b3J5KHRoaXMubV9hbGxvY2F0b3IpO1xuICAgIHRoaXMubV9icm9hZFBoYXNlID0gbmV3IGIyRHluYW1pY1RyZWVCcm9hZFBoYXNlKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUuQWRkUGFpciA9IGZ1bmN0aW9uKHByb3h5VXNlckRhdGFBLCBwcm94eVVzZXJEYXRhQikge1xuICAgIHZhciBib2R5QSwgYm9keUIsIGMsIGVkZ2UsIGZBLCBmQiwgZml4dHVyZUEsIGZpeHR1cmVCO1xuICAgIGZpeHR1cmVBID0gKHByb3h5VXNlckRhdGFBIGluc3RhbmNlb2YgYjJGaXh0dXJlID8gcHJveHlVc2VyRGF0YUEgOiBudWxsKTtcbiAgICBmaXh0dXJlQiA9IChwcm94eVVzZXJEYXRhQiBpbnN0YW5jZW9mIGIyRml4dHVyZSA/IHByb3h5VXNlckRhdGFCIDogbnVsbCk7XG4gICAgYm9keUEgPSBmaXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgYm9keUIgPSBmaXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgaWYgKGJvZHlBID09PSBib2R5Qikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlZGdlID0gYm9keUIuR2V0Q29udGFjdExpc3QoKTtcbiAgICB3aGlsZSAoZWRnZSkge1xuICAgICAgaWYgKGVkZ2Uub3RoZXIgPT09IGJvZHlBKSB7XG4gICAgICAgIGZBID0gZWRnZS5jb250YWN0LkdldEZpeHR1cmVBKCk7XG4gICAgICAgIGZCID0gZWRnZS5jb250YWN0LkdldEZpeHR1cmVCKCk7XG4gICAgICAgIGlmIChmQSA9PT0gZml4dHVyZUEgJiYgZkIgPT09IGZpeHR1cmVCKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmQSA9PT0gZml4dHVyZUIgJiYgZkIgPT09IGZpeHR1cmVBKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlZGdlID0gZWRnZS5uZXh0O1xuICAgIH1cbiAgICBpZiAoYm9keUIuU2hvdWxkQ29sbGlkZShib2R5QSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLm1fY29udGFjdEZpbHRlci5TaG91bGRDb2xsaWRlKGZpeHR1cmVBLCBmaXh0dXJlQikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGMgPSB0aGlzLm1fY29udGFjdEZhY3RvcnkuQ3JlYXRlKGZpeHR1cmVBLCBmaXh0dXJlQik7XG4gICAgZml4dHVyZUEgPSBjLkdldEZpeHR1cmVBKCk7XG4gICAgZml4dHVyZUIgPSBjLkdldEZpeHR1cmVCKCk7XG4gICAgYm9keUEgPSBmaXh0dXJlQS5tX2JvZHk7XG4gICAgYm9keUIgPSBmaXh0dXJlQi5tX2JvZHk7XG4gICAgYy5tX3ByZXYgPSBudWxsO1xuICAgIGMubV9uZXh0ID0gdGhpcy5tX3dvcmxkLm1fY29udGFjdExpc3Q7XG4gICAgaWYgKHRoaXMubV93b3JsZC5tX2NvbnRhY3RMaXN0ICE9IG51bGwpIHtcbiAgICAgIHRoaXMubV93b3JsZC5tX2NvbnRhY3RMaXN0Lm1fcHJldiA9IGM7XG4gICAgfVxuICAgIHRoaXMubV93b3JsZC5tX2NvbnRhY3RMaXN0ID0gYztcbiAgICBjLm1fbm9kZUEuY29udGFjdCA9IGM7XG4gICAgYy5tX25vZGVBLm90aGVyID0gYm9keUI7XG4gICAgYy5tX25vZGVBLnByZXYgPSBudWxsO1xuICAgIGMubV9ub2RlQS5uZXh0ID0gYm9keUEubV9jb250YWN0TGlzdDtcbiAgICBpZiAoYm9keUEubV9jb250YWN0TGlzdCAhPSBudWxsKSB7XG4gICAgICBib2R5QS5tX2NvbnRhY3RMaXN0LnByZXYgPSBjLm1fbm9kZUE7XG4gICAgfVxuICAgIGJvZHlBLm1fY29udGFjdExpc3QgPSBjLm1fbm9kZUE7XG4gICAgYy5tX25vZGVCLmNvbnRhY3QgPSBjO1xuICAgIGMubV9ub2RlQi5vdGhlciA9IGJvZHlBO1xuICAgIGMubV9ub2RlQi5wcmV2ID0gbnVsbDtcbiAgICBjLm1fbm9kZUIubmV4dCA9IGJvZHlCLm1fY29udGFjdExpc3Q7XG4gICAgaWYgKGJvZHlCLm1fY29udGFjdExpc3QgIT0gbnVsbCkge1xuICAgICAgYm9keUIubV9jb250YWN0TGlzdC5wcmV2ID0gYy5tX25vZGVCO1xuICAgIH1cbiAgICBib2R5Qi5tX2NvbnRhY3RMaXN0ID0gYy5tX25vZGVCO1xuICAgICsrdGhpcy5tX3dvcmxkLm1fY29udGFjdENvdW50O1xuICB9O1xuXG4gIGIyQ29udGFjdE1hbmFnZXIucHJvdG90eXBlLkZpbmROZXdDb250YWN0cyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubV9icm9hZFBoYXNlLlVwZGF0ZVBhaXJzKEJveDJELmdlbmVyYXRlQ2FsbGJhY2sodGhpcywgdGhpcy5BZGRQYWlyKSk7XG4gIH07XG5cbiAgYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUuRGVzdHJveSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgYm9keUEsIGJvZHlCLCBmaXh0dXJlQSwgZml4dHVyZUI7XG4gICAgZml4dHVyZUEgPSBjLkdldEZpeHR1cmVBKCk7XG4gICAgZml4dHVyZUIgPSBjLkdldEZpeHR1cmVCKCk7XG4gICAgYm9keUEgPSBmaXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgYm9keUIgPSBmaXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgaWYgKGMuSXNUb3VjaGluZygpKSB7XG4gICAgICB0aGlzLm1fY29udGFjdExpc3RlbmVyLkVuZENvbnRhY3QoYyk7XG4gICAgfVxuICAgIGlmIChjLm1fcHJldikge1xuICAgICAgYy5tX3ByZXYubV9uZXh0ID0gYy5tX25leHQ7XG4gICAgfVxuICAgIGlmIChjLm1fbmV4dCkge1xuICAgICAgYy5tX25leHQubV9wcmV2ID0gYy5tX3ByZXY7XG4gICAgfVxuICAgIGlmIChjID09PSB0aGlzLm1fd29ybGQubV9jb250YWN0TGlzdCkge1xuICAgICAgdGhpcy5tX3dvcmxkLm1fY29udGFjdExpc3QgPSBjLm1fbmV4dDtcbiAgICB9XG4gICAgaWYgKGMubV9ub2RlQS5wcmV2KSB7XG4gICAgICBjLm1fbm9kZUEucHJldi5uZXh0ID0gYy5tX25vZGVBLm5leHQ7XG4gICAgfVxuICAgIGlmIChjLm1fbm9kZUEubmV4dCkge1xuICAgICAgYy5tX25vZGVBLm5leHQucHJldiA9IGMubV9ub2RlQS5wcmV2O1xuICAgIH1cbiAgICBpZiAoYy5tX25vZGVBID09PSBib2R5QS5tX2NvbnRhY3RMaXN0KSB7XG4gICAgICBib2R5QS5tX2NvbnRhY3RMaXN0ID0gYy5tX25vZGVBLm5leHQ7XG4gICAgfVxuICAgIGlmIChjLm1fbm9kZUIucHJldikge1xuICAgICAgYy5tX25vZGVCLnByZXYubmV4dCA9IGMubV9ub2RlQi5uZXh0O1xuICAgIH1cbiAgICBpZiAoYy5tX25vZGVCLm5leHQpIHtcbiAgICAgIGMubV9ub2RlQi5uZXh0LnByZXYgPSBjLm1fbm9kZUIucHJldjtcbiAgICB9XG4gICAgaWYgKGMubV9ub2RlQiA9PT0gYm9keUIubV9jb250YWN0TGlzdCkge1xuICAgICAgYm9keUIubV9jb250YWN0TGlzdCA9IGMubV9ub2RlQi5uZXh0O1xuICAgIH1cbiAgICB0aGlzLm1fY29udGFjdEZhY3RvcnkuRGVzdHJveShjKTtcbiAgICAtLXRoaXMubV9jb250YWN0Q291bnQ7XG4gIH07XG5cbiAgYjJDb250YWN0TWFuYWdlci5wcm90b3R5cGUuQ29sbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBib2R5QSwgYm9keUIsIGMsIGNOdWtlLCBmaXh0dXJlQSwgZml4dHVyZUIsIG92ZXJsYXAsIHByb3h5QSwgcHJveHlCO1xuICAgIGMgPSB0aGlzLm1fd29ybGQubV9jb250YWN0TGlzdDtcbiAgICB3aGlsZSAoYykge1xuICAgICAgZml4dHVyZUEgPSBjLkdldEZpeHR1cmVBKCk7XG4gICAgICBmaXh0dXJlQiA9IGMuR2V0Rml4dHVyZUIoKTtcbiAgICAgIGJvZHlBID0gZml4dHVyZUEuR2V0Qm9keSgpO1xuICAgICAgYm9keUIgPSBmaXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgICBpZiAoYm9keUEuSXNBd2FrZSgpID09PSBmYWxzZSAmJiBib2R5Qi5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGMgPSBjLkdldE5leHQoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoYy5tX2ZsYWdzICYgYjJDb250YWN0LmVfZmlsdGVyRmxhZykge1xuICAgICAgICBpZiAoYm9keUIuU2hvdWxkQ29sbGlkZShib2R5QSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgY051a2UgPSBjO1xuICAgICAgICAgIGMgPSBjTnVrZS5HZXROZXh0KCk7XG4gICAgICAgICAgdGhpcy5EZXN0cm95KGNOdWtlKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tX2NvbnRhY3RGaWx0ZXIuU2hvdWxkQ29sbGlkZShmaXh0dXJlQSwgZml4dHVyZUIpID09PSBmYWxzZSkge1xuICAgICAgICAgIGNOdWtlID0gYztcbiAgICAgICAgICBjID0gY051a2UuR2V0TmV4dCgpO1xuICAgICAgICAgIHRoaXMuRGVzdHJveShjTnVrZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYy5tX2ZsYWdzICY9IH5iMkNvbnRhY3QuZV9maWx0ZXJGbGFnO1xuICAgICAgfVxuICAgICAgcHJveHlBID0gZml4dHVyZUEubV9wcm94eTtcbiAgICAgIHByb3h5QiA9IGZpeHR1cmVCLm1fcHJveHk7XG4gICAgICBvdmVybGFwID0gdGhpcy5tX2Jyb2FkUGhhc2UuVGVzdE92ZXJsYXAocHJveHlBLCBwcm94eUIpO1xuICAgICAgaWYgKG92ZXJsYXAgPT09IGZhbHNlKSB7XG4gICAgICAgIGNOdWtlID0gYztcbiAgICAgICAgYyA9IGNOdWtlLkdldE5leHQoKTtcbiAgICAgICAgdGhpcy5EZXN0cm95KGNOdWtlKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjLlVwZGF0ZSh0aGlzLm1fY29udGFjdExpc3RlbmVyKTtcbiAgICAgIGMgPSBjLkdldE5leHQoKTtcbiAgICB9XG4gIH07XG5cbiAgYjJDb250YWN0TWFuYWdlci5zX2V2YWxDUCA9IG5ldyBiMkNvbnRhY3RQb2ludCgpO1xuXG4gIHJldHVybiBiMkNvbnRhY3RNYW5hZ2VyO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RNYW5hZ2VyLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLmIyRGVidWdEcmF3ID0gKGZ1bmN0aW9uKCkge1xuICBiMkRlYnVnRHJhdy5lX3NoYXBlQml0ID0gMHgwMDAxO1xuXG4gIGIyRGVidWdEcmF3LmVfam9pbnRCaXQgPSAweDAwMDI7XG5cbiAgYjJEZWJ1Z0RyYXcuZV9hYWJiQml0ID0gMHgwMDA0O1xuXG4gIGIyRGVidWdEcmF3LmVfcGFpckJpdCA9IDB4MDAwODtcblxuICBiMkRlYnVnRHJhdy5lX2NlbnRlck9mTWFzc0JpdCA9IDB4MDAxMDtcblxuICBiMkRlYnVnRHJhdy5lX2NvbnRyb2xsZXJCaXQgPSAweDAwMjA7XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLm1fZHJhd1NjYWxlID0gMS4wO1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5tX2xpbmVUaGlja25lc3MgPSAxLjA7XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLm1fYWxwaGEgPSAxLjA7XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLm1fZmlsbEFscGhhID0gMS4wO1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5tX3hmb3JtU2NhbGUgPSAxLjA7XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLm1fZHJhd0ZsYWdzID0gMDtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUubV9jdHggPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyRGVidWdEcmF3KCkge1xuICAgIHRoaXMubV9zcHJpdGUgPSB7XG4gICAgICBncmFwaGljczoge1xuICAgICAgICBjbGVhcjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3RoaXMubV9jdHguY2xlYXJSZWN0KDAsIDAsIF90aGlzLm1fY3R4LmNhbnZhcy53aWR0aCwgX3RoaXMubV9jdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkodGhpcylcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5fY29sb3IgPSBmdW5jdGlvbihjb2xvciwgYWxwaGEpIHtcbiAgICByZXR1cm4gXCJyZ2JhKFwiICsgKChjb2xvciAmIDB4RkYwMDAwKSA+PiAxNikgKyBcIixcIiArICgoY29sb3IgJiAweEZGMDApID4+IDgpICsgXCIsXCIgKyAoY29sb3IgJiAweEZGKSArIFwiLFwiICsgYWxwaGEgKyBcIilcIjtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuU2V0RmxhZ3MgPSBmdW5jdGlvbihmbGFncykge1xuICAgIGlmIChmbGFncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmbGFncyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9kcmF3RmxhZ3MgPSBmbGFncztcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuR2V0RmxhZ3MgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2RyYXdGbGFncztcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuQXBwZW5kRmxhZ3MgPSBmdW5jdGlvbihmbGFncykge1xuICAgIGlmIChmbGFncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmbGFncyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9kcmF3RmxhZ3MgfD0gZmxhZ3M7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkNsZWFyRmxhZ3MgPSBmdW5jdGlvbihmbGFncykge1xuICAgIGlmIChmbGFncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmbGFncyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9kcmF3RmxhZ3MgJj0gfmZsYWdzO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5TZXRTcHJpdGUgPSBmdW5jdGlvbihzcHJpdGUpIHtcbiAgICB0aGlzLm1fY3R4ID0gc3ByaXRlO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5HZXRTcHJpdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2N0eDtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuU2V0RHJhd1NjYWxlID0gZnVuY3Rpb24oZHJhd1NjYWxlKSB7XG4gICAgaWYgKGRyYXdTY2FsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBkcmF3U2NhbGUgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fZHJhd1NjYWxlID0gZHJhd1NjYWxlO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5HZXREcmF3U2NhbGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2RyYXdTY2FsZTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuU2V0TGluZVRoaWNrbmVzcyA9IGZ1bmN0aW9uKGxpbmVUaGlja25lc3MpIHtcbiAgICBpZiAobGluZVRoaWNrbmVzcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBsaW5lVGhpY2tuZXNzID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2xpbmVUaGlja25lc3MgPSBsaW5lVGhpY2tuZXNzO1xuICAgIHRoaXMubV9jdHguc3Ryb2tlV2lkdGggPSBsaW5lVGhpY2tuZXNzO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5HZXRMaW5lVGhpY2tuZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9saW5lVGhpY2tuZXNzO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5TZXRBbHBoYSA9IGZ1bmN0aW9uKGFscGhhKSB7XG4gICAgaWYgKGFscGhhID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFscGhhID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2FscGhhID0gYWxwaGE7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkdldEFscGhhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9hbHBoYTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuU2V0RmlsbEFscGhhID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICBpZiAoYWxwaGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYWxwaGEgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fZmlsbEFscGhhID0gYWxwaGE7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkdldEZpbGxBbHBoYSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZmlsbEFscGhhO1xuICB9O1xuXG4gIGIyRGVidWdEcmF3LnByb3RvdHlwZS5TZXRYRm9ybVNjYWxlID0gZnVuY3Rpb24oeGZvcm1TY2FsZSkge1xuICAgIGlmICh4Zm9ybVNjYWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHhmb3JtU2NhbGUgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1feGZvcm1TY2FsZSA9IHhmb3JtU2NhbGU7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkdldFhGb3JtU2NhbGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3hmb3JtU2NhbGU7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkRyYXdQb2x5Z29uID0gZnVuY3Rpb24odmVydGljZXMsIHZlcnRleENvdW50LCBjb2xvcikge1xuICAgIHZhciBkcmF3U2NhbGUsIGksIHM7XG4gICAgaWYgKCF2ZXJ0ZXhDb3VudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzID0gdGhpcy5tX2N0eDtcbiAgICBkcmF3U2NhbGUgPSB0aGlzLm1fZHJhd1NjYWxlO1xuICAgIHMuYmVnaW5QYXRoKCk7XG4gICAgcy5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9yKGNvbG9yLmNvbG9yLCB0aGlzLm1fYWxwaGEpO1xuICAgIHMubW92ZVRvKHZlcnRpY2VzWzBdLnggKiBkcmF3U2NhbGUsIHZlcnRpY2VzWzBdLnkgKiBkcmF3U2NhbGUpO1xuICAgIGkgPSAxO1xuICAgIHdoaWxlIChpIDwgdmVydGV4Q291bnQpIHtcbiAgICAgIHMubGluZVRvKHZlcnRpY2VzW2ldLnggKiBkcmF3U2NhbGUsIHZlcnRpY2VzW2ldLnkgKiBkcmF3U2NhbGUpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgICBzLmxpbmVUbyh2ZXJ0aWNlc1swXS54ICogZHJhd1NjYWxlLCB2ZXJ0aWNlc1swXS55ICogZHJhd1NjYWxlKTtcbiAgICBzLmNsb3NlUGF0aCgpO1xuICAgIHMuc3Ryb2tlKCk7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkRyYXdTb2xpZFBvbHlnb24gPSBmdW5jdGlvbih2ZXJ0aWNlcywgdmVydGV4Q291bnQsIGNvbG9yKSB7XG4gICAgdmFyIGRyYXdTY2FsZSwgaSwgcztcbiAgICBpZiAoIXZlcnRleENvdW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHMgPSB0aGlzLm1fY3R4O1xuICAgIGRyYXdTY2FsZSA9IHRoaXMubV9kcmF3U2NhbGU7XG4gICAgcy5iZWdpblBhdGgoKTtcbiAgICBzLnN0cm9rZVN0eWxlID0gdGhpcy5fY29sb3IoY29sb3IuY29sb3IsIHRoaXMubV9hbHBoYSk7XG4gICAgcy5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcihjb2xvci5jb2xvciwgdGhpcy5tX2ZpbGxBbHBoYSk7XG4gICAgcy5tb3ZlVG8odmVydGljZXNbMF0ueCAqIGRyYXdTY2FsZSwgdmVydGljZXNbMF0ueSAqIGRyYXdTY2FsZSk7XG4gICAgaSA9IDE7XG4gICAgd2hpbGUgKGkgPCB2ZXJ0ZXhDb3VudCkge1xuICAgICAgcy5saW5lVG8odmVydGljZXNbaV0ueCAqIGRyYXdTY2FsZSwgdmVydGljZXNbaV0ueSAqIGRyYXdTY2FsZSk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHMubGluZVRvKHZlcnRpY2VzWzBdLnggKiBkcmF3U2NhbGUsIHZlcnRpY2VzWzBdLnkgKiBkcmF3U2NhbGUpO1xuICAgIHMuY2xvc2VQYXRoKCk7XG4gICAgcy5maWxsKCk7XG4gICAgcy5zdHJva2UoKTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuRHJhd0NpcmNsZSA9IGZ1bmN0aW9uKGNlbnRlciwgcmFkaXVzLCBjb2xvcikge1xuICAgIHZhciBkcmF3U2NhbGUsIHM7XG4gICAgaWYgKCFyYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcyA9IHRoaXMubV9jdHg7XG4gICAgZHJhd1NjYWxlID0gdGhpcy5tX2RyYXdTY2FsZTtcbiAgICBzLmJlZ2luUGF0aCgpO1xuICAgIHMuc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcihjb2xvci5jb2xvciwgdGhpcy5tX2FscGhhKTtcbiAgICBzLmFyYyhjZW50ZXIueCAqIGRyYXdTY2FsZSwgY2VudGVyLnkgKiBkcmF3U2NhbGUsIHJhZGl1cyAqIGRyYXdTY2FsZSwgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgIHMuY2xvc2VQYXRoKCk7XG4gICAgcy5zdHJva2UoKTtcbiAgfTtcblxuICBiMkRlYnVnRHJhdy5wcm90b3R5cGUuRHJhd1NvbGlkQ2lyY2xlID0gZnVuY3Rpb24oY2VudGVyLCByYWRpdXMsIGF4aXMsIGNvbG9yKSB7XG4gICAgdmFyIGN4LCBjeSwgZHJhd1NjYWxlLCBzO1xuICAgIGlmICghcmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHMgPSB0aGlzLm1fY3R4O1xuICAgIGRyYXdTY2FsZSA9IHRoaXMubV9kcmF3U2NhbGU7XG4gICAgY3ggPSBjZW50ZXIueCAqIGRyYXdTY2FsZTtcbiAgICBjeSA9IGNlbnRlci55ICogZHJhd1NjYWxlO1xuICAgIHMubW92ZVRvKDAsIDApO1xuICAgIHMuYmVnaW5QYXRoKCk7XG4gICAgcy5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9yKGNvbG9yLmNvbG9yLCB0aGlzLm1fYWxwaGEpO1xuICAgIHMuZmlsbFN0eWxlID0gdGhpcy5fY29sb3IoY29sb3IuY29sb3IsIHRoaXMubV9maWxsQWxwaGEpO1xuICAgIHMuYXJjKGN4LCBjeSwgcmFkaXVzICogZHJhd1NjYWxlLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XG4gICAgcy5tb3ZlVG8oY3gsIGN5KTtcbiAgICBzLmxpbmVUbygoY2VudGVyLnggKyBheGlzLnggKiByYWRpdXMpICogZHJhd1NjYWxlLCAoY2VudGVyLnkgKyBheGlzLnkgKiByYWRpdXMpICogZHJhd1NjYWxlKTtcbiAgICBzLmNsb3NlUGF0aCgpO1xuICAgIHMuZmlsbCgpO1xuICAgIHMuc3Ryb2tlKCk7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkRyYXdTZWdtZW50ID0gZnVuY3Rpb24ocDEsIHAyLCBjb2xvcikge1xuICAgIHZhciBkcmF3U2NhbGUsIHM7XG4gICAgcyA9IHRoaXMubV9jdHg7XG4gICAgZHJhd1NjYWxlID0gdGhpcy5tX2RyYXdTY2FsZTtcbiAgICBzLnN0cm9rZVN0eWxlID0gdGhpcy5fY29sb3IoY29sb3IuY29sb3IsIHRoaXMubV9hbHBoYSk7XG4gICAgcy5iZWdpblBhdGgoKTtcbiAgICBzLm1vdmVUbyhwMS54ICogZHJhd1NjYWxlLCBwMS55ICogZHJhd1NjYWxlKTtcbiAgICBzLmxpbmVUbyhwMi54ICogZHJhd1NjYWxlLCBwMi55ICogZHJhd1NjYWxlKTtcbiAgICBzLmNsb3NlUGF0aCgpO1xuICAgIHMuc3Ryb2tlKCk7XG4gIH07XG5cbiAgYjJEZWJ1Z0RyYXcucHJvdG90eXBlLkRyYXdUcmFuc2Zvcm0gPSBmdW5jdGlvbih4Zikge1xuICAgIHZhciBkcmF3U2NhbGUsIHM7XG4gICAgcyA9IHRoaXMubV9jdHg7XG4gICAgZHJhd1NjYWxlID0gdGhpcy5tX2RyYXdTY2FsZTtcbiAgICBzLmJlZ2luUGF0aCgpO1xuICAgIHMuc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcigweGZmMDAwMCwgdGhpcy5tX2FscGhhKTtcbiAgICBzLm1vdmVUbyh4Zi5wb3NpdGlvbi54ICogZHJhd1NjYWxlLCB4Zi5wb3NpdGlvbi55ICogZHJhd1NjYWxlKTtcbiAgICBzLmxpbmVUbygoeGYucG9zaXRpb24ueCArIHRoaXMubV94Zm9ybVNjYWxlICogeGYuUi5jb2wxLngpICogZHJhd1NjYWxlLCAoeGYucG9zaXRpb24ueSArIHRoaXMubV94Zm9ybVNjYWxlICogeGYuUi5jb2wxLnkpICogZHJhd1NjYWxlKTtcbiAgICBzLnN0cm9rZVN0eWxlID0gdGhpcy5fY29sb3IoMHhmZjAwLCB0aGlzLm1fYWxwaGEpO1xuICAgIHMubW92ZVRvKHhmLnBvc2l0aW9uLnggKiBkcmF3U2NhbGUsIHhmLnBvc2l0aW9uLnkgKiBkcmF3U2NhbGUpO1xuICAgIHMubGluZVRvKCh4Zi5wb3NpdGlvbi54ICsgdGhpcy5tX3hmb3JtU2NhbGUgKiB4Zi5SLmNvbDIueCkgKiBkcmF3U2NhbGUsICh4Zi5wb3NpdGlvbi55ICsgdGhpcy5tX3hmb3JtU2NhbGUgKiB4Zi5SLmNvbDIueSkgKiBkcmF3U2NhbGUpO1xuICAgIHMuY2xvc2VQYXRoKCk7XG4gICAgcy5zdHJva2UoKTtcbiAgfTtcblxuICByZXR1cm4gYjJEZWJ1Z0RyYXc7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRGVidWdEcmF3LmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLmIyRGVzdHJ1Y3Rpb25MaXN0ZW5lciA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJEZXN0cnVjdGlvbkxpc3RlbmVyKCkge31cblxuICBiMkRlc3RydWN0aW9uTGlzdGVuZXIucHJvdG90eXBlLlNheUdvb2RieWVKb2ludCA9IGZ1bmN0aW9uKGpvaW50KSB7fTtcblxuICBiMkRlc3RydWN0aW9uTGlzdGVuZXIucHJvdG90eXBlLlNheUdvb2RieWVGaXh0dXJlID0gZnVuY3Rpb24oZml4dHVyZSkge307XG5cbiAgcmV0dXJuIGIyRGVzdHJ1Y3Rpb25MaXN0ZW5lcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJEZXN0cnVjdGlvbkxpc3RlbmVyLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLmIyRmlsdGVyRGF0YSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJGaWx0ZXJEYXRhKCkge31cblxuICBiMkZpbHRlckRhdGEucHJvdG90eXBlLmNhdGVnb3J5Qml0cyA9IDB4MDAwMTtcblxuICBiMkZpbHRlckRhdGEucHJvdG90eXBlLm1hc2tCaXRzID0gMHhGRkZGO1xuXG4gIGIyRmlsdGVyRGF0YS5wcm90b3R5cGUuZ3JvdXBJbmRleCA9IDA7XG5cbiAgYjJGaWx0ZXJEYXRhLnByb3RvdHlwZS5Db3B5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvcHk7XG4gICAgY29weSA9IG5ldyBiMkZpbHRlckRhdGEoKTtcbiAgICBjb3B5LmNhdGVnb3J5Qml0cyA9IHRoaXMuY2F0ZWdvcnlCaXRzO1xuICAgIGNvcHkubWFza0JpdHMgPSB0aGlzLm1hc2tCaXRzO1xuICAgIGNvcHkuZ3JvdXBJbmRleCA9IHRoaXMuZ3JvdXBJbmRleDtcbiAgICByZXR1cm4gY29weTtcbiAgfTtcblxuICByZXR1cm4gYjJGaWx0ZXJEYXRhO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkZpbHRlckRhdGEuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQUFCQiwgYjJGaWx0ZXJEYXRhLCBiMk1hdGgsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5iMk1hdGggPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdGg7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJGaWx0ZXJEYXRhID0gQm94MkQuRHluYW1pY3MuYjJGaWx0ZXJEYXRhO1xuXG5iMkFBQkIgPSBCb3gyRC5Db2xsaXNpb24uYjJBQUJCO1xuXG5Cb3gyRC5EeW5hbWljcy5iMkZpeHR1cmUgPSAoZnVuY3Rpb24oKSB7XG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV9maWx0ZXIgPSBudWxsO1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV9zaGFwZSA9IG51bGw7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX2lzU2Vuc29yID0gZmFsc2U7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX2JvZHkgPSBudWxsO1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV9uZXh0ID0gbnVsbDtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLm1fdXNlckRhdGEgPSBudWxsO1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV9kZW5zaXR5ID0gMC4wO1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV9mcmljdGlvbiA9IDAuMDtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLm1fcmVzdGl0dXRpb24gPSAwLjA7XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5tX2FhYmIgPSBudWxsO1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUubV9wcm94eSA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJGaXh0dXJlKCkge1xuICAgIHRoaXMubV9maWx0ZXIgPSBuZXcgYjJGaWx0ZXJEYXRhKCk7XG4gICAgdGhpcy5tX3NoYXBlLkdldFR5cGUoKTtcbiAgfVxuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuR2V0U2hhcGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3NoYXBlO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuU2V0U2Vuc29yID0gZnVuY3Rpb24oc2Vuc29yKSB7XG4gICAgdmFyIGNvbnRhY3QsIGVkZ2UsIGZpeHR1cmVBLCBmaXh0dXJlQjtcbiAgICBpZiAodGhpcy5tX2lzU2Vuc29yID09PSBzZW5zb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tX2lzU2Vuc29yID0gc2Vuc29yO1xuICAgIGlmICh0aGlzLm1fYm9keSA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVkZ2UgPSB0aGlzLm1fYm9keS5HZXRDb250YWN0TGlzdCgpO1xuICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICBjb250YWN0ID0gZWRnZS5jb250YWN0O1xuICAgICAgZml4dHVyZUEgPSBjb250YWN0LkdldEZpeHR1cmVBKCk7XG4gICAgICBmaXh0dXJlQiA9IGNvbnRhY3QuR2V0Rml4dHVyZUIoKTtcbiAgICAgIGlmIChmaXh0dXJlQSA9PT0gdGhpcyB8fCBmaXh0dXJlQiA9PT0gdGhpcykge1xuICAgICAgICBjb250YWN0LlNldFNlbnNvcihmaXh0dXJlQS5Jc1NlbnNvcigpIHx8IGZpeHR1cmVCLklzU2Vuc29yKCkpO1xuICAgICAgfVxuICAgICAgZWRnZSA9IGVkZ2UubmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5Jc1NlbnNvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1faXNTZW5zb3I7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5TZXRGaWx0ZXJEYXRhID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgdmFyIGNvbnRhY3QsIGVkZ2UsIGZpeHR1cmVBLCBmaXh0dXJlQjtcbiAgICB0aGlzLm1fZmlsdGVyID0gZmlsdGVyLkNvcHkoKTtcbiAgICBpZiAodGhpcy5tX2JvZHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWRnZSA9IHRoaXMubV9ib2R5LkdldENvbnRhY3RMaXN0KCk7XG4gICAgd2hpbGUgKGVkZ2UpIHtcbiAgICAgIGNvbnRhY3QgPSBlZGdlLmNvbnRhY3Q7XG4gICAgICBmaXh0dXJlQSA9IGNvbnRhY3QuR2V0Rml4dHVyZUEoKTtcbiAgICAgIGZpeHR1cmVCID0gY29udGFjdC5HZXRGaXh0dXJlQigpO1xuICAgICAgaWYgKGZpeHR1cmVBID09PSB0aGlzIHx8IGZpeHR1cmVCID09PSB0aGlzKSB7XG4gICAgICAgIGNvbnRhY3QuRmxhZ0ZvckZpbHRlcmluZygpO1xuICAgICAgfVxuICAgICAgZWRnZSA9IGVkZ2UubmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5HZXRGaWx0ZXJEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maWx0ZXIuQ29weSgpO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuR2V0Qm9keSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldE5leHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX25leHQ7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5HZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdXNlckRhdGE7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5TZXRVc2VyRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5tX3VzZXJEYXRhID0gZGF0YTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLlRlc3RQb2ludCA9IGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gdGhpcy5tX3NoYXBlLlRlc3RQb2ludCh0aGlzLm1fYm9keS5HZXRUcmFuc2Zvcm0oKSwgcCk7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5SYXlDYXN0ID0gZnVuY3Rpb24ob3V0cHV0LCBpbnB1dCkge1xuICAgIHJldHVybiB0aGlzLm1fc2hhcGUuUmF5Q2FzdChvdXRwdXQsIGlucHV0LCB0aGlzLm1fYm9keS5HZXRUcmFuc2Zvcm0oKSk7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5HZXRNYXNzRGF0YSA9IGZ1bmN0aW9uKG1hc3NEYXRhKSB7XG4gICAgaWYgKG1hc3NEYXRhID09PSB2b2lkIDApIHtcbiAgICAgIG1hc3NEYXRhID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG1hc3NEYXRhID09IG51bGwpIHtcbiAgICAgIG1hc3NEYXRhID0gbmV3IGIyTWFzc0RhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5tX3NoYXBlLkNvbXB1dGVNYXNzKG1hc3NEYXRhLCB0aGlzLm1fZGVuc2l0eSk7XG4gICAgcmV0dXJuIG1hc3NEYXRhO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuU2V0RGVuc2l0eSA9IGZ1bmN0aW9uKGRlbnNpdHkpIHtcbiAgICBpZiAoZGVuc2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBkZW5zaXR5ID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2RlbnNpdHkgPSBkZW5zaXR5O1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuR2V0RGVuc2l0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZGVuc2l0eTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldEZyaWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9mcmljdGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLlNldEZyaWN0aW9uID0gZnVuY3Rpb24oZnJpY3Rpb24pIHtcbiAgICBpZiAoZnJpY3Rpb24gPT09IHZvaWQgMCkge1xuICAgICAgZnJpY3Rpb24gPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fZnJpY3Rpb24gPSBmcmljdGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldFJlc3RpdHV0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9yZXN0aXR1dGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLlNldFJlc3RpdHV0aW9uID0gZnVuY3Rpb24ocmVzdGl0dXRpb24pIHtcbiAgICBpZiAocmVzdGl0dXRpb24gPT09IHZvaWQgMCkge1xuICAgICAgcmVzdGl0dXRpb24gPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSByZXN0aXR1dGlvbjtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkdldEFBQkIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2FhYmI7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5DcmVhdGUgPSBmdW5jdGlvbihib2R5LCB4ZiwgZGVmKSB7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gZGVmLnVzZXJEYXRhO1xuICAgIHRoaXMubV9mcmljdGlvbiA9IGRlZi5mcmljdGlvbjtcbiAgICB0aGlzLm1fcmVzdGl0dXRpb24gPSBkZWYucmVzdGl0dXRpb247XG4gICAgdGhpcy5tX2JvZHkgPSBib2R5O1xuICAgIHRoaXMubV9uZXh0ID0gbnVsbDtcbiAgICB0aGlzLm1fZmlsdGVyID0gZGVmLmZpbHRlci5Db3B5KCk7XG4gICAgdGhpcy5tX2lzU2Vuc29yID0gZGVmLmlzU2Vuc29yO1xuICAgIHRoaXMubV9zaGFwZSA9IGRlZi5zaGFwZS5Db3B5KCk7XG4gICAgdGhpcy5tX2RlbnNpdHkgPSBkZWYuZGVuc2l0eTtcbiAgfTtcblxuICBiMkZpeHR1cmUucHJvdG90eXBlLkRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fc2hhcGUgPSBudWxsO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuQ3JlYXRlUHJveHkgPSBmdW5jdGlvbihicm9hZFBoYXNlLCB4Zikge1xuICAgIHRoaXMubV9zaGFwZS5Db21wdXRlQUFCQih0aGlzLm1fYWFiYiwgeGYpO1xuICAgIHRoaXMubV9wcm94eSA9IGJyb2FkUGhhc2UuQ3JlYXRlUHJveHkodGhpcy5tX2FhYmIsIHRoaXMpO1xuICB9O1xuXG4gIGIyRml4dHVyZS5wcm90b3R5cGUuRGVzdHJveVByb3h5ID0gZnVuY3Rpb24oYnJvYWRQaGFzZSkge1xuICAgIGlmICh0aGlzLm1fcHJveHkgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBicm9hZFBoYXNlLkRlc3Ryb3lQcm94eSh0aGlzLm1fcHJveHkpO1xuICAgIHRoaXMubV9wcm94eSA9IG51bGw7XG4gIH07XG5cbiAgYjJGaXh0dXJlLnByb3RvdHlwZS5TeW5jaHJvbml6ZSA9IGZ1bmN0aW9uKGJyb2FkUGhhc2UsIHRyYW5zZm9ybTEsIHRyYW5zZm9ybTIpIHtcbiAgICB2YXIgYWFiYjEsIGFhYmIyLCBkaXNwbGFjZW1lbnQ7XG4gICAgaWYgKCF0aGlzLm1fcHJveHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWFiYjEgPSBuZXcgYjJBQUJCKCk7XG4gICAgYWFiYjIgPSBuZXcgYjJBQUJCKCk7XG4gICAgdGhpcy5tX3NoYXBlLkNvbXB1dGVBQUJCKGFhYmIxLCB0cmFuc2Zvcm0xKTtcbiAgICB0aGlzLm1fc2hhcGUuQ29tcHV0ZUFBQkIoYWFiYjIsIHRyYW5zZm9ybTIpO1xuICAgIHRoaXMubV9hYWJiLkNvbWJpbmUoYWFiYjEsIGFhYmIyKTtcbiAgICBkaXNwbGFjZW1lbnQgPSBiMk1hdGguU3VidHJhY3RWVih0cmFuc2Zvcm0yLnBvc2l0aW9uLCB0cmFuc2Zvcm0xLnBvc2l0aW9uKTtcbiAgICBicm9hZFBoYXNlLk1vdmVQcm94eSh0aGlzLm1fcHJveHksIHRoaXMubV9hYWJiLCBkaXNwbGFjZW1lbnQpO1xuICB9O1xuXG4gIHJldHVybiBiMkZpeHR1cmU7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRml4dHVyZS5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJGaWx0ZXJEYXRhO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cbmIyRmlsdGVyRGF0YSA9IEJveDJELkR5bmFtaWNzLmIyRmlsdGVyRGF0YTtcblxuQm94MkQuRHluYW1pY3MuYjJGaXh0dXJlRGVmID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkZpeHR1cmVEZWYoKSB7fVxuXG4gIGIyRml4dHVyZURlZi5wcm90b3R5cGUuc2hhcGUgPSBudWxsO1xuXG4gIGIyRml4dHVyZURlZi5wcm90b3R5cGUudXNlckRhdGEgPSBudWxsO1xuXG4gIGIyRml4dHVyZURlZi5wcm90b3R5cGUuZnJpY3Rpb24gPSAwLjI7XG5cbiAgYjJGaXh0dXJlRGVmLnByb3RvdHlwZS5yZXN0aXR1dGlvbiA9IDAuMDtcblxuICBiMkZpeHR1cmVEZWYucHJvdG90eXBlLmRlbnNpdHkgPSAwLjA7XG5cbiAgYjJGaXh0dXJlRGVmLnByb3RvdHlwZS5pc1NlbnNvciA9IGZhbHNlO1xuXG4gIGIyRml4dHVyZURlZi5wcm90b3R5cGUuZmlsdGVyID0gbnVsbDtcblxuICBiMkZpeHR1cmVEZWYucHJvdG90eXBlLmIyRml4dHVyZURlZiA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZmlsdGVyID0gbmV3IGIyRmlsdGVyRGF0YSgpO1xuICAgIHRoaXMuZmlsdGVyLmNhdGVnb3J5Qml0cyA9IDB4MDAwMTtcbiAgICB0aGlzLmZpbHRlci5tYXNrQml0cyA9IDB4RkZGRjtcbiAgICB0aGlzLmZpbHRlci5ncm91cEluZGV4ID0gMDtcbiAgfTtcblxuICByZXR1cm4gYjJGaXh0dXJlRGVmO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkZpeHR1cmVEZWYuanMubWFwXG4iLCJ2YXIgQm94MkQsIFZlY3RvciwgYjJDb250YWN0SW1wdWxzZTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyQ29udGFjdEltcHVsc2UgPSBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RJbXB1bHNlO1xuXG5Cb3gyRC5EeW5hbWljcy5iMklzbGFuZCA9IChmdW5jdGlvbigpIHtcbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fYm9kaWVzID0gbnVsbDtcblxuICBiMklzbGFuZC5wcm90b3R5cGUubV9jb250YWN0cyA9IG51bGw7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fam9pbnRzID0gbnVsbDtcblxuICBiMklzbGFuZC5wcm90b3R5cGUubV9ib2R5Q2FwYWNpdHkgPSAwO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2NvbnRhY3RDYXBhY2l0eSA9IDA7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fam9pbnRDYXBhY2l0eSA9IDA7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fYm9keUNvdW50ID0gMDtcblxuICBiMklzbGFuZC5wcm90b3R5cGUubV9jb250YWN0Q291bnQgPSAwO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2pvaW50Q291bnQgPSAwO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2FsbG9jYXRvciA9IG51bGw7XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLm1fbGlzdGVuZXIgPSBudWxsO1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5tX2NvbnRhY3RTb2x2ZXIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIySXNsYW5kKCkge1xuICAgIHRoaXMubV9ib2RpZXMgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5tX2NvbnRhY3RzID0gbmV3IFZlY3RvcigpO1xuICAgIHRoaXMubV9qb2ludHMgPSBuZXcgVmVjdG9yKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihib2R5Q2FwYWNpdHksIGNvbnRhY3RDYXBhY2l0eSwgam9pbnRDYXBhY2l0eSwgYWxsb2NhdG9yLCBsaXN0ZW5lciwgY29udGFjdFNvbHZlcikge1xuICAgIHZhciBpO1xuICAgIGlmIChib2R5Q2FwYWNpdHkgPT09IHZvaWQgMCkge1xuICAgICAgYm9keUNhcGFjaXR5ID0gMDtcbiAgICB9XG4gICAgaWYgKGNvbnRhY3RDYXBhY2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBjb250YWN0Q2FwYWNpdHkgPSAwO1xuICAgIH1cbiAgICBpZiAoam9pbnRDYXBhY2l0eSA9PT0gdm9pZCAwKSB7XG4gICAgICBqb2ludENhcGFjaXR5ID0gMDtcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgdGhpcy5tX2JvZHlDYXBhY2l0eSA9IGJvZHlDYXBhY2l0eTtcbiAgICB0aGlzLm1fY29udGFjdENhcGFjaXR5ID0gY29udGFjdENhcGFjaXR5O1xuICAgIHRoaXMubV9qb2ludENhcGFjaXR5ID0gam9pbnRDYXBhY2l0eTtcbiAgICB0aGlzLm1fYm9keUNvdW50ID0gMDtcbiAgICB0aGlzLm1fY29udGFjdENvdW50ID0gMDtcbiAgICB0aGlzLm1fam9pbnRDb3VudCA9IDA7XG4gICAgdGhpcy5tX2FsbG9jYXRvciA9IGFsbG9jYXRvcjtcbiAgICB0aGlzLm1fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB0aGlzLm1fY29udGFjdFNvbHZlciA9IGNvbnRhY3RTb2x2ZXI7XG4gICAgaSA9IHRoaXMubV9ib2RpZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpIDwgYm9keUNhcGFjaXR5KSB7XG4gICAgICB0aGlzLm1fYm9kaWVzW2ldID0gbnVsbDtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgaSA9IHRoaXMubV9jb250YWN0cy5sZW5ndGg7XG4gICAgd2hpbGUgKGkgPCBjb250YWN0Q2FwYWNpdHkpIHtcbiAgICAgIHRoaXMubV9jb250YWN0c1tpXSA9IG51bGw7XG4gICAgICBpKys7XG4gICAgfVxuICAgIGkgPSB0aGlzLm1fam9pbnRzLmxlbmd0aDtcbiAgICB3aGlsZSAoaSA8IGpvaW50Q2FwYWNpdHkpIHtcbiAgICAgIHRoaXMubV9qb2ludHNbaV0gPSBudWxsO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfTtcblxuICBiMklzbGFuZC5wcm90b3R5cGUuQ2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fYm9keUNvdW50ID0gMDtcbiAgICB0aGlzLm1fY29udGFjdENvdW50ID0gMDtcbiAgICB0aGlzLm1fam9pbnRDb3VudCA9IDA7XG4gIH07XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLlNvbHZlID0gZnVuY3Rpb24oc3RlcCwgZ3Jhdml0eSwgYWxsb3dTbGVlcCkge1xuICAgIHZhciBhbmdUb2xTcXIsIGIsIGNvbnRhY3RTb2x2ZXIsIGNvbnRhY3RzT2theSwgaSwgaiwgam9pbnQsIGpvaW50T2theSwgam9pbnRzT2theSwgbGluVG9sU3FyLCBtaW5TbGVlcFRpbWUsIHJvdGF0aW9uLCB0cmFuc2xhdGlvblgsIHRyYW5zbGF0aW9uWTtcbiAgICBpID0gMDtcbiAgICBqID0gMDtcbiAgICBiID0gdm9pZCAwO1xuICAgIGpvaW50ID0gdm9pZCAwO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2JvZHlDb3VudCkge1xuICAgICAgYiA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBpZiAoYi5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGIubV9saW5lYXJWZWxvY2l0eS54ICs9IHN0ZXAuZHQgKiAoZ3Jhdml0eS54ICsgYi5tX2ludk1hc3MgKiBiLm1fZm9yY2UueCk7XG4gICAgICBiLm1fbGluZWFyVmVsb2NpdHkueSArPSBzdGVwLmR0ICogKGdyYXZpdHkueSArIGIubV9pbnZNYXNzICogYi5tX2ZvcmNlLnkpO1xuICAgICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBzdGVwLmR0ICogYi5tX2ludkkgKiBiLm1fdG9ycXVlO1xuICAgICAgYi5tX2xpbmVhclZlbG9jaXR5Lk11bHRpcGx5KGIyTWF0aC5DbGFtcCgxLjAgLSBzdGVwLmR0ICogYi5tX2xpbmVhckRhbXBpbmcsIDAuMCwgMS4wKSk7XG4gICAgICBiLm1fYW5ndWxhclZlbG9jaXR5ICo9IGIyTWF0aC5DbGFtcCgxLjAgLSBzdGVwLmR0ICogYi5tX2FuZ3VsYXJEYW1waW5nLCAwLjAsIDEuMCk7XG4gICAgICArK2k7XG4gICAgfVxuICAgIHRoaXMubV9jb250YWN0U29sdmVyLkluaXRpYWxpemUoc3RlcCwgdGhpcy5tX2NvbnRhY3RzLCB0aGlzLm1fY29udGFjdENvdW50LCB0aGlzLm1fYWxsb2NhdG9yKTtcbiAgICBjb250YWN0U29sdmVyID0gdGhpcy5tX2NvbnRhY3RTb2x2ZXI7XG4gICAgY29udGFjdFNvbHZlci5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyhzdGVwKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICBqb2ludCA9IHRoaXMubV9qb2ludHNbaV07XG4gICAgICBqb2ludC5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyhzdGVwKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBzdGVwLnZlbG9jaXR5SXRlcmF0aW9ucykge1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICAgIGpvaW50ID0gdGhpcy5tX2pvaW50c1tqXTtcbiAgICAgICAgam9pbnQuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKHN0ZXApO1xuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgICBjb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cygpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICBqb2ludCA9IHRoaXMubV9qb2ludHNbaV07XG4gICAgICBqb2ludC5GaW5hbGl6ZVZlbG9jaXR5Q29uc3RyYWludHMoKTtcbiAgICAgICsraTtcbiAgICB9XG4gICAgY29udGFjdFNvbHZlci5GaW5hbGl6ZVZlbG9jaXR5Q29uc3RyYWludHMoKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9ib2R5Q291bnQpIHtcbiAgICAgIGIgPSB0aGlzLm1fYm9kaWVzW2ldO1xuICAgICAgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRyYW5zbGF0aW9uWCA9IHN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueDtcbiAgICAgIHRyYW5zbGF0aW9uWSA9IHN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueTtcbiAgICAgIGlmICgodHJhbnNsYXRpb25YICogdHJhbnNsYXRpb25YICsgdHJhbnNsYXRpb25ZICogdHJhbnNsYXRpb25ZKSA+IGIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb25TcXVhcmVkKSB7XG4gICAgICAgIGIubV9saW5lYXJWZWxvY2l0eS5Ob3JtYWxpemUoKTtcbiAgICAgICAgYi5tX2xpbmVhclZlbG9jaXR5LnggKj0gYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvbiAqIHN0ZXAuaW52X2R0O1xuICAgICAgICBiLm1fbGluZWFyVmVsb2NpdHkueSAqPSBiMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uICogc3RlcC5pbnZfZHQ7XG4gICAgICB9XG4gICAgICByb3RhdGlvbiA9IHN0ZXAuZHQgKiBiLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgaWYgKHJvdGF0aW9uICogcm90YXRpb24gPiBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uU3F1YXJlZCkge1xuICAgICAgICBpZiAoYi5tX2FuZ3VsYXJWZWxvY2l0eSA8IDAuMCkge1xuICAgICAgICAgIGIubV9hbmd1bGFyVmVsb2NpdHkgPSAtYjJTZXR0aW5ncy5iMl9tYXhSb3RhdGlvbiAqIHN0ZXAuaW52X2R0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGIubV9hbmd1bGFyVmVsb2NpdHkgPSBiMlNldHRpbmdzLmIyX21heFJvdGF0aW9uICogc3RlcC5pbnZfZHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGIubV9zd2VlcC5jMC5TZXRWKGIubV9zd2VlcC5jKTtcbiAgICAgIGIubV9zd2VlcC5hMCA9IGIubV9zd2VlcC5hO1xuICAgICAgYi5tX3N3ZWVwLmMueCArPSBzdGVwLmR0ICogYi5tX2xpbmVhclZlbG9jaXR5Lng7XG4gICAgICBiLm1fc3dlZXAuYy55ICs9IHN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueTtcbiAgICAgIGIubV9zd2VlcC5hICs9IHN0ZXAuZHQgKiBiLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgYi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHN0ZXAucG9zaXRpb25JdGVyYXRpb25zKSB7XG4gICAgICBjb250YWN0c09rYXkgPSBjb250YWN0U29sdmVyLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhiMlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUpO1xuICAgICAgam9pbnRzT2theSA9IHRydWU7XG4gICAgICBqID0gMDtcbiAgICAgIHdoaWxlIChqIDwgdGhpcy5tX2pvaW50Q291bnQpIHtcbiAgICAgICAgam9pbnQgPSB0aGlzLm1fam9pbnRzW2pdO1xuICAgICAgICBqb2ludE9rYXkgPSBqb2ludC5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMoYjJTZXR0aW5ncy5iMl9jb250YWN0QmF1bWdhcnRlKTtcbiAgICAgICAgam9pbnRzT2theSA9IGpvaW50c09rYXkgJiYgam9pbnRPa2F5O1xuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgICBpZiAoY29udGFjdHNPa2F5ICYmIGpvaW50c09rYXkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIHRoaXMuUmVwb3J0KGNvbnRhY3RTb2x2ZXIubV9jb25zdHJhaW50cyk7XG4gICAgaWYgKGFsbG93U2xlZXApIHtcbiAgICAgIG1pblNsZWVwVGltZSA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgICBsaW5Ub2xTcXIgPSBiMlNldHRpbmdzLmIyX2xpbmVhclNsZWVwVG9sZXJhbmNlICogYjJTZXR0aW5ncy5iMl9saW5lYXJTbGVlcFRvbGVyYW5jZTtcbiAgICAgIGFuZ1RvbFNxciA9IGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsZWVwVG9sZXJhbmNlICogYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xlZXBUb2xlcmFuY2U7XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgdGhpcy5tX2JvZHlDb3VudCkge1xuICAgICAgICBiID0gdGhpcy5tX2JvZGllc1tpXTtcbiAgICAgICAgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoYi5tX2ZsYWdzICYgYjJCb2R5LmVfYWxsb3dTbGVlcEZsYWcpID09PSAwKSB7XG4gICAgICAgICAgYi5tX3NsZWVwVGltZSA9IDAuMDtcbiAgICAgICAgICBtaW5TbGVlcFRpbWUgPSAwLjA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChiLm1fZmxhZ3MgJiBiMkJvZHkuZV9hbGxvd1NsZWVwRmxhZykgPT09IDAgfHwgYi5tX2FuZ3VsYXJWZWxvY2l0eSAqIGIubV9hbmd1bGFyVmVsb2NpdHkgPiBhbmdUb2xTcXIgfHwgYjJNYXRoLkRvdChiLm1fbGluZWFyVmVsb2NpdHksIGIubV9saW5lYXJWZWxvY2l0eSkgPiBsaW5Ub2xTcXIpIHtcbiAgICAgICAgICBiLm1fc2xlZXBUaW1lID0gMC4wO1xuICAgICAgICAgIG1pblNsZWVwVGltZSA9IDAuMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBiLm1fc2xlZXBUaW1lICs9IHN0ZXAuZHQ7XG4gICAgICAgICAgbWluU2xlZXBUaW1lID0gYjJNYXRoLk1pbihtaW5TbGVlcFRpbWUsIGIubV9zbGVlcFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgICsraTtcbiAgICAgIH1cbiAgICAgIGlmIChtaW5TbGVlcFRpbWUgPj0gYjJTZXR0aW5ncy5iMl90aW1lVG9TbGVlcCkge1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLm1fYm9keUNvdW50KSB7XG4gICAgICAgICAgYiA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICAgICAgYi5TZXRBd2FrZShmYWxzZSk7XG4gICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5Tb2x2ZVRPSSA9IGZ1bmN0aW9uKHN1YlN0ZXApIHtcbiAgICB2YXIgYiwgY29udGFjdFNvbHZlciwgY29udGFjdHNPa2F5LCBpLCBqLCBqb2ludE9rYXksIGpvaW50c09rYXksIGtfdG9pQmF1bWdhcnRlLCByb3RhdGlvbiwgdHJhbnNsYXRpb25YLCB0cmFuc2xhdGlvblk7XG4gICAgaSA9IDA7XG4gICAgaiA9IDA7XG4gICAgdGhpcy5tX2NvbnRhY3RTb2x2ZXIuSW5pdGlhbGl6ZShzdWJTdGVwLCB0aGlzLm1fY29udGFjdHMsIHRoaXMubV9jb250YWN0Q291bnQsIHRoaXMubV9hbGxvY2F0b3IpO1xuICAgIGNvbnRhY3RTb2x2ZXIgPSB0aGlzLm1fY29udGFjdFNvbHZlcjtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICB0aGlzLm1fam9pbnRzW2ldLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzKHN1YlN0ZXApO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHN1YlN0ZXAudmVsb2NpdHlJdGVyYXRpb25zKSB7XG4gICAgICBjb250YWN0U29sdmVyLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cygpO1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IHRoaXMubV9qb2ludENvdW50KSB7XG4gICAgICAgIHRoaXMubV9qb2ludHNbal0uU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzKHN1YlN0ZXApO1xuICAgICAgICArK2o7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2JvZHlDb3VudCkge1xuICAgICAgYiA9IHRoaXMubV9ib2RpZXNbaV07XG4gICAgICBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdHJhbnNsYXRpb25YID0gc3ViU3RlcC5kdCAqIGIubV9saW5lYXJWZWxvY2l0eS54O1xuICAgICAgdHJhbnNsYXRpb25ZID0gc3ViU3RlcC5kdCAqIGIubV9saW5lYXJWZWxvY2l0eS55O1xuICAgICAgaWYgKCh0cmFuc2xhdGlvblggKiB0cmFuc2xhdGlvblggKyB0cmFuc2xhdGlvblkgKiB0cmFuc2xhdGlvblkpID4gYjJTZXR0aW5ncy5iMl9tYXhUcmFuc2xhdGlvblNxdWFyZWQpIHtcbiAgICAgICAgYi5tX2xpbmVhclZlbG9jaXR5Lk5vcm1hbGl6ZSgpO1xuICAgICAgICBiLm1fbGluZWFyVmVsb2NpdHkueCAqPSBiMlNldHRpbmdzLmIyX21heFRyYW5zbGF0aW9uICogc3ViU3RlcC5pbnZfZHQ7XG4gICAgICAgIGIubV9saW5lYXJWZWxvY2l0eS55ICo9IGIyU2V0dGluZ3MuYjJfbWF4VHJhbnNsYXRpb24gKiBzdWJTdGVwLmludl9kdDtcbiAgICAgIH1cbiAgICAgIHJvdGF0aW9uID0gc3ViU3RlcC5kdCAqIGIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICBpZiAocm90YXRpb24gKiByb3RhdGlvbiA+IGIyU2V0dGluZ3MuYjJfbWF4Um90YXRpb25TcXVhcmVkKSB7XG4gICAgICAgIGlmIChiLm1fYW5ndWxhclZlbG9jaXR5IDwgMC4wKSB7XG4gICAgICAgICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSA9IC1iMlNldHRpbmdzLmIyX21heFJvdGF0aW9uICogc3ViU3RlcC5pbnZfZHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSA9IGIyU2V0dGluZ3MuYjJfbWF4Um90YXRpb24gKiBzdWJTdGVwLmludl9kdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYi5tX3N3ZWVwLmMwLlNldFYoYi5tX3N3ZWVwLmMpO1xuICAgICAgYi5tX3N3ZWVwLmEwID0gYi5tX3N3ZWVwLmE7XG4gICAgICBiLm1fc3dlZXAuYy54ICs9IHN1YlN0ZXAuZHQgKiBiLm1fbGluZWFyVmVsb2NpdHkueDtcbiAgICAgIGIubV9zd2VlcC5jLnkgKz0gc3ViU3RlcC5kdCAqIGIubV9saW5lYXJWZWxvY2l0eS55O1xuICAgICAgYi5tX3N3ZWVwLmEgKz0gc3ViU3RlcC5kdCAqIGIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICBiLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICArK2k7XG4gICAgfVxuICAgIGtfdG9pQmF1bWdhcnRlID0gMC43NTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHN1YlN0ZXAucG9zaXRpb25JdGVyYXRpb25zKSB7XG4gICAgICBjb250YWN0c09rYXkgPSBjb250YWN0U29sdmVyLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhrX3RvaUJhdW1nYXJ0ZSk7XG4gICAgICBqb2ludHNPa2F5ID0gdHJ1ZTtcbiAgICAgIGogPSAwO1xuICAgICAgd2hpbGUgKGogPCB0aGlzLm1fam9pbnRDb3VudCkge1xuICAgICAgICBqb2ludE9rYXkgPSB0aGlzLm1fam9pbnRzW2pdLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyhiMlNldHRpbmdzLmIyX2NvbnRhY3RCYXVtZ2FydGUpO1xuICAgICAgICBqb2ludHNPa2F5ID0gam9pbnRzT2theSAmJiBqb2ludE9rYXk7XG4gICAgICAgICsrajtcbiAgICAgIH1cbiAgICAgIGlmIChjb250YWN0c09rYXkgJiYgam9pbnRzT2theSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gICAgdGhpcy5SZXBvcnQoY29udGFjdFNvbHZlci5tX2NvbnN0cmFpbnRzKTtcbiAgfTtcblxuICBiMklzbGFuZC5wcm90b3R5cGUuUmVwb3J0ID0gZnVuY3Rpb24oY29uc3RyYWludHMpIHtcbiAgICB2YXIgYywgY2MsIGksIGo7XG4gICAgaWYgKHRoaXMubV9saXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2NvbnRhY3RDb3VudCkge1xuICAgICAgYyA9IHRoaXMubV9jb250YWN0c1tpXTtcbiAgICAgIGNjID0gY29uc3RyYWludHNbaV07XG4gICAgICBqID0gMDtcbiAgICAgIHdoaWxlIChqIDwgY2MucG9pbnRDb3VudCkge1xuICAgICAgICBiMklzbGFuZC5zX2ltcHVsc2Uubm9ybWFsSW1wdWxzZXNbal0gPSBjYy5wb2ludHNbal0ubm9ybWFsSW1wdWxzZTtcbiAgICAgICAgYjJJc2xhbmQuc19pbXB1bHNlLnRhbmdlbnRJbXB1bHNlc1tqXSA9IGNjLnBvaW50c1tqXS50YW5nZW50SW1wdWxzZTtcbiAgICAgICAgKytqO1xuICAgICAgfVxuICAgICAgdGhpcy5tX2xpc3RlbmVyLlBvc3RTb2x2ZShjLCBiMklzbGFuZC5zX2ltcHVsc2UpO1xuICAgICAgKytpO1xuICAgIH1cbiAgfTtcblxuICBiMklzbGFuZC5wcm90b3R5cGUuQWRkQm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICBib2R5Lm1faXNsYW5kSW5kZXggPSB0aGlzLm1fYm9keUNvdW50O1xuICAgIHRoaXMubV9ib2RpZXNbdGhpcy5tX2JvZHlDb3VudCsrXSA9IGJvZHk7XG4gIH07XG5cbiAgYjJJc2xhbmQucHJvdG90eXBlLkFkZENvbnRhY3QgPSBmdW5jdGlvbihjb250YWN0KSB7XG4gICAgdGhpcy5tX2NvbnRhY3RzW3RoaXMubV9jb250YWN0Q291bnQrK10gPSBjb250YWN0O1xuICB9O1xuXG4gIGIySXNsYW5kLnByb3RvdHlwZS5BZGRKb2ludCA9IGZ1bmN0aW9uKGpvaW50KSB7XG4gICAgdGhpcy5tX2pvaW50c1t0aGlzLm1fam9pbnRDb3VudCsrXSA9IGpvaW50O1xuICB9O1xuXG4gIGIySXNsYW5kLnNfaW1wdWxzZSA9IG5ldyBiMkNvbnRhY3RJbXB1bHNlKCk7XG5cbiAgcmV0dXJuIGIySXNsYW5kO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMklzbGFuZC5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi9pbmRleCcpO1xuXG5Cb3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMlRpbWVTdGVwKCkge31cblxuICBiMlRpbWVTdGVwLnByb3RvdHlwZS5kdCA9IDA7XG5cbiAgYjJUaW1lU3RlcC5wcm90b3R5cGUuaW52X2R0ID0gMDtcblxuICBiMlRpbWVTdGVwLnByb3RvdHlwZS5wb3NpdGlvbkl0ZXJhdGlvbnMgPSAwO1xuXG4gIGIyVGltZVN0ZXAucHJvdG90eXBlLnZlbG9jaXR5SXRlcmF0aW9ucyA9IDA7XG5cbiAgYjJUaW1lU3RlcC5wcm90b3R5cGUud2FybVN0YXJ0aW5nID0gMDtcblxuICBiMlRpbWVTdGVwLnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdGhpcy5kdCA9IHN0ZXAuZHQ7XG4gICAgdGhpcy5pbnZfZHQgPSBzdGVwLmludl9kdDtcbiAgICB0aGlzLnBvc2l0aW9uSXRlcmF0aW9ucyA9IHN0ZXAucG9zaXRpb25JdGVyYXRpb25zO1xuICAgIHRoaXMudmVsb2NpdHlJdGVyYXRpb25zID0gc3RlcC52ZWxvY2l0eUl0ZXJhdGlvbnM7XG4gICAgdGhpcy53YXJtU3RhcnRpbmcgPSBzdGVwLndhcm1TdGFydGluZztcbiAgfTtcblxuICByZXR1cm4gYjJUaW1lU3RlcDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJUaW1lU3RlcC5qcy5tYXBcbiIsInZhciBCb3gyRCwgVmVjdG9yLCBiMkFBQkIsIGIyQm9keSwgYjJCb2R5RGVmLCBiMkNvbG9yLCBiMkNvbnRhY3QsIGIyQ29udGFjdE1hbmFnZXIsIGIyQ29udGFjdFNvbHZlciwgYjJEZWJ1Z0RyYXcsIGIySXNsYW5kLCBiMkpvaW50LCBiMlJheUNhc3RJbnB1dCwgYjJSYXlDYXN0T3V0cHV0LCBiMlN3ZWVwLCBiMlRpbWVTdGVwLCBiMlRyYW5zZm9ybSwgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uL2luZGV4Jyk7XG5cblZlY3RvciA9IEJveDJELlZlY3RvcjtcblxuYjJBQUJCID0gQm94MkQuQ29sbGlzaW9uLmIyQUFCQjtcblxuYjJDb2xvciA9IEJveDJELkNvbW1vbi5iMkNvbG9yO1xuXG5iMlN3ZWVwID0gQm94MkQuQ29tbW9uLk1hdGguYjJTd2VlcDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMlRyYW5zZm9ybSA9IEJveDJELkNvbW1vbi5NYXRoLmIyVHJhbnNmb3JtO1xuXG5iMkJvZHkgPSBCb3gyRC5EeW5hbWljcy5iMkJvZHk7XG5cbmIyQm9keURlZiA9IEJveDJELkR5bmFtaWNzLmIyQm9keURlZjtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMkNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3Q7XG5cbmIyQ29udGFjdE1hbmFnZXIgPSBCb3gyRC5EeW5hbWljcy5iMkNvbnRhY3RNYW5hZ2VyO1xuXG5iMkNvbnRhY3RTb2x2ZXIgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXI7XG5cbmIySXNsYW5kID0gQm94MkQuRHluYW1pY3MuYjJJc2xhbmQ7XG5cbmIyVGltZVN0ZXAgPSBCb3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwO1xuXG5iMkRlYnVnRHJhdyA9IEJveDJELkR5bmFtaWNzLmIyRGVidWdEcmF3O1xuXG5iMlJheUNhc3RJbnB1dCA9IEJveDJELkNvbGxpc2lvbi5iMlJheUNhc3RJbnB1dDtcblxuYjJSYXlDYXN0T3V0cHV0ID0gQm94MkQuQ29sbGlzaW9uLmIyUmF5Q2FzdE91dHB1dDtcblxuQm94MkQuRHluYW1pY3MuYjJXb3JsZCA9IChmdW5jdGlvbigpIHtcbiAgYjJXb3JsZC5wcm90b3R5cGUuc19zdGFjayA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9jb250YWN0TWFuYWdlciA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9jb250YWN0U29sdmVyID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2lzbGFuZCA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9kZXN0cnVjdGlvbkxpc3RlbmVyID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2RlYnVnRHJhdyA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9ib2R5TGlzdCA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9jb250YWN0TGlzdCA9IG51bGw7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9qb2ludExpc3QgPSBudWxsO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1fY29udHJvbGxlckxpc3QgPSBudWxsO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1fYm9keUNvdW50ID0gMDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2NvbnRhY3RDb3VudCA9IDA7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9qb2ludENvdW50ID0gMDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2NvbnRyb2xsZXJDb3VudCA9IDA7XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUubV9hbGxvd1NsZWVwID0gbnVsbDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2dyYXZpdHkgPSBudWxsO1xuXG4gIGIyV29ybGQucHJvdG90eXBlLm1faW52X2R0MCA9IDAuMDtcblxuICBiMldvcmxkLnByb3RvdHlwZS5tX2dyb3VuZEJvZHkgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyV29ybGQoZ3Jhdml0eSwgZG9TbGVlcCkge1xuICAgIHZhciBiZDtcbiAgICB0aGlzLnNfc3RhY2sgPSBuZXcgVmVjdG9yKCk7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyID0gbmV3IGIyQ29udGFjdE1hbmFnZXIoKTtcbiAgICB0aGlzLm1fY29udGFjdFNvbHZlciA9IG5ldyBiMkNvbnRhY3RTb2x2ZXIoKTtcbiAgICB0aGlzLm1faXNsYW5kID0gbmV3IGIySXNsYW5kKCk7XG4gICAgYjJXb3JsZC5tX3dhcm1TdGFydGluZyA9IHRydWU7XG4gICAgYjJXb3JsZC5tX2NvbnRpbnVvdXNQaHlzaWNzID0gdHJ1ZTtcbiAgICB0aGlzLm1fYWxsb3dTbGVlcCA9IGRvU2xlZXA7XG4gICAgdGhpcy5tX2dyYXZpdHkgPSBncmF2aXR5O1xuICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5tX3dvcmxkID0gdGhpcztcbiAgICBiZCA9IG5ldyBiMkJvZHlEZWYoKTtcbiAgICB0aGlzLm1fZ3JvdW5kQm9keSA9IHRoaXMuQ3JlYXRlQm9keShiZCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU2V0RGVzdHJ1Y3Rpb25MaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5tX2Rlc3RydWN0aW9uTGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5TZXRDb250YWN0RmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdEZpbHRlciA9IGZpbHRlcjtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5TZXRDb250YWN0TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlNldERlYnVnRHJhdyA9IGZ1bmN0aW9uKGRlYnVnRHJhdykge1xuICAgIHRoaXMubV9kZWJ1Z0RyYXcgPSBkZWJ1Z0RyYXc7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU2V0QnJvYWRQaGFzZSA9IGZ1bmN0aW9uKGJyb2FkUGhhc2UpIHtcbiAgICB2YXIgYiwgZiwgb2xkQnJvYWRQaGFzZTtcbiAgICBvbGRCcm9hZFBoYXNlID0gdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlID0gYnJvYWRQaGFzZTtcbiAgICBiID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChiKSB7XG4gICAgICBmID0gYi5tX2ZpeHR1cmVMaXN0O1xuICAgICAgd2hpbGUgKGYpIHtcbiAgICAgICAgZi5tX3Byb3h5ID0gYnJvYWRQaGFzZS5DcmVhdGVQcm94eShvbGRCcm9hZFBoYXNlLkdldEZhdEFBQkIoZi5tX3Byb3h5KSwgZik7XG4gICAgICAgIGYgPSBmLm1fbmV4dDtcbiAgICAgIH1cbiAgICAgIGIgPSBiLm1fbmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuVmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlLlZhbGlkYXRlKCk7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0UHJveHlDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlLkdldFByb3h5Q291bnQoKTtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5DcmVhdGVCb2R5ID0gZnVuY3Rpb24oZGVmKSB7XG4gICAgdmFyIGI7XG4gICAgaWYgKHRoaXMuSXNMb2NrZWQoKSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGIgPSBuZXcgYjJCb2R5KGRlZiwgdGhpcyk7XG4gICAgYi5tX3ByZXYgPSBudWxsO1xuICAgIGIubV9uZXh0ID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIGlmICh0aGlzLm1fYm9keUxpc3QpIHtcbiAgICAgIHRoaXMubV9ib2R5TGlzdC5tX3ByZXYgPSBiO1xuICAgIH1cbiAgICB0aGlzLm1fYm9keUxpc3QgPSBiO1xuICAgICsrdGhpcy5tX2JvZHlDb3VudDtcbiAgICByZXR1cm4gYjtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5EZXN0cm95Qm9keSA9IGZ1bmN0aW9uKGIpIHtcbiAgICB2YXIgY2UsIGNlMCwgY29lLCBjb2UwLCBmLCBmMCwgam4sIGpuMDtcbiAgICBpZiAodGhpcy5Jc0xvY2tlZCgpID09PSB0cnVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGpuID0gYi5tX2pvaW50TGlzdDtcbiAgICB3aGlsZSAoam4pIHtcbiAgICAgIGpuMCA9IGpuO1xuICAgICAgam4gPSBqbi5uZXh0O1xuICAgICAgaWYgKHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMubV9kZXN0cnVjdGlvbkxpc3RlbmVyLlNheUdvb2RieWVKb2ludChqbjAuam9pbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5EZXN0cm95Sm9pbnQoam4wLmpvaW50KTtcbiAgICB9XG4gICAgY29lID0gYi5tX2NvbnRyb2xsZXJMaXN0O1xuICAgIHdoaWxlIChjb2UpIHtcbiAgICAgIGNvZTAgPSBjb2U7XG4gICAgICBjb2UgPSBjb2UubmV4dENvbnRyb2xsZXI7XG4gICAgICBjb2UwLmNvbnRyb2xsZXIuUmVtb3ZlQm9keShiKTtcbiAgICB9XG4gICAgY2UgPSBiLm1fY29udGFjdExpc3Q7XG4gICAgd2hpbGUgKGNlKSB7XG4gICAgICBjZTAgPSBjZTtcbiAgICAgIGNlID0gY2UubmV4dDtcbiAgICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5EZXN0cm95KGNlMC5jb250YWN0KTtcbiAgICB9XG4gICAgYi5tX2NvbnRhY3RMaXN0ID0gbnVsbDtcbiAgICBmID0gYi5tX2ZpeHR1cmVMaXN0O1xuICAgIHdoaWxlIChmKSB7XG4gICAgICBmMCA9IGY7XG4gICAgICBmID0gZi5tX25leHQ7XG4gICAgICBpZiAodGhpcy5tX2Rlc3RydWN0aW9uTGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5tX2Rlc3RydWN0aW9uTGlzdGVuZXIuU2F5R29vZGJ5ZUZpeHR1cmUoZjApO1xuICAgICAgfVxuICAgICAgZjAuRGVzdHJveVByb3h5KHRoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2UpO1xuICAgICAgZjAuRGVzdHJveSgpO1xuICAgIH1cbiAgICBiLm1fZml4dHVyZUxpc3QgPSBudWxsO1xuICAgIGIubV9maXh0dXJlQ291bnQgPSAwO1xuICAgIGlmIChiLm1fcHJldikge1xuICAgICAgYi5tX3ByZXYubV9uZXh0ID0gYi5tX25leHQ7XG4gICAgfVxuICAgIGlmIChiLm1fbmV4dCkge1xuICAgICAgYi5tX25leHQubV9wcmV2ID0gYi5tX3ByZXY7XG4gICAgfVxuICAgIGlmIChiID09PSB0aGlzLm1fYm9keUxpc3QpIHtcbiAgICAgIHRoaXMubV9ib2R5TGlzdCA9IGIubV9uZXh0O1xuICAgIH1cbiAgICAtLXRoaXMubV9ib2R5Q291bnQ7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuQ3JlYXRlSm9pbnQgPSBmdW5jdGlvbihkZWYpIHtcbiAgICB2YXIgYm9keUEsIGJvZHlCLCBlZGdlLCBqO1xuICAgIGogPSBiMkpvaW50LkNyZWF0ZShkZWYsIG51bGwpO1xuICAgIGoubV9wcmV2ID0gbnVsbDtcbiAgICBqLm1fbmV4dCA9IHRoaXMubV9qb2ludExpc3Q7XG4gICAgaWYgKHRoaXMubV9qb2ludExpc3QpIHtcbiAgICAgIHRoaXMubV9qb2ludExpc3QubV9wcmV2ID0gajtcbiAgICB9XG4gICAgdGhpcy5tX2pvaW50TGlzdCA9IGo7XG4gICAgKyt0aGlzLm1fam9pbnRDb3VudDtcbiAgICBqLm1fZWRnZUEuam9pbnQgPSBqO1xuICAgIGoubV9lZGdlQS5vdGhlciA9IGoubV9ib2R5QjtcbiAgICBqLm1fZWRnZUEucHJldiA9IG51bGw7XG4gICAgai5tX2VkZ2VBLm5leHQgPSBqLm1fYm9keUEubV9qb2ludExpc3Q7XG4gICAgaWYgKGoubV9ib2R5QS5tX2pvaW50TGlzdCkge1xuICAgICAgai5tX2JvZHlBLm1fam9pbnRMaXN0LnByZXYgPSBqLm1fZWRnZUE7XG4gICAgfVxuICAgIGoubV9ib2R5QS5tX2pvaW50TGlzdCA9IGoubV9lZGdlQTtcbiAgICBqLm1fZWRnZUIuam9pbnQgPSBqO1xuICAgIGoubV9lZGdlQi5vdGhlciA9IGoubV9ib2R5QTtcbiAgICBqLm1fZWRnZUIucHJldiA9IG51bGw7XG4gICAgai5tX2VkZ2VCLm5leHQgPSBqLm1fYm9keUIubV9qb2ludExpc3Q7XG4gICAgaWYgKGoubV9ib2R5Qi5tX2pvaW50TGlzdCkge1xuICAgICAgai5tX2JvZHlCLm1fam9pbnRMaXN0LnByZXYgPSBqLm1fZWRnZUI7XG4gICAgfVxuICAgIGoubV9ib2R5Qi5tX2pvaW50TGlzdCA9IGoubV9lZGdlQjtcbiAgICBib2R5QSA9IGRlZi5ib2R5QTtcbiAgICBib2R5QiA9IGRlZi5ib2R5QjtcbiAgICBpZiAoZGVmLmNvbGxpZGVDb25uZWN0ZWQgPT09IGZhbHNlKSB7XG4gICAgICBlZGdlID0gYm9keUIuR2V0Q29udGFjdExpc3QoKTtcbiAgICAgIHdoaWxlIChlZGdlKSB7XG4gICAgICAgIGlmIChlZGdlLm90aGVyID09PSBib2R5QSkge1xuICAgICAgICAgIGVkZ2UuY29udGFjdC5GbGFnRm9yRmlsdGVyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWRnZSA9IGVkZ2UubmV4dDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGo7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuRGVzdHJveUpvaW50ID0gZnVuY3Rpb24oaikge1xuICAgIHZhciBib2R5QSwgYm9keUIsIGNvbGxpZGVDb25uZWN0ZWQsIGVkZ2U7XG4gICAgY29sbGlkZUNvbm5lY3RlZCA9IGoubV9jb2xsaWRlQ29ubmVjdGVkO1xuICAgIGlmIChqLm1fcHJldikge1xuICAgICAgai5tX3ByZXYubV9uZXh0ID0gai5tX25leHQ7XG4gICAgfVxuICAgIGlmIChqLm1fbmV4dCkge1xuICAgICAgai5tX25leHQubV9wcmV2ID0gai5tX3ByZXY7XG4gICAgfVxuICAgIGlmIChqID09PSB0aGlzLm1fam9pbnRMaXN0KSB7XG4gICAgICB0aGlzLm1fam9pbnRMaXN0ID0gai5tX25leHQ7XG4gICAgfVxuICAgIGJvZHlBID0gai5tX2JvZHlBO1xuICAgIGJvZHlCID0gai5tX2JvZHlCO1xuICAgIGJvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIGJvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIGlmIChqLm1fZWRnZUEucHJldikge1xuICAgICAgai5tX2VkZ2VBLnByZXYubmV4dCA9IGoubV9lZGdlQS5uZXh0O1xuICAgIH1cbiAgICBpZiAoai5tX2VkZ2VBLm5leHQpIHtcbiAgICAgIGoubV9lZGdlQS5uZXh0LnByZXYgPSBqLm1fZWRnZUEucHJldjtcbiAgICB9XG4gICAgaWYgKGoubV9lZGdlQSA9PT0gYm9keUEubV9qb2ludExpc3QpIHtcbiAgICAgIGJvZHlBLm1fam9pbnRMaXN0ID0gai5tX2VkZ2VBLm5leHQ7XG4gICAgfVxuICAgIGoubV9lZGdlQS5wcmV2ID0gbnVsbDtcbiAgICBqLm1fZWRnZUEubmV4dCA9IG51bGw7XG4gICAgaWYgKGoubV9lZGdlQi5wcmV2KSB7XG4gICAgICBqLm1fZWRnZUIucHJldi5uZXh0ID0gai5tX2VkZ2VCLm5leHQ7XG4gICAgfVxuICAgIGlmIChqLm1fZWRnZUIubmV4dCkge1xuICAgICAgai5tX2VkZ2VCLm5leHQucHJldiA9IGoubV9lZGdlQi5wcmV2O1xuICAgIH1cbiAgICBpZiAoai5tX2VkZ2VCID09PSBib2R5Qi5tX2pvaW50TGlzdCkge1xuICAgICAgYm9keUIubV9qb2ludExpc3QgPSBqLm1fZWRnZUIubmV4dDtcbiAgICB9XG4gICAgai5tX2VkZ2VCLnByZXYgPSBudWxsO1xuICAgIGoubV9lZGdlQi5uZXh0ID0gbnVsbDtcbiAgICBiMkpvaW50LkRlc3Ryb3koaiwgbnVsbCk7XG4gICAgLS10aGlzLm1fam9pbnRDb3VudDtcbiAgICBpZiAoY29sbGlkZUNvbm5lY3RlZCA9PT0gZmFsc2UpIHtcbiAgICAgIGVkZ2UgPSBib2R5Qi5HZXRDb250YWN0TGlzdCgpO1xuICAgICAgd2hpbGUgKGVkZ2UpIHtcbiAgICAgICAgaWYgKGVkZ2Uub3RoZXIgPT09IGJvZHlBKSB7XG4gICAgICAgICAgZWRnZS5jb250YWN0LkZsYWdGb3JGaWx0ZXJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBlZGdlID0gZWRnZS5uZXh0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5BZGRDb250cm9sbGVyID0gZnVuY3Rpb24oYykge1xuICAgIGMubV9uZXh0ID0gdGhpcy5tX2NvbnRyb2xsZXJMaXN0O1xuICAgIGMubV9wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fY29udHJvbGxlckxpc3QgPSBjO1xuICAgIGMubV93b3JsZCA9IHRoaXM7XG4gICAgdGhpcy5tX2NvbnRyb2xsZXJDb3VudCsrO1xuICAgIHJldHVybiBjO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlJlbW92ZUNvbnRyb2xsZXIgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYgKGMubV9wcmV2KSB7XG4gICAgICBjLm1fcHJldi5tX25leHQgPSBjLm1fbmV4dDtcbiAgICB9XG4gICAgaWYgKGMubV9uZXh0KSB7XG4gICAgICBjLm1fbmV4dC5tX3ByZXYgPSBjLm1fcHJldjtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9jb250cm9sbGVyTGlzdCA9PT0gYykge1xuICAgICAgdGhpcy5tX2NvbnRyb2xsZXJMaXN0ID0gYy5tX25leHQ7XG4gICAgfVxuICAgIHRoaXMubV9jb250cm9sbGVyQ291bnQtLTtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5DcmVhdGVDb250cm9sbGVyID0gZnVuY3Rpb24oY29udHJvbGxlcikge1xuICAgIGlmIChjb250cm9sbGVyLm1fd29ybGQgIT09IHRoaXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRyb2xsZXIgY2FuIG9ubHkgYmUgYSBtZW1iZXIgb2Ygb25lIHdvcmxkXCIpO1xuICAgIH1cbiAgICBjb250cm9sbGVyLm1fbmV4dCA9IHRoaXMubV9jb250cm9sbGVyTGlzdDtcbiAgICBjb250cm9sbGVyLm1fcHJldiA9IG51bGw7XG4gICAgaWYgKHRoaXMubV9jb250cm9sbGVyTGlzdCkge1xuICAgICAgdGhpcy5tX2NvbnRyb2xsZXJMaXN0Lm1fcHJldiA9IGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIHRoaXMubV9jb250cm9sbGVyTGlzdCA9IGNvbnRyb2xsZXI7XG4gICAgKyt0aGlzLm1fY29udHJvbGxlckNvdW50O1xuICAgIGNvbnRyb2xsZXIubV93b3JsZCA9IHRoaXM7XG4gICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuRGVzdHJveUNvbnRyb2xsZXIgPSBmdW5jdGlvbihjb250cm9sbGVyKSB7XG4gICAgY29udHJvbGxlci5DbGVhcigpO1xuICAgIGlmIChjb250cm9sbGVyLm1fbmV4dCkge1xuICAgICAgY29udHJvbGxlci5tX25leHQubV9wcmV2ID0gY29udHJvbGxlci5tX3ByZXY7XG4gICAgfVxuICAgIGlmIChjb250cm9sbGVyLm1fcHJldikge1xuICAgICAgY29udHJvbGxlci5tX3ByZXYubV9uZXh0ID0gY29udHJvbGxlci5tX25leHQ7XG4gICAgfVxuICAgIGlmIChjb250cm9sbGVyID09PSB0aGlzLm1fY29udHJvbGxlckxpc3QpIHtcbiAgICAgIHRoaXMubV9jb250cm9sbGVyTGlzdCA9IGNvbnRyb2xsZXIubV9uZXh0O1xuICAgIH1cbiAgICAtLXRoaXMubV9jb250cm9sbGVyQ291bnQ7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU2V0V2FybVN0YXJ0aW5nID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGIyV29ybGQubV93YXJtU3RhcnRpbmcgPSBmbGFnO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlNldENvbnRpbnVvdXNQaHlzaWNzID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGIyV29ybGQubV9jb250aW51b3VzUGh5c2ljcyA9IGZsYWc7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0Qm9keUNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Q291bnQ7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0Sm9pbnRDb3VudCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fam9pbnRDb3VudDtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5HZXRDb250YWN0Q291bnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RDb3VudDtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5TZXRHcmF2aXR5ID0gZnVuY3Rpb24oZ3Jhdml0eSkge1xuICAgIHRoaXMubV9ncmF2aXR5ID0gZ3Jhdml0eTtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5HZXRHcmF2aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ncmF2aXR5O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkdldEdyb3VuZEJvZHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2dyb3VuZEJvZHk7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU3RlcCA9IGZ1bmN0aW9uKGR0LCB2ZWxvY2l0eUl0ZXJhdGlvbnMsIHBvc2l0aW9uSXRlcmF0aW9ucykge1xuICAgIHZhciBzdGVwO1xuICAgIGlmIChkdCA9PT0gdm9pZCAwKSB7XG4gICAgICBkdCA9IDA7XG4gICAgfVxuICAgIGlmICh2ZWxvY2l0eUl0ZXJhdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgdmVsb2NpdHlJdGVyYXRpb25zID0gMDtcbiAgICB9XG4gICAgaWYgKHBvc2l0aW9uSXRlcmF0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBwb3NpdGlvbkl0ZXJhdGlvbnMgPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2ZsYWdzICYgYjJXb3JsZC5lX25ld0ZpeHR1cmUpIHtcbiAgICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5GaW5kTmV3Q29udGFjdHMoKTtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJXb3JsZC5lX25ld0ZpeHR1cmU7XG4gICAgfVxuICAgIHRoaXMubV9mbGFncyB8PSBiMldvcmxkLmVfbG9ja2VkO1xuICAgIHN0ZXAgPSBiMldvcmxkLnNfdGltZXN0ZXAyO1xuICAgIHN0ZXAuZHQgPSBkdDtcbiAgICBzdGVwLnZlbG9jaXR5SXRlcmF0aW9ucyA9IHZlbG9jaXR5SXRlcmF0aW9ucztcbiAgICBzdGVwLnBvc2l0aW9uSXRlcmF0aW9ucyA9IHBvc2l0aW9uSXRlcmF0aW9ucztcbiAgICBpZiAoZHQgPiAwLjApIHtcbiAgICAgIHN0ZXAuaW52X2R0ID0gMS4wIC8gZHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ZXAuaW52X2R0ID0gMC4wO1xuICAgIH1cbiAgICBzdGVwLmR0UmF0aW8gPSB0aGlzLm1faW52X2R0MCAqIGR0O1xuICAgIHN0ZXAud2FybVN0YXJ0aW5nID0gYjJXb3JsZC5tX3dhcm1TdGFydGluZztcbiAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIuQ29sbGlkZSgpO1xuICAgIGlmIChzdGVwLmR0ID4gMC4wKSB7XG4gICAgICB0aGlzLlNvbHZlKHN0ZXApO1xuICAgIH1cbiAgICBpZiAoYjJXb3JsZC5tX2NvbnRpbnVvdXNQaHlzaWNzICYmIHN0ZXAuZHQgPiAwLjApIHtcbiAgICAgIHRoaXMuU29sdmVUT0koc3RlcCk7XG4gICAgfVxuICAgIGlmIChzdGVwLmR0ID4gMC4wKSB7XG4gICAgICB0aGlzLm1faW52X2R0MCA9IHN0ZXAuaW52X2R0O1xuICAgIH1cbiAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyV29ybGQuZV9sb2NrZWQ7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuQ2xlYXJGb3JjZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm9keTtcbiAgICBib2R5ID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChib2R5KSB7XG4gICAgICBib2R5Lm1fZm9yY2UuU2V0WmVybygpO1xuICAgICAgYm9keS5tX3RvcnF1ZSA9IDAuMDtcbiAgICAgIGJvZHkgPSBib2R5Lm1fbmV4dDtcbiAgICB9XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuRHJhd0RlYnVnRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhYWJiLCBiLCBiMSwgYjIsIGJwLCBjLCBjQSwgY0IsIGNvbG9yLCBjb250YWN0LCBmLCBmaXh0dXJlQSwgZml4dHVyZUIsIGZsYWdzLCBpLCBpbnZRLCBqLCBzLCB2cywgeDEsIHgyLCB4ZjtcbiAgICBpZiAodGhpcy5tX2RlYnVnRHJhdyA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubV9kZWJ1Z0RyYXcubV9zcHJpdGUuZ3JhcGhpY3MuY2xlYXIoKTtcbiAgICBmbGFncyA9IHRoaXMubV9kZWJ1Z0RyYXcuR2V0RmxhZ3MoKTtcbiAgICBpID0gMDtcbiAgICBiID0gdm9pZCAwO1xuICAgIGYgPSB2b2lkIDA7XG4gICAgcyA9IHZvaWQgMDtcbiAgICBqID0gdm9pZCAwO1xuICAgIGJwID0gdm9pZCAwO1xuICAgIGludlEgPSBuZXcgYjJWZWMyO1xuICAgIHgxID0gbmV3IGIyVmVjMjtcbiAgICB4MiA9IG5ldyBiMlZlYzI7XG4gICAgeGYgPSB2b2lkIDA7XG4gICAgYjEgPSBuZXcgYjJBQUJCKCk7XG4gICAgYjIgPSBuZXcgYjJBQUJCKCk7XG4gICAgdnMgPSBbbmV3IGIyVmVjMigpLCBuZXcgYjJWZWMyKCksIG5ldyBiMlZlYzIoKSwgbmV3IGIyVmVjMigpXTtcbiAgICBjb2xvciA9IG5ldyBiMkNvbG9yKDAsIDAsIDApO1xuICAgIGlmIChmbGFncyAmIGIyRGVidWdEcmF3LmVfc2hhcGVCaXQpIHtcbiAgICAgIGIgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgICB3aGlsZSAoYikge1xuICAgICAgICB4ZiA9IGIubV94ZjtcbiAgICAgICAgZiA9IGIuR2V0Rml4dHVyZUxpc3QoKTtcbiAgICAgICAgd2hpbGUgKGYpIHtcbiAgICAgICAgICBzID0gZi5HZXRTaGFwZSgpO1xuICAgICAgICAgIGlmIChiLklzQWN0aXZlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb2xvci5TZXQoMC41LCAwLjUsIDAuMyk7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShzLCB4ZiwgY29sb3IpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgICAgICBjb2xvci5TZXQoMC41LCAwLjksIDAuNSk7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShzLCB4ZiwgY29sb3IpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keS5iMl9raW5lbWF0aWNCb2R5KSB7XG4gICAgICAgICAgICBjb2xvci5TZXQoMC41LCAwLjUsIDAuOSk7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShzLCB4ZiwgY29sb3IpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoYi5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb2xvci5TZXQoMC42LCAwLjYsIDAuNik7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShzLCB4ZiwgY29sb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2xvci5TZXQoMC45LCAwLjcsIDAuNyk7XG4gICAgICAgICAgICB0aGlzLkRyYXdTaGFwZShzLCB4ZiwgY29sb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmID0gZi5tX25leHQ7XG4gICAgICAgIH1cbiAgICAgICAgYiA9IGIubV9uZXh0O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiBiMkRlYnVnRHJhdy5lX2pvaW50Qml0KSB7XG4gICAgICBqID0gdGhpcy5tX2pvaW50TGlzdDtcbiAgICAgIHdoaWxlIChqKSB7XG4gICAgICAgIHRoaXMuRHJhd0pvaW50KGopO1xuICAgICAgICBqID0gai5tX25leHQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmbGFncyAmIGIyRGVidWdEcmF3LmVfY29udHJvbGxlckJpdCkge1xuICAgICAgYyA9IHRoaXMubV9jb250cm9sbGVyTGlzdDtcbiAgICAgIHdoaWxlIChjKSB7XG4gICAgICAgIGMuRHJhdyh0aGlzLm1fZGVidWdEcmF3KTtcbiAgICAgICAgYyA9IGMubV9uZXh0O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiBiMkRlYnVnRHJhdy5lX3BhaXJCaXQpIHtcbiAgICAgIGNvbG9yLlNldCgwLjMsIDAuOSwgMC45KTtcbiAgICAgIGNvbnRhY3QgPSB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdDtcbiAgICAgIHdoaWxlIChjb250YWN0KSB7XG4gICAgICAgIGZpeHR1cmVBID0gY29udGFjdC5HZXRGaXh0dXJlQSgpO1xuICAgICAgICBmaXh0dXJlQiA9IGNvbnRhY3QuR2V0Rml4dHVyZUIoKTtcbiAgICAgICAgY0EgPSBmaXh0dXJlQS5HZXRBQUJCKCkuR2V0Q2VudGVyKCk7XG4gICAgICAgIGNCID0gZml4dHVyZUIuR2V0QUFCQigpLkdldENlbnRlcigpO1xuICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdTZWdtZW50KGNBLCBjQiwgY29sb3IpO1xuICAgICAgICBjb250YWN0ID0gY29udGFjdC5HZXROZXh0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmbGFncyAmIGIyRGVidWdEcmF3LmVfYWFiYkJpdCkge1xuICAgICAgYnAgPSB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9icm9hZFBoYXNlO1xuICAgICAgdnMgPSBbbmV3IGIyVmVjMigpLCBuZXcgYjJWZWMyKCksIG5ldyBiMlZlYzIoKSwgbmV3IGIyVmVjMigpXTtcbiAgICAgIGIgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgICB3aGlsZSAoYikge1xuICAgICAgICBpZiAoYi5Jc0FjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGYgPSBiLkdldEZpeHR1cmVMaXN0KCk7XG4gICAgICAgIHdoaWxlIChmKSB7XG4gICAgICAgICAgYWFiYiA9IGJwLkdldEZhdEFBQkIoZi5tX3Byb3h5KTtcbiAgICAgICAgICB2c1swXS5TZXQoYWFiYi5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55KTtcbiAgICAgICAgICB2c1sxXS5TZXQoYWFiYi51cHBlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55KTtcbiAgICAgICAgICB2c1syXS5TZXQoYWFiYi51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICAgICAgICB2c1szXS5TZXQoYWFiYi5sb3dlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdQb2x5Z29uKHZzLCA0LCBjb2xvcik7XG4gICAgICAgICAgZiA9IGYuR2V0TmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGIgPSBiLkdldE5leHQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZsYWdzICYgYjJEZWJ1Z0RyYXcuZV9jZW50ZXJPZk1hc3NCaXQpIHtcbiAgICAgIGIgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgICB3aGlsZSAoYikge1xuICAgICAgICB4ZiA9IGIyV29ybGQuc194ZjtcbiAgICAgICAgeGYuUiA9IGIubV94Zi5SO1xuICAgICAgICB4Zi5wb3NpdGlvbiA9IGIuR2V0V29ybGRDZW50ZXIoKTtcbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3VHJhbnNmb3JtKHhmKTtcbiAgICAgICAgYiA9IGIubV9uZXh0O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5RdWVyeUFBQkIgPSBmdW5jdGlvbihjYWxsYmFjaywgYWFiYikge1xuICAgIHZhciBXb3JsZFF1ZXJ5V3JhcHBlciwgYnJvYWRQaGFzZSwgX190aGlzO1xuICAgIFdvcmxkUXVlcnlXcmFwcGVyID0gZnVuY3Rpb24ocHJveHkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhicm9hZFBoYXNlLkdldFVzZXJEYXRhKHByb3h5KSk7XG4gICAgfTtcbiAgICBfX3RoaXMgPSB0aGlzO1xuICAgIGJyb2FkUGhhc2UgPSBfX3RoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgYnJvYWRQaGFzZS5RdWVyeShXb3JsZFF1ZXJ5V3JhcHBlciwgYWFiYik7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuUXVlcnlTaGFwZSA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBzaGFwZSwgdHJhbnNmb3JtKSB7XG4gICAgdmFyIFdvcmxkUXVlcnlXcmFwcGVyLCBhYWJiLCBicm9hZFBoYXNlLCBfX3RoaXM7XG4gICAgV29ybGRRdWVyeVdyYXBwZXIgPSBmdW5jdGlvbihwcm94eSkge1xuICAgICAgdmFyIGZpeHR1cmU7XG4gICAgICBmaXh0dXJlID0gKGJyb2FkUGhhc2UuR2V0VXNlckRhdGEocHJveHkpIGluc3RhbmNlb2YgYjJGaXh0dXJlID8gYnJvYWRQaGFzZS5HZXRVc2VyRGF0YShwcm94eSkgOiBudWxsKTtcbiAgICAgIGlmIChiMlNoYXBlLlRlc3RPdmVybGFwKHNoYXBlLCB0cmFuc2Zvcm0sIGZpeHR1cmUuR2V0U2hhcGUoKSwgZml4dHVyZS5HZXRCb2R5KCkuR2V0VHJhbnNmb3JtKCkpKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhmaXh0dXJlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgX190aGlzID0gdGhpcztcbiAgICBpZiAodHJhbnNmb3JtID09PSB2b2lkIDApIHtcbiAgICAgIHRyYW5zZm9ybSA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm0gPT0gbnVsbCkge1xuICAgICAgdHJhbnNmb3JtID0gbmV3IGIyVHJhbnNmb3JtKCk7XG4gICAgICB0cmFuc2Zvcm0uU2V0SWRlbnRpdHkoKTtcbiAgICB9XG4gICAgYnJvYWRQaGFzZSA9IF9fdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICBhYWJiID0gbmV3IGIyQUFCQigpO1xuICAgIHNoYXBlLkNvbXB1dGVBQUJCKGFhYmIsIHRyYW5zZm9ybSk7XG4gICAgYnJvYWRQaGFzZS5RdWVyeShXb3JsZFF1ZXJ5V3JhcHBlciwgYWFiYik7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuUXVlcnlQb2ludCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBwKSB7XG4gICAgdmFyIFdvcmxkUXVlcnlXcmFwcGVyLCBhYWJiLCBicm9hZFBoYXNlLCBfX3RoaXM7XG4gICAgV29ybGRRdWVyeVdyYXBwZXIgPSBmdW5jdGlvbihwcm94eSkge1xuICAgICAgdmFyIGZpeHR1cmU7XG4gICAgICBmaXh0dXJlID0gKGJyb2FkUGhhc2UuR2V0VXNlckRhdGEocHJveHkpIGluc3RhbmNlb2YgYjJGaXh0dXJlID8gYnJvYWRQaGFzZS5HZXRVc2VyRGF0YShwcm94eSkgOiBudWxsKTtcbiAgICAgIGlmIChmaXh0dXJlLlRlc3RQb2ludChwKSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZml4dHVyZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIF9fdGhpcyA9IHRoaXM7XG4gICAgYnJvYWRQaGFzZSA9IF9fdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fYnJvYWRQaGFzZTtcbiAgICBhYWJiID0gbmV3IGIyQUFCQigpO1xuICAgIGFhYmIubG93ZXJCb3VuZC5TZXQocC54IC0gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCBwLnkgLSBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApO1xuICAgIGFhYmIudXBwZXJCb3VuZC5TZXQocC54ICsgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCBwLnkgKyBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApO1xuICAgIGJyb2FkUGhhc2UuUXVlcnkoV29ybGRRdWVyeVdyYXBwZXIsIGFhYmIpO1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLlJheUNhc3QgPSBmdW5jdGlvbihjYWxsYmFjaywgcG9pbnQxLCBwb2ludDIpIHtcbiAgICB2YXIgUmF5Q2FzdFdyYXBwZXIsIGJyb2FkUGhhc2UsIGlucHV0LCBvdXRwdXQsIF9fdGhpcztcbiAgICBSYXlDYXN0V3JhcHBlciA9IGZ1bmN0aW9uKGlucHV0LCBwcm94eSkge1xuICAgICAgdmFyIGZpeHR1cmUsIGZyYWN0aW9uLCBoaXQsIHBvaW50LCB1c2VyRGF0YTtcbiAgICAgIHVzZXJEYXRhID0gYnJvYWRQaGFzZS5HZXRVc2VyRGF0YShwcm94eSk7XG4gICAgICBmaXh0dXJlID0gKHVzZXJEYXRhIGluc3RhbmNlb2YgYjJGaXh0dXJlID8gdXNlckRhdGEgOiBudWxsKTtcbiAgICAgIGhpdCA9IGZpeHR1cmUuUmF5Q2FzdChvdXRwdXQsIGlucHV0KTtcbiAgICAgIGlmIChoaXQpIHtcbiAgICAgICAgZnJhY3Rpb24gPSBvdXRwdXQuZnJhY3Rpb247XG4gICAgICAgIHBvaW50ID0gbmV3IGIyVmVjMigoMS4wIC0gZnJhY3Rpb24pICogcG9pbnQxLnggKyBmcmFjdGlvbiAqIHBvaW50Mi54LCAoMS4wIC0gZnJhY3Rpb24pICogcG9pbnQxLnkgKyBmcmFjdGlvbiAqIHBvaW50Mi55KTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGZpeHR1cmUsIHBvaW50LCBvdXRwdXQubm9ybWFsLCBmcmFjdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5wdXQubWF4RnJhY3Rpb247XG4gICAgfTtcbiAgICBfX3RoaXMgPSB0aGlzO1xuICAgIGJyb2FkUGhhc2UgPSBfX3RoaXMubV9jb250YWN0TWFuYWdlci5tX2Jyb2FkUGhhc2U7XG4gICAgb3V0cHV0ID0gbmV3IGIyUmF5Q2FzdE91dHB1dDtcbiAgICBpbnB1dCA9IG5ldyBiMlJheUNhc3RJbnB1dChwb2ludDEsIHBvaW50Mik7XG4gICAgYnJvYWRQaGFzZS5SYXlDYXN0KFJheUNhc3RXcmFwcGVyLCBpbnB1dCk7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuUmF5Q2FzdE9uZSA9IGZ1bmN0aW9uKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgdmFyIFJheUNhc3RPbmVXcmFwcGVyLCByZXN1bHQsIF9fdGhpcztcbiAgICBSYXlDYXN0T25lV3JhcHBlciA9IGZ1bmN0aW9uKGZpeHR1cmUsIHBvaW50LCBub3JtYWwsIGZyYWN0aW9uKSB7XG4gICAgICB2YXIgcmVzdWx0O1xuICAgICAgaWYgKGZyYWN0aW9uID09PSB2b2lkIDApIHtcbiAgICAgICAgZnJhY3Rpb24gPSAwO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gZml4dHVyZTtcbiAgICAgIHJldHVybiBmcmFjdGlvbjtcbiAgICB9O1xuICAgIF9fdGhpcyA9IHRoaXM7XG4gICAgcmVzdWx0ID0gdm9pZCAwO1xuICAgIF9fdGhpcy5SYXlDYXN0KFJheUNhc3RPbmVXcmFwcGVyLCBwb2ludDEsIHBvaW50Mik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5SYXlDYXN0QWxsID0gZnVuY3Rpb24ocG9pbnQxLCBwb2ludDIpIHtcbiAgICB2YXIgUmF5Q2FzdEFsbFdyYXBwZXIsIHJlc3VsdCwgX190aGlzO1xuICAgIFJheUNhc3RBbGxXcmFwcGVyID0gZnVuY3Rpb24oZml4dHVyZSwgcG9pbnQsIG5vcm1hbCwgZnJhY3Rpb24pIHtcbiAgICAgIGlmIChmcmFjdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGZyYWN0aW9uID0gMDtcbiAgICAgIH1cbiAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IGZpeHR1cmU7XG4gICAgICByZXR1cm4gMTtcbiAgICB9O1xuICAgIF9fdGhpcyA9IHRoaXM7XG4gICAgcmVzdWx0ID0gbmV3IFZlY3RvcigpO1xuICAgIF9fdGhpcy5SYXlDYXN0KFJheUNhc3RBbGxXcmFwcGVyLCBwb2ludDEsIHBvaW50Mik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5HZXRCb2R5TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUxpc3Q7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0Sm9pbnRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9qb2ludExpc3Q7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuR2V0Q29udGFjdExpc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLklzTG9ja2VkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMldvcmxkLmVfbG9ja2VkKSA+IDA7XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuU29sdmUgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGIsIGMsIGNlLCBjb250cm9sbGVyLCBpLCBpc2xhbmQsIGosIGpuLCBvdGhlciwgc2VlZCwgc3RhY2ssIHN0YWNrQ291bnQsIHN0YWNrU2l6ZTtcbiAgICBiID0gdm9pZCAwO1xuICAgIGNvbnRyb2xsZXIgPSB0aGlzLm1fY29udHJvbGxlckxpc3Q7XG4gICAgd2hpbGUgKGNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnRyb2xsZXIuU3RlcChzdGVwKTtcbiAgICAgIGNvbnRyb2xsZXIgPSBjb250cm9sbGVyLm1fbmV4dDtcbiAgICB9XG4gICAgaXNsYW5kID0gdGhpcy5tX2lzbGFuZDtcbiAgICBpc2xhbmQuSW5pdGlhbGl6ZSh0aGlzLm1fYm9keUNvdW50LCB0aGlzLm1fY29udGFjdENvdW50LCB0aGlzLm1fam9pbnRDb3VudCwgbnVsbCwgdGhpcy5tX2NvbnRhY3RNYW5hZ2VyLm1fY29udGFjdExpc3RlbmVyLCB0aGlzLm1fY29udGFjdFNvbHZlcik7XG4gICAgYiA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICB3aGlsZSAoYikge1xuICAgICAgYi5tX2ZsYWdzICY9IH5iMkJvZHkuZV9pc2xhbmRGbGFnO1xuICAgICAgYiA9IGIubV9uZXh0O1xuICAgIH1cbiAgICBjID0gdGhpcy5tX2NvbnRhY3RMaXN0O1xuICAgIHdoaWxlIChjKSB7XG4gICAgICBjLm1fZmxhZ3MgJj0gfmIyQ29udGFjdC5lX2lzbGFuZEZsYWc7XG4gICAgICBjID0gYy5tX25leHQ7XG4gICAgfVxuICAgIGogPSB0aGlzLm1fam9pbnRMaXN0O1xuICAgIHdoaWxlIChqKSB7XG4gICAgICBqLm1faXNsYW5kRmxhZyA9IGZhbHNlO1xuICAgICAgaiA9IGoubV9uZXh0O1xuICAgIH1cbiAgICBzdGFja1NpemUgPSBwYXJzZUludCh0aGlzLm1fYm9keUNvdW50KTtcbiAgICBzdGFjayA9IHRoaXMuc19zdGFjaztcbiAgICBzZWVkID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChzZWVkKSB7XG4gICAgICBpZiAoc2VlZC5tX2ZsYWdzICYgYjJCb2R5LmVfaXNsYW5kRmxhZykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzZWVkLklzQXdha2UoKSA9PT0gZmFsc2UgfHwgc2VlZC5Jc0FjdGl2ZSgpID09PSBmYWxzZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChzZWVkLkdldFR5cGUoKSA9PT0gYjJCb2R5LmIyX3N0YXRpY0JvZHkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpc2xhbmQuQ2xlYXIoKTtcbiAgICAgIHN0YWNrQ291bnQgPSAwO1xuICAgICAgc3RhY2tbc3RhY2tDb3VudCsrXSA9IHNlZWQ7XG4gICAgICBzZWVkLm1fZmxhZ3MgfD0gYjJCb2R5LmVfaXNsYW5kRmxhZztcbiAgICAgIHdoaWxlIChzdGFja0NvdW50ID4gMCkge1xuICAgICAgICBiID0gc3RhY2tbLS1zdGFja0NvdW50XTtcbiAgICAgICAgaXNsYW5kLkFkZEJvZHkoYik7XG4gICAgICAgIGlmIChiLklzQXdha2UoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBiLlNldEF3YWtlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiLkdldFR5cGUoKSA9PT0gYjJCb2R5LmIyX3N0YXRpY0JvZHkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBvdGhlciA9IHZvaWQgMDtcbiAgICAgICAgY2UgPSBiLm1fY29udGFjdExpc3Q7XG4gICAgICAgIHdoaWxlIChjZSkge1xuICAgICAgICAgIGlmIChjZS5jb250YWN0Lm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV9pc2xhbmRGbGFnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNlLmNvbnRhY3QuSXNTZW5zb3IoKSA9PT0gdHJ1ZSB8fCBjZS5jb250YWN0LklzRW5hYmxlZCgpID09PSBmYWxzZSB8fCBjZS5jb250YWN0LklzVG91Y2hpbmcoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc2xhbmQuQWRkQ29udGFjdChjZS5jb250YWN0KTtcbiAgICAgICAgICBjZS5jb250YWN0Lm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfaXNsYW5kRmxhZztcbiAgICAgICAgICBvdGhlciA9IGNlLm90aGVyO1xuICAgICAgICAgIGlmIChvdGhlci5tX2ZsYWdzICYgYjJCb2R5LmVfaXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YWNrW3N0YWNrQ291bnQrK10gPSBvdGhlcjtcbiAgICAgICAgICBvdGhlci5tX2ZsYWdzIHw9IGIyQm9keS5lX2lzbGFuZEZsYWc7XG4gICAgICAgICAgY2UgPSBjZS5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGpuID0gYi5tX2pvaW50TGlzdDtcbiAgICAgICAgd2hpbGUgKGpuKSB7XG4gICAgICAgICAgaWYgKGpuLmpvaW50Lm1faXNsYW5kRmxhZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG90aGVyID0gam4ub3RoZXI7XG4gICAgICAgICAgaWYgKG90aGVyLklzQWN0aXZlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNsYW5kLkFkZEpvaW50KGpuLmpvaW50KTtcbiAgICAgICAgICBqbi5qb2ludC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgIGlmIChvdGhlci5tX2ZsYWdzICYgYjJCb2R5LmVfaXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YWNrW3N0YWNrQ291bnQrK10gPSBvdGhlcjtcbiAgICAgICAgICBvdGhlci5tX2ZsYWdzIHw9IGIyQm9keS5lX2lzbGFuZEZsYWc7XG4gICAgICAgICAgam4gPSBqbi5uZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpc2xhbmQuU29sdmUoc3RlcCwgdGhpcy5tX2dyYXZpdHksIHRoaXMubV9hbGxvd1NsZWVwKTtcbiAgICAgIGkgPSAwO1xuICAgICAgd2hpbGUgKGkgPCBpc2xhbmQubV9ib2R5Q291bnQpIHtcbiAgICAgICAgYiA9IGlzbGFuZC5tX2JvZGllc1tpXTtcbiAgICAgICAgaWYgKGIuR2V0VHlwZSgpID09PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgICAgIGIubV9mbGFncyAmPSB+YjJCb2R5LmVfaXNsYW5kRmxhZztcbiAgICAgICAgfVxuICAgICAgICArK2k7XG4gICAgICB9XG4gICAgICBzZWVkID0gc2VlZC5tX25leHQ7XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgc3RhY2subGVuZ3RoKSB7XG4gICAgICBpZiAoIXN0YWNrW2ldKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhY2tbaV0gPSBudWxsO1xuICAgICAgKytpO1xuICAgIH1cbiAgICBiID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChiKSB7XG4gICAgICBpZiAoYi5Jc0F3YWtlKCkgPT09IGZhbHNlIHx8IGIuSXNBY3RpdmUoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoYi5HZXRUeXBlKCkgPT09IGIyQm9keS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgYi5TeW5jaHJvbml6ZUZpeHR1cmVzKCk7XG4gICAgICBiID0gYi5tX25leHQ7XG4gICAgfVxuICAgIHRoaXMubV9jb250YWN0TWFuYWdlci5GaW5kTmV3Q29udGFjdHMoKTtcbiAgfTtcblxuICBiMldvcmxkLnByb3RvdHlwZS5Tb2x2ZVRPSSA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgYiwgYkEsIGJCLCBjLCBjRWRnZSwgZkEsIGZCLCBpLCBpc2xhbmQsIGosIGpFZGdlLCBtaW5Db250YWN0LCBtaW5UT0ksIG90aGVyLCBxdWV1ZSwgcXVldWVTaXplLCBxdWV1ZVN0YXJ0LCBzZWVkLCBzdWJTdGVwLCB0MCwgdG9pO1xuICAgIGIgPSB2b2lkIDA7XG4gICAgZkEgPSB2b2lkIDA7XG4gICAgZkIgPSB2b2lkIDA7XG4gICAgYkEgPSB2b2lkIDA7XG4gICAgYkIgPSB2b2lkIDA7XG4gICAgY0VkZ2UgPSB2b2lkIDA7XG4gICAgaiA9IHZvaWQgMDtcbiAgICBpc2xhbmQgPSB0aGlzLm1faXNsYW5kO1xuICAgIGlzbGFuZC5Jbml0aWFsaXplKHRoaXMubV9ib2R5Q291bnQsIGIyU2V0dGluZ3MuYjJfbWF4VE9JQ29udGFjdHNQZXJJc2xhbmQsIGIyU2V0dGluZ3MuYjJfbWF4VE9JSm9pbnRzUGVySXNsYW5kLCBudWxsLCB0aGlzLm1fY29udGFjdE1hbmFnZXIubV9jb250YWN0TGlzdGVuZXIsIHRoaXMubV9jb250YWN0U29sdmVyKTtcbiAgICBxdWV1ZSA9IGIyV29ybGQuc19xdWV1ZTtcbiAgICBiID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChiKSB7XG4gICAgICBiLm1fZmxhZ3MgJj0gfmIyQm9keS5lX2lzbGFuZEZsYWc7XG4gICAgICBiLm1fc3dlZXAudDAgPSAwLjA7XG4gICAgICBiID0gYi5tX25leHQ7XG4gICAgfVxuICAgIGMgPSB2b2lkIDA7XG4gICAgYyA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICB3aGlsZSAoYykge1xuICAgICAgYy5tX2ZsYWdzICY9IH4oYjJDb250YWN0LmVfdG9pRmxhZyB8IGIyQ29udGFjdC5lX2lzbGFuZEZsYWcpO1xuICAgICAgYyA9IGMubV9uZXh0O1xuICAgIH1cbiAgICBqID0gdGhpcy5tX2pvaW50TGlzdDtcbiAgICB3aGlsZSAoaikge1xuICAgICAgai5tX2lzbGFuZEZsYWcgPSBmYWxzZTtcbiAgICAgIGogPSBqLm1fbmV4dDtcbiAgICB9XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIG1pbkNvbnRhY3QgPSBudWxsO1xuICAgICAgbWluVE9JID0gMS4wO1xuICAgICAgYyA9IHRoaXMubV9jb250YWN0TGlzdDtcbiAgICAgIHdoaWxlIChjKSB7XG4gICAgICAgIGlmIChjLklzU2Vuc29yKCkgPT09IHRydWUgfHwgYy5Jc0VuYWJsZWQoKSA9PT0gZmFsc2UgfHwgYy5Jc0NvbnRpbnVvdXMoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b2kgPSAxLjA7XG4gICAgICAgIGlmIChjLm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV90b2lGbGFnKSB7XG4gICAgICAgICAgdG9pID0gYy5tX3RvaTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmQSA9IGMubV9maXh0dXJlQTtcbiAgICAgICAgICBmQiA9IGMubV9maXh0dXJlQjtcbiAgICAgICAgICBiQSA9IGZBLm1fYm9keTtcbiAgICAgICAgICBiQiA9IGZCLm1fYm9keTtcbiAgICAgICAgICBpZiAoKGJBLkdldFR5cGUoKSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5IHx8IGJBLklzQXdha2UoKSA9PT0gZmFsc2UpICYmIChiQi5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSB8fCBiQi5Jc0F3YWtlKCkgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHQwID0gYkEubV9zd2VlcC50MDtcbiAgICAgICAgICBpZiAoYkEubV9zd2VlcC50MCA8IGJCLm1fc3dlZXAudDApIHtcbiAgICAgICAgICAgIHQwID0gYkIubV9zd2VlcC50MDtcbiAgICAgICAgICAgIGJBLm1fc3dlZXAuQWR2YW5jZSh0MCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChiQi5tX3N3ZWVwLnQwIDwgYkEubV9zd2VlcC50MCkge1xuICAgICAgICAgICAgdDAgPSBiQS5tX3N3ZWVwLnQwO1xuICAgICAgICAgICAgYkIubV9zd2VlcC5BZHZhbmNlKHQwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9pID0gYy5Db21wdXRlVE9JKGJBLm1fc3dlZXAsIGJCLm1fc3dlZXApO1xuICAgICAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoMC4wIDw9IHRvaSAmJiB0b2kgPD0gMS4wKTtcbiAgICAgICAgICBpZiAodG9pID4gMC4wICYmIHRvaSA8IDEuMCkge1xuICAgICAgICAgICAgdG9pID0gKDEuMCAtIHRvaSkgKiB0MCArIHRvaTtcbiAgICAgICAgICAgIGlmICh0b2kgPiAxKSB7XG4gICAgICAgICAgICAgIHRvaSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGMubV90b2kgPSB0b2k7XG4gICAgICAgICAgYy5tX2ZsYWdzIHw9IGIyQ29udGFjdC5lX3RvaUZsYWc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5NSU5fVkFMVUUgPCB0b2kgJiYgdG9pIDwgbWluVE9JKSB7XG4gICAgICAgICAgbWluQ29udGFjdCA9IGM7XG4gICAgICAgICAgbWluVE9JID0gdG9pO1xuICAgICAgICB9XG4gICAgICAgIGMgPSBjLm1fbmV4dDtcbiAgICAgIH1cbiAgICAgIGlmICgobWluQ29udGFjdCA9PSBudWxsKSB8fCAxLjAgLSAxMDAuMCAqIE51bWJlci5NSU5fVkFMVUUgPCBtaW5UT0kpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBmQSA9IG1pbkNvbnRhY3QubV9maXh0dXJlQTtcbiAgICAgIGZCID0gbWluQ29udGFjdC5tX2ZpeHR1cmVCO1xuICAgICAgYkEgPSBmQS5tX2JvZHk7XG4gICAgICBiQiA9IGZCLm1fYm9keTtcbiAgICAgIGIyV29ybGQuc19iYWNrdXBBLlNldChiQS5tX3N3ZWVwKTtcbiAgICAgIGIyV29ybGQuc19iYWNrdXBCLlNldChiQi5tX3N3ZWVwKTtcbiAgICAgIGJBLkFkdmFuY2UobWluVE9JKTtcbiAgICAgIGJCLkFkdmFuY2UobWluVE9JKTtcbiAgICAgIG1pbkNvbnRhY3QuVXBkYXRlKHRoaXMubV9jb250YWN0TWFuYWdlci5tX2NvbnRhY3RMaXN0ZW5lcik7XG4gICAgICBtaW5Db250YWN0Lm1fZmxhZ3MgJj0gfmIyQ29udGFjdC5lX3RvaUZsYWc7XG4gICAgICBpZiAobWluQ29udGFjdC5Jc1NlbnNvcigpID09PSB0cnVlIHx8IG1pbkNvbnRhY3QuSXNFbmFibGVkKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJBLm1fc3dlZXAuU2V0KGIyV29ybGQuc19iYWNrdXBBKTtcbiAgICAgICAgYkIubV9zd2VlcC5TZXQoYjJXb3JsZC5zX2JhY2t1cEIpO1xuICAgICAgICBiQS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChtaW5Db250YWN0LklzVG91Y2hpbmcoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzZWVkID0gYkE7XG4gICAgICBpZiAoc2VlZC5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgICBzZWVkID0gYkI7XG4gICAgICB9XG4gICAgICBpc2xhbmQuQ2xlYXIoKTtcbiAgICAgIHF1ZXVlU3RhcnQgPSAwO1xuICAgICAgcXVldWVTaXplID0gMDtcbiAgICAgIHF1ZXVlW3F1ZXVlU3RhcnQgKyBxdWV1ZVNpemUrK10gPSBzZWVkO1xuICAgICAgc2VlZC5tX2ZsYWdzIHw9IGIyQm9keS5lX2lzbGFuZEZsYWc7XG4gICAgICB3aGlsZSAocXVldWVTaXplID4gMCkge1xuICAgICAgICBiID0gcXVldWVbcXVldWVTdGFydCsrXTtcbiAgICAgICAgLS1xdWV1ZVNpemU7XG4gICAgICAgIGlzbGFuZC5BZGRCb2R5KGIpO1xuICAgICAgICBpZiAoYi5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYi5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNFZGdlID0gYi5tX2NvbnRhY3RMaXN0O1xuICAgICAgICB3aGlsZSAoY0VkZ2UpIHtcbiAgICAgICAgICBpZiAoaXNsYW5kLm1fY29udGFjdENvdW50ID09PSBpc2xhbmQubV9jb250YWN0Q2FwYWNpdHkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY0VkZ2UuY29udGFjdC5tX2ZsYWdzICYgYjJDb250YWN0LmVfaXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjRWRnZS5jb250YWN0LklzU2Vuc29yKCkgPT09IHRydWUgfHwgY0VkZ2UuY29udGFjdC5Jc0VuYWJsZWQoKSA9PT0gZmFsc2UgfHwgY0VkZ2UuY29udGFjdC5Jc1RvdWNoaW5nKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNsYW5kLkFkZENvbnRhY3QoY0VkZ2UuY29udGFjdCk7XG4gICAgICAgICAgY0VkZ2UuY29udGFjdC5tX2ZsYWdzIHw9IGIyQ29udGFjdC5lX2lzbGFuZEZsYWc7XG4gICAgICAgICAgb3RoZXIgPSBjRWRnZS5vdGhlcjtcbiAgICAgICAgICBpZiAob3RoZXIubV9mbGFncyAmIGIyQm9keS5lX2lzbGFuZEZsYWcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3RoZXIuR2V0VHlwZSgpICE9PSBiMkJvZHkuYjJfc3RhdGljQm9keSkge1xuICAgICAgICAgICAgb3RoZXIuQWR2YW5jZShtaW5UT0kpO1xuICAgICAgICAgICAgb3RoZXIuU2V0QXdha2UodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHF1ZXVlW3F1ZXVlU3RhcnQgKyBxdWV1ZVNpemVdID0gb3RoZXI7XG4gICAgICAgICAgKytxdWV1ZVNpemU7XG4gICAgICAgICAgb3RoZXIubV9mbGFncyB8PSBiMkJvZHkuZV9pc2xhbmRGbGFnO1xuICAgICAgICAgIGNFZGdlID0gY0VkZ2UubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBqRWRnZSA9IGIubV9qb2ludExpc3Q7XG4gICAgICAgIHdoaWxlIChqRWRnZSkge1xuICAgICAgICAgIGlmIChpc2xhbmQubV9qb2ludENvdW50ID09PSBpc2xhbmQubV9qb2ludENhcGFjaXR5KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGpFZGdlLmpvaW50Lm1faXNsYW5kRmxhZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIG90aGVyID0gakVkZ2Uub3RoZXI7XG4gICAgICAgICAgaWYgKG90aGVyLklzQWN0aXZlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNsYW5kLkFkZEpvaW50KGpFZGdlLmpvaW50KTtcbiAgICAgICAgICBqRWRnZS5qb2ludC5tX2lzbGFuZEZsYWcgPSB0cnVlO1xuICAgICAgICAgIGlmIChvdGhlci5tX2ZsYWdzICYgYjJCb2R5LmVfaXNsYW5kRmxhZykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvdGhlci5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9zdGF0aWNCb2R5KSB7XG4gICAgICAgICAgICBvdGhlci5BZHZhbmNlKG1pblRPSSk7XG4gICAgICAgICAgICBvdGhlci5TZXRBd2FrZSh0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcXVldWVbcXVldWVTdGFydCArIHF1ZXVlU2l6ZV0gPSBvdGhlcjtcbiAgICAgICAgICArK3F1ZXVlU2l6ZTtcbiAgICAgICAgICBvdGhlci5tX2ZsYWdzIHw9IGIyQm9keS5lX2lzbGFuZEZsYWc7XG4gICAgICAgICAgakVkZ2UgPSBqRWRnZS5uZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdWJTdGVwID0gYjJXb3JsZC5zX3RpbWVzdGVwO1xuICAgICAgc3ViU3RlcC53YXJtU3RhcnRpbmcgPSBmYWxzZTtcbiAgICAgIHN1YlN0ZXAuZHQgPSAoMS4wIC0gbWluVE9JKSAqIHN0ZXAuZHQ7XG4gICAgICBzdWJTdGVwLmludl9kdCA9IDEuMCAvIHN1YlN0ZXAuZHQ7XG4gICAgICBzdWJTdGVwLmR0UmF0aW8gPSAwLjA7XG4gICAgICBzdWJTdGVwLnZlbG9jaXR5SXRlcmF0aW9ucyA9IHN0ZXAudmVsb2NpdHlJdGVyYXRpb25zO1xuICAgICAgc3ViU3RlcC5wb3NpdGlvbkl0ZXJhdGlvbnMgPSBzdGVwLnBvc2l0aW9uSXRlcmF0aW9ucztcbiAgICAgIGlzbGFuZC5Tb2x2ZVRPSShzdWJTdGVwKTtcbiAgICAgIGkgPSAwO1xuICAgICAgaSA9IDA7XG4gICAgICB3aGlsZSAoaSA8IGlzbGFuZC5tX2JvZHlDb3VudCkge1xuICAgICAgICBiID0gaXNsYW5kLm1fYm9kaWVzW2ldO1xuICAgICAgICBiLm1fZmxhZ3MgJj0gfmIyQm9keS5lX2lzbGFuZEZsYWc7XG4gICAgICAgIGlmIChiLklzQXdha2UoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYi5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGIuU3luY2hyb25pemVGaXh0dXJlcygpO1xuICAgICAgICBjRWRnZSA9IGIubV9jb250YWN0TGlzdDtcbiAgICAgICAgd2hpbGUgKGNFZGdlKSB7XG4gICAgICAgICAgY0VkZ2UuY29udGFjdC5tX2ZsYWdzICY9IH5iMkNvbnRhY3QuZV90b2lGbGFnO1xuICAgICAgICAgIGNFZGdlID0gY0VkZ2UubmV4dDtcbiAgICAgICAgfVxuICAgICAgICArK2k7XG4gICAgICB9XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgaXNsYW5kLm1fY29udGFjdENvdW50KSB7XG4gICAgICAgIGMgPSBpc2xhbmQubV9jb250YWN0c1tpXTtcbiAgICAgICAgYy5tX2ZsYWdzICY9IH4oYjJDb250YWN0LmVfdG9pRmxhZyB8IGIyQ29udGFjdC5lX2lzbGFuZEZsYWcpO1xuICAgICAgICArK2k7XG4gICAgICB9XG4gICAgICBpID0gMDtcbiAgICAgIHdoaWxlIChpIDwgaXNsYW5kLm1fam9pbnRDb3VudCkge1xuICAgICAgICBqID0gaXNsYW5kLm1fam9pbnRzW2ldO1xuICAgICAgICBqLm1faXNsYW5kRmxhZyA9IGZhbHNlO1xuICAgICAgICArK2k7XG4gICAgICB9XG4gICAgICB0aGlzLm1fY29udGFjdE1hbmFnZXIuRmluZE5ld0NvbnRhY3RzKCk7XG4gICAgfVxuICB9O1xuXG4gIGIyV29ybGQucHJvdG90eXBlLkRyYXdKb2ludCA9IGZ1bmN0aW9uKGpvaW50KSB7XG4gICAgdmFyIGIxLCBiMiwgY29sb3IsIHAxLCBwMiwgcHVsbGV5LCBzMSwgczIsIHgxLCB4MiwgeGYxLCB4ZjI7XG4gICAgYjEgPSBqb2ludC5HZXRCb2R5QSgpO1xuICAgIGIyID0gam9pbnQuR2V0Qm9keUIoKTtcbiAgICB4ZjEgPSBiMS5tX3hmO1xuICAgIHhmMiA9IGIyLm1feGY7XG4gICAgeDEgPSB4ZjEucG9zaXRpb247XG4gICAgeDIgPSB4ZjIucG9zaXRpb247XG4gICAgcDEgPSBqb2ludC5HZXRBbmNob3JBKCk7XG4gICAgcDIgPSBqb2ludC5HZXRBbmNob3JCKCk7XG4gICAgY29sb3IgPSBiMldvcmxkLnNfam9pbnRDb2xvcjtcbiAgICBzd2l0Y2ggKGpvaW50Lm1fdHlwZSkge1xuICAgICAgY2FzZSBiMkpvaW50LmVfZGlzdGFuY2VKb2ludDpcbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudChwMSwgcDIsIGNvbG9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIySm9pbnQuZV9wdWxsZXlKb2ludDpcbiAgICAgICAgcHVsbGV5ID0gKGpvaW50IGluc3RhbmNlb2YgYjJQdWxsZXlKb2ludCA/IGpvaW50IDogbnVsbCk7XG4gICAgICAgIHMxID0gcHVsbGV5LkdldEdyb3VuZEFuY2hvckEoKTtcbiAgICAgICAgczIgPSBwdWxsZXkuR2V0R3JvdW5kQW5jaG9yQigpO1xuICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdTZWdtZW50KHMxLCBwMSwgY29sb3IpO1xuICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdTZWdtZW50KHMyLCBwMiwgY29sb3IpO1xuICAgICAgICB0aGlzLm1fZGVidWdEcmF3LkRyYXdTZWdtZW50KHMxLCBzMiwgY29sb3IpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgYjJKb2ludC5lX21vdXNlSm9pbnQ6XG4gICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQocDEsIHAyLCBjb2xvcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGIxICE9PSB0aGlzLm1fZ3JvdW5kQm9keSkge1xuICAgICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQoeDEsIHAxLCBjb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudChwMSwgcDIsIGNvbG9yKTtcbiAgICAgICAgaWYgKGIyICE9PSB0aGlzLm1fZ3JvdW5kQm9keSkge1xuICAgICAgICAgIHRoaXMubV9kZWJ1Z0RyYXcuRHJhd1NlZ21lbnQoeDIsIHAyLCBjb2xvcik7XG4gICAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgYjJXb3JsZC5wcm90b3R5cGUuRHJhd1NoYXBlID0gZnVuY3Rpb24oc2hhcGUsIHhmLCBjb2xvcikge1xuICAgIHZhciBheGlzLCBjZW50ZXIsIGNpcmNsZSwgZWRnZSwgaSwgbG9jYWxWZXJ0aWNlcywgcG9seSwgcmFkaXVzLCB2ZXJ0ZXhDb3VudCwgdmVydGljZXM7XG4gICAgc3dpdGNoIChzaGFwZS5tX3R5cGUpIHtcbiAgICAgIGNhc2UgYjJTaGFwZS5lX2NpcmNsZVNoYXBlOlxuICAgICAgICBjaXJjbGUgPSAoc2hhcGUgaW5zdGFuY2VvZiBiMkNpcmNsZVNoYXBlID8gc2hhcGUgOiBudWxsKTtcbiAgICAgICAgY2VudGVyID0gYjJNYXRoLk11bFgoeGYsIGNpcmNsZS5tX3ApO1xuICAgICAgICByYWRpdXMgPSBjaXJjbGUubV9yYWRpdXM7XG4gICAgICAgIGF4aXMgPSB4Zi5SLmNvbDE7XG4gICAgICAgIHJldHVybiB0aGlzLm1fZGVidWdEcmF3LkRyYXdTb2xpZENpcmNsZShjZW50ZXIsIHJhZGl1cywgYXhpcywgY29sb3IpO1xuICAgICAgY2FzZSBiMlNoYXBlLmVfcG9seWdvblNoYXBlOlxuICAgICAgICBpID0gMDtcbiAgICAgICAgcG9seSA9IChzaGFwZSBpbnN0YW5jZW9mIGIyUG9seWdvblNoYXBlID8gc2hhcGUgOiBudWxsKTtcbiAgICAgICAgdmVydGV4Q291bnQgPSBwYXJzZUludChwb2x5LkdldFZlcnRleENvdW50KCkpO1xuICAgICAgICBsb2NhbFZlcnRpY2VzID0gcG9seS5HZXRWZXJ0aWNlcygpO1xuICAgICAgICB2ZXJ0aWNlcyA9IG5ldyBWZWN0b3IodmVydGV4Q291bnQpO1xuICAgICAgICBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCB2ZXJ0ZXhDb3VudCkge1xuICAgICAgICAgIHZlcnRpY2VzW2ldID0gYjJNYXRoLk11bFgoeGYsIGxvY2FsVmVydGljZXNbaV0pO1xuICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tX2RlYnVnRHJhdy5EcmF3U29saWRQb2x5Z29uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCwgY29sb3IpO1xuICAgICAgY2FzZSBiMlNoYXBlLmVfZWRnZVNoYXBlOlxuICAgICAgICBlZGdlID0gKHNoYXBlIGluc3RhbmNlb2YgYjJFZGdlU2hhcGUgPyBzaGFwZSA6IG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5tX2RlYnVnRHJhdy5EcmF3U2VnbWVudChiMk1hdGguTXVsWCh4ZiwgZWRnZS5HZXRWZXJ0ZXgxKCkpLCBiMk1hdGguTXVsWCh4ZiwgZWRnZS5HZXRWZXJ0ZXgyKCkpLCBjb2xvcik7XG4gICAgfVxuICB9O1xuXG4gIGIyV29ybGQuc190aW1lc3RlcDIgPSBuZXcgYjJUaW1lU3RlcCgpO1xuXG4gIGIyV29ybGQuc194ZiA9IG5ldyBiMlRyYW5zZm9ybSgpO1xuXG4gIGIyV29ybGQuc19iYWNrdXBBID0gbmV3IGIyU3dlZXAoKTtcblxuICBiMldvcmxkLnNfYmFja3VwQiA9IG5ldyBiMlN3ZWVwKCk7XG5cbiAgYjJXb3JsZC5zX3RpbWVzdGVwID0gbmV3IGIyVGltZVN0ZXAoKTtcblxuICBiMldvcmxkLnNfcXVldWUgPSBuZXcgVmVjdG9yKCk7XG5cbiAgYjJXb3JsZC5zX2pvaW50Q29sb3IgPSBuZXcgYjJDb2xvcigwLjUsIDAuOCwgMC44KTtcblxuICBiMldvcmxkLmVfbmV3Rml4dHVyZSA9IDB4MDAwMTtcblxuICBiMldvcmxkLmVfbG9ja2VkID0gMHgwMDAyO1xuXG4gIHJldHVybiBiMldvcmxkO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMldvcmxkLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3QsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Q7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ2lyY2xlQ29udGFjdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyQ2lyY2xlQ29udGFjdCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBiMkNpcmNsZUNvbnRhY3QoKSB7XG4gICAgcmV0dXJuIGIyQ2lyY2xlQ29udGFjdC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIGIyQ2lyY2xlQ29udGFjdC5DcmVhdGUgPSBmdW5jdGlvbihhbGxvY2F0b3IpIHtcbiAgICByZXR1cm4gbmV3IGIyQ2lyY2xlQ29udGFjdCgpO1xuICB9O1xuXG4gIGIyQ2lyY2xlQ29udGFjdC5EZXN0cm95ID0gZnVuY3Rpb24oY29udGFjdCwgYWxsb2NhdG9yKSB7fTtcblxuICBiMkNpcmNsZUNvbnRhY3QucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7XG4gICAgYjJDaXJjbGVDb250YWN0Ll9fc3VwZXJfXy5SZXNldC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJlQik7XG4gIH07XG5cbiAgYjJDaXJjbGVDb250YWN0LnByb3RvdHlwZS5FdmFsdWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiQSwgYkI7XG4gICAgYkEgPSB0aGlzLm1fZml4dHVyZUEuR2V0Qm9keSgpO1xuICAgIGJCID0gdGhpcy5tX2ZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICBiMkNvbGxpc2lvbi5Db2xsaWRlQ2lyY2xlcyh0aGlzLm1fbWFuaWZvbGQsICh0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSBpbnN0YW5jZW9mIGIyQ2lyY2xlU2hhcGUgPyB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSA6IG51bGwpLCBiQS5tX3hmLCAodGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgaW5zdGFuY2VvZiBiMkNpcmNsZVNoYXBlID8gdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgOiBudWxsKSwgYkIubV94Zik7XG4gIH07XG5cbiAgcmV0dXJuIGIyQ2lyY2xlQ29udGFjdDtcblxufSkoYjJDb250YWN0KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDaXJjbGVDb250YWN0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3RFZGdlLCBiMk1hbmlmb2xkLCBiMlNldHRpbmdzLCBiMlRPSUlucHV0LCBiMlRpbWVPZkltcGFjdDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlNldHRpbmdzID0gQm94MkQuQ29tbW9uLmIyU2V0dGluZ3M7XG5cbmIyQ29udGFjdEVkZ2UgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RFZGdlO1xuXG5iMk1hbmlmb2xkID0gQm94MkQuQ29sbGlzaW9uLmIyTWFuaWZvbGQ7XG5cbmIyVGltZU9mSW1wYWN0ID0gQm94MkQuQ29sbGlzaW9uLmIyVGltZU9mSW1wYWN0O1xuXG5iMlRPSUlucHV0ID0gQm94MkQuQ29sbGlzaW9uLmIyVE9JSW5wdXQ7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdCA9IChmdW5jdGlvbigpIHtcbiAgYjJDb250YWN0LmVfc2Vuc29yRmxhZyA9IDB4MDAwMTtcblxuICBiMkNvbnRhY3QuZV9jb250aW51b3VzRmxhZyA9IDB4MDAwMjtcblxuICBiMkNvbnRhY3QuZV9pc2xhbmRGbGFnID0gMHgwMDA0O1xuXG4gIGIyQ29udGFjdC5lX3RvaUZsYWcgPSAweDAwMDg7XG5cbiAgYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnID0gMHgwMDEwO1xuXG4gIGIyQ29udGFjdC5lX2VuYWJsZWRGbGFnID0gMHgwMDIwO1xuXG4gIGIyQ29udGFjdC5lX2ZpbHRlckZsYWcgPSAweDAwNDA7XG5cbiAgYjJDb250YWN0LnNfaW5wdXQgPSBuZXcgYjJUT0lJbnB1dCgpO1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUubV9ub2RlQSA9IG51bGw7XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5tX25vZGVCID0gbnVsbDtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLm1fbWFuaWZvbGQgPSBudWxsO1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUubV9vbGRNYW5pZm9sZCA9IG51bGw7XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5tX2ZpeHR1cmVBID0gbnVsbDtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLm1fZml4dHVyZUIgPSBudWxsO1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUubV90b3VjaGluZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdCgpIHtcbiAgICB0aGlzLm1fbm9kZUEgPSBuZXcgYjJDb250YWN0RWRnZSgpO1xuICAgIHRoaXMubV9ub2RlQiA9IG5ldyBiMkNvbnRhY3RFZGdlKCk7XG4gICAgdGhpcy5tX21hbmlmb2xkID0gbmV3IGIyTWFuaWZvbGQoKTtcbiAgICB0aGlzLm1fb2xkTWFuaWZvbGQgPSBuZXcgYjJNYW5pZm9sZCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuR2V0TWFuaWZvbGQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21hbmlmb2xkO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuR2V0V29ybGRNYW5pZm9sZCA9IGZ1bmN0aW9uKHdvcmxkTWFuaWZvbGQpIHtcbiAgICB2YXIgYm9keUEsIGJvZHlCLCBzaGFwZUEsIHNoYXBlQjtcbiAgICBib2R5QSA9IHRoaXMubV9maXh0dXJlQS5HZXRCb2R5KCk7XG4gICAgYm9keUIgPSB0aGlzLm1fZml4dHVyZUIuR2V0Qm9keSgpO1xuICAgIHNoYXBlQSA9IHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpO1xuICAgIHNoYXBlQiA9IHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpO1xuICAgIHdvcmxkTWFuaWZvbGQuSW5pdGlhbGl6ZSh0aGlzLm1fbWFuaWZvbGQsIGJvZHlBLkdldFRyYW5zZm9ybSgpLCBzaGFwZUEubV9yYWRpdXMsIGJvZHlCLkdldFRyYW5zZm9ybSgpLCBzaGFwZUIubV9yYWRpdXMpO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuSXNUb3VjaGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5tX2ZsYWdzICYgYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnKSA9PT0gYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuSXNDb250aW51b3VzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV9jb250aW51b3VzRmxhZykgPT09IGIyQ29udGFjdC5lX2NvbnRpbnVvdXNGbGFnO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuU2V0U2Vuc29yID0gZnVuY3Rpb24oc2Vuc29yKSB7XG4gICAgaWYgKHNlbnNvcikge1xuICAgICAgdGhpcy5tX2ZsYWdzIHw9IGIyQ29udGFjdC5lX3NlbnNvckZsYWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJDb250YWN0LmVfc2Vuc29yRmxhZztcbiAgICB9XG4gIH07XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5Jc1NlbnNvciA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAodGhpcy5tX2ZsYWdzICYgYjJDb250YWN0LmVfc2Vuc29yRmxhZykgPT09IGIyQ29udGFjdC5lX3NlbnNvckZsYWc7XG4gIH07XG5cbiAgYjJDb250YWN0LnByb3RvdHlwZS5TZXRFbmFibGVkID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChmbGFnKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfZW5hYmxlZEZsYWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9mbGFncyAmPSB+YjJDb250YWN0LmVfZW5hYmxlZEZsYWc7XG4gICAgfVxuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuSXNFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICh0aGlzLm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV9lbmFibGVkRmxhZykgPT09IGIyQ29udGFjdC5lX2VuYWJsZWRGbGFnO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuR2V0TmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbmV4dDtcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkdldEZpeHR1cmVBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maXh0dXJlQTtcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkdldEZpeHR1cmVCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9maXh0dXJlQjtcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkZsYWdGb3JGaWx0ZXJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfZmlsdGVyRmxhZztcbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7XG4gICAgdmFyIGJvZHlBLCBib2R5QjtcbiAgICBpZiAoZml4dHVyZUEgPT09IHZvaWQgMCkge1xuICAgICAgZml4dHVyZUEgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoZml4dHVyZUIgPT09IHZvaWQgMCkge1xuICAgICAgZml4dHVyZUIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLm1fZmxhZ3MgPSBiMkNvbnRhY3QuZV9lbmFibGVkRmxhZztcbiAgICBpZiAoIWZpeHR1cmVBIHx8ICFmaXh0dXJlQikge1xuICAgICAgdGhpcy5tX2ZpeHR1cmVBID0gbnVsbDtcbiAgICAgIHRoaXMubV9maXh0dXJlQiA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChmaXh0dXJlQS5Jc1NlbnNvcigpIHx8IGZpeHR1cmVCLklzU2Vuc29yKCkpIHtcbiAgICAgIHRoaXMubV9mbGFncyB8PSBiMkNvbnRhY3QuZV9zZW5zb3JGbGFnO1xuICAgIH1cbiAgICBib2R5QSA9IGZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBib2R5QiA9IGZpeHR1cmVCLkdldEJvZHkoKTtcbiAgICBpZiAoYm9keUEuR2V0VHlwZSgpICE9PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkgfHwgYm9keUEuSXNCdWxsZXQoKSB8fCBib2R5Qi5HZXRUeXBlKCkgIT09IGIyQm9keS5iMl9keW5hbWljQm9keSB8fCBib2R5Qi5Jc0J1bGxldCgpKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfY29udGludW91c0ZsYWc7XG4gICAgfVxuICAgIHRoaXMubV9maXh0dXJlQSA9IGZpeHR1cmVBO1xuICAgIHRoaXMubV9maXh0dXJlQiA9IGZpeHR1cmVCO1xuICAgIHRoaXMubV9tYW5pZm9sZC5tX3BvaW50Q291bnQgPSAwO1xuICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbmV4dCA9IG51bGw7XG4gICAgdGhpcy5tX25vZGVBLmNvbnRhY3QgPSBudWxsO1xuICAgIHRoaXMubV9ub2RlQS5wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbm9kZUEubmV4dCA9IG51bGw7XG4gICAgdGhpcy5tX25vZGVBLm90aGVyID0gbnVsbDtcbiAgICB0aGlzLm1fbm9kZUIuY29udGFjdCA9IG51bGw7XG4gICAgdGhpcy5tX25vZGVCLnByZXYgPSBudWxsO1xuICAgIHRoaXMubV9ub2RlQi5uZXh0ID0gbnVsbDtcbiAgICB0aGlzLm1fbm9kZUIub3RoZXIgPSBudWxsO1xuICB9O1xuXG4gIGIyQ29udGFjdC5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB2YXIgYWFiYk92ZXJsYXAsIGJvZHlBLCBib2R5QiwgaSwgaWQyLCBqLCBtcDEsIG1wMiwgc2hhcGVBLCBzaGFwZUIsIHRNYW5pZm9sZCwgdG91Y2hpbmcsIHdhc1RvdWNoaW5nLCB4ZkEsIHhmQjtcbiAgICB0TWFuaWZvbGQgPSB0aGlzLm1fb2xkTWFuaWZvbGQ7XG4gICAgdGhpcy5tX29sZE1hbmlmb2xkID0gdGhpcy5tX21hbmlmb2xkO1xuICAgIHRoaXMubV9tYW5pZm9sZCA9IHRNYW5pZm9sZDtcbiAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfZW5hYmxlZEZsYWc7XG4gICAgdG91Y2hpbmcgPSBmYWxzZTtcbiAgICB3YXNUb3VjaGluZyA9ICh0aGlzLm1fZmxhZ3MgJiBiMkNvbnRhY3QuZV90b3VjaGluZ0ZsYWcpID09PSBiMkNvbnRhY3QuZV90b3VjaGluZ0ZsYWc7XG4gICAgYm9keUEgPSB0aGlzLm1fZml4dHVyZUEubV9ib2R5O1xuICAgIGJvZHlCID0gdGhpcy5tX2ZpeHR1cmVCLm1fYm9keTtcbiAgICBhYWJiT3ZlcmxhcCA9IHRoaXMubV9maXh0dXJlQS5tX2FhYmIuVGVzdE92ZXJsYXAodGhpcy5tX2ZpeHR1cmVCLm1fYWFiYik7XG4gICAgaWYgKHRoaXMubV9mbGFncyAmIGIyQ29udGFjdC5lX3NlbnNvckZsYWcpIHtcbiAgICAgIGlmIChhYWJiT3ZlcmxhcCkge1xuICAgICAgICBzaGFwZUEgPSB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKTtcbiAgICAgICAgc2hhcGVCID0gdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCk7XG4gICAgICAgIHhmQSA9IGJvZHlBLkdldFRyYW5zZm9ybSgpO1xuICAgICAgICB4ZkIgPSBib2R5Qi5HZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgdG91Y2hpbmcgPSBiMlNoYXBlLlRlc3RPdmVybGFwKHNoYXBlQSwgeGZBLCBzaGFwZUIsIHhmQik7XG4gICAgICB9XG4gICAgICB0aGlzLm1fbWFuaWZvbGQubV9wb2ludENvdW50ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGJvZHlBLkdldFR5cGUoKSAhPT0gYjJCb2R5LmIyX2R5bmFtaWNCb2R5IHx8IGJvZHlBLklzQnVsbGV0KCkgfHwgYm9keUIuR2V0VHlwZSgpICE9PSBiMkJvZHkuYjJfZHluYW1pY0JvZHkgfHwgYm9keUIuSXNCdWxsZXQoKSkge1xuICAgICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfY29udGludW91c0ZsYWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyQ29udGFjdC5lX2NvbnRpbnVvdXNGbGFnO1xuICAgICAgfVxuICAgICAgaWYgKGFhYmJPdmVybGFwKSB7XG4gICAgICAgIHRoaXMuRXZhbHVhdGUoKTtcbiAgICAgICAgdG91Y2hpbmcgPSB0aGlzLm1fbWFuaWZvbGQubV9wb2ludENvdW50ID4gMDtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgdGhpcy5tX21hbmlmb2xkLm1fcG9pbnRDb3VudCkge1xuICAgICAgICAgIG1wMiA9IHRoaXMubV9tYW5pZm9sZC5tX3BvaW50c1tpXTtcbiAgICAgICAgICBtcDIubV9ub3JtYWxJbXB1bHNlID0gMC4wO1xuICAgICAgICAgIG1wMi5tX3RhbmdlbnRJbXB1bHNlID0gMC4wO1xuICAgICAgICAgIGlkMiA9IG1wMi5tX2lkO1xuICAgICAgICAgIGogPSAwO1xuICAgICAgICAgIHdoaWxlIChqIDwgdGhpcy5tX29sZE1hbmlmb2xkLm1fcG9pbnRDb3VudCkge1xuICAgICAgICAgICAgbXAxID0gdGhpcy5tX29sZE1hbmlmb2xkLm1fcG9pbnRzW2pdO1xuICAgICAgICAgICAgaWYgKG1wMS5tX2lkLmtleSA9PT0gaWQyLmtleSkge1xuICAgICAgICAgICAgICBtcDIubV9ub3JtYWxJbXB1bHNlID0gbXAxLm1fbm9ybWFsSW1wdWxzZTtcbiAgICAgICAgICAgICAgbXAyLm1fdGFuZ2VudEltcHVsc2UgPSBtcDEubV90YW5nZW50SW1wdWxzZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2o7XG4gICAgICAgICAgfVxuICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX21hbmlmb2xkLm1fcG9pbnRDb3VudCA9IDA7XG4gICAgICB9XG4gICAgICBpZiAodG91Y2hpbmcgIT09IHdhc1RvdWNoaW5nKSB7XG4gICAgICAgIGJvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgICAgICBib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRvdWNoaW5nKSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgfD0gYjJDb250YWN0LmVfdG91Y2hpbmdGbGFnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fZmxhZ3MgJj0gfmIyQ29udGFjdC5lX3RvdWNoaW5nRmxhZztcbiAgICB9XG4gICAgaWYgKHdhc1RvdWNoaW5nID09PSBmYWxzZSAmJiB0b3VjaGluZyA9PT0gdHJ1ZSkge1xuICAgICAgbGlzdGVuZXIuQmVnaW5Db250YWN0KHRoaXMpO1xuICAgIH1cbiAgICBpZiAod2FzVG91Y2hpbmcgPT09IHRydWUgJiYgdG91Y2hpbmcgPT09IGZhbHNlKSB7XG4gICAgICBsaXN0ZW5lci5FbmRDb250YWN0KHRoaXMpO1xuICAgIH1cbiAgICBpZiAoKHRoaXMubV9mbGFncyAmIGIyQ29udGFjdC5lX3NlbnNvckZsYWcpID09PSAwKSB7XG4gICAgICBsaXN0ZW5lci5QcmVTb2x2ZSh0aGlzLCB0aGlzLm1fb2xkTWFuaWZvbGQpO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkV2YWx1YXRlID0gZnVuY3Rpb24oKSB7fTtcblxuICBiMkNvbnRhY3QucHJvdG90eXBlLkNvbXB1dGVUT0kgPSBmdW5jdGlvbihzd2VlcEEsIHN3ZWVwQikge1xuICAgIGIyQ29udGFjdC5zX2lucHV0LnByb3h5QS5TZXQodGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkpO1xuICAgIGIyQ29udGFjdC5zX2lucHV0LnByb3h5Qi5TZXQodGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkpO1xuICAgIGIyQ29udGFjdC5zX2lucHV0LnN3ZWVwQSA9IHN3ZWVwQTtcbiAgICBiMkNvbnRhY3Quc19pbnB1dC5zd2VlcEIgPSBzd2VlcEI7XG4gICAgYjJDb250YWN0LnNfaW5wdXQudG9sZXJhbmNlID0gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wO1xuICAgIHJldHVybiBiMlRpbWVPZkltcGFjdC5UaW1lT2ZJbXBhY3QoYjJDb250YWN0LnNfaW5wdXQpO1xuICB9O1xuXG4gIHJldHVybiBiMkNvbnRhY3Q7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0RWRnZSwgYjJNYXQyMiwgYjJTZXR0aW5ncywgYjJWZWMyO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyU2V0dGluZ3MgPSBCb3gyRC5Db21tb24uYjJTZXR0aW5ncztcblxuYjJDb250YWN0RWRnZSA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdENvbnN0cmFpbnRQb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMk1hdDIyID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXQyMjtcblxuQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Q29uc3RyYWludCA9IChmdW5jdGlvbigpIHtcbiAgYjJDb250YWN0Q29uc3RyYWludC5wcm90b3R5cGUubG9jYWxQbGFuZU5vcm1hbCA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludC5wcm90b3R5cGUubG9jYWxQb2ludCA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludC5wcm90b3R5cGUubm9ybWFsID0gbnVsbDtcblxuICBiMkNvbnRhY3RDb25zdHJhaW50LnByb3RvdHlwZS5ub3JtYWxNYXNzID0gbnVsbDtcblxuICBiMkNvbnRhY3RDb25zdHJhaW50LnByb3RvdHlwZS5LID0gbnVsbDtcblxuICBiMkNvbnRhY3RDb25zdHJhaW50LnByb3RvdHlwZS5wb2ludHMgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdENvbnN0cmFpbnQoKSB7XG4gICAgdmFyIGk7XG4gICAgdGhpcy5sb2NhbFBsYW5lTm9ybWFsID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubG9jYWxQb2ludCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm5vcm1hbCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm5vcm1hbE1hc3MgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMuSyA9IG5ldyBiMk1hdDIyKCk7XG4gICAgdGhpcy5wb2ludHMgPSBuZXcgVmVjdG9yKGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYjJTZXR0aW5ncy5iMl9tYXhNYW5pZm9sZFBvaW50cykge1xuICAgICAgdGhpcy5wb2ludHNbaV0gPSBuZXcgYjJDb250YWN0Q29uc3RyYWludFBvaW50KCk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkNvbnRhY3RDb25zdHJhaW50O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RDb25zdHJhaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RDb25zdHJhaW50UG9pbnQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdENvbnN0cmFpbnRQb2ludC5wcm90b3R5cGUubG9jYWxQb2ludCA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludFBvaW50LnByb3RvdHlwZS5yQSA9IG51bGw7XG5cbiAgYjJDb250YWN0Q29uc3RyYWludFBvaW50LnByb3RvdHlwZS5yQiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJDb250YWN0Q29uc3RyYWludFBvaW50KCkge1xuICAgIHRoaXMubG9jYWxQb2ludCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnJBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMuckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIGIyQ29udGFjdENvbnN0cmFpbnRQb2ludDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0Q29uc3RyYWludFBvaW50LmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyQ29udGFjdEVkZ2UgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyQ29udGFjdEVkZ2UoKSB7fVxuXG4gIHJldHVybiBiMkNvbnRhY3RFZGdlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRhY3RFZGdlLmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3IsIGIyQ2lyY2xlQ29udGFjdCwgYjJDb250YWN0UmVnaXN0ZXIsIGIyRWRnZUFuZENpcmNsZUNvbnRhY3QsIGIyUG9seUFuZENpcmNsZUNvbnRhY3QsIGIyUG9seUFuZEVkZ2VDb250YWN0LCBiMlBvbHlnb25Db250YWN0LCBiMlNoYXBlO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cblZlY3RvciA9IEJveDJELlZlY3RvcjtcblxuYjJTaGFwZSA9IEJveDJELkNvbGxpc2lvbi5TaGFwZXMuYjJTaGFwZTtcblxuYjJDb250YWN0UmVnaXN0ZXIgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RSZWdpc3RlcjtcblxuYjJDaXJjbGVDb250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDaXJjbGVDb250YWN0O1xuXG5iMlBvbHlBbmRDaXJjbGVDb250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQb2x5QW5kQ2lyY2xlQ29udGFjdDtcblxuYjJQb2x5Z29uQ29udGFjdCA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seWdvbkNvbnRhY3Q7XG5cbmIyRWRnZUFuZENpcmNsZUNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkVkZ2VBbmRDaXJjbGVDb250YWN0O1xuXG5iMlBvbHlBbmRFZGdlQ29udGFjdCA9IEJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seUFuZEVkZ2VDb250YWN0O1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RGYWN0b3J5ID0gKGZ1bmN0aW9uKCkge1xuICBiMkNvbnRhY3RGYWN0b3J5LnByb3RvdHlwZS5tX2FsbG9jYXRvciA9IG51bGw7XG5cbiAgYjJDb250YWN0RmFjdG9yeS5wcm90b3R5cGUubV9yZWdpc3RlcnMgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdEZhY3RvcnkoYWxsb2NhdG9yKSB7XG4gICAgdGhpcy5tX2FsbG9jYXRvciA9IGFsbG9jYXRvcjtcbiAgICB0aGlzLkluaXRpYWxpemVSZWdpc3RlcnMoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkNvbnRhY3RGYWN0b3J5LnByb3RvdHlwZS5BZGRUeXBlID0gZnVuY3Rpb24oY3JlYXRlRmNuLCBkZXN0cm95RmNuLCB0eXBlMSwgdHlwZTIpIHtcbiAgICBpZiAodHlwZTEgPT09IHZvaWQgMCkge1xuICAgICAgdHlwZTEgPSAwO1xuICAgIH1cbiAgICBpZiAodHlwZTIgPT09IHZvaWQgMCkge1xuICAgICAgdHlwZTIgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fcmVnaXN0ZXJzW3R5cGUxXVt0eXBlMl0uY3JlYXRlRmNuID0gY3JlYXRlRmNuO1xuICAgIHRoaXMubV9yZWdpc3RlcnNbdHlwZTFdW3R5cGUyXS5kZXN0cm95RmNuID0gZGVzdHJveUZjbjtcbiAgICB0aGlzLm1fcmVnaXN0ZXJzW3R5cGUxXVt0eXBlMl0ucHJpbWFyeSA9IHRydWU7XG4gICAgaWYgKHR5cGUxICE9PSB0eXBlMikge1xuICAgICAgdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMl1bdHlwZTFdLmNyZWF0ZUZjbiA9IGNyZWF0ZUZjbjtcbiAgICAgIHRoaXMubV9yZWdpc3RlcnNbdHlwZTJdW3R5cGUxXS5kZXN0cm95RmNuID0gZGVzdHJveUZjbjtcbiAgICAgIHRoaXMubV9yZWdpc3RlcnNbdHlwZTJdW3R5cGUxXS5wcmltYXJ5ID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGIyQ29udGFjdEZhY3RvcnkucHJvdG90eXBlLkluaXRpYWxpemVSZWdpc3RlcnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSwgajtcbiAgICB0aGlzLm1fcmVnaXN0ZXJzID0gbmV3IFZlY3RvcihiMlNoYXBlLmVfc2hhcGVUeXBlQ291bnQpO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYjJTaGFwZS5lX3NoYXBlVHlwZUNvdW50KSB7XG4gICAgICB0aGlzLm1fcmVnaXN0ZXJzW2ldID0gbmV3IFZlY3RvcihiMlNoYXBlLmVfc2hhcGVUeXBlQ291bnQpO1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IGIyU2hhcGUuZV9zaGFwZVR5cGVDb3VudCkge1xuICAgICAgICB0aGlzLm1fcmVnaXN0ZXJzW2ldW2pdID0gbmV3IGIyQ29udGFjdFJlZ2lzdGVyKCk7XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG4gICAgdGhpcy5BZGRUeXBlKGIyQ2lyY2xlQ29udGFjdC5DcmVhdGUsIGIyQ2lyY2xlQ29udGFjdC5EZXN0cm95LCBiMlNoYXBlLmVfY2lyY2xlU2hhcGUsIGIyU2hhcGUuZV9jaXJjbGVTaGFwZSk7XG4gICAgdGhpcy5BZGRUeXBlKGIyUG9seUFuZENpcmNsZUNvbnRhY3QuQ3JlYXRlLCBiMlBvbHlBbmRDaXJjbGVDb250YWN0LkRlc3Ryb3ksIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUsIGIyU2hhcGUuZV9jaXJjbGVTaGFwZSk7XG4gICAgdGhpcy5BZGRUeXBlKGIyUG9seWdvbkNvbnRhY3QuQ3JlYXRlLCBiMlBvbHlnb25Db250YWN0LkRlc3Ryb3ksIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUsIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUpO1xuICAgIHRoaXMuQWRkVHlwZShiMkVkZ2VBbmRDaXJjbGVDb250YWN0LkNyZWF0ZSwgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5EZXN0cm95LCBiMlNoYXBlLmVfZWRnZVNoYXBlLCBiMlNoYXBlLmVfY2lyY2xlU2hhcGUpO1xuICAgIHRoaXMuQWRkVHlwZShiMlBvbHlBbmRFZGdlQ29udGFjdC5DcmVhdGUsIGIyUG9seUFuZEVkZ2VDb250YWN0LkRlc3Ryb3ksIGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUsIGIyU2hhcGUuZV9lZGdlU2hhcGUpO1xuICB9O1xuXG4gIGIyQ29udGFjdEZhY3RvcnkucHJvdG90eXBlLkNyZWF0ZSA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikge1xuICAgIHZhciBjLCBjcmVhdGVGY24sIHJlZywgdHlwZTEsIHR5cGUyO1xuICAgIHR5cGUxID0gcGFyc2VJbnQoZml4dHVyZUEuR2V0VHlwZSgpKTtcbiAgICB0eXBlMiA9IHBhcnNlSW50KGZpeHR1cmVCLkdldFR5cGUoKSk7XG4gICAgcmVnID0gdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMV1bdHlwZTJdO1xuICAgIGMgPSB2b2lkIDA7XG4gICAgaWYgKHJlZy5wb29sKSB7XG4gICAgICBjID0gcmVnLnBvb2w7XG4gICAgICByZWcucG9vbCA9IGMubV9uZXh0O1xuICAgICAgcmVnLnBvb2xDb3VudC0tO1xuICAgICAgYy5SZXNldChmaXh0dXJlQSwgZml4dHVyZUIpO1xuICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICAgIGNyZWF0ZUZjbiA9IHJlZy5jcmVhdGVGY247XG4gICAgaWYgKGNyZWF0ZUZjbiAhPSBudWxsKSB7XG4gICAgICBpZiAocmVnLnByaW1hcnkpIHtcbiAgICAgICAgYyA9IGNyZWF0ZUZjbih0aGlzLm1fYWxsb2NhdG9yKTtcbiAgICAgICAgYy5SZXNldChmaXh0dXJlQSwgZml4dHVyZUIpO1xuICAgICAgICByZXR1cm4gYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGMgPSBjcmVhdGVGY24odGhpcy5tX2FsbG9jYXRvcik7XG4gICAgICAgIGMuUmVzZXQoZml4dHVyZUIsIGZpeHR1cmVBKTtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3RGYWN0b3J5LnByb3RvdHlwZS5EZXN0cm95ID0gZnVuY3Rpb24oY29udGFjdCkge1xuICAgIHZhciBkZXN0cm95RmNuLCByZWcsIHR5cGUxLCB0eXBlMjtcbiAgICBpZiAoY29udGFjdC5tX21hbmlmb2xkLm1fcG9pbnRDb3VudCA+IDApIHtcbiAgICAgIGNvbnRhY3QubV9maXh0dXJlQS5tX2JvZHkuU2V0QXdha2UodHJ1ZSk7XG4gICAgICBjb250YWN0Lm1fZml4dHVyZUIubV9ib2R5LlNldEF3YWtlKHRydWUpO1xuICAgIH1cbiAgICB0eXBlMSA9IHBhcnNlSW50KGNvbnRhY3QubV9maXh0dXJlQS5HZXRUeXBlKCkpO1xuICAgIHR5cGUyID0gcGFyc2VJbnQoY29udGFjdC5tX2ZpeHR1cmVCLkdldFR5cGUoKSk7XG4gICAgcmVnID0gdGhpcy5tX3JlZ2lzdGVyc1t0eXBlMV1bdHlwZTJdO1xuICAgIGlmICh0cnVlKSB7XG4gICAgICByZWcucG9vbENvdW50Kys7XG4gICAgICBjb250YWN0Lm1fbmV4dCA9IHJlZy5wb29sO1xuICAgICAgcmVnLnBvb2wgPSBjb250YWN0O1xuICAgIH1cbiAgICBkZXN0cm95RmNuID0gcmVnLmRlc3Ryb3lGY247XG4gICAgZGVzdHJveUZjbihjb250YWN0LCB0aGlzLm1fYWxsb2NhdG9yKTtcbiAgfTtcblxuICByZXR1cm4gYjJDb250YWN0RmFjdG9yeTtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0RmFjdG9yeS5qcy5tYXBcbiIsInZhciBCb3gyRDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RSZWdpc3RlciA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJDb250YWN0UmVnaXN0ZXIoKSB7fVxuXG4gIHJldHVybiBiMkNvbnRhY3RSZWdpc3RlcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0UmVnaXN0ZXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udGFjdElELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250YWN0SUQgPSBCb3gyRC5Db2xsaXNpb24uYjJDb250YWN0SUQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0UmVzdWx0ID0gKGZ1bmN0aW9uKCkge1xuICBiMkNvbnRhY3RSZXN1bHQucHJvdG90eXBlLnBvc2l0aW9uID0gbnVsbDtcblxuICBiMkNvbnRhY3RSZXN1bHQucHJvdG90eXBlLm5vcm1hbCA9IG51bGw7XG5cbiAgYjJDb250YWN0UmVzdWx0LnByb3RvdHlwZS5pZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJDb250YWN0UmVzdWx0KCkge1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5pZCA9IG5ldyBiMkNvbnRhY3RJRCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMkNvbnRhY3RSZXN1bHQ7XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQ29udGFjdFJlc3VsdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgVmVjdG9yLCBiMkNvbnRhY3RDb25zdHJhaW50LCBiMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQsIGIyVGltZVN0ZXAsIGIyV29ybGRNYW5pZm9sZDtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyVGltZVN0ZXAgPSBCb3gyRC5EeW5hbWljcy5iMlRpbWVTdGVwO1xuXG5iMkNvbnRhY3RDb25zdHJhaW50ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0Q29uc3RyYWludDtcblxuYjJXb3JsZE1hbmlmb2xkID0gQm94MkQuQ29sbGlzaW9uLmIyV29ybGRNYW5pZm9sZDtcblxuYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3RTb2x2ZXIgPSAoZnVuY3Rpb24oKSB7XG4gIGIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQgPSBuZXcgYjJXb3JsZE1hbmlmb2xkKCk7XG5cbiAgYjJDb250YWN0U29sdmVyLnNfcHNtID0gbmV3IGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZCgpO1xuXG4gIGIyQ29udGFjdFNvbHZlci5wcm90b3R5cGUubV9zdGVwID0gbnVsbDtcblxuICBiMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLm1fY29uc3RyYWludHMgPSBudWxsO1xuXG4gIGIyQ29udGFjdFNvbHZlci5wcm90b3R5cGUubV9hbGxvY2F0b3IgPSBudWxsO1xuXG4gIGIyQ29udGFjdFNvbHZlci5wcm90b3R5cGUubV9jb25zdHJhaW50Q291bnQgPSAwO1xuXG4gIGZ1bmN0aW9uIGIyQ29udGFjdFNvbHZlcigpIHtcbiAgICB0aGlzLm1fc3RlcCA9IG5ldyBiMlRpbWVTdGVwKCk7XG4gICAgdGhpcy5tX2NvbnN0cmFpbnRzID0gbmV3IFZlY3RvcigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyQ29udGFjdFNvbHZlci5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHN0ZXAsIGNvbnRhY3RzLCBjb250YWN0Q291bnQsIGFsbG9jYXRvcikge1xuICAgIHZhciBib2R5QSwgYm9keUIsIGNjLCBjY3AsIGNjcDEsIGNjcDIsIGNvbnRhY3QsIGNwLCBmaXh0dXJlQSwgZml4dHVyZUIsIGZyaWN0aW9uLCBpLCBpbnZJQSwgaW52SUIsIGludk1hc3NBLCBpbnZNYXNzQiwgaywgazExLCBrMTIsIGsyMiwga0VxdWFsaXplZCwga05vcm1hbCwga1RhbmdlbnQsIGtfbWF4Q29uZGl0aW9uTnVtYmVyLCBtYW5pZm9sZCwgbm9ybWFsWCwgbm9ybWFsWSwgckFYLCByQVksIHJCWCwgckJZLCByYWRpdXNBLCByYWRpdXNCLCByZXN0aXR1dGlvbiwgcm4xQSwgcm4xQiwgcm4yQSwgcm4yQiwgcm5BLCBybkIsIHJ0QSwgcnRCLCBzaGFwZUEsIHNoYXBlQiwgdE1hdCwgdFZlYywgdFgsIHRZLCB0YW5nZW50WCwgdGFuZ2VudFksIHZBWCwgdkFZLCB2QlgsIHZCWSwgdlJlbCwgd0EsIHdCO1xuICAgIGlmIChjb250YWN0Q291bnQgPT09IHZvaWQgMCkge1xuICAgICAgY29udGFjdENvdW50ID0gMDtcbiAgICB9XG4gICAgY29udGFjdCA9IHZvaWQgMDtcbiAgICB0aGlzLm1fc3RlcC5TZXQoc3RlcCk7XG4gICAgdGhpcy5tX2FsbG9jYXRvciA9IGFsbG9jYXRvcjtcbiAgICBpID0gMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdGhpcy5tX2NvbnN0cmFpbnRDb3VudCA9IGNvbnRhY3RDb3VudDtcbiAgICB3aGlsZSAodGhpcy5tX2NvbnN0cmFpbnRzLmxlbmd0aCA8IHRoaXMubV9jb25zdHJhaW50Q291bnQpIHtcbiAgICAgIHRoaXMubV9jb25zdHJhaW50c1t0aGlzLm1fY29uc3RyYWludHMubGVuZ3RoXSA9IG5ldyBiMkNvbnRhY3RDb25zdHJhaW50KCk7XG4gICAgfVxuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgY29udGFjdENvdW50KSB7XG4gICAgICBjb250YWN0ID0gY29udGFjdHNbaV07XG4gICAgICBmaXh0dXJlQSA9IGNvbnRhY3QubV9maXh0dXJlQTtcbiAgICAgIGZpeHR1cmVCID0gY29udGFjdC5tX2ZpeHR1cmVCO1xuICAgICAgc2hhcGVBID0gZml4dHVyZUEubV9zaGFwZTtcbiAgICAgIHNoYXBlQiA9IGZpeHR1cmVCLm1fc2hhcGU7XG4gICAgICByYWRpdXNBID0gc2hhcGVBLm1fcmFkaXVzO1xuICAgICAgcmFkaXVzQiA9IHNoYXBlQi5tX3JhZGl1cztcbiAgICAgIGJvZHlBID0gZml4dHVyZUEubV9ib2R5O1xuICAgICAgYm9keUIgPSBmaXh0dXJlQi5tX2JvZHk7XG4gICAgICBtYW5pZm9sZCA9IGNvbnRhY3QuR2V0TWFuaWZvbGQoKTtcbiAgICAgIGZyaWN0aW9uID0gYjJTZXR0aW5ncy5iMk1peEZyaWN0aW9uKGZpeHR1cmVBLkdldEZyaWN0aW9uKCksIGZpeHR1cmVCLkdldEZyaWN0aW9uKCkpO1xuICAgICAgcmVzdGl0dXRpb24gPSBiMlNldHRpbmdzLmIyTWl4UmVzdGl0dXRpb24oZml4dHVyZUEuR2V0UmVzdGl0dXRpb24oKSwgZml4dHVyZUIuR2V0UmVzdGl0dXRpb24oKSk7XG4gICAgICB2QVggPSBib2R5QS5tX2xpbmVhclZlbG9jaXR5Lng7XG4gICAgICB2QVkgPSBib2R5QS5tX2xpbmVhclZlbG9jaXR5Lnk7XG4gICAgICB2QlggPSBib2R5Qi5tX2xpbmVhclZlbG9jaXR5Lng7XG4gICAgICB2QlkgPSBib2R5Qi5tX2xpbmVhclZlbG9jaXR5Lnk7XG4gICAgICB3QSA9IGJvZHlBLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgICAgd0IgPSBib2R5Qi5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQobWFuaWZvbGQubV9wb2ludENvdW50ID4gMCk7XG4gICAgICBiMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLkluaXRpYWxpemUobWFuaWZvbGQsIGJvZHlBLm1feGYsIHJhZGl1c0EsIGJvZHlCLm1feGYsIHJhZGl1c0IpO1xuICAgICAgbm9ybWFsWCA9IGIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQubV9ub3JtYWwueDtcbiAgICAgIG5vcm1hbFkgPSBiMkNvbnRhY3RTb2x2ZXIuc193b3JsZE1hbmlmb2xkLm1fbm9ybWFsLnk7XG4gICAgICBjYyA9IHRoaXMubV9jb25zdHJhaW50c1tpXTtcbiAgICAgIGNjLmJvZHlBID0gYm9keUE7XG4gICAgICBjYy5ib2R5QiA9IGJvZHlCO1xuICAgICAgY2MubWFuaWZvbGQgPSBtYW5pZm9sZDtcbiAgICAgIGNjLm5vcm1hbC54ID0gbm9ybWFsWDtcbiAgICAgIGNjLm5vcm1hbC55ID0gbm9ybWFsWTtcbiAgICAgIGNjLnBvaW50Q291bnQgPSBtYW5pZm9sZC5tX3BvaW50Q291bnQ7XG4gICAgICBjYy5mcmljdGlvbiA9IGZyaWN0aW9uO1xuICAgICAgY2MucmVzdGl0dXRpb24gPSByZXN0aXR1dGlvbjtcbiAgICAgIGNjLmxvY2FsUGxhbmVOb3JtYWwueCA9IG1hbmlmb2xkLm1fbG9jYWxQbGFuZU5vcm1hbC54O1xuICAgICAgY2MubG9jYWxQbGFuZU5vcm1hbC55ID0gbWFuaWZvbGQubV9sb2NhbFBsYW5lTm9ybWFsLnk7XG4gICAgICBjYy5sb2NhbFBvaW50LnggPSBtYW5pZm9sZC5tX2xvY2FsUG9pbnQueDtcbiAgICAgIGNjLmxvY2FsUG9pbnQueSA9IG1hbmlmb2xkLm1fbG9jYWxQb2ludC55O1xuICAgICAgY2MucmFkaXVzID0gcmFkaXVzQSArIHJhZGl1c0I7XG4gICAgICBjYy50eXBlID0gbWFuaWZvbGQubV90eXBlO1xuICAgICAgayA9IDA7XG4gICAgICB3aGlsZSAoayA8IGNjLnBvaW50Q291bnQpIHtcbiAgICAgICAgY3AgPSBtYW5pZm9sZC5tX3BvaW50c1trXTtcbiAgICAgICAgY2NwID0gY2MucG9pbnRzW2tdO1xuICAgICAgICBjY3Aubm9ybWFsSW1wdWxzZSA9IGNwLm1fbm9ybWFsSW1wdWxzZTtcbiAgICAgICAgY2NwLnRhbmdlbnRJbXB1bHNlID0gY3AubV90YW5nZW50SW1wdWxzZTtcbiAgICAgICAgY2NwLmxvY2FsUG9pbnQuU2V0VihjcC5tX2xvY2FsUG9pbnQpO1xuICAgICAgICByQVggPSBjY3AuckEueCA9IGIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQubV9wb2ludHNba10ueCAtIGJvZHlBLm1fc3dlZXAuYy54O1xuICAgICAgICByQVkgPSBjY3AuckEueSA9IGIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQubV9wb2ludHNba10ueSAtIGJvZHlBLm1fc3dlZXAuYy55O1xuICAgICAgICByQlggPSBjY3AuckIueCA9IGIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQubV9wb2ludHNba10ueCAtIGJvZHlCLm1fc3dlZXAuYy54O1xuICAgICAgICByQlkgPSBjY3AuckIueSA9IGIyQ29udGFjdFNvbHZlci5zX3dvcmxkTWFuaWZvbGQubV9wb2ludHNba10ueSAtIGJvZHlCLm1fc3dlZXAuYy55O1xuICAgICAgICBybkEgPSByQVggKiBub3JtYWxZIC0gckFZICogbm9ybWFsWDtcbiAgICAgICAgcm5CID0gckJYICogbm9ybWFsWSAtIHJCWSAqIG5vcm1hbFg7XG4gICAgICAgIHJuQSAqPSBybkE7XG4gICAgICAgIHJuQiAqPSBybkI7XG4gICAgICAgIGtOb3JtYWwgPSBib2R5QS5tX2ludk1hc3MgKyBib2R5Qi5tX2ludk1hc3MgKyBib2R5QS5tX2ludkkgKiBybkEgKyBib2R5Qi5tX2ludkkgKiBybkI7XG4gICAgICAgIGNjcC5ub3JtYWxNYXNzID0gMS4wIC8ga05vcm1hbDtcbiAgICAgICAga0VxdWFsaXplZCA9IGJvZHlBLm1fbWFzcyAqIGJvZHlBLm1faW52TWFzcyArIGJvZHlCLm1fbWFzcyAqIGJvZHlCLm1faW52TWFzcztcbiAgICAgICAga0VxdWFsaXplZCArPSBib2R5QS5tX21hc3MgKiBib2R5QS5tX2ludkkgKiBybkEgKyBib2R5Qi5tX21hc3MgKiBib2R5Qi5tX2ludkkgKiBybkI7XG4gICAgICAgIGNjcC5lcXVhbGl6ZWRNYXNzID0gMS4wIC8ga0VxdWFsaXplZDtcbiAgICAgICAgdGFuZ2VudFggPSBub3JtYWxZO1xuICAgICAgICB0YW5nZW50WSA9IC1ub3JtYWxYO1xuICAgICAgICBydEEgPSByQVggKiB0YW5nZW50WSAtIHJBWSAqIHRhbmdlbnRYO1xuICAgICAgICBydEIgPSByQlggKiB0YW5nZW50WSAtIHJCWSAqIHRhbmdlbnRYO1xuICAgICAgICBydEEgKj0gcnRBO1xuICAgICAgICBydEIgKj0gcnRCO1xuICAgICAgICBrVGFuZ2VudCA9IGJvZHlBLm1faW52TWFzcyArIGJvZHlCLm1faW52TWFzcyArIGJvZHlBLm1faW52SSAqIHJ0QSArIGJvZHlCLm1faW52SSAqIHJ0QjtcbiAgICAgICAgY2NwLnRhbmdlbnRNYXNzID0gMS4wIC8ga1RhbmdlbnQ7XG4gICAgICAgIGNjcC52ZWxvY2l0eUJpYXMgPSAwLjA7XG4gICAgICAgIHRYID0gdkJYICsgKC13QiAqIHJCWSkgLSB2QVggLSAoLXdBICogckFZKTtcbiAgICAgICAgdFkgPSB2QlkgKyAod0IgKiByQlgpIC0gdkFZIC0gKHdBICogckFYKTtcbiAgICAgICAgdlJlbCA9IGNjLm5vcm1hbC54ICogdFggKyBjYy5ub3JtYWwueSAqIHRZO1xuICAgICAgICBpZiAodlJlbCA8ICgtYjJTZXR0aW5ncy5iMl92ZWxvY2l0eVRocmVzaG9sZCkpIHtcbiAgICAgICAgICBjY3AudmVsb2NpdHlCaWFzICs9IC1jYy5yZXN0aXR1dGlvbiAqIHZSZWw7XG4gICAgICAgIH1cbiAgICAgICAgKytrO1xuICAgICAgfVxuICAgICAgaWYgKGNjLnBvaW50Q291bnQgPT09IDIpIHtcbiAgICAgICAgY2NwMSA9IGNjLnBvaW50c1swXTtcbiAgICAgICAgY2NwMiA9IGNjLnBvaW50c1sxXTtcbiAgICAgICAgaW52TWFzc0EgPSBib2R5QS5tX2ludk1hc3M7XG4gICAgICAgIGludklBID0gYm9keUEubV9pbnZJO1xuICAgICAgICBpbnZNYXNzQiA9IGJvZHlCLm1faW52TWFzcztcbiAgICAgICAgaW52SUIgPSBib2R5Qi5tX2ludkk7XG4gICAgICAgIHJuMUEgPSBjY3AxLnJBLnggKiBub3JtYWxZIC0gY2NwMS5yQS55ICogbm9ybWFsWDtcbiAgICAgICAgcm4xQiA9IGNjcDEuckIueCAqIG5vcm1hbFkgLSBjY3AxLnJCLnkgKiBub3JtYWxYO1xuICAgICAgICBybjJBID0gY2NwMi5yQS54ICogbm9ybWFsWSAtIGNjcDIuckEueSAqIG5vcm1hbFg7XG4gICAgICAgIHJuMkIgPSBjY3AyLnJCLnggKiBub3JtYWxZIC0gY2NwMi5yQi55ICogbm9ybWFsWDtcbiAgICAgICAgazExID0gaW52TWFzc0EgKyBpbnZNYXNzQiArIGludklBICogcm4xQSAqIHJuMUEgKyBpbnZJQiAqIHJuMUIgKiBybjFCO1xuICAgICAgICBrMjIgPSBpbnZNYXNzQSArIGludk1hc3NCICsgaW52SUEgKiBybjJBICogcm4yQSArIGludklCICogcm4yQiAqIHJuMkI7XG4gICAgICAgIGsxMiA9IGludk1hc3NBICsgaW52TWFzc0IgKyBpbnZJQSAqIHJuMUEgKiBybjJBICsgaW52SUIgKiBybjFCICogcm4yQjtcbiAgICAgICAga19tYXhDb25kaXRpb25OdW1iZXIgPSAxMDAuMDtcbiAgICAgICAgaWYgKGsxMSAqIGsxMSA8IGtfbWF4Q29uZGl0aW9uTnVtYmVyICogKGsxMSAqIGsyMiAtIGsxMiAqIGsxMikpIHtcbiAgICAgICAgICBjYy5LLmNvbDEuU2V0KGsxMSwgazEyKTtcbiAgICAgICAgICBjYy5LLmNvbDIuU2V0KGsxMiwgazIyKTtcbiAgICAgICAgICBjYy5LLkdldEludmVyc2UoY2Mubm9ybWFsTWFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2MucG9pbnRDb3VudCA9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICsraTtcbiAgICB9XG4gIH07XG5cbiAgYjJDb250YWN0U29sdmVyLnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgUFgsIFBZLCBib2R5QSwgYm9keUIsIGMsIGNjcCwgY2NwMiwgaSwgaW52SUEsIGludklCLCBpbnZNYXNzQSwgaW52TWFzc0IsIGosIG5vcm1hbFgsIG5vcm1hbFksIHRDb3VudCwgdE1hdCwgdFZlYywgdFZlYzIsIHRYLCB0YW5nZW50WCwgdGFuZ2VudFk7XG4gICAgdFZlYyA9IHZvaWQgMDtcbiAgICB0VmVjMiA9IHZvaWQgMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2NvbnN0cmFpbnRDb3VudCkge1xuICAgICAgYyA9IHRoaXMubV9jb25zdHJhaW50c1tpXTtcbiAgICAgIGJvZHlBID0gYy5ib2R5QTtcbiAgICAgIGJvZHlCID0gYy5ib2R5QjtcbiAgICAgIGludk1hc3NBID0gYm9keUEubV9pbnZNYXNzO1xuICAgICAgaW52SUEgPSBib2R5QS5tX2ludkk7XG4gICAgICBpbnZNYXNzQiA9IGJvZHlCLm1faW52TWFzcztcbiAgICAgIGludklCID0gYm9keUIubV9pbnZJO1xuICAgICAgbm9ybWFsWCA9IGMubm9ybWFsLng7XG4gICAgICBub3JtYWxZID0gYy5ub3JtYWwueTtcbiAgICAgIHRhbmdlbnRYID0gbm9ybWFsWTtcbiAgICAgIHRhbmdlbnRZID0gLW5vcm1hbFg7XG4gICAgICB0WCA9IDA7XG4gICAgICBqID0gMDtcbiAgICAgIHRDb3VudCA9IDA7XG4gICAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgICAgdENvdW50ID0gYy5wb2ludENvdW50O1xuICAgICAgICBqID0gMDtcbiAgICAgICAgd2hpbGUgKGogPCB0Q291bnQpIHtcbiAgICAgICAgICBjY3AgPSBjLnBvaW50c1tqXTtcbiAgICAgICAgICBjY3Aubm9ybWFsSW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICAgICAgY2NwLnRhbmdlbnRJbXB1bHNlICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgICAgICBQWCA9IGNjcC5ub3JtYWxJbXB1bHNlICogbm9ybWFsWCArIGNjcC50YW5nZW50SW1wdWxzZSAqIHRhbmdlbnRYO1xuICAgICAgICAgIFBZID0gY2NwLm5vcm1hbEltcHVsc2UgKiBub3JtYWxZICsgY2NwLnRhbmdlbnRJbXB1bHNlICogdGFuZ2VudFk7XG4gICAgICAgICAgYm9keUEubV9hbmd1bGFyVmVsb2NpdHkgLT0gaW52SUEgKiAoY2NwLnJBLnggKiBQWSAtIGNjcC5yQS55ICogUFgpO1xuICAgICAgICAgIGJvZHlBLm1fbGluZWFyVmVsb2NpdHkueCAtPSBpbnZNYXNzQSAqIFBYO1xuICAgICAgICAgIGJvZHlBLm1fbGluZWFyVmVsb2NpdHkueSAtPSBpbnZNYXNzQSAqIFBZO1xuICAgICAgICAgIGJvZHlCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGludklCICogKGNjcC5yQi54ICogUFkgLSBjY3AuckIueSAqIFBYKTtcbiAgICAgICAgICBib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnggKz0gaW52TWFzc0IgKiBQWDtcbiAgICAgICAgICBib2R5Qi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gaW52TWFzc0IgKiBQWTtcbiAgICAgICAgICArK2o7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRDb3VudCA9IGMucG9pbnRDb3VudDtcbiAgICAgICAgaiA9IDA7XG4gICAgICAgIHdoaWxlIChqIDwgdENvdW50KSB7XG4gICAgICAgICAgY2NwMiA9IGMucG9pbnRzW2pdO1xuICAgICAgICAgIGNjcDIubm9ybWFsSW1wdWxzZSA9IDAuMDtcbiAgICAgICAgICBjY3AyLnRhbmdlbnRJbXB1bHNlID0gMC4wO1xuICAgICAgICAgICsrajtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgKytpO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBQMVgsIFAxWSwgUDJYLCBQMlksIFBYLCBQWSwgYVgsIGFZLCBiWCwgYlksIGJvZHlBLCBib2R5QiwgYywgY2NwLCBjcDEsIGNwMiwgZFgsIGRZLCBkdjFYLCBkdjFZLCBkdjJYLCBkdjJZLCBkdlgsIGR2WSwgZnJpY3Rpb24sIGksIGludklBLCBpbnZJQiwgaW52TWFzc0EsIGludk1hc3NCLCBqLCBrX2Vycm9yVG9sLCBsYW1iZGEsIG1heEZyaWN0aW9uLCBuZXdJbXB1bHNlLCBub3JtYWxYLCBub3JtYWxZLCByQVgsIHJBWSwgckJYLCByQlksIHRDb3VudCwgdE1hdCwgdFZlYywgdFgsIHRhbmdlbnRYLCB0YW5nZW50WSwgdkEsIHZCLCB2biwgdm4xLCB2bjIsIHZ0LCB3QSwgd0IsIHhYLCB4WTtcbiAgICBqID0gMDtcbiAgICBjY3AgPSB2b2lkIDA7XG4gICAgckFYID0gMDtcbiAgICByQVkgPSAwO1xuICAgIHJCWCA9IDA7XG4gICAgckJZID0gMDtcbiAgICBkdlggPSAwO1xuICAgIGR2WSA9IDA7XG4gICAgdm4gPSAwO1xuICAgIHZ0ID0gMDtcbiAgICBsYW1iZGEgPSAwO1xuICAgIG1heEZyaWN0aW9uID0gMDtcbiAgICBuZXdJbXB1bHNlID0gMDtcbiAgICBQWCA9IDA7XG4gICAgUFkgPSAwO1xuICAgIGRYID0gMDtcbiAgICBkWSA9IDA7XG4gICAgUDFYID0gMDtcbiAgICBQMVkgPSAwO1xuICAgIFAyWCA9IDA7XG4gICAgUDJZID0gMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCB0aGlzLm1fY29uc3RyYWludENvdW50KSB7XG4gICAgICBjID0gdGhpcy5tX2NvbnN0cmFpbnRzW2ldO1xuICAgICAgYm9keUEgPSBjLmJvZHlBO1xuICAgICAgYm9keUIgPSBjLmJvZHlCO1xuICAgICAgd0EgPSBib2R5QS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICAgIHdCID0gYm9keUIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgICB2QSA9IGJvZHlBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgICB2QiA9IGJvZHlCLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgICBpbnZNYXNzQSA9IGJvZHlBLm1faW52TWFzcztcbiAgICAgIGludklBID0gYm9keUEubV9pbnZJO1xuICAgICAgaW52TWFzc0IgPSBib2R5Qi5tX2ludk1hc3M7XG4gICAgICBpbnZJQiA9IGJvZHlCLm1faW52STtcbiAgICAgIG5vcm1hbFggPSBjLm5vcm1hbC54O1xuICAgICAgbm9ybWFsWSA9IGMubm9ybWFsLnk7XG4gICAgICB0YW5nZW50WCA9IG5vcm1hbFk7XG4gICAgICB0YW5nZW50WSA9IC1ub3JtYWxYO1xuICAgICAgZnJpY3Rpb24gPSBjLmZyaWN0aW9uO1xuICAgICAgdFggPSAwO1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IGMucG9pbnRDb3VudCkge1xuICAgICAgICBjY3AgPSBjLnBvaW50c1tqXTtcbiAgICAgICAgZHZYID0gdkIueCAtIHdCICogY2NwLnJCLnkgLSB2QS54ICsgd0EgKiBjY3AuckEueTtcbiAgICAgICAgZHZZID0gdkIueSArIHdCICogY2NwLnJCLnggLSB2QS55IC0gd0EgKiBjY3AuckEueDtcbiAgICAgICAgdnQgPSBkdlggKiB0YW5nZW50WCArIGR2WSAqIHRhbmdlbnRZO1xuICAgICAgICBsYW1iZGEgPSBjY3AudGFuZ2VudE1hc3MgKiAoLXZ0KTtcbiAgICAgICAgbWF4RnJpY3Rpb24gPSBmcmljdGlvbiAqIGNjcC5ub3JtYWxJbXB1bHNlO1xuICAgICAgICBuZXdJbXB1bHNlID0gYjJNYXRoLkNsYW1wKGNjcC50YW5nZW50SW1wdWxzZSArIGxhbWJkYSwgLW1heEZyaWN0aW9uLCBtYXhGcmljdGlvbik7XG4gICAgICAgIGxhbWJkYSA9IG5ld0ltcHVsc2UgLSBjY3AudGFuZ2VudEltcHVsc2U7XG4gICAgICAgIFBYID0gbGFtYmRhICogdGFuZ2VudFg7XG4gICAgICAgIFBZID0gbGFtYmRhICogdGFuZ2VudFk7XG4gICAgICAgIHZBLnggLT0gaW52TWFzc0EgKiBQWDtcbiAgICAgICAgdkEueSAtPSBpbnZNYXNzQSAqIFBZO1xuICAgICAgICB3QSAtPSBpbnZJQSAqIChjY3AuckEueCAqIFBZIC0gY2NwLnJBLnkgKiBQWCk7XG4gICAgICAgIHZCLnggKz0gaW52TWFzc0IgKiBQWDtcbiAgICAgICAgdkIueSArPSBpbnZNYXNzQiAqIFBZO1xuICAgICAgICB3QiArPSBpbnZJQiAqIChjY3AuckIueCAqIFBZIC0gY2NwLnJCLnkgKiBQWCk7XG4gICAgICAgIGNjcC50YW5nZW50SW1wdWxzZSA9IG5ld0ltcHVsc2U7XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIHRDb3VudCA9IHBhcnNlSW50KGMucG9pbnRDb3VudCk7XG4gICAgICBpZiAoYy5wb2ludENvdW50ID09PSAxKSB7XG4gICAgICAgIGNjcCA9IGMucG9pbnRzWzBdO1xuICAgICAgICBkdlggPSB2Qi54ICsgKC13QiAqIGNjcC5yQi55KSAtIHZBLnggLSAoLXdBICogY2NwLnJBLnkpO1xuICAgICAgICBkdlkgPSB2Qi55ICsgKHdCICogY2NwLnJCLngpIC0gdkEueSAtICh3QSAqIGNjcC5yQS54KTtcbiAgICAgICAgdm4gPSBkdlggKiBub3JtYWxYICsgZHZZICogbm9ybWFsWTtcbiAgICAgICAgbGFtYmRhID0gLWNjcC5ub3JtYWxNYXNzICogKHZuIC0gY2NwLnZlbG9jaXR5Qmlhcyk7XG4gICAgICAgIG5ld0ltcHVsc2UgPSBjY3Aubm9ybWFsSW1wdWxzZSArIGxhbWJkYTtcbiAgICAgICAgbmV3SW1wdWxzZSA9IChuZXdJbXB1bHNlID4gMCA/IG5ld0ltcHVsc2UgOiAwLjApO1xuICAgICAgICBsYW1iZGEgPSBuZXdJbXB1bHNlIC0gY2NwLm5vcm1hbEltcHVsc2U7XG4gICAgICAgIFBYID0gbGFtYmRhICogbm9ybWFsWDtcbiAgICAgICAgUFkgPSBsYW1iZGEgKiBub3JtYWxZO1xuICAgICAgICB2QS54IC09IGludk1hc3NBICogUFg7XG4gICAgICAgIHZBLnkgLT0gaW52TWFzc0EgKiBQWTtcbiAgICAgICAgd0EgLT0gaW52SUEgKiAoY2NwLnJBLnggKiBQWSAtIGNjcC5yQS55ICogUFgpO1xuICAgICAgICB2Qi54ICs9IGludk1hc3NCICogUFg7XG4gICAgICAgIHZCLnkgKz0gaW52TWFzc0IgKiBQWTtcbiAgICAgICAgd0IgKz0gaW52SUIgKiAoY2NwLnJCLnggKiBQWSAtIGNjcC5yQi55ICogUFgpO1xuICAgICAgICBjY3Aubm9ybWFsSW1wdWxzZSA9IG5ld0ltcHVsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjcDEgPSBjLnBvaW50c1swXTtcbiAgICAgICAgY3AyID0gYy5wb2ludHNbMV07XG4gICAgICAgIGFYID0gY3AxLm5vcm1hbEltcHVsc2U7XG4gICAgICAgIGFZID0gY3AyLm5vcm1hbEltcHVsc2U7XG4gICAgICAgIGR2MVggPSB2Qi54IC0gd0IgKiBjcDEuckIueSAtIHZBLnggKyB3QSAqIGNwMS5yQS55O1xuICAgICAgICBkdjFZID0gdkIueSArIHdCICogY3AxLnJCLnggLSB2QS55IC0gd0EgKiBjcDEuckEueDtcbiAgICAgICAgZHYyWCA9IHZCLnggLSB3QiAqIGNwMi5yQi55IC0gdkEueCArIHdBICogY3AyLnJBLnk7XG4gICAgICAgIGR2MlkgPSB2Qi55ICsgd0IgKiBjcDIuckIueCAtIHZBLnkgLSB3QSAqIGNwMi5yQS54O1xuICAgICAgICB2bjEgPSBkdjFYICogbm9ybWFsWCArIGR2MVkgKiBub3JtYWxZO1xuICAgICAgICB2bjIgPSBkdjJYICogbm9ybWFsWCArIGR2MlkgKiBub3JtYWxZO1xuICAgICAgICBiWCA9IHZuMSAtIGNwMS52ZWxvY2l0eUJpYXM7XG4gICAgICAgIGJZID0gdm4yIC0gY3AyLnZlbG9jaXR5QmlhcztcbiAgICAgICAgdE1hdCA9IGMuSztcbiAgICAgICAgYlggLT0gdE1hdC5jb2wxLnggKiBhWCArIHRNYXQuY29sMi54ICogYVk7XG4gICAgICAgIGJZIC09IHRNYXQuY29sMS55ICogYVggKyB0TWF0LmNvbDIueSAqIGFZO1xuICAgICAgICBrX2Vycm9yVG9sID0gMC4wMDE7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgdE1hdCA9IGMubm9ybWFsTWFzcztcbiAgICAgICAgICB4WCA9IC0odE1hdC5jb2wxLnggKiBiWCArIHRNYXQuY29sMi54ICogYlkpO1xuICAgICAgICAgIHhZID0gLSh0TWF0LmNvbDEueSAqIGJYICsgdE1hdC5jb2wyLnkgKiBiWSk7XG4gICAgICAgICAgaWYgKHhYID49IDAuMCAmJiB4WSA+PSAwLjApIHtcbiAgICAgICAgICAgIGRYID0geFggLSBhWDtcbiAgICAgICAgICAgIGRZID0geFkgLSBhWTtcbiAgICAgICAgICAgIFAxWCA9IGRYICogbm9ybWFsWDtcbiAgICAgICAgICAgIFAxWSA9IGRYICogbm9ybWFsWTtcbiAgICAgICAgICAgIFAyWCA9IGRZICogbm9ybWFsWDtcbiAgICAgICAgICAgIFAyWSA9IGRZICogbm9ybWFsWTtcbiAgICAgICAgICAgIHZBLnggLT0gaW52TWFzc0EgKiAoUDFYICsgUDJYKTtcbiAgICAgICAgICAgIHZBLnkgLT0gaW52TWFzc0EgKiAoUDFZICsgUDJZKTtcbiAgICAgICAgICAgIHdBIC09IGludklBICogKGNwMS5yQS54ICogUDFZIC0gY3AxLnJBLnkgKiBQMVggKyBjcDIuckEueCAqIFAyWSAtIGNwMi5yQS55ICogUDJYKTtcbiAgICAgICAgICAgIHZCLnggKz0gaW52TWFzc0IgKiAoUDFYICsgUDJYKTtcbiAgICAgICAgICAgIHZCLnkgKz0gaW52TWFzc0IgKiAoUDFZICsgUDJZKTtcbiAgICAgICAgICAgIHdCICs9IGludklCICogKGNwMS5yQi54ICogUDFZIC0gY3AxLnJCLnkgKiBQMVggKyBjcDIuckIueCAqIFAyWSAtIGNwMi5yQi55ICogUDJYKTtcbiAgICAgICAgICAgIGNwMS5ub3JtYWxJbXB1bHNlID0geFg7XG4gICAgICAgICAgICBjcDIubm9ybWFsSW1wdWxzZSA9IHhZO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHhYID0gLWNwMS5ub3JtYWxNYXNzICogYlg7XG4gICAgICAgICAgeFkgPSAwLjA7XG4gICAgICAgICAgdm4xID0gMC4wO1xuICAgICAgICAgIHZuMiA9IGMuSy5jb2wxLnkgKiB4WCArIGJZO1xuICAgICAgICAgIGlmICh4WCA+PSAwLjAgJiYgdm4yID49IDAuMCkge1xuICAgICAgICAgICAgZFggPSB4WCAtIGFYO1xuICAgICAgICAgICAgZFkgPSB4WSAtIGFZO1xuICAgICAgICAgICAgUDFYID0gZFggKiBub3JtYWxYO1xuICAgICAgICAgICAgUDFZID0gZFggKiBub3JtYWxZO1xuICAgICAgICAgICAgUDJYID0gZFkgKiBub3JtYWxYO1xuICAgICAgICAgICAgUDJZID0gZFkgKiBub3JtYWxZO1xuICAgICAgICAgICAgdkEueCAtPSBpbnZNYXNzQSAqIChQMVggKyBQMlgpO1xuICAgICAgICAgICAgdkEueSAtPSBpbnZNYXNzQSAqIChQMVkgKyBQMlkpO1xuICAgICAgICAgICAgd0EgLT0gaW52SUEgKiAoY3AxLnJBLnggKiBQMVkgLSBjcDEuckEueSAqIFAxWCArIGNwMi5yQS54ICogUDJZIC0gY3AyLnJBLnkgKiBQMlgpO1xuICAgICAgICAgICAgdkIueCArPSBpbnZNYXNzQiAqIChQMVggKyBQMlgpO1xuICAgICAgICAgICAgdkIueSArPSBpbnZNYXNzQiAqIChQMVkgKyBQMlkpO1xuICAgICAgICAgICAgd0IgKz0gaW52SUIgKiAoY3AxLnJCLnggKiBQMVkgLSBjcDEuckIueSAqIFAxWCArIGNwMi5yQi54ICogUDJZIC0gY3AyLnJCLnkgKiBQMlgpO1xuICAgICAgICAgICAgY3AxLm5vcm1hbEltcHVsc2UgPSB4WDtcbiAgICAgICAgICAgIGNwMi5ub3JtYWxJbXB1bHNlID0geFk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgeFggPSAwLjA7XG4gICAgICAgICAgeFkgPSAtY3AyLm5vcm1hbE1hc3MgKiBiWTtcbiAgICAgICAgICB2bjEgPSBjLksuY29sMi54ICogeFkgKyBiWDtcbiAgICAgICAgICB2bjIgPSAwLjA7XG4gICAgICAgICAgaWYgKHhZID49IDAuMCAmJiB2bjEgPj0gMC4wKSB7XG4gICAgICAgICAgICBkWCA9IHhYIC0gYVg7XG4gICAgICAgICAgICBkWSA9IHhZIC0gYVk7XG4gICAgICAgICAgICBQMVggPSBkWCAqIG5vcm1hbFg7XG4gICAgICAgICAgICBQMVkgPSBkWCAqIG5vcm1hbFk7XG4gICAgICAgICAgICBQMlggPSBkWSAqIG5vcm1hbFg7XG4gICAgICAgICAgICBQMlkgPSBkWSAqIG5vcm1hbFk7XG4gICAgICAgICAgICB2QS54IC09IGludk1hc3NBICogKFAxWCArIFAyWCk7XG4gICAgICAgICAgICB2QS55IC09IGludk1hc3NBICogKFAxWSArIFAyWSk7XG4gICAgICAgICAgICB3QSAtPSBpbnZJQSAqIChjcDEuckEueCAqIFAxWSAtIGNwMS5yQS55ICogUDFYICsgY3AyLnJBLnggKiBQMlkgLSBjcDIuckEueSAqIFAyWCk7XG4gICAgICAgICAgICB2Qi54ICs9IGludk1hc3NCICogKFAxWCArIFAyWCk7XG4gICAgICAgICAgICB2Qi55ICs9IGludk1hc3NCICogKFAxWSArIFAyWSk7XG4gICAgICAgICAgICB3QiArPSBpbnZJQiAqIChjcDEuckIueCAqIFAxWSAtIGNwMS5yQi55ICogUDFYICsgY3AyLnJCLnggKiBQMlkgLSBjcDIuckIueSAqIFAyWCk7XG4gICAgICAgICAgICBjcDEubm9ybWFsSW1wdWxzZSA9IHhYO1xuICAgICAgICAgICAgY3AyLm5vcm1hbEltcHVsc2UgPSB4WTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB4WCA9IDAuMDtcbiAgICAgICAgICB4WSA9IDAuMDtcbiAgICAgICAgICB2bjEgPSBiWDtcbiAgICAgICAgICB2bjIgPSBiWTtcbiAgICAgICAgICBpZiAodm4xID49IDAuMCAmJiB2bjIgPj0gMC4wKSB7XG4gICAgICAgICAgICBkWCA9IHhYIC0gYVg7XG4gICAgICAgICAgICBkWSA9IHhZIC0gYVk7XG4gICAgICAgICAgICBQMVggPSBkWCAqIG5vcm1hbFg7XG4gICAgICAgICAgICBQMVkgPSBkWCAqIG5vcm1hbFk7XG4gICAgICAgICAgICBQMlggPSBkWSAqIG5vcm1hbFg7XG4gICAgICAgICAgICBQMlkgPSBkWSAqIG5vcm1hbFk7XG4gICAgICAgICAgICB2QS54IC09IGludk1hc3NBICogKFAxWCArIFAyWCk7XG4gICAgICAgICAgICB2QS55IC09IGludk1hc3NBICogKFAxWSArIFAyWSk7XG4gICAgICAgICAgICB3QSAtPSBpbnZJQSAqIChjcDEuckEueCAqIFAxWSAtIGNwMS5yQS55ICogUDFYICsgY3AyLnJBLnggKiBQMlkgLSBjcDIuckEueSAqIFAyWCk7XG4gICAgICAgICAgICB2Qi54ICs9IGludk1hc3NCICogKFAxWCArIFAyWCk7XG4gICAgICAgICAgICB2Qi55ICs9IGludk1hc3NCICogKFAxWSArIFAyWSk7XG4gICAgICAgICAgICB3QiArPSBpbnZJQiAqIChjcDEuckIueCAqIFAxWSAtIGNwMS5yQi55ICogUDFYICsgY3AyLnJCLnggKiBQMlkgLSBjcDIuckIueSAqIFAyWCk7XG4gICAgICAgICAgICBjcDEubm9ybWFsSW1wdWxzZSA9IHhYO1xuICAgICAgICAgICAgY3AyLm5vcm1hbEltcHVsc2UgPSB4WTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYm9keUEubV9hbmd1bGFyVmVsb2NpdHkgPSB3QTtcbiAgICAgIGJvZHlCLm1fYW5ndWxhclZlbG9jaXR5ID0gd0I7XG4gICAgICArK2k7XG4gICAgfVxuICB9O1xuXG4gIGIyQ29udGFjdFNvbHZlci5wcm90b3R5cGUuRmluYWxpemVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGMsIGksIGosIG0sIHBvaW50MSwgcG9pbnQyO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdGhpcy5tX2NvbnN0cmFpbnRDb3VudCkge1xuICAgICAgYyA9IHRoaXMubV9jb25zdHJhaW50c1tpXTtcbiAgICAgIG0gPSBjLm1hbmlmb2xkO1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IGMucG9pbnRDb3VudCkge1xuICAgICAgICBwb2ludDEgPSBtLm1fcG9pbnRzW2pdO1xuICAgICAgICBwb2ludDIgPSBjLnBvaW50c1tqXTtcbiAgICAgICAgcG9pbnQxLm1fbm9ybWFsSW1wdWxzZSA9IHBvaW50Mi5ub3JtYWxJbXB1bHNlO1xuICAgICAgICBwb2ludDEubV90YW5nZW50SW1wdWxzZSA9IHBvaW50Mi50YW5nZW50SW1wdWxzZTtcbiAgICAgICAgKytqO1xuICAgICAgfVxuICAgICAgKytpO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRhY3RTb2x2ZXIucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0ZSkge1xuICAgIHZhciBDLCBQWCwgUFksIGJvZHlBLCBib2R5QiwgYywgY2NwLCBpLCBpbXB1bHNlLCBpbnZJQSwgaW52SUIsIGludk1hc3NBLCBpbnZNYXNzQiwgaiwgbWluU2VwYXJhdGlvbiwgbm9ybWFsLCBwb2ludCwgckFYLCByQVksIHJCWCwgckJZLCBzZXBhcmF0aW9uO1xuICAgIGlmIChiYXVtZ2FydGUgPT09IHZvaWQgMCkge1xuICAgICAgYmF1bWdhcnRlID0gMDtcbiAgICB9XG4gICAgbWluU2VwYXJhdGlvbiA9IDAuMDtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHRoaXMubV9jb25zdHJhaW50Q291bnQpIHtcbiAgICAgIGMgPSB0aGlzLm1fY29uc3RyYWludHNbaV07XG4gICAgICBib2R5QSA9IGMuYm9keUE7XG4gICAgICBib2R5QiA9IGMuYm9keUI7XG4gICAgICBpbnZNYXNzQSA9IGJvZHlBLm1fbWFzcyAqIGJvZHlBLm1faW52TWFzcztcbiAgICAgIGludklBID0gYm9keUEubV9tYXNzICogYm9keUEubV9pbnZJO1xuICAgICAgaW52TWFzc0IgPSBib2R5Qi5tX21hc3MgKiBib2R5Qi5tX2ludk1hc3M7XG4gICAgICBpbnZJQiA9IGJvZHlCLm1fbWFzcyAqIGJvZHlCLm1faW52STtcbiAgICAgIGIyQ29udGFjdFNvbHZlci5zX3BzbS5Jbml0aWFsaXplKGMpO1xuICAgICAgbm9ybWFsID0gYjJDb250YWN0U29sdmVyLnNfcHNtLm1fbm9ybWFsO1xuICAgICAgaiA9IDA7XG4gICAgICB3aGlsZSAoaiA8IGMucG9pbnRDb3VudCkge1xuICAgICAgICBjY3AgPSBjLnBvaW50c1tqXTtcbiAgICAgICAgcG9pbnQgPSBiMkNvbnRhY3RTb2x2ZXIuc19wc20ubV9wb2ludHNbal07XG4gICAgICAgIHNlcGFyYXRpb24gPSBiMkNvbnRhY3RTb2x2ZXIuc19wc20ubV9zZXBhcmF0aW9uc1tqXTtcbiAgICAgICAgckFYID0gcG9pbnQueCAtIGJvZHlBLm1fc3dlZXAuYy54O1xuICAgICAgICByQVkgPSBwb2ludC55IC0gYm9keUEubV9zd2VlcC5jLnk7XG4gICAgICAgIHJCWCA9IHBvaW50LnggLSBib2R5Qi5tX3N3ZWVwLmMueDtcbiAgICAgICAgckJZID0gcG9pbnQueSAtIGJvZHlCLm1fc3dlZXAuYy55O1xuICAgICAgICBtaW5TZXBhcmF0aW9uID0gKG1pblNlcGFyYXRpb24gPCBzZXBhcmF0aW9uID8gbWluU2VwYXJhdGlvbiA6IHNlcGFyYXRpb24pO1xuICAgICAgICBDID0gYjJNYXRoLkNsYW1wKGJhdW1nYXJ0ZSAqIChzZXBhcmF0aW9uICsgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSwgLWIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbiwgMC4wKTtcbiAgICAgICAgaW1wdWxzZSA9IC1jY3AuZXF1YWxpemVkTWFzcyAqIEM7XG4gICAgICAgIFBYID0gaW1wdWxzZSAqIG5vcm1hbC54O1xuICAgICAgICBQWSA9IGltcHVsc2UgKiBub3JtYWwueTtcbiAgICAgICAgYm9keUEubV9zd2VlcC5jLnggLT0gaW52TWFzc0EgKiBQWDtcbiAgICAgICAgYm9keUEubV9zd2VlcC5jLnkgLT0gaW52TWFzc0EgKiBQWTtcbiAgICAgICAgYm9keUEubV9zd2VlcC5hIC09IGludklBICogKHJBWCAqIFBZIC0gckFZICogUFgpO1xuICAgICAgICBib2R5QS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgICAgICBib2R5Qi5tX3N3ZWVwLmMueCArPSBpbnZNYXNzQiAqIFBYO1xuICAgICAgICBib2R5Qi5tX3N3ZWVwLmMueSArPSBpbnZNYXNzQiAqIFBZO1xuICAgICAgICBib2R5Qi5tX3N3ZWVwLmEgKz0gaW52SUIgKiAockJYICogUFkgLSByQlkgKiBQWCk7XG4gICAgICAgIGJvZHlCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICAgIGorKztcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIG1pblNlcGFyYXRpb24gPiAoLTEuNSAqIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCk7XG4gIH07XG5cbiAgcmV0dXJuIGIyQ29udGFjdFNvbHZlcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250YWN0U29sdmVyLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3QsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Q7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyRWRnZUFuZENpcmNsZUNvbnRhY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIHZhciBiMkNvbGxpZGVFZGdlQW5kQ2lyY2xlO1xuXG4gIF9fZXh0ZW5kcyhiMkVkZ2VBbmRDaXJjbGVDb250YWN0LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIGIyRWRnZUFuZENpcmNsZUNvbnRhY3QoKSB7XG4gICAgcmV0dXJuIGIyRWRnZUFuZENpcmNsZUNvbnRhY3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBiMkVkZ2VBbmRDaXJjbGVDb250YWN0LnByb3RvdHlwZS5tX2ZpeHR1cmVBID0gbnVsbDtcblxuICBiMkVkZ2VBbmRDaXJjbGVDb250YWN0LnByb3RvdHlwZS5tX2ZpeHR1cmVCID0gbnVsbDtcblxuICBiMkVkZ2VBbmRDaXJjbGVDb250YWN0LnByb3RvdHlwZS5tX21hbmlmb2xkID0gbnVsbDtcblxuICBiMkVkZ2VBbmRDaXJjbGVDb250YWN0LkNyZWF0ZSA9IGZ1bmN0aW9uKGFsbG9jYXRvcikge1xuICAgIHJldHVybiBuZXcgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdCgpO1xuICB9O1xuXG4gIGIyRWRnZUFuZENpcmNsZUNvbnRhY3QuRGVzdHJveSA9IGZ1bmN0aW9uKGNvbnRhY3QsIGFsbG9jYXRvcikge307XG5cbiAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHtcbiAgICBiMkVkZ2VBbmRDaXJjbGVDb250YWN0Ll9fc3VwZXJfXy5SZXNldC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJlQik7XG4gIH07XG5cbiAgYjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYkEsIGJCO1xuICAgIGJBID0gdGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBiQiA9IHRoaXMubV9maXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgdGhpcy5iMkNvbGxpZGVFZGdlQW5kQ2lyY2xlKHRoaXMubV9tYW5pZm9sZCwgKHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpIGluc3RhbmNlb2YgYjJFZGdlU2hhcGUgPyB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSA6IG51bGwpLCBiQS5tX3hmLCAodGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgaW5zdGFuY2VvZiBiMkNpcmNsZVNoYXBlID8gdGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgOiBudWxsKSwgYkIubV94Zik7XG4gIH07XG5cbiAgYjJDb2xsaWRlRWRnZUFuZENpcmNsZSA9IGZ1bmN0aW9uKG1hbmlmb2xkLCBlZGdlLCB4ZjEsIGNpcmNsZSwgeGYyKSB7fTtcblxuICByZXR1cm4gYjJFZGdlQW5kQ2lyY2xlQ29udGFjdDtcblxufSkoYjJDb250YWN0KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJFZGdlQW5kQ2lyY2xlQ29udGFjdC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250YWN0LFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250YWN0ID0gQm94MkQuRHluYW1pY3MuQ29udGFjdHMuYjJDb250YWN0O1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMk51bGxDb250YWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJOdWxsQ29udGFjdCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBiMk51bGxDb250YWN0KCkge1xuICAgIHJldHVybiBiMk51bGxDb250YWN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgYjJOdWxsQ29udGFjdC5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbigpIHt9O1xuXG4gIHJldHVybiBiMk51bGxDb250YWN0O1xuXG59KShiMkNvbnRhY3QpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk51bGxDb250YWN0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3QsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Q7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seUFuZENpcmNsZUNvbnRhY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIHZhciBFdmFsdWF0ZTtcblxuICBfX2V4dGVuZHMoYjJQb2x5QW5kQ2lyY2xlQ29udGFjdCwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBiMlBvbHlBbmRDaXJjbGVDb250YWN0KCkge1xuICAgIHJldHVybiBiMlBvbHlBbmRDaXJjbGVDb250YWN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgYjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5DcmVhdGUgPSBmdW5jdGlvbihhbGxvY2F0b3IpIHtcbiAgICByZXR1cm4gbmV3IGIyUG9seUFuZENpcmNsZUNvbnRhY3QoKTtcbiAgfTtcblxuICBiMlBvbHlBbmRDaXJjbGVDb250YWN0LkRlc3Ryb3kgPSBmdW5jdGlvbihjb250YWN0LCBhbGxvY2F0b3IpIHt9O1xuXG4gIGIyUG9seUFuZENpcmNsZUNvbnRhY3QucHJvdG90eXBlLlJlc2V0ID0gZnVuY3Rpb24oZml4dHVyZUEsIGZpeHR1cmVCKSB7XG4gICAgYjJQb2x5QW5kQ2lyY2xlQ29udGFjdC5fX3N1cGVyX18uUmVzZXQuY2FsbCh0aGlzLCBmaXh0dXJlQSwgZml4dHVyZUIpO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZml4dHVyZUEuR2V0VHlwZSgpID09PSBiMlNoYXBlLmVfcG9seWdvblNoYXBlKTtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KGZpeHR1cmVCLkdldFR5cGUoKSA9PT0gYjJTaGFwZS5lX2NpcmNsZVNoYXBlKTtcbiAgfTtcblxuICBFdmFsdWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiQSwgYkI7XG4gICAgYkEgPSB0aGlzLm1fZml4dHVyZUEubV9ib2R5O1xuICAgIGJCID0gdGhpcy5tX2ZpeHR1cmVCLm1fYm9keTtcbiAgICBiMkNvbGxpc2lvbi5Db2xsaWRlUG9seWdvbkFuZENpcmNsZSh0aGlzLm1fbWFuaWZvbGQsICh0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSBpbnN0YW5jZW9mIGIyUG9seWdvblNoYXBlID8gdGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkgOiBudWxsKSwgYkEubV94ZiwgKHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIGluc3RhbmNlb2YgYjJDaXJjbGVTaGFwZSA/IHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIDogbnVsbCksIGJCLm1feGYpO1xuICB9O1xuXG4gIHJldHVybiBiMlBvbHlBbmRDaXJjbGVDb250YWN0O1xuXG59KShiMkNvbnRhY3QpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlBvbHlBbmRDaXJjbGVDb250YWN0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3QsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Q7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seUFuZEVkZ2VDb250YWN0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJQb2x5QW5kRWRnZUNvbnRhY3QsIF9zdXBlcik7XG5cbiAgZnVuY3Rpb24gYjJQb2x5QW5kRWRnZUNvbnRhY3QoKSB7XG4gICAgcmV0dXJuIGIyUG9seUFuZEVkZ2VDb250YWN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgYjJQb2x5QW5kRWRnZUNvbnRhY3QuQ3JlYXRlID0gZnVuY3Rpb24oYWxsb2NhdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBiMlBvbHlBbmRFZGdlQ29udGFjdCgpO1xuICB9O1xuXG4gIGIyUG9seUFuZEVkZ2VDb250YWN0LkRlc3Ryb3kgPSBmdW5jdGlvbihjb250YWN0LCBhbGxvY2F0b3IpIHt9O1xuXG4gIGIyUG9seUFuZEVkZ2VDb250YWN0LnByb3RvdHlwZS5SZXNldCA9IGZ1bmN0aW9uKGZpeHR1cmVBLCBmaXh0dXJlQikge1xuICAgIGIyUG9seUFuZEVkZ2VDb250YWN0Ll9fc3VwZXJfXy5SZXNldC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJlQik7XG4gICAgYjJTZXR0aW5ncy5iMkFzc2VydChmaXh0dXJlQS5HZXRUeXBlKCkgPT09IGIyU2hhcGUuZV9wb2x5Z29uU2hhcGUpO1xuICAgIGIyU2V0dGluZ3MuYjJBc3NlcnQoZml4dHVyZUIuR2V0VHlwZSgpID09PSBiMlNoYXBlLmVfZWRnZVNoYXBlKTtcbiAgfTtcblxuICBiMlBvbHlBbmRFZGdlQ29udGFjdC5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYkEsIGJCO1xuICAgIGJBID0gdGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBiQiA9IHRoaXMubV9maXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgdGhpcy5iMkNvbGxpZGVQb2x5QW5kRWRnZSh0aGlzLm1fbWFuaWZvbGQsICh0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSBpbnN0YW5jZW9mIGIyUG9seWdvblNoYXBlID8gdGhpcy5tX2ZpeHR1cmVBLkdldFNoYXBlKCkgOiBudWxsKSwgYkEubV94ZiwgKHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIGluc3RhbmNlb2YgYjJFZGdlU2hhcGUgPyB0aGlzLm1fZml4dHVyZUIuR2V0U2hhcGUoKSA6IG51bGwpLCBiQi5tX3hmKTtcbiAgfTtcblxuICByZXR1cm4gYjJQb2x5QW5kRWRnZUNvbnRhY3Q7XG5cbn0pKGIyQ29udGFjdCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUG9seUFuZEVkZ2VDb250YWN0LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRhY3QsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRhY3QgPSBCb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMkNvbnRhY3Q7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzLmIyUG9seWdvbkNvbnRhY3QgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlBvbHlnb25Db250YWN0LCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIGIyUG9seWdvbkNvbnRhY3QoKSB7XG4gICAgcmV0dXJuIGIyUG9seWdvbkNvbnRhY3QuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBiMlBvbHlnb25Db250YWN0LkNyZWF0ZSA9IGZ1bmN0aW9uKGFsbG9jYXRvcikge1xuICAgIHJldHVybiBuZXcgYjJQb2x5Z29uQ29udGFjdCgpO1xuICB9O1xuXG4gIGIyUG9seWdvbkNvbnRhY3QuRGVzdHJveSA9IGZ1bmN0aW9uKGNvbnRhY3QsIGFsbG9jYXRvcikge307XG5cbiAgYjJQb2x5Z29uQ29udGFjdC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbihmaXh0dXJlQSwgZml4dHVyZUIpIHtcbiAgICBiMlBvbHlnb25Db250YWN0Ll9fc3VwZXJfXy5SZXNldC5jYWxsKHRoaXMsIGZpeHR1cmVBLCBmaXh0dXJlQik7XG4gIH07XG5cbiAgYjJQb2x5Z29uQ29udGFjdC5wcm90b3R5cGUuRXZhbHVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYkEsIGJCO1xuICAgIGJBID0gdGhpcy5tX2ZpeHR1cmVBLkdldEJvZHkoKTtcbiAgICBiQiA9IHRoaXMubV9maXh0dXJlQi5HZXRCb2R5KCk7XG4gICAgYjJDb2xsaXNpb24uQ29sbGlkZVBvbHlnb25zKHRoaXMubV9tYW5pZm9sZCwgKHRoaXMubV9maXh0dXJlQS5HZXRTaGFwZSgpIGluc3RhbmNlb2YgYjJQb2x5Z29uU2hhcGUgPyB0aGlzLm1fZml4dHVyZUEuR2V0U2hhcGUoKSA6IG51bGwpLCBiQS5tX3hmLCAodGhpcy5tX2ZpeHR1cmVCLkdldFNoYXBlKCkgaW5zdGFuY2VvZiBiMlBvbHlnb25TaGFwZSA/IHRoaXMubV9maXh0dXJlQi5HZXRTaGFwZSgpIDogbnVsbCksIGJCLm1feGYpO1xuICB9O1xuXG4gIHJldHVybiBiMlBvbHlnb25Db250YWN0O1xuXG59KShiMkNvbnRhY3QpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlBvbHlnb25Db250YWN0LmpzLm1hcFxuIiwidmFyIEJveDJELCBWZWN0b3IsIGIyU2V0dGluZ3MsIGIyVmVjMjtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5WZWN0b3IgPSBCb3gyRC5WZWN0b3I7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJTZXR0aW5ncyA9IEJveDJELkNvbW1vbi5iMlNldHRpbmdzO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250YWN0cy5iMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQgPSAoZnVuY3Rpb24oKSB7XG4gIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5wcm90b3R5cGUubV9ub3JtYWwgPSBudWxsO1xuXG4gIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5wcm90b3R5cGUubV9zZXBhcmF0aW9ucyA9IG51bGw7XG5cbiAgYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLnByb3RvdHlwZS5tX3BvaW50cyA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJQb3NpdGlvblNvbHZlck1hbmlmb2xkKCkge1xuICAgIHZhciBpO1xuICAgIHRoaXMubV9ub3JtYWwgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3NlcGFyYXRpb25zID0gbmV3IFZlY3RvcihiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKTtcbiAgICB0aGlzLm1fcG9pbnRzID0gbmV3IFZlY3RvcihiMlNldHRpbmdzLmIyX21heE1hbmlmb2xkUG9pbnRzKTtcbiAgICBpID0gMDtcbiAgICB3aGlsZSAoaSA8IGIyU2V0dGluZ3MuYjJfbWF4TWFuaWZvbGRQb2ludHMpIHtcbiAgICAgIHRoaXMubV9wb2ludHNbaV0gPSBuZXcgYjJWZWMyKCk7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGNjKSB7XG4gICAgdmFyIGNsaXBQb2ludFgsIGNsaXBQb2ludFksIGQsIGQyLCBkWCwgZFksIGksIHBsYW5lUG9pbnRYLCBwbGFuZVBvaW50WSwgcG9pbnRBWCwgcG9pbnRBWSwgcG9pbnRCWCwgcG9pbnRCWSwgdE1hdCwgdFZlYywgX3Jlc3VsdHM7XG4gICAgYjJTZXR0aW5ncy5iMkFzc2VydChjYy5wb2ludENvdW50ID4gMCk7XG4gICAgaSA9IDA7XG4gICAgY2xpcFBvaW50WCA9IDA7XG4gICAgY2xpcFBvaW50WSA9IDA7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0VmVjID0gdm9pZCAwO1xuICAgIHBsYW5lUG9pbnRYID0gMDtcbiAgICBwbGFuZVBvaW50WSA9IDA7XG4gICAgc3dpdGNoIChjYy50eXBlKSB7XG4gICAgICBjYXNlIGIyTWFuaWZvbGQuZV9jaXJjbGVzOlxuICAgICAgICB0TWF0ID0gY2MuYm9keUEubV94Zi5SO1xuICAgICAgICB0VmVjID0gY2MubG9jYWxQb2ludDtcbiAgICAgICAgcG9pbnRBWCA9IGNjLmJvZHlBLm1feGYucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgICAgcG9pbnRBWSA9IGNjLmJvZHlBLm1feGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgICAgdE1hdCA9IGNjLmJvZHlCLm1feGYuUjtcbiAgICAgICAgdFZlYyA9IGNjLnBvaW50c1swXS5sb2NhbFBvaW50O1xuICAgICAgICBwb2ludEJYID0gY2MuYm9keUIubV94Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICBwb2ludEJZID0gY2MuYm9keUIubV94Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgICBkWCA9IHBvaW50QlggLSBwb2ludEFYO1xuICAgICAgICBkWSA9IHBvaW50QlkgLSBwb2ludEFZO1xuICAgICAgICBkMiA9IGRYICogZFggKyBkWSAqIGRZO1xuICAgICAgICBpZiAoZDIgPiBOdW1iZXIuTUlOX1ZBTFVFICogTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICAgIGQgPSBNYXRoLnNxcnQoZDIpO1xuICAgICAgICAgIHRoaXMubV9ub3JtYWwueCA9IGRYIC8gZDtcbiAgICAgICAgICB0aGlzLm1fbm9ybWFsLnkgPSBkWSAvIGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tX25vcm1hbC54ID0gMS4wO1xuICAgICAgICAgIHRoaXMubV9ub3JtYWwueSA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fcG9pbnRzWzBdLnggPSAwLjUgKiAocG9pbnRBWCArIHBvaW50QlgpO1xuICAgICAgICB0aGlzLm1fcG9pbnRzWzBdLnkgPSAwLjUgKiAocG9pbnRBWSArIHBvaW50QlkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tX3NlcGFyYXRpb25zWzBdID0gZFggKiB0aGlzLm1fbm9ybWFsLnggKyBkWSAqIHRoaXMubV9ub3JtYWwueSAtIGNjLnJhZGl1cztcbiAgICAgIGNhc2UgYjJNYW5pZm9sZC5lX2ZhY2VBOlxuICAgICAgICB0TWF0ID0gY2MuYm9keUEubV94Zi5SO1xuICAgICAgICB0VmVjID0gY2MubG9jYWxQbGFuZU5vcm1hbDtcbiAgICAgICAgdGhpcy5tX25vcm1hbC54ID0gdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgICAgdGhpcy5tX25vcm1hbC55ID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgICAgdE1hdCA9IGNjLmJvZHlBLm1feGYuUjtcbiAgICAgICAgdFZlYyA9IGNjLmxvY2FsUG9pbnQ7XG4gICAgICAgIHBsYW5lUG9pbnRYID0gY2MuYm9keUEubV94Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICBwbGFuZVBvaW50WSA9IGNjLmJvZHlBLm1feGYucG9zaXRpb24ueSArICh0TWF0LmNvbDEueSAqIHRWZWMueCArIHRNYXQuY29sMi55ICogdFZlYy55KTtcbiAgICAgICAgdE1hdCA9IGNjLmJvZHlCLm1feGYuUjtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgIHdoaWxlIChpIDwgY2MucG9pbnRDb3VudCkge1xuICAgICAgICAgIHRWZWMgPSBjYy5wb2ludHNbaV0ubG9jYWxQb2ludDtcbiAgICAgICAgICBjbGlwUG9pbnRYID0gY2MuYm9keUIubV94Zi5wb3NpdGlvbi54ICsgKHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnkpO1xuICAgICAgICAgIGNsaXBQb2ludFkgPSBjYy5ib2R5Qi5tX3hmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICAgICAgdGhpcy5tX3NlcGFyYXRpb25zW2ldID0gKGNsaXBQb2ludFggLSBwbGFuZVBvaW50WCkgKiB0aGlzLm1fbm9ybWFsLnggKyAoY2xpcFBvaW50WSAtIHBsYW5lUG9pbnRZKSAqIHRoaXMubV9ub3JtYWwueSAtIGNjLnJhZGl1cztcbiAgICAgICAgICB0aGlzLm1fcG9pbnRzW2ldLnggPSBjbGlwUG9pbnRYO1xuICAgICAgICAgIHRoaXMubV9wb2ludHNbaV0ueSA9IGNsaXBQb2ludFk7XG4gICAgICAgICAgX3Jlc3VsdHMucHVzaCgrK2kpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGIyTWFuaWZvbGQuZV9mYWNlQjpcbiAgICAgICAgdE1hdCA9IGNjLmJvZHlCLm1feGYuUjtcbiAgICAgICAgdFZlYyA9IGNjLmxvY2FsUGxhbmVOb3JtYWw7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueCA9IHRNYXQuY29sMS54ICogdFZlYy54ICsgdE1hdC5jb2wyLnggKiB0VmVjLnk7XG4gICAgICAgIHRoaXMubV9ub3JtYWwueSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICAgIHRNYXQgPSBjYy5ib2R5Qi5tX3hmLlI7XG4gICAgICAgIHRWZWMgPSBjYy5sb2NhbFBvaW50O1xuICAgICAgICBwbGFuZVBvaW50WCA9IGNjLmJvZHlCLm1feGYucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgICAgcGxhbmVQb2ludFkgPSBjYy5ib2R5Qi5tX3hmLnBvc2l0aW9uLnkgKyAodE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueSk7XG4gICAgICAgIHRNYXQgPSBjYy5ib2R5QS5tX3hmLlI7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGNjLnBvaW50Q291bnQpIHtcbiAgICAgICAgICB0VmVjID0gY2MucG9pbnRzW2ldLmxvY2FsUG9pbnQ7XG4gICAgICAgICAgY2xpcFBvaW50WCA9IGNjLmJvZHlBLm1feGYucG9zaXRpb24ueCArICh0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55KTtcbiAgICAgICAgICBjbGlwUG9pbnRZID0gY2MuYm9keUEubV94Zi5wb3NpdGlvbi55ICsgKHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnkpO1xuICAgICAgICAgIHRoaXMubV9zZXBhcmF0aW9uc1tpXSA9IChjbGlwUG9pbnRYIC0gcGxhbmVQb2ludFgpICogdGhpcy5tX25vcm1hbC54ICsgKGNsaXBQb2ludFkgLSBwbGFuZVBvaW50WSkgKiB0aGlzLm1fbm9ybWFsLnkgLSBjYy5yYWRpdXM7XG4gICAgICAgICAgdGhpcy5tX3BvaW50c1tpXS5TZXQoY2xpcFBvaW50WCwgY2xpcFBvaW50WSk7XG4gICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubV9ub3JtYWwueCAqPSAtMS47XG4gICAgICAgIHJldHVybiB0aGlzLm1fbm9ybWFsLnkgKj0gLTEuO1xuICAgIH1cbiAgfTtcblxuICBiMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQuY2lyY2xlUG9pbnRBID0gbmV3IGIyVmVjMigpO1xuXG4gIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZC5jaXJjbGVQb2ludEIgPSBuZXcgYjJWZWMyKCk7XG5cbiAgcmV0dXJuIGIyUG9zaXRpb25Tb2x2ZXJNYW5pZm9sZDtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJQb3NpdGlvblNvbHZlck1hbmlmb2xkLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbG9yLCBiMkNvbnRyb2xsZXIsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyQ29sb3IgPSBCb3gyRC5Db21tb24uYjJDb2xvcjtcblxuYjJDb250cm9sbGVyID0gQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQnVveWFuY3lDb250cm9sbGVyID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJCdW95YW5jeUNvbnRyb2xsZXIsIF9zdXBlcik7XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLm5vcm1hbCA9IG51bGw7XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLm9mZnNldCA9IDA7XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLmRlbnNpdHkgPSAwO1xuXG4gIGIyQnVveWFuY3lDb250cm9sbGVyLnByb3RvdHlwZS52ZWxvY2l0eSA9IG51bGw7XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLmxpbmVhckRyYWcgPSAyO1xuXG4gIGIyQnVveWFuY3lDb250cm9sbGVyLnByb3RvdHlwZS5hbmd1bGFyRHJhZyA9IDE7XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLnVzZURlbnNpdHkgPSBmYWxzZTtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUudXNlV29ybGRHcmF2aXR5ID0gdHJ1ZTtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUuZ3Jhdml0eSA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJCdW95YW5jeUNvbnRyb2xsZXIoKSB7XG4gICAgYjJCdW95YW5jeUNvbnRyb2xsZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5ub3JtYWwgPSBuZXcgYjJWZWMyKDAsIC0xLik7XG4gICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBiMlZlYzIoMCwgMCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJCdW95YW5jeUNvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGFyZWEsIGFyZWFjLCBib2R5LCBidW95YW5jeUZvcmNlLCBkcmFnRm9yY2UsIGZpeHR1cmUsIGksIG1hc3MsIG1hc3NjLCBzYXJlYSwgc2MsIHNoYXBlRGVuc2l0eTtcbiAgICBpZiAoIXRoaXMubV9ib2R5TGlzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy51c2VXb3JsZEdyYXZpdHkpIHtcbiAgICAgIHRoaXMuZ3Jhdml0eSA9IHRoaXMuR2V0V29ybGQoKS5HZXRHcmF2aXR5KCkuQ29weSgpO1xuICAgIH1cbiAgICBpID0gdGhpcy5tX2JvZHlMaXN0O1xuICAgIHdoaWxlIChpKSB7XG4gICAgICBib2R5ID0gaS5ib2R5O1xuICAgICAgaWYgKGJvZHkuSXNBd2FrZSgpID09PSBmYWxzZSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGFyZWFjID0gbmV3IGIyVmVjMigpO1xuICAgICAgbWFzc2MgPSBuZXcgYjJWZWMyKCk7XG4gICAgICBhcmVhID0gMC4wO1xuICAgICAgbWFzcyA9IDAuMDtcbiAgICAgIGZpeHR1cmUgPSBib2R5LkdldEZpeHR1cmVMaXN0KCk7XG4gICAgICB3aGlsZSAoZml4dHVyZSkge1xuICAgICAgICBzYyA9IG5ldyBiMlZlYzIoKTtcbiAgICAgICAgc2FyZWEgPSBmaXh0dXJlLkdldFNoYXBlKCkuQ29tcHV0ZVN1Ym1lcmdlZEFyZWEodGhpcy5ub3JtYWwsIHRoaXMub2Zmc2V0LCBib2R5LkdldFRyYW5zZm9ybSgpLCBzYyk7XG4gICAgICAgIGFyZWEgKz0gc2FyZWE7XG4gICAgICAgIGFyZWFjLnggKz0gc2FyZWEgKiBzYy54O1xuICAgICAgICBhcmVhYy55ICs9IHNhcmVhICogc2MueTtcbiAgICAgICAgc2hhcGVEZW5zaXR5ID0gMDtcbiAgICAgICAgaWYgKHRoaXMudXNlRGVuc2l0eSkge1xuICAgICAgICAgIHNoYXBlRGVuc2l0eSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hhcGVEZW5zaXR5ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBtYXNzICs9IHNhcmVhICogc2hhcGVEZW5zaXR5O1xuICAgICAgICBtYXNzYy54ICs9IHNhcmVhICogc2MueCAqIHNoYXBlRGVuc2l0eTtcbiAgICAgICAgbWFzc2MueSArPSBzYXJlYSAqIHNjLnkgKiBzaGFwZURlbnNpdHk7XG4gICAgICAgIGZpeHR1cmUgPSBmaXh0dXJlLkdldE5leHQoKTtcbiAgICAgIH1cbiAgICAgIGFyZWFjLnggLz0gYXJlYTtcbiAgICAgIGFyZWFjLnkgLz0gYXJlYTtcbiAgICAgIG1hc3NjLnggLz0gbWFzcztcbiAgICAgIG1hc3NjLnkgLz0gbWFzcztcbiAgICAgIGlmIChhcmVhIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGJ1b3lhbmN5Rm9yY2UgPSB0aGlzLmdyYXZpdHkuR2V0TmVnYXRpdmUoKTtcbiAgICAgIGJ1b3lhbmN5Rm9yY2UuTXVsdGlwbHkodGhpcy5kZW5zaXR5ICogYXJlYSk7XG4gICAgICBib2R5LkFwcGx5Rm9yY2UoYnVveWFuY3lGb3JjZSwgbWFzc2MpO1xuICAgICAgZHJhZ0ZvcmNlID0gYm9keS5HZXRMaW5lYXJWZWxvY2l0eUZyb21Xb3JsZFBvaW50KGFyZWFjKTtcbiAgICAgIGRyYWdGb3JjZS5TdWJ0cmFjdCh0aGlzLnZlbG9jaXR5KTtcbiAgICAgIGRyYWdGb3JjZS5NdWx0aXBseSgtdGhpcy5saW5lYXJEcmFnICogYXJlYSk7XG4gICAgICBib2R5LkFwcGx5Rm9yY2UoZHJhZ0ZvcmNlLCBhcmVhYyk7XG4gICAgICBib2R5LkFwcGx5VG9ycXVlKC1ib2R5LkdldEluZXJ0aWEoKSAvIGJvZHkuR2V0TWFzcygpICogYXJlYSAqIGJvZHkuR2V0QW5ndWxhclZlbG9jaXR5KCkgKiB0aGlzLmFuZ3VsYXJEcmFnKTtcbiAgICAgIGkgPSBpLm5leHRCb2R5O1xuICAgIH1cbiAgfTtcblxuICBiMkJ1b3lhbmN5Q29udHJvbGxlci5wcm90b3R5cGUuRHJhdyA9IGZ1bmN0aW9uKGRlYnVnRHJhdykge1xuICAgIHZhciBjb2xvciwgcDEsIHAyLCByO1xuICAgIHIgPSAxMDAwO1xuICAgIHAxID0gbmV3IGIyVmVjMigpO1xuICAgIHAyID0gbmV3IGIyVmVjMigpO1xuICAgIHAxLnggPSB0aGlzLm5vcm1hbC54ICogdGhpcy5vZmZzZXQgKyB0aGlzLm5vcm1hbC55ICogcjtcbiAgICBwMS55ID0gdGhpcy5ub3JtYWwueSAqIHRoaXMub2Zmc2V0IC0gdGhpcy5ub3JtYWwueCAqIHI7XG4gICAgcDIueCA9IHRoaXMubm9ybWFsLnggKiB0aGlzLm9mZnNldCAtIHRoaXMubm9ybWFsLnkgKiByO1xuICAgIHAyLnkgPSB0aGlzLm5vcm1hbC55ICogdGhpcy5vZmZzZXQgKyB0aGlzLm5vcm1hbC54ICogcjtcbiAgICBjb2xvciA9IG5ldyBiMkNvbG9yKDAsIDAsIDEpO1xuICAgIGRlYnVnRHJhdy5EcmF3U2VnbWVudChwMSwgcDIsIGNvbG9yKTtcbiAgfTtcblxuICByZXR1cm4gYjJCdW95YW5jeUNvbnRyb2xsZXI7XG5cbn0pKGIyQ29udHJvbGxlcik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyQnVveWFuY3lDb250cm9sbGVyLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRyb2xsZXIsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyQ29udHJvbGxlciA9IEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcjtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnN0YW50QWNjZWxDb250cm9sbGVyID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJDb25zdGFudEFjY2VsQ29udHJvbGxlciwgX3N1cGVyKTtcblxuICBiMkNvbnN0YW50QWNjZWxDb250cm9sbGVyLnByb3RvdHlwZS5BID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkNvbnN0YW50QWNjZWxDb250cm9sbGVyKCkge1xuICAgIGIyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5BID0gbmV3IGIyVmVjMigwLCAwKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkNvbnN0YW50QWNjZWxDb250cm9sbGVyLnByb3RvdHlwZS5TdGVwID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBib2R5LCBpLCBzbWFsbEE7XG4gICAgc21hbGxBID0gbmV3IGIyVmVjMih0aGlzLkEueCAqIHN0ZXAuZHQsIHRoaXMuQS55ICogc3RlcC5kdCk7XG4gICAgaSA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICB3aGlsZSAoaSkge1xuICAgICAgYm9keSA9IGkuYm9keTtcbiAgICAgIGlmICghYm9keS5Jc0F3YWtlKCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBib2R5LlNldExpbmVhclZlbG9jaXR5KG5ldyBiMlZlYzIoYm9keS5HZXRMaW5lYXJWZWxvY2l0eSgpLnggKyBzbWFsbEEueCwgYm9keS5HZXRMaW5lYXJWZWxvY2l0eSgpLnkgKyBzbWFsbEEueSkpO1xuICAgICAgaSA9IGkubmV4dEJvZHk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMkNvbnN0YW50QWNjZWxDb250cm9sbGVyO1xuXG59KShiMkNvbnRyb2xsZXIpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnN0YW50QWNjZWxDb250cm9sbGVyLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRyb2xsZXIsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyQ29udHJvbGxlciA9IEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcjtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJDb25zdGFudEZvcmNlQ29udHJvbGxlciwgX3N1cGVyKTtcblxuICBiMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyLnByb3RvdHlwZS5GID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyKCkge1xuICAgIGIyQ29uc3RhbnRGb3JjZUNvbnRyb2xsZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5GID0gbmV3IGIyVmVjMigwLCAwKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyLnByb3RvdHlwZS5TdGVwID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBib2R5LCBpO1xuICAgIGkgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgd2hpbGUgKGkpIHtcbiAgICAgIGJvZHkgPSBpLmJvZHk7XG4gICAgICBpZiAoIWJvZHkuSXNBd2FrZSgpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgYm9keS5BcHBseUZvcmNlKHRoaXMuRiwgYm9keS5HZXRXb3JsZENlbnRlcigpKTtcbiAgICAgIGkgPSBpLm5leHRCb2R5O1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYjJDb25zdGFudEZvcmNlQ29udHJvbGxlcjtcblxufSkoYjJDb250cm9sbGVyKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb25zdGFudEZvcmNlQ29udHJvbGxlci5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJDb250cm9sbGVyRWRnZTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkNvbnRyb2xsZXJFZGdlID0gQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyRWRnZTtcblxuQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBiMkNvbnRyb2xsZXIoKSB7fVxuXG4gIGIyQ29udHJvbGxlci5wcm90b3R5cGUubV9ib2R5TGlzdCA9IG51bGw7XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5tX2JvZHlDb3VudCA9IDA7XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5tX25leHQgPSBudWxsO1xuXG4gIGIyQ29udHJvbGxlci5wcm90b3R5cGUubV93b3JsZCA9IG51bGw7XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5TdGVwID0gZnVuY3Rpb24oc3RlcCkge307XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5EcmF3ID0gZnVuY3Rpb24oZGVidWdEcmF3KSB7fTtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLkFkZEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgdmFyIGVkZ2U7XG4gICAgZWRnZSA9IG5ldyBiMkNvbnRyb2xsZXJFZGdlKCk7XG4gICAgZWRnZS5jb250cm9sbGVyID0gdGhpcztcbiAgICBlZGdlLmJvZHkgPSBib2R5O1xuICAgIGVkZ2UubmV4dEJvZHkgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgZWRnZS5wcmV2Qm9keSA9IG51bGw7XG4gICAgdGhpcy5tX2JvZHlMaXN0ID0gZWRnZTtcbiAgICBpZiAoZWRnZS5uZXh0Qm9keSkge1xuICAgICAgZWRnZS5uZXh0Qm9keS5wcmV2Qm9keSA9IGVkZ2U7XG4gICAgfVxuICAgIHRoaXMubV9ib2R5Q291bnQrKztcbiAgICBlZGdlLm5leHRDb250cm9sbGVyID0gYm9keS5tX2NvbnRyb2xsZXJMaXN0O1xuICAgIGVkZ2UucHJldkNvbnRyb2xsZXIgPSBudWxsO1xuICAgIGJvZHkubV9jb250cm9sbGVyTGlzdCA9IGVkZ2U7XG4gICAgaWYgKGVkZ2UubmV4dENvbnRyb2xsZXIpIHtcbiAgICAgIGVkZ2UubmV4dENvbnRyb2xsZXIucHJldkNvbnRyb2xsZXIgPSBlZGdlO1xuICAgIH1cbiAgICBib2R5Lm1fY29udHJvbGxlckNvdW50Kys7XG4gIH07XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5SZW1vdmVCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgIHZhciBlZGdlO1xuICAgIGVkZ2UgPSBib2R5Lm1fY29udHJvbGxlckxpc3Q7XG4gICAgd2hpbGUgKGVkZ2UgJiYgZWRnZS5jb250cm9sbGVyICE9PSB0aGlzKSB7XG4gICAgICBlZGdlID0gZWRnZS5uZXh0Q29udHJvbGxlcjtcbiAgICB9XG4gICAgaWYgKGVkZ2UucHJldkJvZHkpIHtcbiAgICAgIGVkZ2UucHJldkJvZHkubmV4dEJvZHkgPSBlZGdlLm5leHRCb2R5O1xuICAgIH1cbiAgICBpZiAoZWRnZS5uZXh0Qm9keSkge1xuICAgICAgZWRnZS5uZXh0Qm9keS5wcmV2Qm9keSA9IGVkZ2UucHJldkJvZHk7XG4gICAgfVxuICAgIGlmIChlZGdlLm5leHRDb250cm9sbGVyKSB7XG4gICAgICBlZGdlLm5leHRDb250cm9sbGVyLnByZXZDb250cm9sbGVyID0gZWRnZS5wcmV2Q29udHJvbGxlcjtcbiAgICB9XG4gICAgaWYgKGVkZ2UucHJldkNvbnRyb2xsZXIpIHtcbiAgICAgIGVkZ2UucHJldkNvbnRyb2xsZXIubmV4dENvbnRyb2xsZXIgPSBlZGdlLm5leHRDb250cm9sbGVyO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2JvZHlMaXN0ID09PSBlZGdlKSB7XG4gICAgICB0aGlzLm1fYm9keUxpc3QgPSBlZGdlLm5leHRCb2R5O1xuICAgIH1cbiAgICBpZiAoYm9keS5tX2NvbnRyb2xsZXJMaXN0ID09PSBlZGdlKSB7XG4gICAgICBib2R5Lm1fY29udHJvbGxlckxpc3QgPSBlZGdlLm5leHRDb250cm9sbGVyO1xuICAgIH1cbiAgICBib2R5Lm1fY29udHJvbGxlckNvdW50LS07XG4gICAgdGhpcy5tX2JvZHlDb3VudC0tO1xuICB9O1xuXG4gIGIyQ29udHJvbGxlci5wcm90b3R5cGUuQ2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICB3aGlsZSAodGhpcy5tX2JvZHlMaXN0KSB7XG4gICAgICB0aGlzLlJlbW92ZUJvZHkodGhpcy5tX2JvZHlMaXN0LmJvZHkpO1xuICAgIH1cbiAgfTtcblxuICBiMkNvbnRyb2xsZXIucHJvdG90eXBlLkdldE5leHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX25leHQ7XG4gIH07XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5HZXRXb3JsZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fd29ybGQ7XG4gIH07XG5cbiAgYjJDb250cm9sbGVyLnByb3RvdHlwZS5HZXRCb2R5TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUxpc3Q7XG4gIH07XG5cbiAgcmV0dXJuIGIyQ29udHJvbGxlcjtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJDb250cm9sbGVyLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlckVkZ2UgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIyQ29udHJvbGxlckVkZ2UoKSB7fVxuXG4gIHJldHVybiBiMkNvbnRyb2xsZXJFZGdlO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkNvbnRyb2xsZXJFZGdlLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkNvbnRyb2xsZXIsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyQ29udHJvbGxlciA9IEJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzLmIyQ29udHJvbGxlcjtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMkdyYXZpdHlDb250cm9sbGVyID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJHcmF2aXR5Q29udHJvbGxlciwgX3N1cGVyKTtcblxuICBiMkdyYXZpdHlDb250cm9sbGVyLnByb3RvdHlwZS5HID0gMTtcblxuICBiMkdyYXZpdHlDb250cm9sbGVyLnByb3RvdHlwZS5pbnZTcXIgPSB0cnVlO1xuXG4gIGZ1bmN0aW9uIGIyR3Jhdml0eUNvbnRyb2xsZXIoKSB7XG4gICAgYjJHcmF2aXR5Q29udHJvbGxlci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLkcgPSAxO1xuICAgIHRoaXMuaW52U3FyID0gdHJ1ZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkdyYXZpdHlDb250cm9sbGVyLnByb3RvdHlwZS5TdGVwID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBib2R5MSwgYm9keTIsIGR4LCBkeSwgZiwgaSwgaiwgbWFzczEsIHAxLCBwMiwgcjI7XG4gICAgaSA9IG51bGw7XG4gICAgYm9keTEgPSBudWxsO1xuICAgIHAxID0gbnVsbDtcbiAgICBtYXNzMSA9IDA7XG4gICAgaiA9IG51bGw7XG4gICAgYm9keTIgPSBudWxsO1xuICAgIHAyID0gbnVsbDtcbiAgICBkeCA9IDA7XG4gICAgZHkgPSAwO1xuICAgIHIyID0gMDtcbiAgICBmID0gbnVsbDtcbiAgICBpZiAodGhpcy5pbnZTcXIpIHtcbiAgICAgIGkgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgICB3aGlsZSAoaSkge1xuICAgICAgICBib2R5MSA9IGkuYm9keTtcbiAgICAgICAgcDEgPSBib2R5MS5HZXRXb3JsZENlbnRlcigpO1xuICAgICAgICBtYXNzMSA9IGJvZHkxLkdldE1hc3MoKTtcbiAgICAgICAgaiA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICAgICAgd2hpbGUgKGogIT09IGkpIHtcbiAgICAgICAgICBib2R5MiA9IGouYm9keTtcbiAgICAgICAgICBwMiA9IGJvZHkyLkdldFdvcmxkQ2VudGVyKCk7XG4gICAgICAgICAgZHggPSBwMi54IC0gcDEueDtcbiAgICAgICAgICBkeSA9IHAyLnkgLSBwMS55O1xuICAgICAgICAgIHIyID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgICAgaWYgKHIyIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGYgPSBuZXcgYjJWZWMyKGR4LCBkeSk7XG4gICAgICAgICAgZi5NdWx0aXBseSh0aGlzLkcgLyByMiAvIE1hdGguc3FydChyMikgKiBtYXNzMSAqIGJvZHkyLkdldE1hc3MoKSk7XG4gICAgICAgICAgaWYgKGJvZHkxLklzQXdha2UoKSkge1xuICAgICAgICAgICAgYm9keTEuQXBwbHlGb3JjZShmLCBwMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGYuTXVsdGlwbHkoLTEuKTtcbiAgICAgICAgICBpZiAoYm9keTIuSXNBd2FrZSgpKSB7XG4gICAgICAgICAgICBib2R5Mi5BcHBseUZvcmNlKGYsIHAyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaiA9IGoubmV4dEJvZHk7XG4gICAgICAgIH1cbiAgICAgICAgaSA9IGkubmV4dEJvZHk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGkgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgICB3aGlsZSAoaSkge1xuICAgICAgICBib2R5MSA9IGkuYm9keTtcbiAgICAgICAgcDEgPSBib2R5MS5HZXRXb3JsZENlbnRlcigpO1xuICAgICAgICBtYXNzMSA9IGJvZHkxLkdldE1hc3MoKTtcbiAgICAgICAgaiA9IHRoaXMubV9ib2R5TGlzdDtcbiAgICAgICAgd2hpbGUgKGogIT09IGkpIHtcbiAgICAgICAgICBib2R5MiA9IGouYm9keTtcbiAgICAgICAgICBwMiA9IGJvZHkyLkdldFdvcmxkQ2VudGVyKCk7XG4gICAgICAgICAgZHggPSBwMi54IC0gcDEueDtcbiAgICAgICAgICBkeSA9IHAyLnkgLSBwMS55O1xuICAgICAgICAgIHIyID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgICAgaWYgKHIyIDwgTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGYgPSBuZXcgYjJWZWMyKGR4LCBkeSk7XG4gICAgICAgICAgZi5NdWx0aXBseSh0aGlzLkcgLyByMiAqIG1hc3MxICogYm9keTIuR2V0TWFzcygpKTtcbiAgICAgICAgICBpZiAoYm9keTEuSXNBd2FrZSgpKSB7XG4gICAgICAgICAgICBib2R5MS5BcHBseUZvcmNlKGYsIHAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZi5NdWx0aXBseSgtMS4pO1xuICAgICAgICAgIGlmIChib2R5Mi5Jc0F3YWtlKCkpIHtcbiAgICAgICAgICAgIGJvZHkyLkFwcGx5Rm9yY2UoZiwgcDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBqID0gai5uZXh0Qm9keTtcbiAgICAgICAgfVxuICAgICAgICBpID0gaS5uZXh0Qm9keTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGIyR3Jhdml0eUNvbnRyb2xsZXI7XG5cbn0pKGIyQ29udHJvbGxlcik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyR3Jhdml0eUNvbnRyb2xsZXIuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyQ29udHJvbGxlciwgYjJNYXQyMiwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJDb250cm9sbGVyID0gQm94MkQuRHluYW1pY3MuQ29udHJvbGxlcnMuYjJDb250cm9sbGVyO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyTWF0MjIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyO1xuXG5Cb3gyRC5EeW5hbWljcy5Db250cm9sbGVycy5iMlRlbnNvckRhbXBpbmdDb250cm9sbGVyID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlciwgX3N1cGVyKTtcblxuICBiMlRlbnNvckRhbXBpbmdDb250cm9sbGVyLnByb3RvdHlwZS5UID0gbnVsbDtcblxuICBiMlRlbnNvckRhbXBpbmdDb250cm9sbGVyLnByb3RvdHlwZS5tYXhUaW1lc3RlcCA9IDA7XG5cbiAgZnVuY3Rpb24gYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlcigpIHtcbiAgICBiMlRlbnNvckRhbXBpbmdDb250cm9sbGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuVCA9IG5ldyBiMk1hdDIyKCk7XG4gICAgdGhpcy5tYXhUaW1lc3RlcCA9IDA7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJUZW5zb3JEYW1waW5nQ29udHJvbGxlci5wcm90b3R5cGUuU2V0QXhpc0FsaWduZWQgPSBmdW5jdGlvbih4RGFtcGluZywgeURhbXBpbmcpIHtcbiAgICBpZiAoeERhbXBpbmcgPT09IHZvaWQgMCkge1xuICAgICAgeERhbXBpbmcgPSAwO1xuICAgIH1cbiAgICBpZiAoeURhbXBpbmcgPT09IHZvaWQgMCkge1xuICAgICAgeURhbXBpbmcgPSAwO1xuICAgIH1cbiAgICB0aGlzLlQuY29sMS54ID0gLXhEYW1waW5nO1xuICAgIHRoaXMuVC5jb2wxLnkgPSAwO1xuICAgIHRoaXMuVC5jb2wyLnggPSAwO1xuICAgIHRoaXMuVC5jb2wyLnkgPSAteURhbXBpbmc7XG4gICAgaWYgKHhEYW1waW5nID4gMCB8fCB5RGFtcGluZyA+IDApIHtcbiAgICAgIHRoaXMubWF4VGltZXN0ZXAgPSAxIC8gTWF0aC5tYXgoeERhbXBpbmcsIHlEYW1waW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXhUaW1lc3RlcCA9IDA7XG4gICAgfVxuICB9O1xuXG4gIGIyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXIucHJvdG90eXBlLlN0ZXAgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIGJvZHksIGRhbXBpbmcsIGksIHRpbWVzdGVwO1xuICAgIHRpbWVzdGVwID0gc3RlcC5kdDtcbiAgICBpZiAodGltZXN0ZXAgPD0gTnVtYmVyLk1JTl9WQUxVRSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGltZXN0ZXAgPiB0aGlzLm1heFRpbWVzdGVwICYmIHRoaXMubWF4VGltZXN0ZXAgPiAwKSB7XG4gICAgICB0aW1lc3RlcCA9IHRoaXMubWF4VGltZXN0ZXA7XG4gICAgfVxuICAgIGkgPSB0aGlzLm1fYm9keUxpc3Q7XG4gICAgd2hpbGUgKGkpIHtcbiAgICAgIGJvZHkgPSBpLmJvZHk7XG4gICAgICBpZiAoIWJvZHkuSXNBd2FrZSgpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZGFtcGluZyA9IGJvZHkuR2V0V29ybGRWZWN0b3IoYjJNYXRoLk11bE1WKHRoaXMuVCwgYm9keS5HZXRMb2NhbFZlY3Rvcihib2R5LkdldExpbmVhclZlbG9jaXR5KCkpKSk7XG4gICAgICBib2R5LlNldExpbmVhclZlbG9jaXR5KG5ldyBiMlZlYzIoYm9keS5HZXRMaW5lYXJWZWxvY2l0eSgpLnggKyBkYW1waW5nLnggKiB0aW1lc3RlcCwgYm9keS5HZXRMaW5lYXJWZWxvY2l0eSgpLnkgKyBkYW1waW5nLnkgKiB0aW1lc3RlcCkpO1xuICAgICAgaSA9IGkubmV4dEJvZHk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBiMlRlbnNvckRhbXBpbmdDb250cm9sbGVyO1xuXG59KShiMkNvbnRyb2xsZXIpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlRlbnNvckRhbXBpbmdDb250cm9sbGVyLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRGlzdGFuY2VKb2ludCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyRGlzdGFuY2VKb2ludCwgX3N1cGVyKTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLm1fdSA9IG51bGw7XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5tX2xlbmd0aCA9IDA7XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5tX2ZyZXF1ZW5jeUh6ID0gMDtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLm1fZGFtcGluZ1JhdGlvID0gMDtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLm1faW1wdWxzZSA9IDAuMDtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLm1fZ2FtbWEgPSAwLjA7XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5tX2JpYXMgPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJEaXN0YW5jZUpvaW50KGRlZikge1xuICAgIGIyRGlzdGFuY2VKb2ludC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBkZWYpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fdSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IxLlNldFYoZGVmLmxvY2FsQW5jaG9yQSk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMi5TZXRWKGRlZi5sb2NhbEFuY2hvckIpO1xuICAgIHRoaXMubV9sZW5ndGggPSBkZWYubGVuZ3RoO1xuICAgIHRoaXMubV9mcmVxdWVuY3lIeiA9IGRlZi5mcmVxdWVuY3lIejtcbiAgICB0aGlzLm1fZGFtcGluZ1JhdGlvID0gZGVmLmRhbXBpbmdSYXRpbztcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjIpO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoaW52X2R0ICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fdS54LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91LnkpO1xuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Ub3JxdWUgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiAwLjA7XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5HZXRMZW5ndGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2xlbmd0aDtcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLlNldExlbmd0aCA9IGZ1bmN0aW9uKGxlbmd0aCkge1xuICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkge1xuICAgICAgbGVuZ3RoID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2xlbmd0aCA9IGxlbmd0aDtcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLkdldEZyZXF1ZW5jeSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZnJlcXVlbmN5SHo7XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5TZXRGcmVxdWVuY3kgPSBmdW5jdGlvbihoeikge1xuICAgIGlmIChoeiA9PT0gdm9pZCAwKSB7XG4gICAgICBoeiA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9mcmVxdWVuY3lIeiA9IGh6O1xuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuR2V0RGFtcGluZ1JhdGlvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9kYW1waW5nUmF0aW87XG4gIH07XG5cbiAgYjJEaXN0YW5jZUpvaW50LnByb3RvdHlwZS5TZXREYW1waW5nUmF0aW8gPSBmdW5jdGlvbihyYXRpbykge1xuICAgIGlmIChyYXRpbyA9PT0gdm9pZCAwKSB7XG4gICAgICByYXRpbyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9kYW1waW5nUmF0aW8gPSByYXRpbztcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDLCBQWCwgUFksIGJBLCBiQiwgY3IxdSwgY3IydSwgZCwgaW52TWFzcywgaywgbGVuZ3RoLCBvbWVnYSwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIHRoaXMubV91LnggPSBiQi5tX3N3ZWVwLmMueCArIHIyWCAtIGJBLm1fc3dlZXAuYy54IC0gcjFYO1xuICAgIHRoaXMubV91LnkgPSBiQi5tX3N3ZWVwLmMueSArIHIyWSAtIGJBLm1fc3dlZXAuYy55IC0gcjFZO1xuICAgIGxlbmd0aCA9IE1hdGguc3FydCh0aGlzLm1fdS54ICogdGhpcy5tX3UueCArIHRoaXMubV91LnkgKiB0aGlzLm1fdS55KTtcbiAgICBpZiAobGVuZ3RoID4gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICB0aGlzLm1fdS5NdWx0aXBseSgxLjAgLyBsZW5ndGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fdS5TZXRaZXJvKCk7XG4gICAgfVxuICAgIGNyMXUgPSByMVggKiB0aGlzLm1fdS55IC0gcjFZICogdGhpcy5tX3UueDtcbiAgICBjcjJ1ID0gcjJYICogdGhpcy5tX3UueSAtIHIyWSAqIHRoaXMubV91Lng7XG4gICAgaW52TWFzcyA9IGJBLm1faW52TWFzcyArIGJBLm1faW52SSAqIGNyMXUgKiBjcjF1ICsgYkIubV9pbnZNYXNzICsgYkIubV9pbnZJICogY3IydSAqIGNyMnU7XG4gICAgdGhpcy5tX21hc3MgPSAoaW52TWFzcyAhPT0gMC4wID8gMS4wIC8gaW52TWFzcyA6IDAuMCk7XG4gICAgaWYgKHRoaXMubV9mcmVxdWVuY3lIeiA+IDAuMCkge1xuICAgICAgQyA9IGxlbmd0aCAtIHRoaXMubV9sZW5ndGg7XG4gICAgICBvbWVnYSA9IDIuMCAqIE1hdGguUEkgKiB0aGlzLm1fZnJlcXVlbmN5SHo7XG4gICAgICBkID0gMi4wICogdGhpcy5tX21hc3MgKiB0aGlzLm1fZGFtcGluZ1JhdGlvICogb21lZ2E7XG4gICAgICBrID0gdGhpcy5tX21hc3MgKiBvbWVnYSAqIG9tZWdhO1xuICAgICAgdGhpcy5tX2dhbW1hID0gc3RlcC5kdCAqIChkICsgc3RlcC5kdCAqIGspO1xuICAgICAgdGhpcy5tX2dhbW1hID0gKHRoaXMubV9nYW1tYSAhPT0gMC4wID8gMSAvIHRoaXMubV9nYW1tYSA6IDAuMCk7XG4gICAgICB0aGlzLm1fYmlhcyA9IEMgKiBzdGVwLmR0ICogayAqIHRoaXMubV9nYW1tYTtcbiAgICAgIHRoaXMubV9tYXNzID0gaW52TWFzcyArIHRoaXMubV9nYW1tYTtcbiAgICAgIHRoaXMubV9tYXNzID0gKHRoaXMubV9tYXNzICE9PSAwLjAgPyAxLjAgLyB0aGlzLm1fbWFzcyA6IDAuMCk7XG4gICAgfVxuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgdGhpcy5tX2ltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgUFggPSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91Lng7XG4gICAgICBQWSA9IHRoaXMubV9pbXB1bHNlICogdGhpcy5tX3UueTtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCAtPSBiQS5tX2ludk1hc3MgKiBQWDtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueSAtPSBiQS5tX2ludk1hc3MgKiBQWTtcbiAgICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5IC09IGJBLm1faW52SSAqIChyMVggKiBQWSAtIHIxWSAqIFBYKTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQi5tX2ludk1hc3MgKiBQWDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQi5tX2ludk1hc3MgKiBQWTtcbiAgICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJCLm1faW52SSAqIChyMlggKiBQWSAtIHIyWSAqIFBYKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ltcHVsc2UgPSAwLjA7XG4gICAgfVxuICB9O1xuXG4gIGIyRGlzdGFuY2VKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90LCBQWCwgUFksIGJBLCBiQiwgaW1wdWxzZSwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WCwgdjFYLCB2MVksIHYyWCwgdjJZO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICB2MVggPSBiQS5tX2xpbmVhclZlbG9jaXR5LnggKyAoLWJBLm1fYW5ndWxhclZlbG9jaXR5ICogcjFZKTtcbiAgICB2MVkgPSBiQS5tX2xpbmVhclZlbG9jaXR5LnkgKyAoYkEubV9hbmd1bGFyVmVsb2NpdHkgKiByMVgpO1xuICAgIHYyWCA9IGJCLm1fbGluZWFyVmVsb2NpdHkueCArICgtYkIubV9hbmd1bGFyVmVsb2NpdHkgKiByMlkpO1xuICAgIHYyWSA9IGJCLm1fbGluZWFyVmVsb2NpdHkueSArIChiQi5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIyWCk7XG4gICAgQ2RvdCA9IHRoaXMubV91LnggKiAodjJYIC0gdjFYKSArIHRoaXMubV91LnkgKiAodjJZIC0gdjFZKTtcbiAgICBpbXB1bHNlID0gLXRoaXMubV9tYXNzICogKENkb3QgKyB0aGlzLm1fYmlhcyArIHRoaXMubV9nYW1tYSAqIHRoaXMubV9pbXB1bHNlKTtcbiAgICB0aGlzLm1faW1wdWxzZSArPSBpbXB1bHNlO1xuICAgIFBYID0gaW1wdWxzZSAqIHRoaXMubV91Lng7XG4gICAgUFkgPSBpbXB1bHNlICogdGhpcy5tX3UueTtcbiAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggLT0gYkEubV9pbnZNYXNzICogUFg7XG4gICAgYkEubV9saW5lYXJWZWxvY2l0eS55IC09IGJBLm1faW52TWFzcyAqIFBZO1xuICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5IC09IGJBLm1faW52SSAqIChyMVggKiBQWSAtIHIxWSAqIFBYKTtcbiAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkIubV9pbnZNYXNzICogUFg7XG4gICAgYkIubV9saW5lYXJWZWxvY2l0eS55ICs9IGJCLm1faW52TWFzcyAqIFBZO1xuICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJCLm1faW52SSAqIChyMlggKiBQWSAtIHIyWSAqIFBYKTtcbiAgfTtcblxuICBiMkRpc3RhbmNlSm9pbnQucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0ZSkge1xuICAgIHZhciBDLCBQWCwgUFksIGJBLCBiQiwgZFgsIGRZLCBpbXB1bHNlLCBsZW5ndGgsIHIxWCwgcjFZLCByMlgsIHIyWSwgdE1hdCwgdFg7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIGlmICh0aGlzLm1fZnJlcXVlbmN5SHogPiAwLjApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHIxWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgIHIxWSA9IHRNYXQuY29sMS55ICogcjFYICsgdE1hdC5jb2wyLnkgKiByMVk7XG4gICAgcjFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgIHIyWCA9IHRYO1xuICAgIGRYID0gYkIubV9zd2VlcC5jLnggKyByMlggLSBiQS5tX3N3ZWVwLmMueCAtIHIxWDtcbiAgICBkWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZIC0gYkEubV9zd2VlcC5jLnkgLSByMVk7XG4gICAgbGVuZ3RoID0gTWF0aC5zcXJ0KGRYICogZFggKyBkWSAqIGRZKTtcbiAgICBkWCAvPSBsZW5ndGg7XG4gICAgZFkgLz0gbGVuZ3RoO1xuICAgIEMgPSBsZW5ndGggLSB0aGlzLm1fbGVuZ3RoO1xuICAgIEMgPSBiMk1hdGguQ2xhbXAoQywgLWIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbiwgYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKTtcbiAgICBpbXB1bHNlID0gLXRoaXMubV9tYXNzICogQztcbiAgICB0aGlzLm1fdS5TZXQoZFgsIGRZKTtcbiAgICBQWCA9IGltcHVsc2UgKiB0aGlzLm1fdS54O1xuICAgIFBZID0gaW1wdWxzZSAqIHRoaXMubV91Lnk7XG4gICAgYkEubV9zd2VlcC5jLnggLT0gYkEubV9pbnZNYXNzICogUFg7XG4gICAgYkEubV9zd2VlcC5jLnkgLT0gYkEubV9pbnZNYXNzICogUFk7XG4gICAgYkEubV9zd2VlcC5hIC09IGJBLm1faW52SSAqIChyMVggKiBQWSAtIHIxWSAqIFBYKTtcbiAgICBiQi5tX3N3ZWVwLmMueCArPSBiQi5tX2ludk1hc3MgKiBQWDtcbiAgICBiQi5tX3N3ZWVwLmMueSArPSBiQi5tX2ludk1hc3MgKiBQWTtcbiAgICBiQi5tX3N3ZWVwLmEgKz0gYkIubV9pbnZJICogKHIyWCAqIFBZIC0gcjJZICogUFgpO1xuICAgIGJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICByZXR1cm4gYjJNYXRoLkFicyhDKSA8IGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcDtcbiAgfTtcblxuICByZXR1cm4gYjJEaXN0YW5jZUpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJEaXN0YW5jZUpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJEaXN0YW5jZUpvaW50RGVmID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJEaXN0YW5jZUpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IDA7XG5cbiAgYjJEaXN0YW5jZUpvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckEgPSBudWxsO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JCID0gbnVsbDtcblxuICBiMkRpc3RhbmNlSm9pbnREZWYucHJvdG90eXBlLnVzZXJEYXRhID0gbnVsbDtcblxuICBiMkRpc3RhbmNlSm9pbnREZWYucHJvdG90eXBlLmJvZHlBID0gbnVsbDtcblxuICBiMkRpc3RhbmNlSm9pbnREZWYucHJvdG90eXBlLmJvZHlCID0gbnVsbDtcblxuICBiMkRpc3RhbmNlSm9pbnREZWYucHJvdG90eXBlLmxlbmd0aCA9IDEuMDtcblxuICBiMkRpc3RhbmNlSm9pbnREZWYucHJvdG90eXBlLmZyZXF1ZW5jeUh6ID0gMC4wO1xuXG4gIGIyRGlzdGFuY2VKb2ludERlZi5wcm90b3R5cGUuZGFtcGluZ1JhdGlvID0gMC4wO1xuXG4gIGZ1bmN0aW9uIGIyRGlzdGFuY2VKb2ludERlZigpIHtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLnR5cGUgPSBiMkpvaW50LmVfZGlzdGFuY2VKb2ludDtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkRpc3RhbmNlSm9pbnREZWYucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihiQSwgYkIsIGFuY2hvckEsIGFuY2hvckIpIHtcbiAgICB2YXIgZFgsIGRZO1xuICAgIHRoaXMuYm9keUEgPSBiQTtcbiAgICB0aGlzLmJvZHlCID0gYkI7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEuU2V0Vih0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yQSkpO1xuICAgIHRoaXMubG9jYWxBbmNob3JCLlNldFYodGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvckIpKTtcbiAgICBkWCA9IGFuY2hvckIueCAtIGFuY2hvckEueDtcbiAgICBkWSA9IGFuY2hvckIueSAtIGFuY2hvckEueTtcbiAgICB0aGlzLmxlbmd0aCA9IE1hdGguc3FydChkWCAqIGRYICsgZFkgKiBkWSk7XG4gICAgdGhpcy5mcmVxdWVuY3lIeiA9IDAuMDtcbiAgICB0aGlzLmRhbXBpbmdSYXRpbyA9IDAuMDtcbiAgfTtcblxuICByZXR1cm4gYjJEaXN0YW5jZUpvaW50RGVmO1xuXG59KShiMkpvaW50RGVmKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJEaXN0YW5jZUpvaW50RGVmLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMk1hdDIyLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkZyaWN0aW9uSm9pbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkZyaWN0aW9uSm9pbnQsIF9zdXBlcik7XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5tX2xpbmVhck1hc3MgPSBudWxsO1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUubV9saW5lYXJJbXB1bHNlID0gbnVsbDtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLm1fYW5ndWxhck1hc3MgPSAwLjA7XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5tX2FuZ3VsYXJJbXB1bHNlID0gMC4wO1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUubV9tYXhGb3JjZSA9IDA7XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5tX21heFRvcnF1ZSA9IDA7XG5cbiAgZnVuY3Rpb24gYjJGcmljdGlvbkpvaW50KGRlZikge1xuICAgIGIyRnJpY3Rpb25Kb2ludC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBkZWYpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbGluZWFyTWFzcyA9IG5ldyBiMk1hdDIyKCk7XG4gICAgdGhpcy5tX2xpbmVhckltcHVsc2UgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yQS5TZXRWKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckIuU2V0VihkZWYubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLm1fbGluZWFyTWFzcy5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX2xpbmVhckltcHVsc2UuU2V0WmVybygpO1xuICAgIHRoaXMubV9tYXhGb3JjZSA9IGRlZi5tYXhGb3JjZTtcbiAgICB0aGlzLm1fbWF4VG9ycXVlID0gZGVmLm1heFRvcnF1ZTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSk7XG4gIH07XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvckIpO1xuICB9O1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoaW52X2R0ICogdGhpcy5tX2xpbmVhckltcHVsc2UueCwgaW52X2R0ICogdGhpcy5tX2xpbmVhckltcHVsc2UueSk7XG4gIH07XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9hbmd1bGFySW1wdWxzZTtcbiAgfTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLlNldE1heEZvcmNlID0gZnVuY3Rpb24oZm9yY2UpIHtcbiAgICBpZiAoZm9yY2UgPT09IHZvaWQgMCkge1xuICAgICAgZm9yY2UgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fbWF4Rm9yY2UgPSBmb3JjZTtcbiAgfTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLkdldE1heEZvcmNlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9tYXhGb3JjZTtcbiAgfTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLlNldE1heFRvcnF1ZSA9IGZ1bmN0aW9uKHRvcnF1ZSkge1xuICAgIGlmICh0b3JxdWUgPT09IHZvaWQgMCkge1xuICAgICAgdG9ycXVlID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX21heFRvcnF1ZSA9IHRvcnF1ZTtcbiAgfTtcblxuICBiMkZyaWN0aW9uSm9pbnQucHJvdG90eXBlLkdldE1heFRvcnF1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbWF4VG9ycXVlO1xuICB9O1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIEssIFAsIGJBLCBiQiwgaUEsIGlCLCBtQSwgbUIsIHJBWCwgckFZLCByQlgsIHJCWSwgdE1hdCwgdFg7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByQVggPSB0aGlzLm1fbG9jYWxBbmNob3JBLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgckFZID0gdGhpcy5tX2xvY2FsQW5jaG9yQS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByQVggKyB0TWF0LmNvbDIueCAqIHJBWTtcbiAgICByQVkgPSB0TWF0LmNvbDEueSAqIHJBWCArIHRNYXQuY29sMi55ICogckFZO1xuICAgIHJBWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgckJYID0gdGhpcy5tX2xvY2FsQW5jaG9yQi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJCWSA9IHRoaXMubV9sb2NhbEFuY2hvckIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogckJYICsgdE1hdC5jb2wyLnggKiByQlk7XG4gICAgckJZID0gdE1hdC5jb2wxLnkgKiByQlggKyB0TWF0LmNvbDIueSAqIHJCWTtcbiAgICByQlggPSB0WDtcbiAgICBtQSA9IGJBLm1faW52TWFzcztcbiAgICBtQiA9IGJCLm1faW52TWFzcztcbiAgICBpQSA9IGJBLm1faW52STtcbiAgICBpQiA9IGJCLm1faW52STtcbiAgICBLID0gbmV3IGIyTWF0MjIoKTtcbiAgICBLLmNvbDEueCA9IG1BICsgbUI7XG4gICAgSy5jb2wyLnggPSAwLjA7XG4gICAgSy5jb2wxLnkgPSAwLjA7XG4gICAgSy5jb2wyLnkgPSBtQSArIG1CO1xuICAgIEsuY29sMS54ICs9IGlBICogckFZICogckFZO1xuICAgIEsuY29sMi54ICs9IC1pQSAqIHJBWCAqIHJBWTtcbiAgICBLLmNvbDEueSArPSAtaUEgKiByQVggKiByQVk7XG4gICAgSy5jb2wyLnkgKz0gaUEgKiByQVggKiByQVg7XG4gICAgSy5jb2wxLnggKz0gaUIgKiByQlkgKiByQlk7XG4gICAgSy5jb2wyLnggKz0gLWlCICogckJYICogckJZO1xuICAgIEsuY29sMS55ICs9IC1pQiAqIHJCWCAqIHJCWTtcbiAgICBLLmNvbDIueSArPSBpQiAqIHJCWCAqIHJCWDtcbiAgICBLLkdldEludmVyc2UodGhpcy5tX2xpbmVhck1hc3MpO1xuICAgIHRoaXMubV9hbmd1bGFyTWFzcyA9IGlBICsgaUI7XG4gICAgaWYgKHRoaXMubV9hbmd1bGFyTWFzcyA+IDAuMCkge1xuICAgICAgdGhpcy5tX2FuZ3VsYXJNYXNzID0gMS4wIC8gdGhpcy5tX2FuZ3VsYXJNYXNzO1xuICAgIH1cbiAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLnggKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UueSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgUCA9IHRoaXMubV9saW5lYXJJbXB1bHNlO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS54IC09IG1BICogUC54O1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55IC09IG1BICogUC55O1xuICAgICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgLT0gaUEgKiAockFYICogUC55IC0gckFZICogUC54ICsgdGhpcy5tX2FuZ3VsYXJJbXB1bHNlKTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBtQiAqIFAueDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBtQiAqIFAueTtcbiAgICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IGlCICogKHJCWCAqIFAueSAtIHJCWSAqIFAueCArIHRoaXMubV9hbmd1bGFySW1wdWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9saW5lYXJJbXB1bHNlLlNldFplcm8oKTtcbiAgICAgIHRoaXMubV9hbmd1bGFySW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gIH07XG5cbiAgYjJGcmljdGlvbkpvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIENkb3QsIENkb3RYLCBDZG90WSwgYkEsIGJCLCBpQSwgaUIsIGltcHVsc2UsIGltcHVsc2VWLCBtQSwgbUIsIG1heEltcHVsc2UsIG9sZEltcHVsc2UsIG9sZEltcHVsc2VWLCByQVgsIHJBWSwgckJYLCByQlksIHRNYXQsIHRYLCB2QSwgdkIsIHdBLCB3QjtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB2QSA9IGJBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgd0EgPSBiQS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICB2QiA9IGJCLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgd0IgPSBiQi5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICBtQSA9IGJBLm1faW52TWFzcztcbiAgICBtQiA9IGJCLm1faW52TWFzcztcbiAgICBpQSA9IGJBLm1faW52STtcbiAgICBpQiA9IGJCLm1faW52STtcbiAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgIHJBWCA9IHRoaXMubV9sb2NhbEFuY2hvckEueCAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByQVkgPSB0aGlzLm1fbG9jYWxBbmNob3JBLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHJBWCArIHRNYXQuY29sMi54ICogckFZO1xuICAgIHJBWSA9IHRNYXQuY29sMS55ICogckFYICsgdE1hdC5jb2wyLnkgKiByQVk7XG4gICAgckFYID0gdFg7XG4gICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICByQlggPSB0aGlzLm1fbG9jYWxBbmNob3JCLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgckJZID0gdGhpcy5tX2xvY2FsQW5jaG9yQi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByQlggKyB0TWF0LmNvbDIueCAqIHJCWTtcbiAgICByQlkgPSB0TWF0LmNvbDEueSAqIHJCWCArIHRNYXQuY29sMi55ICogckJZO1xuICAgIHJCWCA9IHRYO1xuICAgIG1heEltcHVsc2UgPSAwO1xuICAgIENkb3QgPSB3QiAtIHdBO1xuICAgIGltcHVsc2UgPSAtdGhpcy5tX2FuZ3VsYXJNYXNzICogQ2RvdDtcbiAgICBvbGRJbXB1bHNlID0gdGhpcy5tX2FuZ3VsYXJJbXB1bHNlO1xuICAgIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heFRvcnF1ZTtcbiAgICB0aGlzLm1fYW5ndWxhckltcHVsc2UgPSBiMk1hdGguQ2xhbXAodGhpcy5tX2FuZ3VsYXJJbXB1bHNlICsgaW1wdWxzZSwgLW1heEltcHVsc2UsIG1heEltcHVsc2UpO1xuICAgIGltcHVsc2UgPSB0aGlzLm1fYW5ndWxhckltcHVsc2UgLSBvbGRJbXB1bHNlO1xuICAgIHdBIC09IGlBICogaW1wdWxzZTtcbiAgICB3QiArPSBpQiAqIGltcHVsc2U7XG4gICAgQ2RvdFggPSB2Qi54IC0gd0IgKiByQlkgLSB2QS54ICsgd0EgKiByQVk7XG4gICAgQ2RvdFkgPSB2Qi55ICsgd0IgKiByQlggLSB2QS55IC0gd0EgKiByQVg7XG4gICAgaW1wdWxzZVYgPSBiMk1hdGguTXVsTVYodGhpcy5tX2xpbmVhck1hc3MsIG5ldyBiMlZlYzIoLUNkb3RYLCAtQ2RvdFkpKTtcbiAgICBvbGRJbXB1bHNlViA9IHRoaXMubV9saW5lYXJJbXB1bHNlLkNvcHkoKTtcbiAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5BZGQoaW1wdWxzZVYpO1xuICAgIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heEZvcmNlO1xuICAgIGlmICh0aGlzLm1fbGluZWFySW1wdWxzZS5MZW5ndGhTcXVhcmVkKCkgPiBtYXhJbXB1bHNlICogbWF4SW1wdWxzZSkge1xuICAgICAgdGhpcy5tX2xpbmVhckltcHVsc2UuTm9ybWFsaXplKCk7XG4gICAgICB0aGlzLm1fbGluZWFySW1wdWxzZS5NdWx0aXBseShtYXhJbXB1bHNlKTtcbiAgICB9XG4gICAgaW1wdWxzZVYgPSBiMk1hdGguU3VidHJhY3RWVih0aGlzLm1fbGluZWFySW1wdWxzZSwgb2xkSW1wdWxzZVYpO1xuICAgIHZBLnggLT0gbUEgKiBpbXB1bHNlVi54O1xuICAgIHZBLnkgLT0gbUEgKiBpbXB1bHNlVi55O1xuICAgIHdBIC09IGlBICogKHJBWCAqIGltcHVsc2VWLnkgLSByQVkgKiBpbXB1bHNlVi54KTtcbiAgICB2Qi54ICs9IG1CICogaW1wdWxzZVYueDtcbiAgICB2Qi55ICs9IG1CICogaW1wdWxzZVYueTtcbiAgICB3QiArPSBpQiAqIChyQlggKiBpbXB1bHNlVi55IC0gckJZICogaW1wdWxzZVYueCk7XG4gICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgPSB3QTtcbiAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSA9IHdCO1xuICB9O1xuXG4gIGIyRnJpY3Rpb25Kb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICByZXR1cm4gYjJGcmljdGlvbkpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJGcmljdGlvbkpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50RGVmID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJGcmljdGlvbkpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGZ1bmN0aW9uIGIyRnJpY3Rpb25Kb2ludERlZigpIHtcbiAgICByZXR1cm4gYjJGcmljdGlvbkpvaW50RGVmLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgYjJGcmljdGlvbkpvaW50RGVmLnByb3RvdHlwZS50eXBlID0gYjJKb2ludC5lX2ZyaWN0aW9uSm9pbnQ7XG5cbiAgYjJGcmljdGlvbkpvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckEgPSBudWxsO1xuXG4gIGIyRnJpY3Rpb25Kb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JCID0gbnVsbDtcblxuICBiMkZyaWN0aW9uSm9pbnREZWYucHJvdG90eXBlLm1heEZvcmNlID0gMC4wO1xuXG4gIGIyRnJpY3Rpb25Kb2ludERlZi5wcm90b3R5cGUubWF4VG9ycXVlID0gMC4wO1xuXG4gIHJldHVybiBiMkZyaWN0aW9uSm9pbnREZWY7XG5cbn0pKGIySm9pbnREZWYpO1xuXG4oe1xuICBjb25zdHJ1Y3RvcjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gIH0sXG4gIEluaXRpYWxpemU6IGZ1bmN0aW9uKGJBLCBiQiwgYW5jaG9yKSB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQS5TZXRWKHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3IpKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQi5TZXRWKHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNob3IpKTtcbiAgfVxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyRnJpY3Rpb25Kb2ludERlZi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKYWNvYmlhbiwgYjJKb2ludCwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIySmFjb2JpYW4gPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKYWNvYmlhbjtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyR2VhckpvaW50ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJHZWFySm9pbnQsIF9zdXBlcik7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fZ3JvdW5kQW5jaG9yMSA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fZ3JvdW5kQW5jaG9yMiA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fSiA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1fcmV2b2x1dGUxID0gbnVsbDtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9wcmlzbWF0aWMxID0gbnVsbDtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9yZXZvbHV0ZTIgPSBudWxsO1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5tX3ByaXNtYXRpYzIgPSBudWxsO1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5tX2dyb3VuZDEgPSBudWxsO1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5tX2dyb3VuZDIgPSBudWxsO1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5tX3JhdGlvID0gMDtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUubV9jb25zdGFudCA9IDA7XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLm1faW1wdWxzZSA9IDAuMDtcblxuICBmdW5jdGlvbiBiMkdlYXJKb2ludChkZWYpIHtcbiAgICB2YXIgY29vcmRpbmF0ZTEsIGNvb3JkaW5hdGUyLCB0eXBlMSwgdHlwZTI7XG4gICAgYjJHZWFySm9pbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZGVmKTtcbiAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX0ogPSBuZXcgYjJKYWNvYmlhbigpO1xuICAgIHR5cGUxID0gcGFyc2VJbnQoZGVmLmpvaW50MS5tX3R5cGUpO1xuICAgIHR5cGUyID0gcGFyc2VJbnQoZGVmLmpvaW50Mi5tX3R5cGUpO1xuICAgIGNvb3JkaW5hdGUxID0gMDtcbiAgICBjb29yZGluYXRlMiA9IDA7XG4gICAgdGhpcy5tX2dyb3VuZDEgPSBkZWYuam9pbnQxLkdldEJvZHlBKCk7XG4gICAgdGhpcy5tX2JvZHlBID0gZGVmLmpvaW50MS5HZXRCb2R5QigpO1xuICAgIGlmICh0eXBlMSA9PT0gYjJKb2ludC5lX3Jldm9sdXRlSm9pbnQpIHtcbiAgICAgIHRoaXMubV9yZXZvbHV0ZTEgPSAoZGVmLmpvaW50MSBpbnN0YW5jZW9mIGIyUmV2b2x1dGVKb2ludCA/IGRlZi5qb2ludDEgOiBudWxsKTtcbiAgICAgIHRoaXMubV9ncm91bmRBbmNob3IxLlNldFYodGhpcy5tX3Jldm9sdXRlMS5tX2xvY2FsQW5jaG9yMSk7XG4gICAgICB0aGlzLm1fbG9jYWxBbmNob3IxLlNldFYodGhpcy5tX3Jldm9sdXRlMS5tX2xvY2FsQW5jaG9yMik7XG4gICAgICBjb29yZGluYXRlMSA9IHRoaXMubV9yZXZvbHV0ZTEuR2V0Sm9pbnRBbmdsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fcHJpc21hdGljMSA9IChkZWYuam9pbnQxIGluc3RhbmNlb2YgYjJQcmlzbWF0aWNKb2ludCA/IGRlZi5qb2ludDEgOiBudWxsKTtcbiAgICAgIHRoaXMubV9ncm91bmRBbmNob3IxLlNldFYodGhpcy5tX3ByaXNtYXRpYzEubV9sb2NhbEFuY2hvcjEpO1xuICAgICAgdGhpcy5tX2xvY2FsQW5jaG9yMS5TZXRWKHRoaXMubV9wcmlzbWF0aWMxLm1fbG9jYWxBbmNob3IyKTtcbiAgICAgIGNvb3JkaW5hdGUxID0gdGhpcy5tX3ByaXNtYXRpYzEuR2V0Sm9pbnRUcmFuc2xhdGlvbigpO1xuICAgIH1cbiAgICB0aGlzLm1fZ3JvdW5kMiA9IGRlZi5qb2ludDIuR2V0Qm9keUEoKTtcbiAgICB0aGlzLm1fYm9keUIgPSBkZWYuam9pbnQyLkdldEJvZHlCKCk7XG4gICAgaWYgKHR5cGUyID09PSBiMkpvaW50LmVfcmV2b2x1dGVKb2ludCkge1xuICAgICAgdGhpcy5tX3Jldm9sdXRlMiA9IChkZWYuam9pbnQyIGluc3RhbmNlb2YgYjJSZXZvbHV0ZUpvaW50ID8gZGVmLmpvaW50MiA6IG51bGwpO1xuICAgICAgdGhpcy5tX2dyb3VuZEFuY2hvcjIuU2V0Vih0aGlzLm1fcmV2b2x1dGUyLm1fbG9jYWxBbmNob3IxKTtcbiAgICAgIHRoaXMubV9sb2NhbEFuY2hvcjIuU2V0Vih0aGlzLm1fcmV2b2x1dGUyLm1fbG9jYWxBbmNob3IyKTtcbiAgICAgIGNvb3JkaW5hdGUyID0gdGhpcy5tX3Jldm9sdXRlMi5HZXRKb2ludEFuZ2xlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9wcmlzbWF0aWMyID0gKGRlZi5qb2ludDIgaW5zdGFuY2VvZiBiMlByaXNtYXRpY0pvaW50ID8gZGVmLmpvaW50MiA6IG51bGwpO1xuICAgICAgdGhpcy5tX2dyb3VuZEFuY2hvcjIuU2V0Vih0aGlzLm1fcHJpc21hdGljMi5tX2xvY2FsQW5jaG9yMSk7XG4gICAgICB0aGlzLm1fbG9jYWxBbmNob3IyLlNldFYodGhpcy5tX3ByaXNtYXRpYzIubV9sb2NhbEFuY2hvcjIpO1xuICAgICAgY29vcmRpbmF0ZTIgPSB0aGlzLm1fcHJpc21hdGljMi5HZXRKb2ludFRyYW5zbGF0aW9uKCk7XG4gICAgfVxuICAgIHRoaXMubV9yYXRpbyA9IGRlZi5yYXRpbztcbiAgICB0aGlzLm1fY29uc3RhbnQgPSBjb29yZGluYXRlMSArIHRoaXMubV9yYXRpbyAqIGNvb3JkaW5hdGUyO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjEpO1xuICB9O1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjIpO1xuICB9O1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueCwgaW52X2R0ICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLnkpO1xuICB9O1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIHZhciBQWCwgUFksIHJYLCByWSwgdE1hdCwgdFg7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICB0TWF0ID0gdGhpcy5tX2JvZHlCLm1feGYuUjtcbiAgICByWCA9IHRoaXMubV9sb2NhbEFuY2hvcjEueCAtIHRoaXMubV9ib2R5Qi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgclkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSB0aGlzLm1fYm9keUIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByWCArIHRNYXQuY29sMi54ICogclk7XG4gICAgclkgPSB0TWF0LmNvbDEueSAqIHJYICsgdE1hdC5jb2wyLnkgKiByWTtcbiAgICByWCA9IHRYO1xuICAgIFBYID0gdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLng7XG4gICAgUFkgPSB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckIueTtcbiAgICByZXR1cm4gaW52X2R0ICogKHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0ouYW5ndWxhckIgLSByWCAqIFBZICsgclkgKiBQWCk7XG4gIH07XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLkdldFJhdGlvID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9yYXRpbztcbiAgfTtcblxuICBiMkdlYXJKb2ludC5wcm90b3R5cGUuU2V0UmF0aW8gPSBmdW5jdGlvbihyYXRpbykge1xuICAgIGlmIChyYXRpbyA9PT0gdm9pZCAwKSB7XG4gICAgICByYXRpbyA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9yYXRpbyA9IHJhdGlvO1xuICB9O1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgSywgYkEsIGJCLCBjcnVnLCBnMSwgZzIsIHJYLCByWSwgdE1hdCwgdFZlYywgdFgsIHVnWCwgdWdZO1xuICAgIGcxID0gdGhpcy5tX2dyb3VuZDE7XG4gICAgZzIgPSB0aGlzLm1fZ3JvdW5kMjtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB1Z1ggPSAwO1xuICAgIHVnWSA9IDA7XG4gICAgclggPSAwO1xuICAgIHJZID0gMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRWZWMgPSB2b2lkIDA7XG4gICAgY3J1ZyA9IDA7XG4gICAgdFggPSAwO1xuICAgIEsgPSAwLjA7XG4gICAgdGhpcy5tX0ouU2V0WmVybygpO1xuICAgIGlmICh0aGlzLm1fcmV2b2x1dGUxKSB7XG4gICAgICB0aGlzLm1fSi5hbmd1bGFyQSA9IC0xLjA7XG4gICAgICBLICs9IGJBLm1faW52STtcbiAgICB9IGVsc2Uge1xuICAgICAgdE1hdCA9IGcxLm1feGYuUjtcbiAgICAgIHRWZWMgPSB0aGlzLm1fcHJpc21hdGljMS5tX2xvY2FsWEF4aXMxO1xuICAgICAgdWdYID0gdE1hdC5jb2wxLnggKiB0VmVjLnggKyB0TWF0LmNvbDIueCAqIHRWZWMueTtcbiAgICAgIHVnWSA9IHRNYXQuY29sMS55ICogdFZlYy54ICsgdE1hdC5jb2wyLnkgKiB0VmVjLnk7XG4gICAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgICAgclggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgICByWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICAgIHRYID0gdE1hdC5jb2wxLnggKiByWCArIHRNYXQuY29sMi54ICogclk7XG4gICAgICByWSA9IHRNYXQuY29sMS55ICogclggKyB0TWF0LmNvbDIueSAqIHJZO1xuICAgICAgclggPSB0WDtcbiAgICAgIGNydWcgPSByWCAqIHVnWSAtIHJZICogdWdYO1xuICAgICAgdGhpcy5tX0oubGluZWFyQS5TZXQoLXVnWCwgLXVnWSk7XG4gICAgICB0aGlzLm1fSi5hbmd1bGFyQSA9IC1jcnVnO1xuICAgICAgSyArPSBiQS5tX2ludk1hc3MgKyBiQS5tX2ludkkgKiBjcnVnICogY3J1ZztcbiAgICB9XG4gICAgaWYgKHRoaXMubV9yZXZvbHV0ZTIpIHtcbiAgICAgIHRoaXMubV9KLmFuZ3VsYXJCID0gLXRoaXMubV9yYXRpbztcbiAgICAgIEsgKz0gdGhpcy5tX3JhdGlvICogdGhpcy5tX3JhdGlvICogYkIubV9pbnZJO1xuICAgIH0gZWxzZSB7XG4gICAgICB0TWF0ID0gZzIubV94Zi5SO1xuICAgICAgdFZlYyA9IHRoaXMubV9wcmlzbWF0aWMyLm1fbG9jYWxYQXhpczE7XG4gICAgICB1Z1ggPSB0TWF0LmNvbDEueCAqIHRWZWMueCArIHRNYXQuY29sMi54ICogdFZlYy55O1xuICAgICAgdWdZID0gdE1hdC5jb2wxLnkgKiB0VmVjLnggKyB0TWF0LmNvbDIueSAqIHRWZWMueTtcbiAgICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgICByWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICAgIHJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHJYICsgdE1hdC5jb2wyLnggKiByWTtcbiAgICAgIHJZID0gdE1hdC5jb2wxLnkgKiByWCArIHRNYXQuY29sMi55ICogclk7XG4gICAgICByWCA9IHRYO1xuICAgICAgY3J1ZyA9IHJYICogdWdZIC0gclkgKiB1Z1g7XG4gICAgICB0aGlzLm1fSi5saW5lYXJCLlNldCgtdGhpcy5tX3JhdGlvICogdWdYLCAtdGhpcy5tX3JhdGlvICogdWdZKTtcbiAgICAgIHRoaXMubV9KLmFuZ3VsYXJCID0gLXRoaXMubV9yYXRpbyAqIGNydWc7XG4gICAgICBLICs9IHRoaXMubV9yYXRpbyAqIHRoaXMubV9yYXRpbyAqIChiQi5tX2ludk1hc3MgKyBiQi5tX2ludkkgKiBjcnVnICogY3J1Zyk7XG4gICAgfVxuICAgIHRoaXMubV9tYXNzID0gKEsgPiAwLjAgPyAxLjAgLyBLIDogMC4wKTtcbiAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQS5tX2ludk1hc3MgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckEueDtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQS5tX2ludk1hc3MgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckEueTtcbiAgICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJBLm1faW52SSAqIHRoaXMubV9pbXB1bHNlICogdGhpcy5tX0ouYW5ndWxhckE7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkIubV9pbnZNYXNzICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLng7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkIubV9pbnZNYXNzICogdGhpcy5tX2ltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLnk7XG4gICAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQi5tX2ludkkgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV9KLmFuZ3VsYXJCO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gIH07XG5cbiAgYjJHZWFySm9pbnQucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgQ2RvdCwgYkEsIGJCLCBpbXB1bHNlO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIENkb3QgPSB0aGlzLm1fSi5Db21wdXRlKGJBLm1fbGluZWFyVmVsb2NpdHksIGJBLm1fYW5ndWxhclZlbG9jaXR5LCBiQi5tX2xpbmVhclZlbG9jaXR5LCBiQi5tX2FuZ3VsYXJWZWxvY2l0eSk7XG4gICAgaW1wdWxzZSA9IC10aGlzLm1fbWFzcyAqIENkb3Q7XG4gICAgdGhpcy5tX2ltcHVsc2UgKz0gaW1wdWxzZTtcbiAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkEubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckEueDtcbiAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkEubV9pbnZNYXNzICogaW1wdWxzZSAqIHRoaXMubV9KLmxpbmVhckEueTtcbiAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQS5tX2ludkkgKiBpbXB1bHNlICogdGhpcy5tX0ouYW5ndWxhckE7XG4gICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IGJCLm1faW52TWFzcyAqIGltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLng7XG4gICAgYkIubV9saW5lYXJWZWxvY2l0eS55ICs9IGJCLm1faW52TWFzcyAqIGltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLnk7XG4gICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkIubV9pbnZJICogaW1wdWxzZSAqIHRoaXMubV9KLmFuZ3VsYXJCO1xuICB9O1xuXG4gIGIyR2VhckpvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICB2YXIgQywgYkEsIGJCLCBjb29yZGluYXRlMSwgY29vcmRpbmF0ZTIsIGltcHVsc2UsIGxpbmVhckVycm9yO1xuICAgIGlmIChiYXVtZ2FydGUgPT09IHZvaWQgMCkge1xuICAgICAgYmF1bWdhcnRlID0gMDtcbiAgICB9XG4gICAgbGluZWFyRXJyb3IgPSAwLjA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgY29vcmRpbmF0ZTEgPSAwO1xuICAgIGNvb3JkaW5hdGUyID0gMDtcbiAgICBpZiAodGhpcy5tX3Jldm9sdXRlMSkge1xuICAgICAgY29vcmRpbmF0ZTEgPSB0aGlzLm1fcmV2b2x1dGUxLkdldEpvaW50QW5nbGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29vcmRpbmF0ZTEgPSB0aGlzLm1fcHJpc21hdGljMS5HZXRKb2ludFRyYW5zbGF0aW9uKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fcmV2b2x1dGUyKSB7XG4gICAgICBjb29yZGluYXRlMiA9IHRoaXMubV9yZXZvbHV0ZTIuR2V0Sm9pbnRBbmdsZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb29yZGluYXRlMiA9IHRoaXMubV9wcmlzbWF0aWMyLkdldEpvaW50VHJhbnNsYXRpb24oKTtcbiAgICB9XG4gICAgQyA9IHRoaXMubV9jb25zdGFudCAtIChjb29yZGluYXRlMSArIHRoaXMubV9yYXRpbyAqIGNvb3JkaW5hdGUyKTtcbiAgICBpbXB1bHNlID0gLXRoaXMubV9tYXNzICogQztcbiAgICBiQS5tX3N3ZWVwLmMueCArPSBiQS5tX2ludk1hc3MgKiBpbXB1bHNlICogdGhpcy5tX0oubGluZWFyQS54O1xuICAgIGJBLm1fc3dlZXAuYy55ICs9IGJBLm1faW52TWFzcyAqIGltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJBLnk7XG4gICAgYkEubV9zd2VlcC5hICs9IGJBLm1faW52SSAqIGltcHVsc2UgKiB0aGlzLm1fSi5hbmd1bGFyQTtcbiAgICBiQi5tX3N3ZWVwLmMueCArPSBiQi5tX2ludk1hc3MgKiBpbXB1bHNlICogdGhpcy5tX0oubGluZWFyQi54O1xuICAgIGJCLm1fc3dlZXAuYy55ICs9IGJCLm1faW52TWFzcyAqIGltcHVsc2UgKiB0aGlzLm1fSi5saW5lYXJCLnk7XG4gICAgYkIubV9zd2VlcC5hICs9IGJCLm1faW52SSAqIGltcHVsc2UgKiB0aGlzLm1fSi5hbmd1bGFyQjtcbiAgICBiQS5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIGJCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgcmV0dXJuIGxpbmVhckVycm9yIDwgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wO1xuICB9O1xuXG4gIHJldHVybiBiMkdlYXJKb2ludDtcblxufSkoYjJKb2ludCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyR2VhckpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJHZWFySm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkdlYXJKb2ludERlZiwgX3N1cGVyKTtcblxuICBmdW5jdGlvbiBiMkdlYXJKb2ludERlZigpIHtcbiAgICByZXR1cm4gYjJHZWFySm9pbnREZWYuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBiMkdlYXJKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IGIySm9pbnQuZV9nZWFySm9pbnQ7XG5cbiAgYjJHZWFySm9pbnREZWYucHJvdG90eXBlLmpvaW50MSA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnREZWYucHJvdG90eXBlLmpvaW50MiA9IG51bGw7XG5cbiAgYjJHZWFySm9pbnREZWYucHJvdG90eXBlLnJhdGlvID0gMS4wO1xuXG4gIHJldHVybiBiMkdlYXJKb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyR2VhckpvaW50RGVmLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMlZlYzI7XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKYWNvYmlhbiA9IChmdW5jdGlvbigpIHtcbiAgYjJKYWNvYmlhbi5wcm90b3R5cGUubGluZWFyQSA9IG51bGw7XG5cbiAgYjJKYWNvYmlhbi5wcm90b3R5cGUubGluZWFyQiA9IG51bGw7XG5cbiAgYjJKYWNvYmlhbi5wcm90b3R5cGUuYW5ndWxhckEgPSBudWxsO1xuXG4gIGIySmFjb2JpYW4ucHJvdG90eXBlLmFuZ3VsYXJCID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkphY29iaWFuKCkge1xuICAgIHRoaXMubGluZWFyQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxpbmVhckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJKYWNvYmlhbi5wcm90b3R5cGUuU2V0WmVybyA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubGluZWFyQS5TZXRaZXJvKCk7XG4gICAgdGhpcy5hbmd1bGFyQSA9IDAuMDtcbiAgICB0aGlzLmxpbmVhckIuU2V0WmVybygpO1xuICAgIHRoaXMuYW5ndWxhckIgPSAwLjA7XG4gIH07XG5cbiAgYjJKYWNvYmlhbi5wcm90b3R5cGUuU2V0ID0gZnVuY3Rpb24oeDEsIGExLCB4MiwgYTIpIHtcbiAgICBpZiAoYTEgPT09IHZvaWQgMCkge1xuICAgICAgYTEgPSAwO1xuICAgIH1cbiAgICBpZiAoYTIgPT09IHZvaWQgMCkge1xuICAgICAgYTIgPSAwO1xuICAgIH1cbiAgICB0aGlzLmxpbmVhckEuU2V0Vih4MSk7XG4gICAgdGhpcy5hbmd1bGFyQSA9IGExO1xuICAgIHRoaXMubGluZWFyQi5TZXRWKHgyKTtcbiAgICB0aGlzLmFuZ3VsYXJCID0gYTI7XG4gIH07XG5cbiAgYjJKYWNvYmlhbi5wcm90b3R5cGUuQ29tcHV0ZSA9IGZ1bmN0aW9uKHgxLCBhMSwgeDIsIGEyKSB7XG4gICAgaWYgKGExID09PSB2b2lkIDApIHtcbiAgICAgIGExID0gMDtcbiAgICB9XG4gICAgaWYgKGEyID09PSB2b2lkIDApIHtcbiAgICAgIGEyID0gMDtcbiAgICB9XG4gICAgcmV0dXJuICh0aGlzLmxpbmVhckEueCAqIHgxLnggKyB0aGlzLmxpbmVhckEueSAqIHgxLnkpICsgdGhpcy5hbmd1bGFyQSAqIGExICsgKHRoaXMubGluZWFyQi54ICogeDIueCArIHRoaXMubGluZWFyQi55ICogeDIueSkgKyB0aGlzLmFuZ3VsYXJCICogYTI7XG4gIH07XG5cbiAgcmV0dXJuIGIySmFjb2JpYW47XG5cbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIySmFjb2JpYW4uanMubWFwXG4iLCJ2YXIgQm94MkQsIGIyRGlzdGFuY2VKb2ludCwgYjJEaXN0YW5jZUpvaW50RGVmLCBiMkZyaWN0aW9uSm9pbnQsIGIyRnJpY3Rpb25Kb2ludERlZiwgYjJHZWFySm9pbnQsIGIyR2VhckpvaW50RGVmLCBiMkpvaW50RWRnZSwgYjJMaW5lSm9pbnQsIGIyTGluZUpvaW50RGVmLCBiMk1vdXNlSm9pbnQsIGIyTW91c2VKb2ludERlZiwgYjJQcmlzbWF0aWNKb2ludCwgYjJQcmlzbWF0aWNKb2ludERlZiwgYjJQdWxsZXlKb2ludCwgYjJQdWxsZXlKb2ludERlZiwgYjJSZXZvbHV0ZUpvaW50LCBiMlJldm9sdXRlSm9pbnREZWYsIGIyVmVjMiwgYjJXZWxkSm9pbnQsIGIyV2VsZEpvaW50RGVmO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludEVkZ2UgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludEVkZ2U7XG5cbmIyRGlzdGFuY2VKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkRpc3RhbmNlSm9pbnQ7XG5cbmIyTW91c2VKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMk1vdXNlSm9pbnQ7XG5cbmIyUHJpc21hdGljSm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludDtcblxuYjJSZXZvbHV0ZUpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUmV2b2x1dGVKb2ludDtcblxuYjJQdWxsZXlKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMlB1bGxleUpvaW50O1xuXG5iMkdlYXJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkdlYXJKb2ludDtcblxuYjJMaW5lSm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnQ7XG5cbmIyV2VsZEpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyV2VsZEpvaW50O1xuXG5iMkZyaWN0aW9uSm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJGcmljdGlvbkpvaW50O1xuXG5iMkRpc3RhbmNlSm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJEaXN0YW5jZUpvaW50RGVmO1xuXG5iMk1vdXNlSm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJNb3VzZUpvaW50RGVmO1xuXG5iMlByaXNtYXRpY0pvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnREZWY7XG5cbmIyUmV2b2x1dGVKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMlJldm9sdXRlSm9pbnREZWY7XG5cbmIyUHVsbGV5Sm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQdWxsZXlKb2ludERlZjtcblxuYjJHZWFySm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJHZWFySm9pbnREZWY7XG5cbmIyTGluZUpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyTGluZUpvaW50RGVmO1xuXG5iMldlbGRKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMldlbGRKb2ludERlZjtcblxuYjJGcmljdGlvbkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyRnJpY3Rpb25Kb2ludERlZjtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQgPSAoZnVuY3Rpb24oKSB7XG4gIGIySm9pbnQuZV91bmtub3duSm9pbnQgPSAwO1xuXG4gIGIySm9pbnQuZV9yZXZvbHV0ZUpvaW50ID0gMTtcblxuICBiMkpvaW50LmVfcHJpc21hdGljSm9pbnQgPSAyO1xuXG4gIGIySm9pbnQuZV9kaXN0YW5jZUpvaW50ID0gMztcblxuICBiMkpvaW50LmVfcHVsbGV5Sm9pbnQgPSA0O1xuXG4gIGIySm9pbnQuZV9tb3VzZUpvaW50ID0gNTtcblxuICBiMkpvaW50LmVfZ2VhckpvaW50ID0gNjtcblxuICBiMkpvaW50LmVfbGluZUpvaW50ID0gNztcblxuICBiMkpvaW50LmVfd2VsZEpvaW50ID0gODtcblxuICBiMkpvaW50LmVfZnJpY3Rpb25Kb2ludCA9IDk7XG5cbiAgYjJKb2ludC5lX2luYWN0aXZlTGltaXQgPSAwO1xuXG4gIGIySm9pbnQuZV9hdExvd2VyTGltaXQgPSAxO1xuXG4gIGIySm9pbnQuZV9hdFVwcGVyTGltaXQgPSAyO1xuXG4gIGIySm9pbnQuZV9lcXVhbExpbWl0cyA9IDM7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV90eXBlID0gYjJKb2ludC5lX3Vua25vd25Kb2ludDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX2VkZ2VBID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX2VkZ2VCID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX2xvY2FsQW5jaG9yMSA9IG51bGw7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV9sb2NhbEFuY2hvcjIgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fbG9jYWxDZW50ZXJBID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX2xvY2FsQ2VudGVyQiA9IG51bGw7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV9wcmV2ID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX25leHQgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fYm9keUEgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fYm9keUIgPSBudWxsO1xuXG4gIGIySm9pbnQucHJvdG90eXBlLm1fY29sbGlkZUNvbm5lY3RlZCA9IG51bGw7XG5cbiAgYjJKb2ludC5wcm90b3R5cGUubV9pc2xhbmRGbGFnID0gbnVsbDtcblxuICBiMkpvaW50LnByb3RvdHlwZS5tX3VzZXJEYXRhID0gbnVsbDtcblxuICBmdW5jdGlvbiBiMkpvaW50KGRlZikge1xuICAgIHRoaXMubV9lZGdlQSA9IG5ldyBiMkpvaW50RWRnZSgpO1xuICAgIHRoaXMubV9lZGdlQiA9IG5ldyBiMkpvaW50RWRnZSgpO1xuICAgIHRoaXMubV9sb2NhbENlbnRlckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQiA9IG5ldyBiMlZlYzIoKTtcbiAgICBiMlNldHRpbmdzLmIyQXNzZXJ0KGRlZi5ib2R5QSAhPT0gZGVmLmJvZHlCKTtcbiAgICB0aGlzLm1fdHlwZSA9IGRlZi50eXBlO1xuICAgIHRoaXMubV9wcmV2ID0gbnVsbDtcbiAgICB0aGlzLm1fbmV4dCA9IG51bGw7XG4gICAgdGhpcy5tX2JvZHlBID0gZGVmLmJvZHlBO1xuICAgIHRoaXMubV9ib2R5QiA9IGRlZi5ib2R5QjtcbiAgICB0aGlzLm1fY29sbGlkZUNvbm5lY3RlZCA9IGRlZi5jb2xsaWRlQ29ubmVjdGVkO1xuICAgIHRoaXMubV9pc2xhbmRGbGFnID0gZmFsc2U7XG4gICAgdGhpcy5tX3VzZXJEYXRhID0gZGVmLnVzZXJEYXRhO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIySm9pbnQucHJvdG90eXBlLkdldFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3R5cGU7XG4gIH07XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIDAuMDtcbiAgfTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5HZXRCb2R5QSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUE7XG4gIH07XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuR2V0Qm9keUIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCO1xuICB9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLkdldE5leHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX25leHQ7XG4gIH07XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuR2V0VXNlckRhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX3VzZXJEYXRhO1xuICB9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLlNldFVzZXJEYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMubV91c2VyRGF0YSA9IGRhdGE7XG4gIH07XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuSXNBY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLklzQWN0aXZlKCkgJiYgdGhpcy5tX2JvZHlCLklzQWN0aXZlKCk7XG4gIH07XG5cbiAgYjJKb2ludC5DcmVhdGUgPSBmdW5jdGlvbihkZWYsIGFsbG9jYXRvcikge1xuICAgIHZhciBqb2ludDtcbiAgICBqb2ludCA9IG51bGw7XG4gICAgc3dpdGNoIChkZWYudHlwZSkge1xuICAgICAgY2FzZSBiMkpvaW50LmVfZGlzdGFuY2VKb2ludDpcbiAgICAgICAgam9pbnQgPSBuZXcgYjJEaXN0YW5jZUpvaW50KChkZWYgaW5zdGFuY2VvZiBiMkRpc3RhbmNlSm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfbW91c2VKb2ludDpcbiAgICAgICAgam9pbnQgPSBuZXcgYjJNb3VzZUpvaW50KChkZWYgaW5zdGFuY2VvZiBiMk1vdXNlSm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfcHJpc21hdGljSm9pbnQ6XG4gICAgICAgIGpvaW50ID0gbmV3IGIyUHJpc21hdGljSm9pbnQoKGRlZiBpbnN0YW5jZW9mIGIyUHJpc21hdGljSm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfcmV2b2x1dGVKb2ludDpcbiAgICAgICAgam9pbnQgPSBuZXcgYjJSZXZvbHV0ZUpvaW50KChkZWYgaW5zdGFuY2VvZiBiMlJldm9sdXRlSm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfcHVsbGV5Sm9pbnQ6XG4gICAgICAgIGpvaW50ID0gbmV3IGIyUHVsbGV5Sm9pbnQoKGRlZiBpbnN0YW5jZW9mIGIyUHVsbGV5Sm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfZ2VhckpvaW50OlxuICAgICAgICBqb2ludCA9IG5ldyBiMkdlYXJKb2ludCgoZGVmIGluc3RhbmNlb2YgYjJHZWFySm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfbGluZUpvaW50OlxuICAgICAgICBqb2ludCA9IG5ldyBiMkxpbmVKb2ludCgoZGVmIGluc3RhbmNlb2YgYjJMaW5lSm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfd2VsZEpvaW50OlxuICAgICAgICBqb2ludCA9IG5ldyBiMldlbGRKb2ludCgoZGVmIGluc3RhbmNlb2YgYjJXZWxkSm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBiMkpvaW50LmVfZnJpY3Rpb25Kb2ludDpcbiAgICAgICAgam9pbnQgPSBuZXcgYjJGcmljdGlvbkpvaW50KChkZWYgaW5zdGFuY2VvZiBiMkZyaWN0aW9uSm9pbnREZWYgPyBkZWYgOiBudWxsKSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gam9pbnQ7XG4gIH07XG5cbiAgYjJKb2ludC5EZXN0cm95ID0gZnVuY3Rpb24oam9pbnQsIGFsbG9jYXRvcikge307XG5cbiAgYjJKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7fTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5Tb2x2ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7fTtcblxuICBiMkpvaW50LnByb3RvdHlwZS5GaW5hbGl6ZVZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbigpIHt9O1xuXG4gIGIySm9pbnQucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0ZSkge1xuICAgIGlmIChiYXVtZ2FydGUgPT09IHZvaWQgMCkge1xuICAgICAgYmF1bWdhcnRlID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBiMkpvaW50O1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWYgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIGIySm9pbnREZWYoKSB7fVxuXG4gIGIySm9pbnREZWYucHJvdG90eXBlLnR5cGUgPSBiMkpvaW50LmVfdW5rbm93bkpvaW50O1xuXG4gIGIySm9pbnREZWYucHJvdG90eXBlLnVzZXJEYXRhID0gbnVsbDtcblxuICBiMkpvaW50RGVmLnByb3RvdHlwZS5ib2R5QSA9IG51bGw7XG5cbiAgYjJKb2ludERlZi5wcm90b3R5cGUuYm9keUIgPSBudWxsO1xuXG4gIGIySm9pbnREZWYucHJvdG90eXBlLmNvbGxpZGVDb25uZWN0ZWQgPSBudWxsO1xuXG4gIHJldHVybiBiMkpvaW50RGVmO1xuXG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkpvaW50RGVmLmpzLm1hcFxuIiwidmFyIEJveDJEO1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RWRnZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gYjJKb2ludEVkZ2UoKSB7fVxuXG4gIHJldHVybiBiMkpvaW50RWRnZTtcblxufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJKb2ludEVkZ2UuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkxpbmVKb2ludCwgX3N1cGVyKTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV9sb2NhbFhBeGlzMSA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fbG9jYWxZQXhpczEgPSBudWxsO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX2F4aXMgPSBudWxsO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX3BlcnAgPSBudWxsO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX0sgPSBudWxsO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX2ltcHVsc2UgPSBudWxsO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX21vdG9yTWFzcyA9IDAuMDtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV9tb3RvckltcHVsc2UgPSAwLjA7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fbG93ZXJUcmFuc2xhdGlvbiA9IDAuMDtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV91cHBlclRyYW5zbGF0aW9uID0gMC4wO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX21heE1vdG9yRm9yY2UgPSAwLjA7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fbW90b3JTcGVlZCA9IDAuMDtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUubV9lbmFibGVMaW1pdCA9IGZhbHNlO1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5tX2VuYWJsZU1vdG9yID0gZmFsc2U7XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuXG4gIGZ1bmN0aW9uIGIyTGluZUpvaW50KGRlZikge1xuICAgIGIyTGluZUpvaW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGRlZik7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbFhBeGlzMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxZQXhpczEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2F4aXMgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3BlcnAgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX0sgPSBuZXcgYjJNYXQyMigpO1xuICAgIHRoaXMubV9pbXB1bHNlID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjEuU2V0VihkZWYubG9jYWxBbmNob3JBKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IyLlNldFYoZGVmLmxvY2FsQW5jaG9yQik7XG4gICAgdGhpcy5tX2xvY2FsWEF4aXMxLlNldFYoZGVmLmxvY2FsQXhpc0EpO1xuICAgIHRoaXMubV9sb2NhbFlBeGlzMS54ID0gLXRoaXMubV9sb2NhbFhBeGlzMS55O1xuICAgIHRoaXMubV9sb2NhbFlBeGlzMS55ID0gdGhpcy5tX2xvY2FsWEF4aXMxLng7XG4gICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uID0gZGVmLmxvd2VyVHJhbnNsYXRpb247XG4gICAgdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gPSBkZWYudXBwZXJUcmFuc2xhdGlvbjtcbiAgICB0aGlzLm1fbWF4TW90b3JGb3JjZSA9IGRlZi5tYXhNb3RvckZvcmNlO1xuICAgIHRoaXMubV9tb3RvclNwZWVkID0gZGVmLm1vdG9yU3BlZWQ7XG4gICAgdGhpcy5tX2VuYWJsZUxpbWl0ID0gZGVmLmVuYWJsZUxpbWl0O1xuICAgIHRoaXMubV9lbmFibGVNb3RvciA9IGRlZi5lbmFibGVNb3RvcjtcbiAgICB0aGlzLm1fYXhpcy5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX3BlcnAuU2V0WmVybygpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjEpO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRBbmNob3JCID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjIpO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiAodGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnggKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnkpICogdGhpcy5tX2F4aXMueCksIGludl9kdCAqICh0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3BlcnAueSArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueSkgKiB0aGlzLm1fYXhpcy55KSk7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueTtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuR2V0Sm9pbnRUcmFuc2xhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBheGlzLCBiQSwgYkIsIGRYLCBkWSwgcDEsIHAyLCB0TWF0LCB0cmFuc2xhdGlvbjtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHAxID0gYkEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTtcbiAgICBwMiA9IGJCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7XG4gICAgZFggPSBwMi54IC0gcDEueDtcbiAgICBkWSA9IHAyLnkgLSBwMS55O1xuICAgIGF4aXMgPSBiQS5HZXRXb3JsZFZlY3Rvcih0aGlzLm1fbG9jYWxYQXhpczEpO1xuICAgIHRyYW5zbGF0aW9uID0gYXhpcy54ICogZFggKyBheGlzLnkgKiBkWTtcbiAgICByZXR1cm4gdHJhbnNsYXRpb247XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkdldEpvaW50U3BlZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXhpcywgYkEsIGJCLCBkWCwgZFksIHAxWCwgcDFZLCBwMlgsIHAyWSwgcjFYLCByMVksIHIyWCwgcjJZLCBzcGVlZCwgdE1hdCwgdFgsIHYxLCB2MiwgdzEsIHcyO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBwMVggPSBiQS5tX3N3ZWVwLmMueCArIHIxWDtcbiAgICBwMVkgPSBiQS5tX3N3ZWVwLmMueSArIHIxWTtcbiAgICBwMlggPSBiQi5tX3N3ZWVwLmMueCArIHIyWDtcbiAgICBwMlkgPSBiQi5tX3N3ZWVwLmMueSArIHIyWTtcbiAgICBkWCA9IHAyWCAtIHAxWDtcbiAgICBkWSA9IHAyWSAtIHAxWTtcbiAgICBheGlzID0gYkEuR2V0V29ybGRWZWN0b3IodGhpcy5tX2xvY2FsWEF4aXMxKTtcbiAgICB2MSA9IGJBLm1fbGluZWFyVmVsb2NpdHk7XG4gICAgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcxID0gYkEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgdzIgPSBiQi5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgICBzcGVlZCA9IChkWCAqICgtdzEgKiBheGlzLnkpICsgZFkgKiAodzEgKiBheGlzLngpKSArIChheGlzLnggKiAoKCh2Mi54ICsgKC13MiAqIHIyWSkpIC0gdjEueCkgLSAoLXcxICogcjFZKSkgKyBheGlzLnkgKiAoKCh2Mi55ICsgKHcyICogcjJYKSkgLSB2MS55KSAtICh3MSAqIHIxWCkpKTtcbiAgICByZXR1cm4gc3BlZWQ7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLklzTGltaXRFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9lbmFibGVMaW1pdDtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuRW5hYmxlTGltaXQgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fZW5hYmxlTGltaXQgPSBmbGFnO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRMb3dlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRVcHBlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV91cHBlclRyYW5zbGF0aW9uO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5TZXRMaW1pdHMgPSBmdW5jdGlvbihsb3dlciwgdXBwZXIpIHtcbiAgICBpZiAobG93ZXIgPT09IHZvaWQgMCkge1xuICAgICAgbG93ZXIgPSAwO1xuICAgIH1cbiAgICBpZiAodXBwZXIgPT09IHZvaWQgMCkge1xuICAgICAgdXBwZXIgPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uID0gbG93ZXI7XG4gICAgdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gPSB1cHBlcjtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuSXNNb3RvckVuYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZU1vdG9yO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5FbmFibGVNb3RvciA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9lbmFibGVNb3RvciA9IGZsYWc7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLlNldE1vdG9yU3BlZWQgPSBmdW5jdGlvbihzcGVlZCkge1xuICAgIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgICBzcGVlZCA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX21vdG9yU3BlZWQgPSBzcGVlZDtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuR2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbW90b3JTcGVlZDtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuU2V0TWF4TW90b3JGb3JjZSA9IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlID09PSB2b2lkIDApIHtcbiAgICAgIGZvcmNlID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fbWF4TW90b3JGb3JjZSA9IGZvcmNlO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRNYXhNb3RvckZvcmNlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9tYXhNb3RvckZvcmNlO1xuICB9O1xuXG4gIGIyTGluZUpvaW50LnByb3RvdHlwZS5HZXRNb3RvckZvcmNlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9tb3RvckltcHVsc2U7XG4gIH07XG5cbiAgYjJMaW5lSm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBMMSwgTDIsIFBYLCBQWSwgYkEsIGJCLCBkWCwgZFksIGkxLCBpMiwgam9pbnRUcmFuc2l0aW9uLCBtMSwgbTIsIHIxWCwgcjFZLCByMlgsIHIyWSwgdE1hdCwgdFgsIHhmMSwgeGYyO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIHRoaXMubV9sb2NhbENlbnRlckEuU2V0VihiQS5HZXRMb2NhbENlbnRlcigpKTtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJCLlNldFYoYkIuR2V0TG9jYWxDZW50ZXIoKSk7XG4gICAgeGYxID0gYkEuR2V0VHJhbnNmb3JtKCk7XG4gICAgeGYyID0gYkIuR2V0VHJhbnNmb3JtKCk7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSB0aGlzLm1fbG9jYWxDZW50ZXJBLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQi54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIHRoaXMubV9sb2NhbENlbnRlckIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBkWCA9IGJCLm1fc3dlZXAuYy54ICsgcjJYIC0gYkEubV9zd2VlcC5jLnggLSByMVg7XG4gICAgZFkgPSBiQi5tX3N3ZWVwLmMueSArIHIyWSAtIGJBLm1fc3dlZXAuYy55IC0gcjFZO1xuICAgIHRoaXMubV9pbnZNYXNzQSA9IGJBLm1faW52TWFzcztcbiAgICB0aGlzLm1faW52TWFzc0IgPSBiQi5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludklBID0gYkEubV9pbnZJO1xuICAgIHRoaXMubV9pbnZJQiA9IGJCLm1faW52STtcbiAgICB0aGlzLm1fYXhpcy5TZXRWKGIyTWF0aC5NdWxNVih4ZjEuUiwgdGhpcy5tX2xvY2FsWEF4aXMxKSk7XG4gICAgdGhpcy5tX2ExID0gKGRYICsgcjFYKSAqIHRoaXMubV9heGlzLnkgLSAoZFkgKyByMVkpICogdGhpcy5tX2F4aXMueDtcbiAgICB0aGlzLm1fYTIgPSByMlggKiB0aGlzLm1fYXhpcy55IC0gcjJZICogdGhpcy5tX2F4aXMueDtcbiAgICB0aGlzLm1fbW90b3JNYXNzID0gdGhpcy5tX2ludk1hc3NBICsgdGhpcy5tX2ludk1hc3NCICsgdGhpcy5tX2ludklBICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgdGhpcy5tX2ludklCICogdGhpcy5tX2EyICogdGhpcy5tX2EyO1xuICAgIHRoaXMubV9tb3Rvck1hc3MgPSAodGhpcy5tX21vdG9yTWFzcyA+IE51bWJlci5NSU5fVkFMVUUgPyAxLjAgLyB0aGlzLm1fbW90b3JNYXNzIDogMC4wKTtcbiAgICB0aGlzLm1fcGVycC5TZXRWKGIyTWF0aC5NdWxNVih4ZjEuUiwgdGhpcy5tX2xvY2FsWUF4aXMxKSk7XG4gICAgdGhpcy5tX3MxID0gKGRYICsgcjFYKSAqIHRoaXMubV9wZXJwLnkgLSAoZFkgKyByMVkpICogdGhpcy5tX3BlcnAueDtcbiAgICB0aGlzLm1fczIgPSByMlggKiB0aGlzLm1fcGVycC55IC0gcjJZICogdGhpcy5tX3BlcnAueDtcbiAgICBtMSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICBtMiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBpMSA9IHRoaXMubV9pbnZJQTtcbiAgICBpMiA9IHRoaXMubV9pbnZJQjtcbiAgICB0aGlzLm1fSy5jb2wxLnggPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fczEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9zMjtcbiAgICB0aGlzLm1fSy5jb2wxLnkgPSBpMSAqIHRoaXMubV9zMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX2EyO1xuICAgIHRoaXMubV9LLmNvbDIueCA9IHRoaXMubV9LLmNvbDEueTtcbiAgICB0aGlzLm1fSy5jb2wyLnkgPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fYTEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9hMiAqIHRoaXMubV9hMjtcbiAgICBpZiAodGhpcy5tX2VuYWJsZUxpbWl0KSB7XG4gICAgICBqb2ludFRyYW5zaXRpb24gPSB0aGlzLm1fYXhpcy54ICogZFggKyB0aGlzLm1fYXhpcy55ICogZFk7XG4gICAgICBpZiAoYjJNYXRoLkFicyh0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiAtIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSA8IDIuMCAqIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCkge1xuICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9lcXVhbExpbWl0cztcbiAgICAgIH0gZWxzZSBpZiAoam9pbnRUcmFuc2l0aW9uIDw9IHRoaXMubV9sb3dlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2F0TG93ZXJMaW1pdCkge1xuICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2F0TG93ZXJMaW1pdDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS55ID0gMC4wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGpvaW50VHJhbnNpdGlvbiA+PSB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbikge1xuICAgICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9hdFVwcGVyTGltaXQ7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueSA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcbiAgICAgICAgdGhpcy5tX2ltcHVsc2UueSA9IDAuMDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9lbmFibGVNb3RvciA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwLjA7XG4gICAgfVxuICAgIGlmIChzdGVwLndhcm1TdGFydGluZykge1xuICAgICAgdGhpcy5tX2ltcHVsc2UueCAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1faW1wdWxzZS55ICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgUFggPSB0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3BlcnAueCArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueSkgKiB0aGlzLm1fYXhpcy54O1xuICAgICAgUFkgPSB0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3BlcnAueSArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueSkgKiB0aGlzLm1fYXhpcy55O1xuICAgICAgTDEgPSB0aGlzLm1faW1wdWxzZS54ICogdGhpcy5tX3MxICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS55KSAqIHRoaXMubV9hMTtcbiAgICAgIEwyID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9zMiArICh0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2UueSkgKiB0aGlzLm1fYTI7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgLT0gdGhpcy5tX2ludk1hc3NBICogUFk7XG4gICAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTtcbiAgICAgIGJCLm1fYW5ndWxhclZlbG9jaXR5ICs9IHRoaXMubV9pbnZJQiAqIEwyO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gMC4wO1xuICAgIH1cbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90LCBDZG90MSwgQ2RvdDIsIEwxLCBMMiwgUFgsIFBZLCBiLCBiQSwgYkIsIGRmLCBkZjIsIGYxLCBmMnIsIGltcHVsc2UsIG1heEltcHVsc2UsIG9sZEltcHVsc2UsIHYxLCB2MiwgdzEsIHcyO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHYxID0gYkEubV9saW5lYXJWZWxvY2l0eTtcbiAgICB3MSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIHYyID0gYkIubV9saW5lYXJWZWxvY2l0eTtcbiAgICB3MiA9IGJCLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIFBYID0gMDtcbiAgICBQWSA9IDA7XG4gICAgTDEgPSAwO1xuICAgIEwyID0gMDtcbiAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yICYmIHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfZXF1YWxMaW1pdHMpIHtcbiAgICAgIENkb3QgPSB0aGlzLm1fYXhpcy54ICogKHYyLnggLSB2MS54KSArIHRoaXMubV9heGlzLnkgKiAodjIueSAtIHYxLnkpICsgdGhpcy5tX2EyICogdzIgLSB0aGlzLm1fYTEgKiB3MTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fbW90b3JNYXNzICogKHRoaXMubV9tb3RvclNwZWVkIC0gQ2RvdCk7XG4gICAgICBvbGRJbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgICAgIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heE1vdG9yRm9yY2U7XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gYjJNYXRoLkNsYW1wKHRoaXMubV9tb3RvckltcHVsc2UgKyBpbXB1bHNlLCAtbWF4SW1wdWxzZSwgbWF4SW1wdWxzZSk7XG4gICAgICBpbXB1bHNlID0gdGhpcy5tX21vdG9ySW1wdWxzZSAtIG9sZEltcHVsc2U7XG4gICAgICBQWCA9IGltcHVsc2UgKiB0aGlzLm1fYXhpcy54O1xuICAgICAgUFkgPSBpbXB1bHNlICogdGhpcy5tX2F4aXMueTtcbiAgICAgIEwxID0gaW1wdWxzZSAqIHRoaXMubV9hMTtcbiAgICAgIEwyID0gaW1wdWxzZSAqIHRoaXMubV9hMjtcbiAgICAgIHYxLnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgICB2MS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZO1xuICAgICAgdzEgLT0gdGhpcy5tX2ludklBICogTDE7XG4gICAgICB2Mi54ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBYO1xuICAgICAgdjIueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTtcbiAgICAgIHcyICs9IHRoaXMubV9pbnZJQiAqIEwyO1xuICAgIH1cbiAgICBDZG90MSA9IHRoaXMubV9wZXJwLnggKiAodjIueCAtIHYxLngpICsgdGhpcy5tX3BlcnAueSAqICh2Mi55IC0gdjEueSkgKyB0aGlzLm1fczIgKiB3MiAtIHRoaXMubV9zMSAqIHcxO1xuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQgJiYgdGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0KSB7XG4gICAgICBDZG90MiA9IHRoaXMubV9heGlzLnggKiAodjIueCAtIHYxLngpICsgdGhpcy5tX2F4aXMueSAqICh2Mi55IC0gdjEueSkgKyB0aGlzLm1fYTIgKiB3MiAtIHRoaXMubV9hMSAqIHcxO1xuICAgICAgZjEgPSB0aGlzLm1faW1wdWxzZS5Db3B5KCk7XG4gICAgICBkZiA9IHRoaXMubV9LLlNvbHZlKG5ldyBiMlZlYzIoKSwgLUNkb3QxLCAtQ2RvdDIpO1xuICAgICAgdGhpcy5tX2ltcHVsc2UuQWRkKGRmKTtcbiAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PT0gYjJKb2ludC5lX2F0TG93ZXJMaW1pdCkge1xuICAgICAgICB0aGlzLm1faW1wdWxzZS55ID0gYjJNYXRoLk1heCh0aGlzLm1faW1wdWxzZS55LCAwLjApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlID09PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueSA9IGIyTWF0aC5NaW4odGhpcy5tX2ltcHVsc2UueSwgMC4wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYiA9ICgtQ2RvdDEpIC0gKHRoaXMubV9pbXB1bHNlLnkgLSBmMS55KSAqIHRoaXMubV9LLmNvbDIueDtcbiAgICAgIGYyciA9IDA7XG4gICAgICBpZiAodGhpcy5tX0suY29sMS54ICE9PSAwLjApIHtcbiAgICAgICAgZjJyID0gYiAvIHRoaXMubV9LLmNvbDEueCArIGYxLng7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmMnIgPSBmMS54O1xuICAgICAgfVxuICAgICAgdGhpcy5tX2ltcHVsc2UueCA9IGYycjtcbiAgICAgIGRmLnggPSB0aGlzLm1faW1wdWxzZS54IC0gZjEueDtcbiAgICAgIGRmLnkgPSB0aGlzLm1faW1wdWxzZS55IC0gZjEueTtcbiAgICAgIFBYID0gZGYueCAqIHRoaXMubV9wZXJwLnggKyBkZi55ICogdGhpcy5tX2F4aXMueDtcbiAgICAgIFBZID0gZGYueCAqIHRoaXMubV9wZXJwLnkgKyBkZi55ICogdGhpcy5tX2F4aXMueTtcbiAgICAgIEwxID0gZGYueCAqIHRoaXMubV9zMSArIGRmLnkgKiB0aGlzLm1fYTE7XG4gICAgICBMMiA9IGRmLnggKiB0aGlzLm1fczIgKyBkZi55ICogdGhpcy5tX2EyO1xuICAgICAgdjEueCAtPSB0aGlzLm1faW52TWFzc0EgKiBQWDtcbiAgICAgIHYxLnkgLT0gdGhpcy5tX2ludk1hc3NBICogUFk7XG4gICAgICB3MSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICAgIHYyLnggKz0gdGhpcy5tX2ludk1hc3NCICogUFg7XG4gICAgICB2Mi55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZO1xuICAgICAgdzIgKz0gdGhpcy5tX2ludklCICogTDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRmMiA9IDA7XG4gICAgICBpZiAodGhpcy5tX0suY29sMS54ICE9PSAwLjApIHtcbiAgICAgICAgZGYyID0gKC1DZG90MSkgLyB0aGlzLm1fSy5jb2wxLng7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZjIgPSAwLjA7XG4gICAgICB9XG4gICAgICB0aGlzLm1faW1wdWxzZS54ICs9IGRmMjtcbiAgICAgIFBYID0gZGYyICogdGhpcy5tX3BlcnAueDtcbiAgICAgIFBZID0gZGYyICogdGhpcy5tX3BlcnAueTtcbiAgICAgIEwxID0gZGYyICogdGhpcy5tX3MxO1xuICAgICAgTDIgPSBkZjIgKiB0aGlzLm1fczI7XG4gICAgICB2MS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYO1xuICAgICAgdjEueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTtcbiAgICAgIHcxIC09IHRoaXMubV9pbnZJQSAqIEwxO1xuICAgICAgdjIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDtcbiAgICAgIHYyLnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7XG4gICAgICB3MiArPSB0aGlzLm1faW52SUIgKiBMMjtcbiAgICB9XG4gICAgYkEubV9saW5lYXJWZWxvY2l0eS5TZXRWKHYxKTtcbiAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSA9IHcxO1xuICAgIGJCLm1fbGluZWFyVmVsb2NpdHkuU2V0Vih2Mik7XG4gICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgPSB3MjtcbiAgfTtcblxuICBiMkxpbmVKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgdmFyIEMxLCBDMiwgTDEsIEwyLCBQWCwgUFksIFIxLCBSMiwgYTEsIGEyLCBhY3RpdmUsIGFuZ3VsYXJFcnJvciwgYkEsIGJCLCBjMSwgYzIsIGRYLCBkWSwgaTEsIGkyLCBpbXB1bHNlLCBpbXB1bHNlMSwgazExLCBsaW1pdEMsIGxpbmVhckVycm9yLCBtMSwgbTIsIG9sZExpbWl0SW1wdWxzZSwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WCwgdHJhbnNsYXRpb247XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICBsaW1pdEMgPSAwO1xuICAgIG9sZExpbWl0SW1wdWxzZSA9IDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgYzEgPSBiQS5tX3N3ZWVwLmM7XG4gICAgYTEgPSBiQS5tX3N3ZWVwLmE7XG4gICAgYzIgPSBiQi5tX3N3ZWVwLmM7XG4gICAgYTIgPSBiQi5tX3N3ZWVwLmE7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgbTEgPSAwO1xuICAgIG0yID0gMDtcbiAgICBpMSA9IDA7XG4gICAgaTIgPSAwO1xuICAgIGxpbmVhckVycm9yID0gMC4wO1xuICAgIGFuZ3VsYXJFcnJvciA9IDAuMDtcbiAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICBDMiA9IDAuMDtcbiAgICBSMSA9IGIyTWF0MjIuRnJvbUFuZ2xlKGExKTtcbiAgICBSMiA9IGIyTWF0MjIuRnJvbUFuZ2xlKGEyKTtcbiAgICB0TWF0ID0gUjE7XG4gICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS54O1xuICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIHRoaXMubV9sb2NhbENlbnRlckEueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICByMVggPSB0WDtcbiAgICB0TWF0ID0gUjI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQi54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIHRoaXMubV9sb2NhbENlbnRlckIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBkWCA9IGMyLnggKyByMlggLSBjMS54IC0gcjFYO1xuICAgIGRZID0gYzIueSArIHIyWSAtIGMxLnkgLSByMVk7XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgdGhpcy5tX2F4aXMgPSBiMk1hdGguTXVsTVYoUjEsIHRoaXMubV9sb2NhbFhBeGlzMSk7XG4gICAgICB0aGlzLm1fYTEgPSAoZFggKyByMVgpICogdGhpcy5tX2F4aXMueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fYXhpcy54O1xuICAgICAgdGhpcy5tX2EyID0gcjJYICogdGhpcy5tX2F4aXMueSAtIHIyWSAqIHRoaXMubV9heGlzLng7XG4gICAgICB0cmFuc2xhdGlvbiA9IHRoaXMubV9heGlzLnggKiBkWCArIHRoaXMubV9heGlzLnkgKiBkWTtcbiAgICAgIGlmIChiMk1hdGguQWJzKHRoaXMubV91cHBlclRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIDwgMi4wICogYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIEMyID0gYjJNYXRoLkNsYW1wKHRyYW5zbGF0aW9uLCAtYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uLCBiMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24pO1xuICAgICAgICBsaW5lYXJFcnJvciA9IGIyTWF0aC5BYnModHJhbnNsYXRpb24pO1xuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0cmFuc2xhdGlvbiA8PSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikge1xuICAgICAgICBDMiA9IGIyTWF0aC5DbGFtcCh0cmFuc2xhdGlvbiAtIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uICsgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCAtYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uLCAwLjApO1xuICAgICAgICBsaW5lYXJFcnJvciA9IHRoaXMubV9sb3dlclRyYW5zbGF0aW9uIC0gdHJhbnNsYXRpb247XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIEMyID0gYjJNYXRoLkNsYW1wKHRyYW5zbGF0aW9uIC0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gKyBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIDAuMCwgYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKTtcbiAgICAgICAgbGluZWFyRXJyb3IgPSB0cmFuc2xhdGlvbiAtIHRoaXMubV91cHBlclRyYW5zbGF0aW9uO1xuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm1fcGVycCA9IGIyTWF0aC5NdWxNVihSMSwgdGhpcy5tX2xvY2FsWUF4aXMxKTtcbiAgICB0aGlzLm1fczEgPSAoZFggKyByMVgpICogdGhpcy5tX3BlcnAueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fcGVycC54O1xuICAgIHRoaXMubV9zMiA9IHIyWCAqIHRoaXMubV9wZXJwLnkgLSByMlkgKiB0aGlzLm1fcGVycC54O1xuICAgIGltcHVsc2UgPSBuZXcgYjJWZWMyKCk7XG4gICAgQzEgPSB0aGlzLm1fcGVycC54ICogZFggKyB0aGlzLm1fcGVycC55ICogZFk7XG4gICAgbGluZWFyRXJyb3IgPSBiMk1hdGguTWF4KGxpbmVhckVycm9yLCBiMk1hdGguQWJzKEMxKSk7XG4gICAgYW5ndWxhckVycm9yID0gMC4wO1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIG0xID0gdGhpcy5tX2ludk1hc3NBO1xuICAgICAgbTIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICBpMSA9IHRoaXMubV9pbnZJQTtcbiAgICAgIGkyID0gdGhpcy5tX2ludklCO1xuICAgICAgdGhpcy5tX0suY29sMS54ID0gbTEgKyBtMiArIGkxICogdGhpcy5tX3MxICogdGhpcy5tX3MxICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7XG4gICAgICB0aGlzLm1fSy5jb2wxLnkgPSBpMSAqIHRoaXMubV9zMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX2EyO1xuICAgICAgdGhpcy5tX0suY29sMi54ID0gdGhpcy5tX0suY29sMS55O1xuICAgICAgdGhpcy5tX0suY29sMi55ID0gbTEgKyBtMiArIGkxICogdGhpcy5tX2ExICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fYTIgKiB0aGlzLm1fYTI7XG4gICAgICB0aGlzLm1fSy5Tb2x2ZShpbXB1bHNlLCAtQzEsIC1DMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0xID0gdGhpcy5tX2ludk1hc3NBO1xuICAgICAgbTIgPSB0aGlzLm1faW52TWFzc0I7XG4gICAgICBpMSA9IHRoaXMubV9pbnZJQTtcbiAgICAgIGkyID0gdGhpcy5tX2ludklCO1xuICAgICAgazExID0gbTEgKyBtMiArIGkxICogdGhpcy5tX3MxICogdGhpcy5tX3MxICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fczI7XG4gICAgICBpbXB1bHNlMSA9IDA7XG4gICAgICBpZiAoazExICE9PSAwLjApIHtcbiAgICAgICAgaW1wdWxzZTEgPSAoLUMxKSAvIGsxMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltcHVsc2UxID0gMC4wO1xuICAgICAgfVxuICAgICAgaW1wdWxzZS54ID0gaW1wdWxzZTE7XG4gICAgICBpbXB1bHNlLnkgPSAwLjA7XG4gICAgfVxuICAgIFBYID0gaW1wdWxzZS54ICogdGhpcy5tX3BlcnAueCArIGltcHVsc2UueSAqIHRoaXMubV9heGlzLng7XG4gICAgUFkgPSBpbXB1bHNlLnggKiB0aGlzLm1fcGVycC55ICsgaW1wdWxzZS55ICogdGhpcy5tX2F4aXMueTtcbiAgICBMMSA9IGltcHVsc2UueCAqIHRoaXMubV9zMSArIGltcHVsc2UueSAqIHRoaXMubV9hMTtcbiAgICBMMiA9IGltcHVsc2UueCAqIHRoaXMubV9zMiArIGltcHVsc2UueSAqIHRoaXMubV9hMjtcbiAgICBjMS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYO1xuICAgIGMxLnkgLT0gdGhpcy5tX2ludk1hc3NBICogUFk7XG4gICAgYTEgLT0gdGhpcy5tX2ludklBICogTDE7XG4gICAgYzIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDtcbiAgICBjMi55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZO1xuICAgIGEyICs9IHRoaXMubV9pbnZJQiAqIEwyO1xuICAgIGJBLm1fc3dlZXAuYSA9IGExO1xuICAgIGJCLm1fc3dlZXAuYSA9IGEyO1xuICAgIGJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICByZXR1cm4gbGluZWFyRXJyb3IgPD0gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wICYmIGFuZ3VsYXJFcnJvciA8PSBiMlNldHRpbmdzLmIyX2FuZ3VsYXJTbG9wO1xuICB9O1xuXG4gIHJldHVybiBiMkxpbmVKb2ludDtcblxufSkoYjJKb2ludCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyTGluZUpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJMaW5lSm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMkxpbmVKb2ludERlZiwgX3N1cGVyKTtcblxuICBiMkxpbmVKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IGIySm9pbnQuZV9saW5lSm9pbnQ7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQSA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQiA9IG51bGw7XG5cbiAgYjJMaW5lSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQXhpc0EgPSBudWxsO1xuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS5lbmFibGVMaW1pdCA9IGZhbHNlO1xuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS5sb3dlclRyYW5zbGF0aW9uID0gMC4wO1xuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS51cHBlclRyYW5zbGF0aW9uID0gMC4wO1xuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS5lbmFibGVNb3RvciA9IGZhbHNlO1xuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS5tYXhNb3RvckZvcmNlID0gMC4wO1xuXG4gIGIyTGluZUpvaW50RGVmLnByb3RvdHlwZS5tb3RvclNwZWVkID0gMC4wO1xuXG4gIGZ1bmN0aW9uIGIyTGluZUpvaW50RGVmKCkge1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubG9jYWxBeGlzQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmxvY2FsQXhpc0EuU2V0KDEuMCwgMC4wKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMkxpbmVKb2ludERlZi5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGJBLCBiQiwgYW5jaG9yLCBheGlzKSB7XG4gICAgdGhpcy5ib2R5QSA9IGJBO1xuICAgIHRoaXMuYm9keUIgPSBiQjtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3IpO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gdGhpcy5ib2R5Qi5HZXRMb2NhbFBvaW50KGFuY2hvcik7XG4gICAgdGhpcy5sb2NhbEF4aXNBID0gdGhpcy5ib2R5QS5HZXRMb2NhbFZlY3RvcihheGlzKTtcbiAgfTtcblxuICByZXR1cm4gYjJMaW5lSm9pbnREZWY7XG5cbn0pKGIySm9pbnREZWYpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMkxpbmVKb2ludERlZi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKb2ludCwgYjJNYXQyMiwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyTWF0MjIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJNb3VzZUpvaW50ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJNb3VzZUpvaW50LCBfc3VwZXIpO1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuSyA9IG51bGw7XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5LMSA9IG51bGw7XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5LMiA9IG51bGw7XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5tX2xvY2FsQW5jaG9yID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1fdGFyZ2V0ID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1faW1wdWxzZSA9IG51bGw7XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5tX21hc3MgPSBudWxsO1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUubV9DID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1fZnJlcXVlbmN5SHogPSAwLjA7XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5tX2RhbXBpbmdSYXRpbyA9IDAuMDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1fYmV0YSA9IDAuMDtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLm1fZ2FtbWEgPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJNb3VzZUpvaW50KGRlZikge1xuICAgIHZhciB0TWF0LCB0WCwgdFk7XG4gICAgYjJNb3VzZUpvaW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGRlZik7XG4gICAgdGhpcy5LID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLksxID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLksyID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3RhcmdldCA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1faW1wdWxzZSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbWFzcyA9IG5ldyBiMk1hdDIyKCk7XG4gICAgdGhpcy5tX0MgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3RhcmdldC5TZXRWKGRlZi50YXJnZXQpO1xuICAgIHRYID0gdGhpcy5tX3RhcmdldC54IC0gdGhpcy5tX2JvZHlCLm1feGYucG9zaXRpb24ueDtcbiAgICB0WSA9IHRoaXMubV90YXJnZXQueSAtIHRoaXMubV9ib2R5Qi5tX3hmLnBvc2l0aW9uLnk7XG4gICAgdE1hdCA9IHRoaXMubV9ib2R5Qi5tX3hmLlI7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yLnggPSB0WCAqIHRNYXQuY29sMS54ICsgdFkgKiB0TWF0LmNvbDEueTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IueSA9IHRYICogdE1hdC5jb2wyLnggKyB0WSAqIHRNYXQuY29sMi55O1xuICAgIHRoaXMubV9tYXhGb3JjZSA9IGRlZi5tYXhGb3JjZTtcbiAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgdGhpcy5tX2ZyZXF1ZW5jeUh6ID0gZGVmLmZyZXF1ZW5jeUh6O1xuICAgIHRoaXMubV9kYW1waW5nUmF0aW8gPSBkZWYuZGFtcGluZ1JhdGlvO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdGFyZ2V0O1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IpO1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueCwgaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueSk7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIDAuMDtcbiAgfTtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLkdldFRhcmdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdGFyZ2V0O1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuU2V0VGFyZ2V0ID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgaWYgKHRoaXMubV9ib2R5Qi5Jc0F3YWtlKCkgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMubV90YXJnZXQgPSB0YXJnZXQ7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5HZXRNYXhGb3JjZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbWF4Rm9yY2U7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5TZXRNYXhGb3JjZSA9IGZ1bmN0aW9uKG1heEZvcmNlKSB7XG4gICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHtcbiAgICAgIG1heEZvcmNlID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX21heEZvcmNlID0gbWF4Rm9yY2U7XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5HZXRGcmVxdWVuY3kgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2ZyZXF1ZW5jeUh6O1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuU2V0RnJlcXVlbmN5ID0gZnVuY3Rpb24oaHopIHtcbiAgICBpZiAoaHogPT09IHZvaWQgMCkge1xuICAgICAgaHogPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fZnJlcXVlbmN5SHogPSBoejtcbiAgfTtcblxuICBiMk1vdXNlSm9pbnQucHJvdG90eXBlLkdldERhbXBpbmdSYXRpbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fZGFtcGluZ1JhdGlvO1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuU2V0RGFtcGluZ1JhdGlvID0gZnVuY3Rpb24ocmF0aW8pIHtcbiAgICBpZiAocmF0aW8gPT09IHZvaWQgMCkge1xuICAgICAgcmF0aW8gPSAwO1xuICAgIH1cbiAgICB0aGlzLm1fZGFtcGluZ1JhdGlvID0gcmF0aW87XG4gIH07XG5cbiAgYjJNb3VzZUpvaW50LnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgYiwgZCwgaW52SSwgaW52TWFzcywgaywgbWFzcywgb21lZ2EsIHJYLCByWSwgdE1hdCwgdFg7XG4gICAgYiA9IHRoaXMubV9ib2R5QjtcbiAgICBtYXNzID0gYi5HZXRNYXNzKCk7XG4gICAgb21lZ2EgPSAyLjAgKiBNYXRoLlBJICogdGhpcy5tX2ZyZXF1ZW5jeUh6O1xuICAgIGQgPSAyLjAgKiBtYXNzICogdGhpcy5tX2RhbXBpbmdSYXRpbyAqIG9tZWdhO1xuICAgIGsgPSBtYXNzICogb21lZ2EgKiBvbWVnYTtcbiAgICB0aGlzLm1fZ2FtbWEgPSBzdGVwLmR0ICogKGQgKyBzdGVwLmR0ICogayk7XG4gICAgdGhpcy5tX2dhbW1hID0gKHRoaXMubV9nYW1tYSAhPT0gMCA/IDEgLyB0aGlzLm1fZ2FtbWEgOiAwLjApO1xuICAgIHRoaXMubV9iZXRhID0gc3RlcC5kdCAqIGsgKiB0aGlzLm1fZ2FtbWE7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0TWF0ID0gYi5tX3hmLlI7XG4gICAgclggPSB0aGlzLm1fbG9jYWxBbmNob3IueCAtIGIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJZID0gdGhpcy5tX2xvY2FsQW5jaG9yLnkgLSBiLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogclggKyB0TWF0LmNvbDIueCAqIHJZO1xuICAgIHJZID0gdE1hdC5jb2wxLnkgKiByWCArIHRNYXQuY29sMi55ICogclk7XG4gICAgclggPSB0WDtcbiAgICBpbnZNYXNzID0gYi5tX2ludk1hc3M7XG4gICAgaW52SSA9IGIubV9pbnZJO1xuICAgIHRoaXMuSzEuY29sMS54ID0gaW52TWFzcztcbiAgICB0aGlzLksxLmNvbDIueCA9IDAuMDtcbiAgICB0aGlzLksxLmNvbDEueSA9IDAuMDtcbiAgICB0aGlzLksxLmNvbDIueSA9IGludk1hc3M7XG4gICAgdGhpcy5LMi5jb2wxLnggPSBpbnZJICogclkgKiByWTtcbiAgICB0aGlzLksyLmNvbDIueCA9IC1pbnZJICogclggKiByWTtcbiAgICB0aGlzLksyLmNvbDEueSA9IC1pbnZJICogclggKiByWTtcbiAgICB0aGlzLksyLmNvbDIueSA9IGludkkgKiByWCAqIHJYO1xuICAgIHRoaXMuSy5TZXRNKHRoaXMuSzEpO1xuICAgIHRoaXMuSy5BZGRNKHRoaXMuSzIpO1xuICAgIHRoaXMuSy5jb2wxLnggKz0gdGhpcy5tX2dhbW1hO1xuICAgIHRoaXMuSy5jb2wyLnkgKz0gdGhpcy5tX2dhbW1hO1xuICAgIHRoaXMuSy5HZXRJbnZlcnNlKHRoaXMubV9tYXNzKTtcbiAgICB0aGlzLm1fQy54ID0gYi5tX3N3ZWVwLmMueCArIHJYIC0gdGhpcy5tX3RhcmdldC54O1xuICAgIHRoaXMubV9DLnkgPSBiLm1fc3dlZXAuYy55ICsgclkgLSB0aGlzLm1fdGFyZ2V0Lnk7XG4gICAgYi5tX2FuZ3VsYXJWZWxvY2l0eSAqPSAwLjk4O1xuICAgIHRoaXMubV9pbXB1bHNlLnggKj0gc3RlcC5kdFJhdGlvO1xuICAgIHRoaXMubV9pbXB1bHNlLnkgKj0gc3RlcC5kdFJhdGlvO1xuICAgIGIubV9saW5lYXJWZWxvY2l0eS54ICs9IGludk1hc3MgKiB0aGlzLm1faW1wdWxzZS54O1xuICAgIGIubV9saW5lYXJWZWxvY2l0eS55ICs9IGludk1hc3MgKiB0aGlzLm1faW1wdWxzZS55O1xuICAgIGIubV9hbmd1bGFyVmVsb2NpdHkgKz0gaW52SSAqIChyWCAqIHRoaXMubV9pbXB1bHNlLnkgLSByWSAqIHRoaXMubV9pbXB1bHNlLngpO1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90WCwgQ2RvdFksIGIsIGltcHVsc2VYLCBpbXB1bHNlWSwgbWF4SW1wdWxzZSwgb2xkSW1wdWxzZVgsIG9sZEltcHVsc2VZLCByWCwgclksIHRNYXQsIHRYLCB0WTtcbiAgICBiID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIHRZID0gMDtcbiAgICB0TWF0ID0gYi5tX3hmLlI7XG4gICAgclggPSB0aGlzLm1fbG9jYWxBbmNob3IueCAtIGIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJZID0gdGhpcy5tX2xvY2FsQW5jaG9yLnkgLSBiLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogclggKyB0TWF0LmNvbDIueCAqIHJZO1xuICAgIHJZID0gdE1hdC5jb2wxLnkgKiByWCArIHRNYXQuY29sMi55ICogclk7XG4gICAgclggPSB0WDtcbiAgICBDZG90WCA9IGIubV9saW5lYXJWZWxvY2l0eS54ICsgKC1iLm1fYW5ndWxhclZlbG9jaXR5ICogclkpO1xuICAgIENkb3RZID0gYi5tX2xpbmVhclZlbG9jaXR5LnkgKyAoYi5tX2FuZ3VsYXJWZWxvY2l0eSAqIHJYKTtcbiAgICB0TWF0ID0gdGhpcy5tX21hc3M7XG4gICAgdFggPSBDZG90WCArIHRoaXMubV9iZXRhICogdGhpcy5tX0MueCArIHRoaXMubV9nYW1tYSAqIHRoaXMubV9pbXB1bHNlLng7XG4gICAgdFkgPSBDZG90WSArIHRoaXMubV9iZXRhICogdGhpcy5tX0MueSArIHRoaXMubV9nYW1tYSAqIHRoaXMubV9pbXB1bHNlLnk7XG4gICAgaW1wdWxzZVggPSAtKHRNYXQuY29sMS54ICogdFggKyB0TWF0LmNvbDIueCAqIHRZKTtcbiAgICBpbXB1bHNlWSA9IC0odE1hdC5jb2wxLnkgKiB0WCArIHRNYXQuY29sMi55ICogdFkpO1xuICAgIG9sZEltcHVsc2VYID0gdGhpcy5tX2ltcHVsc2UueDtcbiAgICBvbGRJbXB1bHNlWSA9IHRoaXMubV9pbXB1bHNlLnk7XG4gICAgdGhpcy5tX2ltcHVsc2UueCArPSBpbXB1bHNlWDtcbiAgICB0aGlzLm1faW1wdWxzZS55ICs9IGltcHVsc2VZO1xuICAgIG1heEltcHVsc2UgPSBzdGVwLmR0ICogdGhpcy5tX21heEZvcmNlO1xuICAgIGlmICh0aGlzLm1faW1wdWxzZS5MZW5ndGhTcXVhcmVkKCkgPiBtYXhJbXB1bHNlICogbWF4SW1wdWxzZSkge1xuICAgICAgdGhpcy5tX2ltcHVsc2UuTXVsdGlwbHkobWF4SW1wdWxzZSAvIHRoaXMubV9pbXB1bHNlLkxlbmd0aCgpKTtcbiAgICB9XG4gICAgaW1wdWxzZVggPSB0aGlzLm1faW1wdWxzZS54IC0gb2xkSW1wdWxzZVg7XG4gICAgaW1wdWxzZVkgPSB0aGlzLm1faW1wdWxzZS55IC0gb2xkSW1wdWxzZVk7XG4gICAgYi5tX2xpbmVhclZlbG9jaXR5LnggKz0gYi5tX2ludk1hc3MgKiBpbXB1bHNlWDtcbiAgICBiLm1fbGluZWFyVmVsb2NpdHkueSArPSBiLm1faW52TWFzcyAqIGltcHVsc2VZO1xuICAgIGIubV9hbmd1bGFyVmVsb2NpdHkgKz0gYi5tX2ludkkgKiAoclggKiBpbXB1bHNlWSAtIHJZICogaW1wdWxzZVgpO1xuICB9O1xuXG4gIGIyTW91c2VKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICByZXR1cm4gYjJNb3VzZUpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJNb3VzZUpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJNb3VzZUpvaW50RGVmID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJNb3VzZUpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGIyTW91c2VKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IGIySm9pbnQuZV9tb3VzZUpvaW50O1xuXG4gIGIyTW91c2VKb2ludERlZi5wcm90b3R5cGUudGFyZ2V0ID0gbnVsbDtcblxuICBiMk1vdXNlSm9pbnREZWYucHJvdG90eXBlLm1heEZvcmNlID0gMC4wO1xuXG4gIGIyTW91c2VKb2ludERlZi5wcm90b3R5cGUuZnJlcXVlbmN5SHogPSA1LjA7XG5cbiAgYjJNb3VzZUpvaW50RGVmLnByb3RvdHlwZS5kYW1waW5nUmF0aW8gPSAwLjc7XG5cbiAgZnVuY3Rpb24gYjJNb3VzZUpvaW50RGVmKCkge1xuICAgIHRoaXMudGFyZ2V0ID0gbmV3IGIyVmVjMigpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiBiMk1vdXNlSm9pbnREZWY7XG5cbn0pKGIySm9pbnREZWYpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMk1vdXNlSm9pbnREZWYuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIyTWF0MjIsIGIyTWF0aCwgYjJWZWMyLCBiMlZlYzMsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbmIyVmVjMyA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJQcmlzbWF0aWNKb2ludCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyUHJpc21hdGljSm9pbnQsIF9zdXBlcik7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9sb2NhbFhBeGlzMSA9IG51bGw7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9sb2NhbFlBeGlzMSA9IG51bGw7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9heGlzID0gbnVsbDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX3BlcnAgPSBudWxsO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fSyA9IG51bGw7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9yZWZBbmdsZSA9IG51bGw7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9pbXB1bHNlID0gbnVsbDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX21vdG9yTWFzcyA9IDAuMDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX21vdG9ySW1wdWxzZSA9IDAuMDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX2xvd2VyVHJhbnNsYXRpb24gPSAwLjA7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV91cHBlclRyYW5zbGF0aW9uID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fbWF4TW90b3JGb3JjZSA9IDAuMDtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX21vdG9yU3BlZWQgPSAwLjA7XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUubV9lbmFibGVMaW1pdCA9IGZhbHNlO1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLm1fZW5hYmxlTW90b3IgPSBmYWxzZTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcblxuICBmdW5jdGlvbiBiMlByaXNtYXRpY0pvaW50KGRlZikge1xuICAgIGIyUHJpc21hdGljSm9pbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IyID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbFhBeGlzMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxZQXhpczEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2F4aXMgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3BlcnAgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX0sgPSBuZXcgYjJNYXQzMygpO1xuICAgIHRoaXMubV9pbXB1bHNlID0gbmV3IGIyVmVjMygpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjEuU2V0VihkZWYubG9jYWxBbmNob3JBKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IyLlNldFYoZGVmLmxvY2FsQW5jaG9yQik7XG4gICAgdGhpcy5tX2xvY2FsWEF4aXMxLlNldFYoZGVmLmxvY2FsQXhpc0EpO1xuICAgIHRoaXMubV9sb2NhbFlBeGlzMS54ID0gLXRoaXMubV9sb2NhbFhBeGlzMS55O1xuICAgIHRoaXMubV9sb2NhbFlBeGlzMS55ID0gdGhpcy5tX2xvY2FsWEF4aXMxLng7XG4gICAgdGhpcy5tX3JlZkFuZ2xlID0gZGVmLnJlZmVyZW5jZUFuZ2xlO1xuICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgICB0aGlzLm1fbW90b3JNYXNzID0gMC4wO1xuICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwLjA7XG4gICAgdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBkZWYubG93ZXJUcmFuc2xhdGlvbjtcbiAgICB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiA9IGRlZi51cHBlclRyYW5zbGF0aW9uO1xuICAgIHRoaXMubV9tYXhNb3RvckZvcmNlID0gZGVmLm1heE1vdG9yRm9yY2U7XG4gICAgdGhpcy5tX21vdG9yU3BlZWQgPSBkZWYubW90b3JTcGVlZDtcbiAgICB0aGlzLm1fZW5hYmxlTGltaXQgPSBkZWYuZW5hYmxlTGltaXQ7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZGVmLmVuYWJsZU1vdG9yO1xuICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgdGhpcy5tX2F4aXMuU2V0WmVybygpO1xuICAgIHRoaXMubV9wZXJwLlNldFplcm8oKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5QS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjEpO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0UmVhY3Rpb25Gb3JjZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBiMlZlYzIoaW52X2R0ICogKHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fcGVycC54ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KSAqIHRoaXMubV9heGlzLngpLCBpbnZfZHQgKiAodGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9wZXJwLnkgKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopICogdGhpcy5tX2F4aXMueSkpO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UueTtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRKb2ludFRyYW5zbGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGF4aXMsIGJBLCBiQiwgZFgsIGRZLCBwMSwgcDIsIHRNYXQsIHRyYW5zbGF0aW9uO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgcDEgPSBiQS5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjEpO1xuICAgIHAyID0gYkIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IyKTtcbiAgICBkWCA9IHAyLnggLSBwMS54O1xuICAgIGRZID0gcDIueSAtIHAxLnk7XG4gICAgYXhpcyA9IGJBLkdldFdvcmxkVmVjdG9yKHRoaXMubV9sb2NhbFhBeGlzMSk7XG4gICAgdHJhbnNsYXRpb24gPSBheGlzLnggKiBkWCArIGF4aXMueSAqIGRZO1xuICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRKb2ludFNwZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGF4aXMsIGJBLCBiQiwgZFgsIGRZLCBwMVgsIHAxWSwgcDJYLCBwMlksIHIxWCwgcjFZLCByMlgsIHIyWSwgc3BlZWQsIHRNYXQsIHRYLCB2MSwgdjIsIHcxLCB3MjtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICByMVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgcjJYID0gdFg7XG4gICAgcDFYID0gYkEubV9zd2VlcC5jLnggKyByMVg7XG4gICAgcDFZID0gYkEubV9zd2VlcC5jLnkgKyByMVk7XG4gICAgcDJYID0gYkIubV9zd2VlcC5jLnggKyByMlg7XG4gICAgcDJZID0gYkIubV9zd2VlcC5jLnkgKyByMlk7XG4gICAgZFggPSBwMlggLSBwMVg7XG4gICAgZFkgPSBwMlkgLSBwMVk7XG4gICAgYXhpcyA9IGJBLkdldFdvcmxkVmVjdG9yKHRoaXMubV9sb2NhbFhBeGlzMSk7XG4gICAgdjEgPSBiQS5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHYyID0gYkIubV9saW5lYXJWZWxvY2l0eTtcbiAgICB3MSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIHcyID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgc3BlZWQgPSAoZFggKiAoLXcxICogYXhpcy55KSArIGRZICogKHcxICogYXhpcy54KSkgKyAoYXhpcy54ICogKCgodjIueCArICgtdzIgKiByMlkpKSAtIHYxLngpIC0gKC13MSAqIHIxWSkpICsgYXhpcy55ICogKCgodjIueSArICh3MiAqIHIyWCkpIC0gdjEueSkgLSAodzEgKiByMVgpKSk7XG4gICAgcmV0dXJuIHNwZWVkO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLklzTGltaXRFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9lbmFibGVMaW1pdDtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5FbmFibGVMaW1pdCA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGZsYWc7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuR2V0TG93ZXJMaW1pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbjtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5HZXRVcHBlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV91cHBlclRyYW5zbGF0aW9uO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLlNldExpbWl0cyA9IGZ1bmN0aW9uKGxvd2VyLCB1cHBlcikge1xuICAgIGlmIChsb3dlciA9PT0gdm9pZCAwKSB7XG4gICAgICBsb3dlciA9IDA7XG4gICAgfVxuICAgIGlmICh1cHBlciA9PT0gdm9pZCAwKSB7XG4gICAgICB1cHBlciA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24gPSBsb3dlcjtcbiAgICB0aGlzLm1fdXBwZXJUcmFuc2xhdGlvbiA9IHVwcGVyO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLklzTW90b3JFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9lbmFibGVNb3RvcjtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5FbmFibGVNb3RvciA9IGZ1bmN0aW9uKGZsYWcpIHtcbiAgICB0aGlzLm1fYm9keUEuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX2JvZHlCLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9lbmFibGVNb3RvciA9IGZsYWc7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuU2V0TW90b3JTcGVlZCA9IGZ1bmN0aW9uKHNwZWVkKSB7XG4gICAgaWYgKHNwZWVkID09PSB2b2lkIDApIHtcbiAgICAgIHNwZWVkID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fbW90b3JTcGVlZCA9IHNwZWVkO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldE1vdG9yU3BlZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21vdG9yU3BlZWQ7XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuU2V0TWF4TW90b3JGb3JjZSA9IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgaWYgKGZvcmNlID09PSB2b2lkIDApIHtcbiAgICAgIGZvcmNlID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fbWF4TW90b3JGb3JjZSA9IGZvcmNlO1xuICB9O1xuXG4gIGIyUHJpc21hdGljSm9pbnQucHJvdG90eXBlLkdldE1vdG9yRm9yY2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21vdG9ySW1wdWxzZTtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5Jbml0VmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgTDEsIEwyLCBQWCwgUFksIGJBLCBiQiwgZFgsIGRZLCBpMSwgaTIsIGpvaW50VHJhbnNpdGlvbiwgbTEsIG0yLCByMVgsIHIxWSwgcjJYLCByMlksIHRNYXQsIHRYLCB4ZjEsIHhmMjtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcbiAgICB0aGlzLm1fbG9jYWxDZW50ZXJBLlNldFYoYkEuR2V0TG9jYWxDZW50ZXIoKSk7XG4gICAgdGhpcy5tX2xvY2FsQ2VudGVyQi5TZXRWKGJCLkdldExvY2FsQ2VudGVyKCkpO1xuICAgIHhmMSA9IGJBLkdldFRyYW5zZm9ybSgpO1xuICAgIHhmMiA9IGJCLkdldFRyYW5zZm9ybSgpO1xuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS54O1xuICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIHRoaXMubV9sb2NhbENlbnRlckEueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICByMVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIHRoaXMubV9sb2NhbENlbnRlckIueDtcbiAgICByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSB0aGlzLm1fbG9jYWxDZW50ZXJCLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgcjJYID0gdFg7XG4gICAgZFggPSBiQi5tX3N3ZWVwLmMueCArIHIyWCAtIGJBLm1fc3dlZXAuYy54IC0gcjFYO1xuICAgIGRZID0gYkIubV9zd2VlcC5jLnkgKyByMlkgLSBiQS5tX3N3ZWVwLmMueSAtIHIxWTtcbiAgICB0aGlzLm1faW52TWFzc0EgPSBiQS5tX2ludk1hc3M7XG4gICAgdGhpcy5tX2ludk1hc3NCID0gYkIubV9pbnZNYXNzO1xuICAgIHRoaXMubV9pbnZJQSA9IGJBLm1faW52STtcbiAgICB0aGlzLm1faW52SUIgPSBiQi5tX2ludkk7XG4gICAgdGhpcy5tX2F4aXMuU2V0VihiMk1hdGguTXVsTVYoeGYxLlIsIHRoaXMubV9sb2NhbFhBeGlzMSkpO1xuICAgIHRoaXMubV9hMSA9IChkWCArIHIxWCkgKiB0aGlzLm1fYXhpcy55IC0gKGRZICsgcjFZKSAqIHRoaXMubV9heGlzLng7XG4gICAgdGhpcy5tX2EyID0gcjJYICogdGhpcy5tX2F4aXMueSAtIHIyWSAqIHRoaXMubV9heGlzLng7XG4gICAgdGhpcy5tX21vdG9yTWFzcyA9IHRoaXMubV9pbnZNYXNzQSArIHRoaXMubV9pbnZNYXNzQiArIHRoaXMubV9pbnZJQSAqIHRoaXMubV9hMSAqIHRoaXMubV9hMSArIHRoaXMubV9pbnZJQiAqIHRoaXMubV9hMiAqIHRoaXMubV9hMjtcbiAgICBpZiAodGhpcy5tX21vdG9yTWFzcyA+IE51bWJlci5NSU5fVkFMVUUpIHtcbiAgICAgIHRoaXMubV9tb3Rvck1hc3MgPSAxLjAgLyB0aGlzLm1fbW90b3JNYXNzO1xuICAgIH1cbiAgICB0aGlzLm1fcGVycC5TZXRWKGIyTWF0aC5NdWxNVih4ZjEuUiwgdGhpcy5tX2xvY2FsWUF4aXMxKSk7XG4gICAgdGhpcy5tX3MxID0gKGRYICsgcjFYKSAqIHRoaXMubV9wZXJwLnkgLSAoZFkgKyByMVkpICogdGhpcy5tX3BlcnAueDtcbiAgICB0aGlzLm1fczIgPSByMlggKiB0aGlzLm1fcGVycC55IC0gcjJZICogdGhpcy5tX3BlcnAueDtcbiAgICBtMSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICBtMiA9IHRoaXMubV9pbnZNYXNzQjtcbiAgICBpMSA9IHRoaXMubV9pbnZJQTtcbiAgICBpMiA9IHRoaXMubV9pbnZJQjtcbiAgICB0aGlzLm1fSy5jb2wxLnggPSBtMSArIG0yICsgaTEgKiB0aGlzLm1fczEgKiB0aGlzLm1fczEgKyBpMiAqIHRoaXMubV9zMiAqIHRoaXMubV9zMjtcbiAgICB0aGlzLm1fSy5jb2wxLnkgPSBpMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyO1xuICAgIHRoaXMubV9LLmNvbDEueiA9IGkxICogdGhpcy5tX3MxICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fYTI7XG4gICAgdGhpcy5tX0suY29sMi54ID0gdGhpcy5tX0suY29sMS55O1xuICAgIHRoaXMubV9LLmNvbDIueSA9IGkxICsgaTI7XG4gICAgdGhpcy5tX0suY29sMi56ID0gaTEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9hMjtcbiAgICB0aGlzLm1fSy5jb2wzLnggPSB0aGlzLm1fSy5jb2wxLno7XG4gICAgdGhpcy5tX0suY29sMy55ID0gdGhpcy5tX0suY29sMi56O1xuICAgIHRoaXMubV9LLmNvbDMueiA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9hMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX2EyICogdGhpcy5tX2EyO1xuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQpIHtcbiAgICAgIGpvaW50VHJhbnNpdGlvbiA9IHRoaXMubV9heGlzLnggKiBkWCArIHRoaXMubV9heGlzLnkgKiBkWTtcbiAgICAgIGlmIChiMk1hdGguQWJzKHRoaXMubV91cHBlclRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIDwgMi4wICogYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2VxdWFsTGltaXRzO1xuICAgICAgfSBlbHNlIGlmIChqb2ludFRyYW5zaXRpb24gPD0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIHtcbiAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfYXRMb3dlckxpbWl0KSB7XG4gICAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfYXRMb3dlckxpbWl0O1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoam9pbnRUcmFuc2l0aW9uID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkge1xuICAgICAgICAgIHRoaXMubV9saW1pdFN0YXRlID0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdDtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMC4wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMC4wO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2VuYWJsZU1vdG9yID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gICAgaWYgKHN0ZXAud2FybVN0YXJ0aW5nKSB7XG4gICAgICB0aGlzLm1faW1wdWxzZS54ICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9pbXB1bHNlLnkgKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICBQWCA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fcGVycC54ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KSAqIHRoaXMubV9heGlzLng7XG4gICAgICBQWSA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fcGVycC55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KSAqIHRoaXMubV9heGlzLnk7XG4gICAgICBMMSA9IHRoaXMubV9pbXB1bHNlLnggKiB0aGlzLm1fczEgKyB0aGlzLm1faW1wdWxzZS55ICsgKHRoaXMubV9tb3RvckltcHVsc2UgKyB0aGlzLm1faW1wdWxzZS56KSAqIHRoaXMubV9hMTtcbiAgICAgIEwyID0gdGhpcy5tX2ltcHVsc2UueCAqIHRoaXMubV9zMiArIHRoaXMubV9pbXB1bHNlLnkgKyAodGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopICogdGhpcy5tX2EyO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZO1xuICAgICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgLT0gdGhpcy5tX2ludklBICogTDE7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnggKz0gdGhpcy5tX2ludk1hc3NCICogUFg7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7XG4gICAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSB0aGlzLm1faW52SUIgKiBMMjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgICAgdGhpcy5tX21vdG9ySW1wdWxzZSA9IDAuMDtcbiAgICB9XG4gIH07XG5cbiAgYjJQcmlzbWF0aWNKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90LCBDZG90MVgsIENkb3QxWSwgQ2RvdDIsIEwxLCBMMiwgUFgsIFBZLCBiQSwgYkIsIGJYLCBiWSwgZGYsIGRmMiwgZjEsIGYyciwgaW1wdWxzZSwgbWF4SW1wdWxzZSwgb2xkSW1wdWxzZSwgdjEsIHYyLCB3MSwgdzI7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdjEgPSBiQS5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcxID0gYkEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcyID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgUFggPSAwO1xuICAgIFBZID0gMDtcbiAgICBMMSA9IDA7XG4gICAgTDIgPSAwO1xuICAgIGlmICh0aGlzLm1fZW5hYmxlTW90b3IgJiYgdGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9lcXVhbExpbWl0cykge1xuICAgICAgQ2RvdCA9IHRoaXMubV9heGlzLnggKiAodjIueCAtIHYxLngpICsgdGhpcy5tX2F4aXMueSAqICh2Mi55IC0gdjEueSkgKyB0aGlzLm1fYTIgKiB3MiAtIHRoaXMubV9hMSAqIHcxO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9tb3Rvck1hc3MgKiAodGhpcy5tX21vdG9yU3BlZWQgLSBDZG90KTtcbiAgICAgIG9sZEltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlO1xuICAgICAgbWF4SW1wdWxzZSA9IHN0ZXAuZHQgKiB0aGlzLm1fbWF4TW90b3JGb3JjZTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSBiMk1hdGguQ2xhbXAodGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsIC1tYXhJbXB1bHNlLCBtYXhJbXB1bHNlKTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlIC0gb2xkSW1wdWxzZTtcbiAgICAgIFBYID0gaW1wdWxzZSAqIHRoaXMubV9heGlzLng7XG4gICAgICBQWSA9IGltcHVsc2UgKiB0aGlzLm1fYXhpcy55O1xuICAgICAgTDEgPSBpbXB1bHNlICogdGhpcy5tX2ExO1xuICAgICAgTDIgPSBpbXB1bHNlICogdGhpcy5tX2EyO1xuICAgICAgdjEueCAtPSB0aGlzLm1faW52TWFzc0EgKiBQWDtcbiAgICAgIHYxLnkgLT0gdGhpcy5tX2ludk1hc3NBICogUFk7XG4gICAgICB3MSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICAgIHYyLnggKz0gdGhpcy5tX2ludk1hc3NCICogUFg7XG4gICAgICB2Mi55ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBZO1xuICAgICAgdzIgKz0gdGhpcy5tX2ludklCICogTDI7XG4gICAgfVxuICAgIENkb3QxWCA9IHRoaXMubV9wZXJwLnggKiAodjIueCAtIHYxLngpICsgdGhpcy5tX3BlcnAueSAqICh2Mi55IC0gdjEueSkgKyB0aGlzLm1fczIgKiB3MiAtIHRoaXMubV9zMSAqIHcxO1xuICAgIENkb3QxWSA9IHcyIC0gdzE7XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQpIHtcbiAgICAgIENkb3QyID0gdGhpcy5tX2F4aXMueCAqICh2Mi54IC0gdjEueCkgKyB0aGlzLm1fYXhpcy55ICogKHYyLnkgLSB2MS55KSArIHRoaXMubV9hMiAqIHcyIC0gdGhpcy5tX2ExICogdzE7XG4gICAgICBmMSA9IHRoaXMubV9pbXB1bHNlLkNvcHkoKTtcbiAgICAgIGRmID0gdGhpcy5tX0suU29sdmUzMyhuZXcgYjJWZWMzKCksIC1DZG90MVgsIC1DZG90MVksIC1DZG90Mik7XG4gICAgICB0aGlzLm1faW1wdWxzZS5BZGQoZGYpO1xuICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlID09PSBiMkpvaW50LmVfYXRMb3dlckxpbWl0KSB7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlLnogPSBiMk1hdGguTWF4KHRoaXMubV9pbXB1bHNlLnosIDAuMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gYjJNYXRoLk1pbih0aGlzLm1faW1wdWxzZS56LCAwLjApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBiWCA9ICgtQ2RvdDFYKSAtICh0aGlzLm1faW1wdWxzZS56IC0gZjEueikgKiB0aGlzLm1fSy5jb2wzLng7XG4gICAgICBiWSA9ICgtQ2RvdDFZKSAtICh0aGlzLm1faW1wdWxzZS56IC0gZjEueikgKiB0aGlzLm1fSy5jb2wzLnk7XG4gICAgICBmMnIgPSB0aGlzLm1fSy5Tb2x2ZTIyKG5ldyBiMlZlYzIoKSwgYlgsIGJZKTtcbiAgICAgIGYyci54ICs9IGYxLng7XG4gICAgICBmMnIueSArPSBmMS55O1xuICAgICAgdGhpcy5tX2ltcHVsc2UueCA9IGYyci54O1xuICAgICAgdGhpcy5tX2ltcHVsc2UueSA9IGYyci55O1xuICAgICAgZGYueCA9IHRoaXMubV9pbXB1bHNlLnggLSBmMS54O1xuICAgICAgZGYueSA9IHRoaXMubV9pbXB1bHNlLnkgLSBmMS55O1xuICAgICAgZGYueiA9IHRoaXMubV9pbXB1bHNlLnogLSBmMS56O1xuICAgICAgUFggPSBkZi54ICogdGhpcy5tX3BlcnAueCArIGRmLnogKiB0aGlzLm1fYXhpcy54O1xuICAgICAgUFkgPSBkZi54ICogdGhpcy5tX3BlcnAueSArIGRmLnogKiB0aGlzLm1fYXhpcy55O1xuICAgICAgTDEgPSBkZi54ICogdGhpcy5tX3MxICsgZGYueSArIGRmLnogKiB0aGlzLm1fYTE7XG4gICAgICBMMiA9IGRmLnggKiB0aGlzLm1fczIgKyBkZi55ICsgZGYueiAqIHRoaXMubV9hMjtcbiAgICAgIHYxLnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgICB2MS55IC09IHRoaXMubV9pbnZNYXNzQSAqIFBZO1xuICAgICAgdzEgLT0gdGhpcy5tX2ludklBICogTDE7XG4gICAgICB2Mi54ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBYO1xuICAgICAgdjIueSArPSB0aGlzLm1faW52TWFzc0IgKiBQWTtcbiAgICAgIHcyICs9IHRoaXMubV9pbnZJQiAqIEwyO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZjIgPSB0aGlzLm1fSy5Tb2x2ZTIyKG5ldyBiMlZlYzIoKSwgLUNkb3QxWCwgLUNkb3QxWSk7XG4gICAgICB0aGlzLm1faW1wdWxzZS54ICs9IGRmMi54O1xuICAgICAgdGhpcy5tX2ltcHVsc2UueSArPSBkZjIueTtcbiAgICAgIFBYID0gZGYyLnggKiB0aGlzLm1fcGVycC54O1xuICAgICAgUFkgPSBkZjIueCAqIHRoaXMubV9wZXJwLnk7XG4gICAgICBMMSA9IGRmMi54ICogdGhpcy5tX3MxICsgZGYyLnk7XG4gICAgICBMMiA9IGRmMi54ICogdGhpcy5tX3MyICsgZGYyLnk7XG4gICAgICB2MS54IC09IHRoaXMubV9pbnZNYXNzQSAqIFBYO1xuICAgICAgdjEueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTtcbiAgICAgIHcxIC09IHRoaXMubV9pbnZJQSAqIEwxO1xuICAgICAgdjIueCArPSB0aGlzLm1faW52TWFzc0IgKiBQWDtcbiAgICAgIHYyLnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7XG4gICAgICB3MiArPSB0aGlzLm1faW52SUIgKiBMMjtcbiAgICB9XG4gICAgYkEubV9saW5lYXJWZWxvY2l0eS5TZXRWKHYxKTtcbiAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSA9IHcxO1xuICAgIGJCLm1fbGluZWFyVmVsb2NpdHkuU2V0Vih2Mik7XG4gICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgPSB3MjtcbiAgfTtcblxuICBiMlByaXNtYXRpY0pvaW50LnByb3RvdHlwZS5Tb2x2ZVBvc2l0aW9uQ29uc3RyYWludHMgPSBmdW5jdGlvbihiYXVtZ2FydGUpIHtcbiAgICB2YXIgQzFYLCBDMVksIEMyLCBMMSwgTDIsIFBYLCBQWSwgUjEsIFIyLCBhMSwgYTIsIGFjdGl2ZSwgYW5ndWxhckVycm9yLCBiQSwgYkIsIGMxLCBjMiwgZFgsIGRZLCBpMSwgaTIsIGltcHVsc2UsIGltcHVsc2UxLCBrMTEsIGsxMiwgazIyLCBsaW1pdEMsIGxpbmVhckVycm9yLCBtMSwgbTIsIG9sZExpbWl0SW1wdWxzZSwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WCwgdHJhbnNsYXRpb247XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICBsaW1pdEMgPSAwO1xuICAgIG9sZExpbWl0SW1wdWxzZSA9IDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgYzEgPSBiQS5tX3N3ZWVwLmM7XG4gICAgYTEgPSBiQS5tX3N3ZWVwLmE7XG4gICAgYzIgPSBiQi5tX3N3ZWVwLmM7XG4gICAgYTIgPSBiQi5tX3N3ZWVwLmE7XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgbTEgPSAwO1xuICAgIG0yID0gMDtcbiAgICBpMSA9IDA7XG4gICAgaTIgPSAwO1xuICAgIGxpbmVhckVycm9yID0gMC4wO1xuICAgIGFuZ3VsYXJFcnJvciA9IDAuMDtcbiAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICBDMiA9IDAuMDtcbiAgICBSMSA9IGIyTWF0MjIuRnJvbUFuZ2xlKGExKTtcbiAgICBSMiA9IGIyTWF0MjIuRnJvbUFuZ2xlKGEyKTtcbiAgICB0TWF0ID0gUjE7XG4gICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQS54O1xuICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIHRoaXMubV9sb2NhbENlbnRlckEueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICByMVggPSB0WDtcbiAgICB0TWF0ID0gUjI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gdGhpcy5tX2xvY2FsQ2VudGVyQi54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIHRoaXMubV9sb2NhbENlbnRlckIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBkWCA9IGMyLnggKyByMlggLSBjMS54IC0gcjFYO1xuICAgIGRZID0gYzIueSArIHIyWSAtIGMxLnkgLSByMVk7XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCkge1xuICAgICAgdGhpcy5tX2F4aXMgPSBiMk1hdGguTXVsTVYoUjEsIHRoaXMubV9sb2NhbFhBeGlzMSk7XG4gICAgICB0aGlzLm1fYTEgPSAoZFggKyByMVgpICogdGhpcy5tX2F4aXMueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fYXhpcy54O1xuICAgICAgdGhpcy5tX2EyID0gcjJYICogdGhpcy5tX2F4aXMueSAtIHIyWSAqIHRoaXMubV9heGlzLng7XG4gICAgICB0cmFuc2xhdGlvbiA9IHRoaXMubV9heGlzLnggKiBkWCArIHRoaXMubV9heGlzLnkgKiBkWTtcbiAgICAgIGlmIChiMk1hdGguQWJzKHRoaXMubV91cHBlclRyYW5zbGF0aW9uIC0gdGhpcy5tX2xvd2VyVHJhbnNsYXRpb24pIDwgMi4wICogYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIEMyID0gYjJNYXRoLkNsYW1wKHRyYW5zbGF0aW9uLCAtYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uLCBiMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24pO1xuICAgICAgICBsaW5lYXJFcnJvciA9IGIyTWF0aC5BYnModHJhbnNsYXRpb24pO1xuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh0cmFuc2xhdGlvbiA8PSB0aGlzLm1fbG93ZXJUcmFuc2xhdGlvbikge1xuICAgICAgICBDMiA9IGIyTWF0aC5DbGFtcCh0cmFuc2xhdGlvbiAtIHRoaXMubV9sb3dlclRyYW5zbGF0aW9uICsgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCAtYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uLCAwLjApO1xuICAgICAgICBsaW5lYXJFcnJvciA9IHRoaXMubV9sb3dlclRyYW5zbGF0aW9uIC0gdHJhbnNsYXRpb247XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uID49IHRoaXMubV91cHBlclRyYW5zbGF0aW9uKSB7XG4gICAgICAgIEMyID0gYjJNYXRoLkNsYW1wKHRyYW5zbGF0aW9uIC0gdGhpcy5tX3VwcGVyVHJhbnNsYXRpb24gKyBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIDAuMCwgYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uKTtcbiAgICAgICAgbGluZWFyRXJyb3IgPSB0cmFuc2xhdGlvbiAtIHRoaXMubV91cHBlclRyYW5zbGF0aW9uO1xuICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm1fcGVycCA9IGIyTWF0aC5NdWxNVihSMSwgdGhpcy5tX2xvY2FsWUF4aXMxKTtcbiAgICB0aGlzLm1fczEgPSAoZFggKyByMVgpICogdGhpcy5tX3BlcnAueSAtIChkWSArIHIxWSkgKiB0aGlzLm1fcGVycC54O1xuICAgIHRoaXMubV9zMiA9IHIyWCAqIHRoaXMubV9wZXJwLnkgLSByMlkgKiB0aGlzLm1fcGVycC54O1xuICAgIGltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XG4gICAgQzFYID0gdGhpcy5tX3BlcnAueCAqIGRYICsgdGhpcy5tX3BlcnAueSAqIGRZO1xuICAgIEMxWSA9IGEyIC0gYTEgLSB0aGlzLm1fcmVmQW5nbGU7XG4gICAgbGluZWFyRXJyb3IgPSBiMk1hdGguTWF4KGxpbmVhckVycm9yLCBiMk1hdGguQWJzKEMxWCkpO1xuICAgIGFuZ3VsYXJFcnJvciA9IGIyTWF0aC5BYnMoQzFZKTtcbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICBtMSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgIG0yID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgaTEgPSB0aGlzLm1faW52SUE7XG4gICAgICBpMiA9IHRoaXMubV9pbnZJQjtcbiAgICAgIHRoaXMubV9LLmNvbDEueCA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9zMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX3MyO1xuICAgICAgdGhpcy5tX0suY29sMS55ID0gaTEgKiB0aGlzLm1fczEgKyBpMiAqIHRoaXMubV9zMjtcbiAgICAgIHRoaXMubV9LLmNvbDEueiA9IGkxICogdGhpcy5tX3MxICogdGhpcy5tX2ExICsgaTIgKiB0aGlzLm1fczIgKiB0aGlzLm1fYTI7XG4gICAgICB0aGlzLm1fSy5jb2wyLnggPSB0aGlzLm1fSy5jb2wxLnk7XG4gICAgICB0aGlzLm1fSy5jb2wyLnkgPSBpMSArIGkyO1xuICAgICAgdGhpcy5tX0suY29sMi56ID0gaTEgKiB0aGlzLm1fYTEgKyBpMiAqIHRoaXMubV9hMjtcbiAgICAgIHRoaXMubV9LLmNvbDMueCA9IHRoaXMubV9LLmNvbDEuejtcbiAgICAgIHRoaXMubV9LLmNvbDMueSA9IHRoaXMubV9LLmNvbDIuejtcbiAgICAgIHRoaXMubV9LLmNvbDMueiA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9hMSAqIHRoaXMubV9hMSArIGkyICogdGhpcy5tX2EyICogdGhpcy5tX2EyO1xuICAgICAgdGhpcy5tX0suU29sdmUzMyhpbXB1bHNlLCAtQzFYLCAtQzFZLCAtQzIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtMSA9IHRoaXMubV9pbnZNYXNzQTtcbiAgICAgIG0yID0gdGhpcy5tX2ludk1hc3NCO1xuICAgICAgaTEgPSB0aGlzLm1faW52SUE7XG4gICAgICBpMiA9IHRoaXMubV9pbnZJQjtcbiAgICAgIGsxMSA9IG0xICsgbTIgKyBpMSAqIHRoaXMubV9zMSAqIHRoaXMubV9zMSArIGkyICogdGhpcy5tX3MyICogdGhpcy5tX3MyO1xuICAgICAgazEyID0gaTEgKiB0aGlzLm1fczEgKyBpMiAqIHRoaXMubV9zMjtcbiAgICAgIGsyMiA9IGkxICsgaTI7XG4gICAgICB0aGlzLm1fSy5jb2wxLlNldChrMTEsIGsxMiwgMC4wKTtcbiAgICAgIHRoaXMubV9LLmNvbDIuU2V0KGsxMiwgazIyLCAwLjApO1xuICAgICAgaW1wdWxzZTEgPSB0aGlzLm1fSy5Tb2x2ZTIyKG5ldyBiMlZlYzIoKSwgLUMxWCwgLUMxWSk7XG4gICAgICBpbXB1bHNlLnggPSBpbXB1bHNlMS54O1xuICAgICAgaW1wdWxzZS55ID0gaW1wdWxzZTEueTtcbiAgICAgIGltcHVsc2UueiA9IDAuMDtcbiAgICB9XG4gICAgUFggPSBpbXB1bHNlLnggKiB0aGlzLm1fcGVycC54ICsgaW1wdWxzZS56ICogdGhpcy5tX2F4aXMueDtcbiAgICBQWSA9IGltcHVsc2UueCAqIHRoaXMubV9wZXJwLnkgKyBpbXB1bHNlLnogKiB0aGlzLm1fYXhpcy55O1xuICAgIEwxID0gaW1wdWxzZS54ICogdGhpcy5tX3MxICsgaW1wdWxzZS55ICsgaW1wdWxzZS56ICogdGhpcy5tX2ExO1xuICAgIEwyID0gaW1wdWxzZS54ICogdGhpcy5tX3MyICsgaW1wdWxzZS55ICsgaW1wdWxzZS56ICogdGhpcy5tX2EyO1xuICAgIGMxLnggLT0gdGhpcy5tX2ludk1hc3NBICogUFg7XG4gICAgYzEueSAtPSB0aGlzLm1faW52TWFzc0EgKiBQWTtcbiAgICBhMSAtPSB0aGlzLm1faW52SUEgKiBMMTtcbiAgICBjMi54ICs9IHRoaXMubV9pbnZNYXNzQiAqIFBYO1xuICAgIGMyLnkgKz0gdGhpcy5tX2ludk1hc3NCICogUFk7XG4gICAgYTIgKz0gdGhpcy5tX2ludklCICogTDI7XG4gICAgYkEubV9zd2VlcC5hID0gYTE7XG4gICAgYkIubV9zd2VlcC5hID0gYTI7XG4gICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIHJldHVybiBsaW5lYXJFcnJvciA8PSBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AgJiYgYW5ndWxhckVycm9yIDw9IGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsb3A7XG4gIH07XG5cbiAgcmV0dXJuIGIyUHJpc21hdGljSm9pbnQ7XG5cbn0pKGIySm9pbnQpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlByaXNtYXRpY0pvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIySm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZjtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHJpc21hdGljSm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlByaXNtYXRpY0pvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLnR5cGUgPSBiMkpvaW50LmVfcHJpc21hdGljSm9pbnQ7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JBID0gbnVsbDtcblxuICBiMlByaXNtYXRpY0pvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckIgPSBudWxsO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQXhpc0EgPSBudWxsO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLnJlZmVyZW5jZUFuZ2xlID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLmVuYWJsZUxpbWl0ID0gZmFsc2U7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUubG93ZXJUcmFuc2xhdGlvbiA9IDAuMDtcblxuICBiMlByaXNtYXRpY0pvaW50RGVmLnByb3RvdHlwZS51cHBlclRyYW5zbGF0aW9uID0gMC4wO1xuXG4gIGIyUHJpc21hdGljSm9pbnREZWYucHJvdG90eXBlLmVuYWJsZU1vdG9yID0gZmFsc2U7XG5cbiAgYjJQcmlzbWF0aWNKb2ludERlZi5wcm90b3R5cGUubWF4TW90b3JGb3JjZSA9IDAuMDtcblxuICBiMlByaXNtYXRpY0pvaW50RGVmLnByb3RvdHlwZS5tb3RvclNwZWVkID0gMC4wO1xuXG4gIGZ1bmN0aW9uIGIyUHJpc21hdGljSm9pbnREZWYoKSB7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEF4aXNBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMudHlwZSA9IGIySm9pbnQuZV9wcmlzbWF0aWNKb2ludDtcbiAgICB0aGlzLmxvY2FsQXhpc0EuU2V0KDEuMCwgMC4wKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlByaXNtYXRpY0pvaW50RGVmLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24oYkEsIGJCLCBhbmNob3IsIGF4aXMpIHtcbiAgICB0aGlzLmJvZHlBID0gYkE7XG4gICAgdGhpcy5ib2R5QiA9IGJCO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gdGhpcy5ib2R5QS5HZXRMb2NhbFBvaW50KGFuY2hvcik7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSB0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yKTtcbiAgICB0aGlzLmxvY2FsQXhpc0EgPSB0aGlzLmJvZHlBLkdldExvY2FsVmVjdG9yKGF4aXMpO1xuICAgIHRoaXMucmVmZXJlbmNlQW5nbGUgPSB0aGlzLmJvZHlCLkdldEFuZ2xlKCkgLSB0aGlzLmJvZHlBLkdldEFuZ2xlKCk7XG4gIH07XG5cbiAgcmV0dXJuIGIyUHJpc21hdGljSm9pbnREZWY7XG5cbn0pKGIySm9pbnREZWYpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMlByaXNtYXRpY0pvaW50RGVmLmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMk1hdDIyLCBiMk1hdGgsIGIyVmVjMiwgYjJWZWMzLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyTWF0MjIgPSBCb3gyRC5Db21tb24uTWF0aC5iMk1hdDIyO1xuXG5iMlZlYzMgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzM7XG5cbmIyTWF0aCA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0aDtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5Sm9pbnQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlB1bGxleUpvaW50LCBfc3VwZXIpO1xuXG4gIGIyUHVsbGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3RoID0gMi4wO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fbG9jYWxYQXhpczEgPSBudWxsO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fbG9jYWxZQXhpczEgPSBudWxsO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fdTEgPSBudWxsO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fdTIgPSBudWxsO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fZ3JvdW5kID0gbnVsbDtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5tX3JhdGlvID0gMC4wO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fY29uc3RhbnQgPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9tYXhMZW5ndGgxID0gMC4wO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fbWF4TGVuZ3RoMiA9IDAuMDtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5tX2ltcHVsc2UgPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUubV9saW1pdEltcHVsc2UxID0gMC4wO1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLm1fbGltaXRJbXB1bHNlMiA9IDAuMDtcblxuICBmdW5jdGlvbiBiMlB1bGxleUpvaW50KGRlZikge1xuICAgIGIyUHVsbGV5Sm9pbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZGVmKTtcbiAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3IxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX3UxID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV91MiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1fZ3JvdW5kID0gdGhpcy5tX2JvZHlBLm1fd29ybGQubV9ncm91bmRCb2R5O1xuICAgIHRoaXMubV9ncm91bmRBbmNob3IxLnggPSBkZWYuZ3JvdW5kQW5jaG9yQS54IC0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLng7XG4gICAgdGhpcy5tX2dyb3VuZEFuY2hvcjEueSA9IGRlZi5ncm91bmRBbmNob3JBLnkgLSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueTtcbiAgICB0aGlzLm1fZ3JvdW5kQW5jaG9yMi54ID0gZGVmLmdyb3VuZEFuY2hvckIueCAtIHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi54O1xuICAgIHRoaXMubV9ncm91bmRBbmNob3IyLnkgPSBkZWYuZ3JvdW5kQW5jaG9yQi55IC0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMS5TZXRWKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIuU2V0VihkZWYubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLm1fcmF0aW8gPSBkZWYucmF0aW87XG4gICAgdGhpcy5tX2NvbnN0YW50ID0gZGVmLmxlbmd0aEEgKyB0aGlzLm1fcmF0aW8gKiBkZWYubGVuZ3RoQjtcbiAgICB0aGlzLm1fbWF4TGVuZ3RoMSA9IGIyTWF0aC5NaW4oZGVmLm1heExlbmd0aEEsIHRoaXMubV9jb25zdGFudCAtIHRoaXMubV9yYXRpbyAqIGIyUHVsbGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3RoKTtcbiAgICB0aGlzLm1fbWF4TGVuZ3RoMiA9IGIyTWF0aC5NaW4oZGVmLm1heExlbmd0aEIsICh0aGlzLm1fY29uc3RhbnQgLSBiMlB1bGxleUpvaW50LmIyX21pblB1bGxleUxlbmd0aCkgLyB0aGlzLm1fcmF0aW8pO1xuICAgIHRoaXMubV9pbXB1bHNlID0gMC4wO1xuICAgIHRoaXMubV9saW1pdEltcHVsc2UxID0gMC4wO1xuICAgIHRoaXMubV9saW1pdEltcHVsc2UyID0gMC4wO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLkdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7XG4gIH07XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUIuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IyKTtcbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91Mi54LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZSAqIHRoaXMubV91Mi55KTtcbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIDAuMDtcbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRHcm91bmRBbmNob3JBID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGE7XG4gICAgYSA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi5Db3B5KCk7XG4gICAgYS5BZGQodGhpcy5tX2dyb3VuZEFuY2hvcjEpO1xuICAgIHJldHVybiBhO1xuICB9O1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLkdldEdyb3VuZEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYTtcbiAgICBhID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLkNvcHkoKTtcbiAgICBhLkFkZCh0aGlzLm1fZ3JvdW5kQW5jaG9yMik7XG4gICAgcmV0dXJuIGE7XG4gIH07XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuR2V0TGVuZ3RoMSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkWCwgZFksIHAsIHNYLCBzWTtcbiAgICBwID0gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMSk7XG4gICAgc1ggPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueCArIHRoaXMubV9ncm91bmRBbmNob3IxLng7XG4gICAgc1kgPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueSArIHRoaXMubV9ncm91bmRBbmNob3IxLnk7XG4gICAgZFggPSBwLnggLSBzWDtcbiAgICBkWSA9IHAueSAtIHNZO1xuICAgIHJldHVybiBNYXRoLnNxcnQoZFggKiBkWCArIGRZICogZFkpO1xuICB9O1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLkdldExlbmd0aDIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZFgsIGRZLCBwLCBzWCwgc1k7XG4gICAgcCA9IHRoaXMubV9ib2R5Qi5HZXRXb3JsZFBvaW50KHRoaXMubV9sb2NhbEFuY2hvcjIpO1xuICAgIHNYID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnggKyB0aGlzLm1fZ3JvdW5kQW5jaG9yMi54O1xuICAgIHNZID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnkgKyB0aGlzLm1fZ3JvdW5kQW5jaG9yMi55O1xuICAgIGRYID0gcC54IC0gc1g7XG4gICAgZFkgPSBwLnkgLSBzWTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGRYICogZFggKyBkWSAqIGRZKTtcbiAgfTtcblxuICBiMlB1bGxleUpvaW50LnByb3RvdHlwZS5HZXRSYXRpbyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fcmF0aW87XG4gIH07XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIEMsIFAxWCwgUDFZLCBQMlgsIFAyWSwgYkEsIGJCLCBjcjF1MSwgY3IydTIsIGxlbmd0aDEsIGxlbmd0aDIsIHAxWCwgcDFZLCBwMlgsIHAyWSwgcjFYLCByMVksIHIyWCwgcjJZLCBzMVgsIHMxWSwgczJYLCBzMlksIHRNYXQsIHRYO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBwMVggPSBiQS5tX3N3ZWVwLmMueCArIHIxWDtcbiAgICBwMVkgPSBiQS5tX3N3ZWVwLmMueSArIHIxWTtcbiAgICBwMlggPSBiQi5tX3N3ZWVwLmMueCArIHIyWDtcbiAgICBwMlkgPSBiQi5tX3N3ZWVwLmMueSArIHIyWTtcbiAgICBzMVggPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueCArIHRoaXMubV9ncm91bmRBbmNob3IxLng7XG4gICAgczFZID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnkgKyB0aGlzLm1fZ3JvdW5kQW5jaG9yMS55O1xuICAgIHMyWCA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi54ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjIueDtcbiAgICBzMlkgPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueSArIHRoaXMubV9ncm91bmRBbmNob3IyLnk7XG4gICAgdGhpcy5tX3UxLlNldChwMVggLSBzMVgsIHAxWSAtIHMxWSk7XG4gICAgdGhpcy5tX3UyLlNldChwMlggLSBzMlgsIHAyWSAtIHMyWSk7XG4gICAgbGVuZ3RoMSA9IHRoaXMubV91MS5MZW5ndGgoKTtcbiAgICBsZW5ndGgyID0gdGhpcy5tX3UyLkxlbmd0aCgpO1xuICAgIGlmIChsZW5ndGgxID4gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICB0aGlzLm1fdTEuTXVsdGlwbHkoMS4wIC8gbGVuZ3RoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV91MS5TZXRaZXJvKCk7XG4gICAgfVxuICAgIGlmIChsZW5ndGgyID4gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICB0aGlzLm1fdTIuTXVsdGlwbHkoMS4wIC8gbGVuZ3RoMik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV91Mi5TZXRaZXJvKCk7XG4gICAgfVxuICAgIEMgPSB0aGlzLm1fY29uc3RhbnQgLSBsZW5ndGgxIC0gdGhpcy5tX3JhdGlvICogbGVuZ3RoMjtcbiAgICBpZiAoQyA+IDAuMCkge1xuICAgICAgdGhpcy5tX3N0YXRlID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgICB0aGlzLm1faW1wdWxzZSA9IDAuMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX3N0YXRlID0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdDtcbiAgICB9XG4gICAgaWYgKGxlbmd0aDEgPCB0aGlzLm1fbWF4TGVuZ3RoMSkge1xuICAgICAgdGhpcy5tX2xpbWl0U3RhdGUxID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgICB0aGlzLm1fbGltaXRJbXB1bHNlMSA9IDAuMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2xpbWl0U3RhdGUxID0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdDtcbiAgICB9XG4gICAgaWYgKGxlbmd0aDIgPCB0aGlzLm1fbWF4TGVuZ3RoMikge1xuICAgICAgdGhpcy5tX2xpbWl0U3RhdGUyID0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQ7XG4gICAgICB0aGlzLm1fbGltaXRJbXB1bHNlMiA9IDAuMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2xpbWl0U3RhdGUyID0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdDtcbiAgICB9XG4gICAgY3IxdTEgPSByMVggKiB0aGlzLm1fdTEueSAtIHIxWSAqIHRoaXMubV91MS54O1xuICAgIGNyMnUyID0gcjJYICogdGhpcy5tX3UyLnkgLSByMlkgKiB0aGlzLm1fdTIueDtcbiAgICB0aGlzLm1fbGltaXRNYXNzMSA9IGJBLm1faW52TWFzcyArIGJBLm1faW52SSAqIGNyMXUxICogY3IxdTE7XG4gICAgdGhpcy5tX2xpbWl0TWFzczIgPSBiQi5tX2ludk1hc3MgKyBiQi5tX2ludkkgKiBjcjJ1MiAqIGNyMnUyO1xuICAgIHRoaXMubV9wdWxsZXlNYXNzID0gdGhpcy5tX2xpbWl0TWFzczEgKyB0aGlzLm1fcmF0aW8gKiB0aGlzLm1fcmF0aW8gKiB0aGlzLm1fbGltaXRNYXNzMjtcbiAgICB0aGlzLm1fbGltaXRNYXNzMSA9IDEuMCAvIHRoaXMubV9saW1pdE1hc3MxO1xuICAgIHRoaXMubV9saW1pdE1hc3MyID0gMS4wIC8gdGhpcy5tX2xpbWl0TWFzczI7XG4gICAgdGhpcy5tX3B1bGxleU1hc3MgPSAxLjAgLyB0aGlzLm1fcHVsbGV5TWFzcztcbiAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9saW1pdEltcHVsc2UxICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIHRoaXMubV9saW1pdEltcHVsc2UyICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIFAxWCA9ICgoLXRoaXMubV9pbXB1bHNlKSAtIHRoaXMubV9saW1pdEltcHVsc2UxKSAqIHRoaXMubV91MS54O1xuICAgICAgUDFZID0gKCgtdGhpcy5tX2ltcHVsc2UpIC0gdGhpcy5tX2xpbWl0SW1wdWxzZTEpICogdGhpcy5tX3UxLnk7XG4gICAgICBQMlggPSAoKC10aGlzLm1fcmF0aW8gKiB0aGlzLm1faW1wdWxzZSkgLSB0aGlzLm1fbGltaXRJbXB1bHNlMikgKiB0aGlzLm1fdTIueDtcbiAgICAgIFAyWSA9ICgoLXRoaXMubV9yYXRpbyAqIHRoaXMubV9pbXB1bHNlKSAtIHRoaXMubV9saW1pdEltcHVsc2UyKSAqIHRoaXMubV91Mi55O1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS54ICs9IGJBLm1faW52TWFzcyAqIFAxWDtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQS5tX2ludk1hc3MgKiBQMVk7XG4gICAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQS5tX2ludkkgKiAocjFYICogUDFZIC0gcjFZICogUDFYKTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQi5tX2ludk1hc3MgKiBQMlg7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkIubV9pbnZNYXNzICogUDJZO1xuICAgICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkIubV9pbnZJICogKHIyWCAqIFAyWSAtIHIyWSAqIFAyWCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlID0gMC4wO1xuICAgICAgdGhpcy5tX2xpbWl0SW1wdWxzZTEgPSAwLjA7XG4gICAgICB0aGlzLm1fbGltaXRJbXB1bHNlMiA9IDAuMDtcbiAgICB9XG4gIH07XG5cbiAgYjJQdWxsZXlKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90LCBQMVgsIFAxWSwgUDJYLCBQMlksIGJBLCBiQiwgaW1wdWxzZSwgb2xkSW1wdWxzZSwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WCwgdjFYLCB2MVksIHYyWCwgdjJZO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICB2MVggPSAwO1xuICAgIHYxWSA9IDA7XG4gICAgdjJYID0gMDtcbiAgICB2MlkgPSAwO1xuICAgIFAxWCA9IDA7XG4gICAgUDFZID0gMDtcbiAgICBQMlggPSAwO1xuICAgIFAyWSA9IDA7XG4gICAgQ2RvdCA9IDA7XG4gICAgaW1wdWxzZSA9IDA7XG4gICAgb2xkSW1wdWxzZSA9IDA7XG4gICAgaWYgKHRoaXMubV9zdGF0ZSA9PT0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkge1xuICAgICAgdjFYID0gYkEubV9saW5lYXJWZWxvY2l0eS54ICsgKC1iQS5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIxWSk7XG4gICAgICB2MVkgPSBiQS5tX2xpbmVhclZlbG9jaXR5LnkgKyAoYkEubV9hbmd1bGFyVmVsb2NpdHkgKiByMVgpO1xuICAgICAgdjJYID0gYkIubV9saW5lYXJWZWxvY2l0eS54ICsgKC1iQi5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIyWSk7XG4gICAgICB2MlkgPSBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKyAoYkIubV9hbmd1bGFyVmVsb2NpdHkgKiByMlgpO1xuICAgICAgQ2RvdCA9ICgtKHRoaXMubV91MS54ICogdjFYICsgdGhpcy5tX3UxLnkgKiB2MVkpKSAtIHRoaXMubV9yYXRpbyAqICh0aGlzLm1fdTIueCAqIHYyWCArIHRoaXMubV91Mi55ICogdjJZKTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fcHVsbGV5TWFzcyAqICgtQ2RvdCk7XG4gICAgICBvbGRJbXB1bHNlID0gdGhpcy5tX2ltcHVsc2U7XG4gICAgICB0aGlzLm1faW1wdWxzZSA9IGIyTWF0aC5NYXgoMC4wLCB0aGlzLm1faW1wdWxzZSArIGltcHVsc2UpO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9pbXB1bHNlIC0gb2xkSW1wdWxzZTtcbiAgICAgIFAxWCA9IC1pbXB1bHNlICogdGhpcy5tX3UxLng7XG4gICAgICBQMVkgPSAtaW1wdWxzZSAqIHRoaXMubV91MS55O1xuICAgICAgUDJYID0gLXRoaXMubV9yYXRpbyAqIGltcHVsc2UgKiB0aGlzLm1fdTIueDtcbiAgICAgIFAyWSA9IC10aGlzLm1fcmF0aW8gKiBpbXB1bHNlICogdGhpcy5tX3UyLnk7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkEubV9pbnZNYXNzICogUDFYO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55ICs9IGJBLm1faW52TWFzcyAqIFAxWTtcbiAgICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJBLm1faW52SSAqIChyMVggKiBQMVkgLSByMVkgKiBQMVgpO1xuICAgICAgYkIubV9saW5lYXJWZWxvY2l0eS54ICs9IGJCLm1faW52TWFzcyAqIFAyWDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBiQi5tX2ludk1hc3MgKiBQMlk7XG4gICAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSArPSBiQi5tX2ludkkgKiAocjJYICogUDJZIC0gcjJZICogUDJYKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9saW1pdFN0YXRlMSA9PT0gYjJKb2ludC5lX2F0VXBwZXJMaW1pdCkge1xuICAgICAgdjFYID0gYkEubV9saW5lYXJWZWxvY2l0eS54ICsgKC1iQS5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIxWSk7XG4gICAgICB2MVkgPSBiQS5tX2xpbmVhclZlbG9jaXR5LnkgKyAoYkEubV9hbmd1bGFyVmVsb2NpdHkgKiByMVgpO1xuICAgICAgQ2RvdCA9IC0odGhpcy5tX3UxLnggKiB2MVggKyB0aGlzLm1fdTEueSAqIHYxWSk7XG4gICAgICBpbXB1bHNlID0gLXRoaXMubV9saW1pdE1hc3MxICogQ2RvdDtcbiAgICAgIG9sZEltcHVsc2UgPSB0aGlzLm1fbGltaXRJbXB1bHNlMTtcbiAgICAgIHRoaXMubV9saW1pdEltcHVsc2UxID0gYjJNYXRoLk1heCgwLjAsIHRoaXMubV9saW1pdEltcHVsc2UxICsgaW1wdWxzZSk7XG4gICAgICBpbXB1bHNlID0gdGhpcy5tX2xpbWl0SW1wdWxzZTEgLSBvbGRJbXB1bHNlO1xuICAgICAgUDFYID0gLWltcHVsc2UgKiB0aGlzLm1fdTEueDtcbiAgICAgIFAxWSA9IC1pbXB1bHNlICogdGhpcy5tX3UxLnk7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnggKz0gYkEubV9pbnZNYXNzICogUDFYO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55ICs9IGJBLm1faW52TWFzcyAqIFAxWTtcbiAgICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ICs9IGJBLm1faW52SSAqIChyMVggKiBQMVkgLSByMVkgKiBQMVgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUyID09PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICB2MlggPSBiQi5tX2xpbmVhclZlbG9jaXR5LnggKyAoLWJCLm1fYW5ndWxhclZlbG9jaXR5ICogcjJZKTtcbiAgICAgIHYyWSA9IGJCLm1fbGluZWFyVmVsb2NpdHkueSArIChiQi5tX2FuZ3VsYXJWZWxvY2l0eSAqIHIyWCk7XG4gICAgICBDZG90ID0gLSh0aGlzLm1fdTIueCAqIHYyWCArIHRoaXMubV91Mi55ICogdjJZKTtcbiAgICAgIGltcHVsc2UgPSAtdGhpcy5tX2xpbWl0TWFzczIgKiBDZG90O1xuICAgICAgb2xkSW1wdWxzZSA9IHRoaXMubV9saW1pdEltcHVsc2UyO1xuICAgICAgdGhpcy5tX2xpbWl0SW1wdWxzZTIgPSBiMk1hdGguTWF4KDAuMCwgdGhpcy5tX2xpbWl0SW1wdWxzZTIgKyBpbXB1bHNlKTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fbGltaXRJbXB1bHNlMiAtIG9sZEltcHVsc2U7XG4gICAgICBQMlggPSAtaW1wdWxzZSAqIHRoaXMubV91Mi54O1xuICAgICAgUDJZID0gLWltcHVsc2UgKiB0aGlzLm1fdTIueTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBiQi5tX2ludk1hc3MgKiBQMlg7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gYkIubV9pbnZNYXNzICogUDJZO1xuICAgICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gYkIubV9pbnZJICogKHIyWCAqIFAyWSAtIHIyWSAqIFAyWCk7XG4gICAgfVxuICB9O1xuXG4gIGIyUHVsbGV5Sm9pbnQucHJvdG90eXBlLlNvbHZlUG9zaXRpb25Db25zdHJhaW50cyA9IGZ1bmN0aW9uKGJhdW1nYXJ0ZSkge1xuICAgIHZhciBDLCBiQSwgYkIsIGltcHVsc2UsIGxlbmd0aDEsIGxlbmd0aDIsIGxpbmVhckVycm9yLCBvbGRJbXB1bHNlLCBvbGRMaW1pdFBvc2l0aW9uSW1wdWxzZSwgcDFYLCBwMVksIHAyWCwgcDJZLCByMVgsIHIxWSwgcjJYLCByMlksIHMxWCwgczFZLCBzMlgsIHMyWSwgdE1hdCwgdFg7XG4gICAgaWYgKGJhdW1nYXJ0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICBiYXVtZ2FydGUgPSAwO1xuICAgIH1cbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHMxWCA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi54ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjEueDtcbiAgICBzMVkgPSB0aGlzLm1fZ3JvdW5kLm1feGYucG9zaXRpb24ueSArIHRoaXMubV9ncm91bmRBbmNob3IxLnk7XG4gICAgczJYID0gdGhpcy5tX2dyb3VuZC5tX3hmLnBvc2l0aW9uLnggKyB0aGlzLm1fZ3JvdW5kQW5jaG9yMi54O1xuICAgIHMyWSA9IHRoaXMubV9ncm91bmQubV94Zi5wb3NpdGlvbi55ICsgdGhpcy5tX2dyb3VuZEFuY2hvcjIueTtcbiAgICByMVggPSAwO1xuICAgIHIxWSA9IDA7XG4gICAgcjJYID0gMDtcbiAgICByMlkgPSAwO1xuICAgIHAxWCA9IDA7XG4gICAgcDFZID0gMDtcbiAgICBwMlggPSAwO1xuICAgIHAyWSA9IDA7XG4gICAgbGVuZ3RoMSA9IDA7XG4gICAgbGVuZ3RoMiA9IDA7XG4gICAgQyA9IDA7XG4gICAgaW1wdWxzZSA9IDA7XG4gICAgb2xkSW1wdWxzZSA9IDA7XG4gICAgb2xkTGltaXRQb3NpdGlvbkltcHVsc2UgPSAwO1xuICAgIHRYID0gMDtcbiAgICBsaW5lYXJFcnJvciA9IDAuMDtcbiAgICBpZiAodGhpcy5tX3N0YXRlID09PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICAgIHIxWCA9IHRYO1xuICAgICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgICByMlggPSB0WDtcbiAgICAgIHAxWCA9IGJBLm1fc3dlZXAuYy54ICsgcjFYO1xuICAgICAgcDFZID0gYkEubV9zd2VlcC5jLnkgKyByMVk7XG4gICAgICBwMlggPSBiQi5tX3N3ZWVwLmMueCArIHIyWDtcbiAgICAgIHAyWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZO1xuICAgICAgdGhpcy5tX3UxLlNldChwMVggLSBzMVgsIHAxWSAtIHMxWSk7XG4gICAgICB0aGlzLm1fdTIuU2V0KHAyWCAtIHMyWCwgcDJZIC0gczJZKTtcbiAgICAgIGxlbmd0aDEgPSB0aGlzLm1fdTEuTGVuZ3RoKCk7XG4gICAgICBsZW5ndGgyID0gdGhpcy5tX3UyLkxlbmd0aCgpO1xuICAgICAgaWYgKGxlbmd0aDEgPiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgICAgdGhpcy5tX3UxLk11bHRpcGx5KDEuMCAvIGxlbmd0aDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tX3UxLlNldFplcm8oKTtcbiAgICAgIH1cbiAgICAgIGlmIChsZW5ndGgyID4gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIHRoaXMubV91Mi5NdWx0aXBseSgxLjAgLyBsZW5ndGgyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubV91Mi5TZXRaZXJvKCk7XG4gICAgICB9XG4gICAgICBDID0gdGhpcy5tX2NvbnN0YW50IC0gbGVuZ3RoMSAtIHRoaXMubV9yYXRpbyAqIGxlbmd0aDI7XG4gICAgICBsaW5lYXJFcnJvciA9IGIyTWF0aC5NYXgobGluZWFyRXJyb3IsIC1DKTtcbiAgICAgIEMgPSBiMk1hdGguQ2xhbXAoQyArIGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCwgLWIyU2V0dGluZ3MuYjJfbWF4TGluZWFyQ29ycmVjdGlvbiwgMC4wKTtcbiAgICAgIGltcHVsc2UgPSAtdGhpcy5tX3B1bGxleU1hc3MgKiBDO1xuICAgICAgcDFYID0gLWltcHVsc2UgKiB0aGlzLm1fdTEueDtcbiAgICAgIHAxWSA9IC1pbXB1bHNlICogdGhpcy5tX3UxLnk7XG4gICAgICBwMlggPSAtdGhpcy5tX3JhdGlvICogaW1wdWxzZSAqIHRoaXMubV91Mi54O1xuICAgICAgcDJZID0gLXRoaXMubV9yYXRpbyAqIGltcHVsc2UgKiB0aGlzLm1fdTIueTtcbiAgICAgIGJBLm1fc3dlZXAuYy54ICs9IGJBLm1faW52TWFzcyAqIHAxWDtcbiAgICAgIGJBLm1fc3dlZXAuYy55ICs9IGJBLm1faW52TWFzcyAqIHAxWTtcbiAgICAgIGJBLm1fc3dlZXAuYSArPSBiQS5tX2ludkkgKiAocjFYICogcDFZIC0gcjFZICogcDFYKTtcbiAgICAgIGJCLm1fc3dlZXAuYy54ICs9IGJCLm1faW52TWFzcyAqIHAyWDtcbiAgICAgIGJCLm1fc3dlZXAuYy55ICs9IGJCLm1faW52TWFzcyAqIHAyWTtcbiAgICAgIGJCLm1fc3dlZXAuYSArPSBiQi5tX2ludkkgKiAocjJYICogcDJZIC0gcjJZICogcDJYKTtcbiAgICAgIGJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tX2xpbWl0U3RhdGUxID09PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICAgIHIxWCA9IHRYO1xuICAgICAgcDFYID0gYkEubV9zd2VlcC5jLnggKyByMVg7XG4gICAgICBwMVkgPSBiQS5tX3N3ZWVwLmMueSArIHIxWTtcbiAgICAgIHRoaXMubV91MS5TZXQocDFYIC0gczFYLCBwMVkgLSBzMVkpO1xuICAgICAgbGVuZ3RoMSA9IHRoaXMubV91MS5MZW5ndGgoKTtcbiAgICAgIGlmIChsZW5ndGgxID4gYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wKSB7XG4gICAgICAgIHRoaXMubV91MS54ICo9IDEuMCAvIGxlbmd0aDE7XG4gICAgICAgIHRoaXMubV91MS55ICo9IDEuMCAvIGxlbmd0aDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1fdTEuU2V0WmVybygpO1xuICAgICAgfVxuICAgICAgQyA9IHRoaXMubV9tYXhMZW5ndGgxIC0gbGVuZ3RoMTtcbiAgICAgIGxpbmVhckVycm9yID0gYjJNYXRoLk1heChsaW5lYXJFcnJvciwgLUMpO1xuICAgICAgQyA9IGIyTWF0aC5DbGFtcChDICsgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wLCAtYjJTZXR0aW5ncy5iMl9tYXhMaW5lYXJDb3JyZWN0aW9uLCAwLjApO1xuICAgICAgaW1wdWxzZSA9IC10aGlzLm1fbGltaXRNYXNzMSAqIEM7XG4gICAgICBwMVggPSAtaW1wdWxzZSAqIHRoaXMubV91MS54O1xuICAgICAgcDFZID0gLWltcHVsc2UgKiB0aGlzLm1fdTEueTtcbiAgICAgIGJBLm1fc3dlZXAuYy54ICs9IGJBLm1faW52TWFzcyAqIHAxWDtcbiAgICAgIGJBLm1fc3dlZXAuYy55ICs9IGJBLm1faW52TWFzcyAqIHAxWTtcbiAgICAgIGJBLm1fc3dlZXAuYSArPSBiQS5tX2ludkkgKiAocjFYICogcDFZIC0gcjFZICogcDFYKTtcbiAgICAgIGJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZTIgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgICByMlggPSB0aGlzLm1fbG9jYWxBbmNob3IyLnggLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgICByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgICByMlkgPSB0TWF0LmNvbDEueSAqIHIyWCArIHRNYXQuY29sMi55ICogcjJZO1xuICAgICAgcjJYID0gdFg7XG4gICAgICBwMlggPSBiQi5tX3N3ZWVwLmMueCArIHIyWDtcbiAgICAgIHAyWSA9IGJCLm1fc3dlZXAuYy55ICsgcjJZO1xuICAgICAgdGhpcy5tX3UyLlNldChwMlggLSBzMlgsIHAyWSAtIHMyWSk7XG4gICAgICBsZW5ndGgyID0gdGhpcy5tX3UyLkxlbmd0aCgpO1xuICAgICAgaWYgKGxlbmd0aDIgPiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3ApIHtcbiAgICAgICAgdGhpcy5tX3UyLnggKj0gMS4wIC8gbGVuZ3RoMjtcbiAgICAgICAgdGhpcy5tX3UyLnkgKj0gMS4wIC8gbGVuZ3RoMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubV91Mi5TZXRaZXJvKCk7XG4gICAgICB9XG4gICAgICBDID0gdGhpcy5tX21heExlbmd0aDIgLSBsZW5ndGgyO1xuICAgICAgbGluZWFyRXJyb3IgPSBiMk1hdGguTWF4KGxpbmVhckVycm9yLCAtQyk7XG4gICAgICBDID0gYjJNYXRoLkNsYW1wKEMgKyBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AsIC1iMlNldHRpbmdzLmIyX21heExpbmVhckNvcnJlY3Rpb24sIDAuMCk7XG4gICAgICBpbXB1bHNlID0gLXRoaXMubV9saW1pdE1hc3MyICogQztcbiAgICAgIHAyWCA9IC1pbXB1bHNlICogdGhpcy5tX3UyLng7XG4gICAgICBwMlkgPSAtaW1wdWxzZSAqIHRoaXMubV91Mi55O1xuICAgICAgYkIubV9zd2VlcC5jLnggKz0gYkIubV9pbnZNYXNzICogcDJYO1xuICAgICAgYkIubV9zd2VlcC5jLnkgKz0gYkIubV9pbnZNYXNzICogcDJZO1xuICAgICAgYkIubV9zd2VlcC5hICs9IGJCLm1faW52SSAqIChyMlggKiBwMlkgLSByMlkgKiBwMlgpO1xuICAgICAgYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVhckVycm9yIDwgYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wO1xuICB9O1xuXG4gIHJldHVybiBiMlB1bGxleUpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJQdWxsZXlKb2ludC5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKb2ludCwgYjJKb2ludERlZiwgYjJWZWMyLFxuICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcbiAgX19leHRlbmRzID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChfX2hhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH07XG5cbkJveDJEID0gcmVxdWlyZSgnLi4vLi4vaW5kZXgnKTtcblxuYjJKb2ludCA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50O1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIySm9pbnREZWYgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludERlZjtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyUHVsbGV5Sm9pbnREZWYgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gIF9fZXh0ZW5kcyhiMlB1bGxleUpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGIyUHVsbGV5Sm9pbnREZWYucHJvdG90eXBlLnR5cGUgPSBiMkpvaW50LmVfcHVsbGV5Sm9pbnQ7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUuZ3JvdW5kQW5jaG9yQSA9IG51bGw7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUuZ3JvdW5kQW5jaG9yQiA9IG51bGw7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JBID0gbnVsbDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5sb2NhbEFuY2hvckIgPSBudWxsO1xuXG4gIGIyUHVsbGV5Sm9pbnREZWYucHJvdG90eXBlLmxlbmd0aEEgPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUubWF4TGVuZ3RoQSA9IDAuMDtcblxuICBiMlB1bGxleUpvaW50RGVmLnByb3RvdHlwZS5sZW5ndGhCID0gMC4wO1xuXG4gIGIyUHVsbGV5Sm9pbnREZWYucHJvdG90eXBlLm1heExlbmd0aEIgPSAwLjA7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUucmF0aW8gPSAxLjA7XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUuY29sbGlkZUNvbm5lY3RlZCA9IHRydWU7XG5cbiAgZnVuY3Rpb24gYjJQdWxsZXlKb2ludERlZigpIHtcbiAgICBiMlB1bGxleUpvaW50RGVmLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuZ3JvdW5kQW5jaG9yQSA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLmdyb3VuZEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5ncm91bmRBbmNob3JBLlNldCgtMS4wLCAxLjApO1xuICAgIHRoaXMuZ3JvdW5kQW5jaG9yQi5TZXQoMS4wLCAxLjApO1xuICAgIHRoaXMubG9jYWxBbmNob3JBLlNldCgtMS4wLCAwLjApO1xuICAgIHRoaXMubG9jYWxBbmNob3JCLlNldCgxLjAsIDAuMCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJQdWxsZXlKb2ludERlZi5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKGJBLCBiQiwgZ2FBLCBnYUIsIGFuY2hvckEsIGFuY2hvckIsIHIpIHtcbiAgICB2YXIgQywgZDFYLCBkMVksIGQyWCwgZDJZO1xuICAgIGlmIChyID09PSB2b2lkIDApIHtcbiAgICAgIHIgPSAwO1xuICAgIH1cbiAgICB0aGlzLmJvZHlBID0gYkE7XG4gICAgdGhpcy5ib2R5QiA9IGJCO1xuICAgIHRoaXMuZ3JvdW5kQW5jaG9yQS5TZXRWKGdhQSk7XG4gICAgdGhpcy5ncm91bmRBbmNob3JCLlNldFYoZ2FCKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IHRoaXMuYm9keUEuR2V0TG9jYWxQb2ludChhbmNob3JBKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNob3JCKTtcbiAgICBkMVggPSBhbmNob3JBLnggLSBnYUEueDtcbiAgICBkMVkgPSBhbmNob3JBLnkgLSBnYUEueTtcbiAgICB0aGlzLmxlbmd0aEEgPSBNYXRoLnNxcnQoZDFYICogZDFYICsgZDFZICogZDFZKTtcbiAgICBkMlggPSBhbmNob3JCLnggLSBnYUIueDtcbiAgICBkMlkgPSBhbmNob3JCLnkgLSBnYUIueTtcbiAgICB0aGlzLmxlbmd0aEIgPSBNYXRoLnNxcnQoZDJYICogZDJYICsgZDJZICogZDJZKTtcbiAgICB0aGlzLnJhdGlvID0gcjtcbiAgICBDID0gdGhpcy5sZW5ndGhBICsgdGhpcy5yYXRpbyAqIHRoaXMubGVuZ3RoQjtcbiAgICB0aGlzLm1heExlbmd0aEEgPSBDIC0gdGhpcy5yYXRpbyAqIGIyUHVsbGV5Sm9pbnQuYjJfbWluUHVsbGV5TGVuZ3RoO1xuICAgIHRoaXMubWF4TGVuZ3RoQiA9IChDIC0gYjJQdWxsZXlKb2ludC5iMl9taW5QdWxsZXlMZW5ndGgpIC8gdGhpcy5yYXRpbztcbiAgfTtcblxuICByZXR1cm4gYjJQdWxsZXlKb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUHVsbGV5Sm9pbnREZWYuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIyTWF0MjIsIGIyTWF0aCwgYjJWZWMyLCBiMlZlYzMsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJNYXQyMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MjI7XG5cbmIyVmVjMyA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMztcblxuYjJNYXRoID0gQm94MkQuQ29tbW9uLk1hdGguYjJNYXRoO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJSZXZvbHV0ZUpvaW50ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJSZXZvbHV0ZUpvaW50LCBfc3VwZXIpO1xuXG4gIGIyUmV2b2x1dGVKb2ludC50SW1wdWxzZSA9IG5ldyBiMlZlYzIoKTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLksgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuSzEgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuSzIgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuSzMgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuaW1wdWxzZTIgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuaW1wdWxzZTMgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUucmVkdWNlZCA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX2ltcHVsc2UgPSBudWxsO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV9tYXNzID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV9yZWZlcmVuY2VBbmdsZSA9IDAuMDtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLm1fbW90b3JJbXB1bHNlID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV9sb3dlckFuZ2xlID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV91cHBlckFuZ2xlID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUubV9tYXhNb3RvclRvcnF1ZSA9IDAuMDtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLm1fbW90b3JTcGVlZCA9IDAuMDtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLm1fZW5hYmxlTGltaXQgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX2VuYWJsZU1vdG9yID0gZmFsc2U7XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfaW5hY3RpdmVMaW1pdDtcblxuICBmdW5jdGlvbiBiMlJldm9sdXRlSm9pbnQoZGVmKSB7XG4gICAgYjJSZXZvbHV0ZUpvaW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGRlZik7XG4gICAgdGhpcy5LID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLksxID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLksyID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLkszID0gbmV3IGIyTWF0MjIoKTtcbiAgICB0aGlzLmltcHVsc2UzID0gbmV3IGIyVmVjMygpO1xuICAgIHRoaXMuaW1wdWxzZTIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5yZWR1Y2VkID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMiA9IG5ldyBiMlZlYzIoKTtcbiAgICB0aGlzLm1faW1wdWxzZSA9IG5ldyBiMlZlYzMoKTtcbiAgICB0aGlzLm1fbWFzcyA9IG5ldyBiMk1hdDMzKCk7XG4gICAgdGhpcy5tX2xvY2FsQW5jaG9yMS5TZXRWKGRlZi5sb2NhbEFuY2hvckEpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvcjIuU2V0VihkZWYubG9jYWxBbmNob3JCKTtcbiAgICB0aGlzLm1fcmVmZXJlbmNlQW5nbGUgPSBkZWYucmVmZXJlbmNlQW5nbGU7XG4gICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgIHRoaXMubV9sb3dlckFuZ2xlID0gZGVmLmxvd2VyQW5nbGU7XG4gICAgdGhpcy5tX3VwcGVyQW5nbGUgPSBkZWYudXBwZXJBbmdsZTtcbiAgICB0aGlzLm1fbWF4TW90b3JUb3JxdWUgPSBkZWYubWF4TW90b3JUb3JxdWU7XG4gICAgdGhpcy5tX21vdG9yU3BlZWQgPSBkZWYubW90b3JTcGVlZDtcbiAgICB0aGlzLm1fZW5hYmxlTGltaXQgPSBkZWYuZW5hYmxlTGltaXQ7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZGVmLmVuYWJsZU1vdG9yO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0QW5jaG9yQSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fYm9keUEuR2V0V29ybGRQb2ludCh0aGlzLm1fbG9jYWxBbmNob3IxKTtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yMik7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvbkZvcmNlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGIyVmVjMihpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS54LCBpbnZfZHQgKiB0aGlzLm1faW1wdWxzZS55KTtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uVG9ycXVlID0gZnVuY3Rpb24oaW52X2R0KSB7XG4gICAgaWYgKGludl9kdCA9PT0gdm9pZCAwKSB7XG4gICAgICBpbnZfZHQgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gaW52X2R0ICogdGhpcy5tX2ltcHVsc2UuejtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldEpvaW50QW5nbGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLm1fc3dlZXAuYSAtIHRoaXMubV9ib2R5QS5tX3N3ZWVwLmEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRKb2ludFNwZWVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9ib2R5Qi5tX2FuZ3VsYXJWZWxvY2l0eSAtIHRoaXMubV9ib2R5QS5tX2FuZ3VsYXJWZWxvY2l0eTtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLklzTGltaXRFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9lbmFibGVMaW1pdDtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkVuYWJsZUxpbWl0ID0gZnVuY3Rpb24oZmxhZykge1xuICAgIHRoaXMubV9lbmFibGVMaW1pdCA9IGZsYWc7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5HZXRMb3dlckxpbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubV9sb3dlckFuZ2xlO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0VXBwZXJMaW1pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1fdXBwZXJBbmdsZTtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLlNldExpbWl0cyA9IGZ1bmN0aW9uKGxvd2VyLCB1cHBlcikge1xuICAgIGlmIChsb3dlciA9PT0gdm9pZCAwKSB7XG4gICAgICBsb3dlciA9IDA7XG4gICAgfVxuICAgIGlmICh1cHBlciA9PT0gdm9pZCAwKSB7XG4gICAgICB1cHBlciA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9sb3dlckFuZ2xlID0gbG93ZXI7XG4gICAgdGhpcy5tX3VwcGVyQW5nbGUgPSB1cHBlcjtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLklzTW90b3JFbmFibGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tX2JvZHlBLlNldEF3YWtlKHRydWUpO1xuICAgIHRoaXMubV9ib2R5Qi5TZXRBd2FrZSh0cnVlKTtcbiAgICByZXR1cm4gdGhpcy5tX2VuYWJsZU1vdG9yO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuRW5hYmxlTW90b3IgPSBmdW5jdGlvbihmbGFnKSB7XG4gICAgdGhpcy5tX2VuYWJsZU1vdG9yID0gZmxhZztcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLlNldE1vdG9yU3BlZWQgPSBmdW5jdGlvbihzcGVlZCkge1xuICAgIGlmIChzcGVlZCA9PT0gdm9pZCAwKSB7XG4gICAgICBzcGVlZCA9IDA7XG4gICAgfVxuICAgIHRoaXMubV9ib2R5QS5TZXRBd2FrZSh0cnVlKTtcbiAgICB0aGlzLm1fYm9keUIuU2V0QXdha2UodHJ1ZSk7XG4gICAgdGhpcy5tX21vdG9yU3BlZWQgPSBzcGVlZDtcbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLkdldE1vdG9yU3BlZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21vdG9yU3BlZWQ7XG4gIH07XG5cbiAgYjJSZXZvbHV0ZUpvaW50LnByb3RvdHlwZS5TZXRNYXhNb3RvclRvcnF1ZSA9IGZ1bmN0aW9uKHRvcnF1ZSkge1xuICAgIGlmICh0b3JxdWUgPT09IHZvaWQgMCkge1xuICAgICAgdG9ycXVlID0gMDtcbiAgICB9XG4gICAgdGhpcy5tX21heE1vdG9yVG9ycXVlID0gdG9ycXVlO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuR2V0TW90b3JUb3JxdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX21heE1vdG9yVG9ycXVlO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuSW5pdFZlbG9jaXR5Q29uc3RyYWludHMgPSBmdW5jdGlvbihzdGVwKSB7XG4gICAgdmFyIFBYLCBQWSwgYkEsIGJCLCBpMSwgaTIsIGpvaW50QW5nbGUsIG0xLCBtMiwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WDtcbiAgICBiQSA9IHRoaXMubV9ib2R5QTtcbiAgICBiQiA9IHRoaXMubV9ib2R5QjtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIHRYID0gMDtcblxuICAgIC8qKlxuICAgIHRvZG86IGZpeCB0aGlzXG4gICAgICovXG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByMVggKyB0TWF0LmNvbDIueCAqIHIxWTtcbiAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgIHIxWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjJYICsgdE1hdC5jb2wyLnggKiByMlk7XG4gICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICByMlggPSB0WDtcbiAgICBtMSA9IGJBLm1faW52TWFzcztcbiAgICBtMiA9IGJCLm1faW52TWFzcztcbiAgICBpMSA9IGJBLm1faW52STtcbiAgICBpMiA9IGJCLm1faW52STtcbiAgICB0aGlzLm1fbWFzcy5jb2wxLnggPSBtMSArIG0yICsgcjFZICogcjFZICogaTEgKyByMlkgKiByMlkgKiBpMjtcbiAgICB0aGlzLm1fbWFzcy5jb2wyLnggPSAoLXIxWSAqIHIxWCAqIGkxKSAtIHIyWSAqIHIyWCAqIGkyO1xuICAgIHRoaXMubV9tYXNzLmNvbDMueCA9ICgtcjFZICogaTEpIC0gcjJZICogaTI7XG4gICAgdGhpcy5tX21hc3MuY29sMS55ID0gdGhpcy5tX21hc3MuY29sMi54O1xuICAgIHRoaXMubV9tYXNzLmNvbDIueSA9IG0xICsgbTIgKyByMVggKiByMVggKiBpMSArIHIyWCAqIHIyWCAqIGkyO1xuICAgIHRoaXMubV9tYXNzLmNvbDMueSA9IHIxWCAqIGkxICsgcjJYICogaTI7XG4gICAgdGhpcy5tX21hc3MuY29sMS56ID0gdGhpcy5tX21hc3MuY29sMy54O1xuICAgIHRoaXMubV9tYXNzLmNvbDIueiA9IHRoaXMubV9tYXNzLmNvbDMueTtcbiAgICB0aGlzLm1fbWFzcy5jb2wzLnogPSBpMSArIGkyO1xuICAgIHRoaXMubV9tb3Rvck1hc3MgPSAxLjAgLyAoaTEgKyBpMik7XG4gICAgaWYgKHRoaXMubV9lbmFibGVNb3RvciA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSAwLjA7XG4gICAgfVxuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQpIHtcbiAgICAgIGpvaW50QW5nbGUgPSBiQi5tX3N3ZWVwLmEgLSBiQS5tX3N3ZWVwLmEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gICAgICBpZiAoYjJNYXRoLkFicyh0aGlzLm1fdXBwZXJBbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlKSA8IDIuMCAqIGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsb3ApIHtcbiAgICAgICAgdGhpcy5tX2xpbWl0U3RhdGUgPSBiMkpvaW50LmVfZXF1YWxMaW1pdHM7XG4gICAgICB9IGVsc2UgaWYgKGpvaW50QW5nbGUgPD0gdGhpcy5tX2xvd2VyQW5nbGUpIHtcbiAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfYXRMb3dlckxpbWl0KSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9hdExvd2VyTGltaXQ7XG4gICAgICB9IGVsc2UgaWYgKGpvaW50QW5nbGUgPj0gdGhpcy5tX3VwcGVyQW5nbGUpIHtcbiAgICAgICAgaWYgKHRoaXMubV9saW1pdFN0YXRlICE9PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9hdFVwcGVyTGltaXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMC4wO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1fbGltaXRTdGF0ZSA9IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0O1xuICAgIH1cbiAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX2ltcHVsc2UueSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIFBYID0gdGhpcy5tX2ltcHVsc2UueDtcbiAgICAgIFBZID0gdGhpcy5tX2ltcHVsc2UueTtcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCAtPSBtMSAqIFBYO1xuICAgICAgYkEubV9saW5lYXJWZWxvY2l0eS55IC09IG0xICogUFk7XG4gICAgICBiQS5tX2FuZ3VsYXJWZWxvY2l0eSAtPSBpMSAqICgocjFYICogUFkgLSByMVkgKiBQWCkgKyB0aGlzLm1fbW90b3JJbXB1bHNlICsgdGhpcy5tX2ltcHVsc2Uueik7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnggKz0gbTIgKiBQWDtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueSArPSBtMiAqIFBZO1xuICAgICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gaTIgKiAoKHIyWCAqIFBZIC0gcjJZICogUFgpICsgdGhpcy5tX21vdG9ySW1wdWxzZSArIHRoaXMubV9pbXB1bHNlLnopO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1faW1wdWxzZS5TZXRaZXJvKCk7XG4gICAgICB0aGlzLm1fbW90b3JJbXB1bHNlID0gMC4wO1xuICAgIH1cbiAgfTtcblxuICBiMlJldm9sdXRlSm9pbnQucHJvdG90eXBlLlNvbHZlVmVsb2NpdHlDb25zdHJhaW50cyA9IGZ1bmN0aW9uKHN0ZXApIHtcbiAgICB2YXIgQ2RvdCwgQ2RvdDFYLCBDZG90MVksIENkb3QyLCBDZG90WCwgQ2RvdFksIGJBLCBiQiwgaTEsIGkyLCBpbXB1bHNlLCBtMSwgbTIsIG1heEltcHVsc2UsIG5ld0ltcHVsc2UsIG9sZEltcHVsc2UsIHIxWCwgcjFZLCByMlgsIHIyWSwgdE1hdCwgdFgsIHYxLCB2MiwgdzEsIHcyO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIG5ld0ltcHVsc2UgPSAwO1xuICAgIHIxWCA9IDA7XG4gICAgcjFZID0gMDtcbiAgICByMlggPSAwO1xuICAgIHIyWSA9IDA7XG4gICAgdjEgPSBiQS5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcxID0gYkEubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgdjIgPSBiQi5tX2xpbmVhclZlbG9jaXR5O1xuICAgIHcyID0gYkIubV9hbmd1bGFyVmVsb2NpdHk7XG4gICAgbTEgPSBiQS5tX2ludk1hc3M7XG4gICAgbTIgPSBiQi5tX2ludk1hc3M7XG4gICAgaTEgPSBiQS5tX2ludkk7XG4gICAgaTIgPSBiQi5tX2ludkk7XG4gICAgaWYgKHRoaXMubV9lbmFibGVNb3RvciAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2VxdWFsTGltaXRzKSB7XG4gICAgICBDZG90ID0gdzIgLSB3MSAtIHRoaXMubV9tb3RvclNwZWVkO1xuICAgICAgaW1wdWxzZSA9IHRoaXMubV9tb3Rvck1hc3MgKiAoLUNkb3QpO1xuICAgICAgb2xkSW1wdWxzZSA9IHRoaXMubV9tb3RvckltcHVsc2U7XG4gICAgICBtYXhJbXB1bHNlID0gc3RlcC5kdCAqIHRoaXMubV9tYXhNb3RvclRvcnF1ZTtcbiAgICAgIHRoaXMubV9tb3RvckltcHVsc2UgPSBiMk1hdGguQ2xhbXAodGhpcy5tX21vdG9ySW1wdWxzZSArIGltcHVsc2UsIC1tYXhJbXB1bHNlLCBtYXhJbXB1bHNlKTtcbiAgICAgIGltcHVsc2UgPSB0aGlzLm1fbW90b3JJbXB1bHNlIC0gb2xkSW1wdWxzZTtcbiAgICAgIHcxIC09IGkxICogaW1wdWxzZTtcbiAgICAgIHcyICs9IGkyICogaW1wdWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMubV9lbmFibGVMaW1pdCAmJiB0aGlzLm1fbGltaXRTdGF0ZSAhPT0gYjJKb2ludC5lX2luYWN0aXZlTGltaXQpIHtcbiAgICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgICByMVggPSB0aGlzLm1fbG9jYWxBbmNob3IxLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgICByMVkgPSB0aGlzLm1fbG9jYWxBbmNob3IxLnkgLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgICByMVkgPSB0TWF0LmNvbDEueSAqIHIxWCArIHRNYXQuY29sMi55ICogcjFZO1xuICAgICAgcjFYID0gdFg7XG4gICAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgICAgcjJYID0gdGhpcy5tX2xvY2FsQW5jaG9yMi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgICAgcjJZID0gdGhpcy5tX2xvY2FsQW5jaG9yMi55IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgICAgcjJZID0gdE1hdC5jb2wxLnkgKiByMlggKyB0TWF0LmNvbDIueSAqIHIyWTtcbiAgICAgIHIyWCA9IHRYO1xuICAgICAgQ2RvdDFYID0gdjIueCArICgtdzIgKiByMlkpIC0gdjEueCAtICgtdzEgKiByMVkpO1xuICAgICAgQ2RvdDFZID0gdjIueSArICh3MiAqIHIyWCkgLSB2MS55IC0gKHcxICogcjFYKTtcbiAgICAgIENkb3QyID0gdzIgLSB3MTtcbiAgICAgIHRoaXMubV9tYXNzLlNvbHZlMzModGhpcy5pbXB1bHNlMywgLUNkb3QxWCwgLUNkb3QxWSwgLUNkb3QyKTtcbiAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PT0gYjJKb2ludC5lX2VxdWFsTGltaXRzKSB7XG4gICAgICAgIHRoaXMubV9pbXB1bHNlLkFkZCh0aGlzLmltcHVsc2UzKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT09IGIySm9pbnQuZV9hdExvd2VyTGltaXQpIHtcbiAgICAgICAgbmV3SW1wdWxzZSA9IHRoaXMubV9pbXB1bHNlLnogKyB0aGlzLmltcHVsc2UzLno7XG4gICAgICAgIGlmIChuZXdJbXB1bHNlIDwgMC4wKSB7XG4gICAgICAgICAgdGhpcy5tX21hc3MuU29sdmUyMih0aGlzLnJlZHVjZWQsIC1DZG90MVgsIC1DZG90MVkpO1xuICAgICAgICAgIHRoaXMuaW1wdWxzZTMueCA9IHRoaXMucmVkdWNlZC54O1xuICAgICAgICAgIHRoaXMuaW1wdWxzZTMueSA9IHRoaXMucmVkdWNlZC55O1xuICAgICAgICAgIHRoaXMuaW1wdWxzZTMueiA9IC10aGlzLm1faW1wdWxzZS56O1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnggKz0gdGhpcy5yZWR1Y2VkLng7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueSArPSB0aGlzLnJlZHVjZWQueTtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS56ID0gMC4wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubV9saW1pdFN0YXRlID09PSBiMkpvaW50LmVfYXRVcHBlckxpbWl0KSB7XG4gICAgICAgIG5ld0ltcHVsc2UgPSB0aGlzLm1faW1wdWxzZS56ICsgdGhpcy5pbXB1bHNlMy56O1xuICAgICAgICBpZiAobmV3SW1wdWxzZSA+IDAuMCkge1xuICAgICAgICAgIHRoaXMubV9tYXNzLlNvbHZlMjIodGhpcy5yZWR1Y2VkLCAtQ2RvdDFYLCAtQ2RvdDFZKTtcbiAgICAgICAgICB0aGlzLmltcHVsc2UzLnggPSB0aGlzLnJlZHVjZWQueDtcbiAgICAgICAgICB0aGlzLmltcHVsc2UzLnkgPSB0aGlzLnJlZHVjZWQueTtcbiAgICAgICAgICB0aGlzLmltcHVsc2UzLnogPSAtdGhpcy5tX2ltcHVsc2UuejtcbiAgICAgICAgICB0aGlzLm1faW1wdWxzZS54ICs9IHRoaXMucmVkdWNlZC54O1xuICAgICAgICAgIHRoaXMubV9pbXB1bHNlLnkgKz0gdGhpcy5yZWR1Y2VkLnk7XG4gICAgICAgICAgdGhpcy5tX2ltcHVsc2UueiA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdjEueCAtPSBtMSAqIHRoaXMuaW1wdWxzZTMueDtcbiAgICAgIHYxLnkgLT0gbTEgKiB0aGlzLmltcHVsc2UzLnk7XG4gICAgICB3MSAtPSBpMSAqIChyMVggKiB0aGlzLmltcHVsc2UzLnkgLSByMVkgKiB0aGlzLmltcHVsc2UzLnggKyB0aGlzLmltcHVsc2UzLnopO1xuICAgICAgdjIueCArPSBtMiAqIHRoaXMuaW1wdWxzZTMueDtcbiAgICAgIHYyLnkgKz0gbTIgKiB0aGlzLmltcHVsc2UzLnk7XG4gICAgICB3MiArPSBpMiAqIChyMlggKiB0aGlzLmltcHVsc2UzLnkgLSByMlkgKiB0aGlzLmltcHVsc2UzLnggKyB0aGlzLmltcHVsc2UzLnopO1xuICAgIH0gZWxzZSB7XG4gICAgICB0TWF0ID0gYkEubV94Zi5SO1xuICAgICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgICAgcjFZID0gdGhpcy5tX2xvY2FsQW5jaG9yMS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgICAgdFggPSB0TWF0LmNvbDEueCAqIHIxWCArIHRNYXQuY29sMi54ICogcjFZO1xuICAgICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICAgIHIxWCA9IHRYO1xuICAgICAgdE1hdCA9IGJCLm1feGYuUjtcbiAgICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICAgIHIyWSA9IHRoaXMubV9sb2NhbEFuY2hvcjIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICAgIHRYID0gdE1hdC5jb2wxLnggKiByMlggKyB0TWF0LmNvbDIueCAqIHIyWTtcbiAgICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgICByMlggPSB0WDtcbiAgICAgIENkb3RYID0gdjIueCArICgtdzIgKiByMlkpIC0gdjEueCAtICgtdzEgKiByMVkpO1xuICAgICAgQ2RvdFkgPSB2Mi55ICsgKHcyICogcjJYKSAtIHYxLnkgLSAodzEgKiByMVgpO1xuICAgICAgdGhpcy5tX21hc3MuU29sdmUyMih0aGlzLmltcHVsc2UyLCAtQ2RvdFgsIC1DZG90WSk7XG4gICAgICB0aGlzLm1faW1wdWxzZS54ICs9IHRoaXMuaW1wdWxzZTIueDtcbiAgICAgIHRoaXMubV9pbXB1bHNlLnkgKz0gdGhpcy5pbXB1bHNlMi55O1xuICAgICAgdjEueCAtPSBtMSAqIHRoaXMuaW1wdWxzZTIueDtcbiAgICAgIHYxLnkgLT0gbTEgKiB0aGlzLmltcHVsc2UyLnk7XG4gICAgICB3MSAtPSBpMSAqIChyMVggKiB0aGlzLmltcHVsc2UyLnkgLSByMVkgKiB0aGlzLmltcHVsc2UyLngpO1xuICAgICAgdjIueCArPSBtMiAqIHRoaXMuaW1wdWxzZTIueDtcbiAgICAgIHYyLnkgKz0gbTIgKiB0aGlzLmltcHVsc2UyLnk7XG4gICAgICB3MiArPSBpMiAqIChyMlggKiB0aGlzLmltcHVsc2UyLnkgLSByMlkgKiB0aGlzLmltcHVsc2UyLngpO1xuICAgIH1cbiAgICBiQS5tX2xpbmVhclZlbG9jaXR5LlNldFYodjEpO1xuICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ID0gdzE7XG4gICAgYkIubV9saW5lYXJWZWxvY2l0eS5TZXRWKHYyKTtcbiAgICBiQi5tX2FuZ3VsYXJWZWxvY2l0eSA9IHcyO1xuICB9O1xuXG4gIGIyUmV2b2x1dGVKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgdmFyIEMsIENMZW5ndGgsIENMZW5ndGhTcXVhcmVkLCBDWCwgQ1ksIGFuZ2xlLCBhbmd1bGFyRXJyb3IsIGJBLCBiQiwgaW1wdWxzZVgsIGltcHVsc2VZLCBpbnZJMSwgaW52STIsIGludk1hc3MxLCBpbnZNYXNzMiwgaywga19hbGxvd2VkU3RyZXRjaCwga19iZXRhLCBsaW1pdEltcHVsc2UsIG0sIG9sZExpbWl0SW1wdWxzZSwgcG9zaXRpb25FcnJvciwgcjFYLCByMVksIHIyWCwgcjJZLCB0TWF0LCB0WCwgdVgsIHVZO1xuICAgIGlmIChiYXVtZ2FydGUgPT09IHZvaWQgMCkge1xuICAgICAgYmF1bWdhcnRlID0gMDtcbiAgICB9XG4gICAgb2xkTGltaXRJbXB1bHNlID0gMDtcbiAgICBDID0gMDtcbiAgICB0TWF0ID0gdm9pZCAwO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIGFuZ3VsYXJFcnJvciA9IDAuMDtcbiAgICBwb3NpdGlvbkVycm9yID0gMC4wO1xuICAgIHRYID0gMDtcbiAgICBpbXB1bHNlWCA9IDA7XG4gICAgaW1wdWxzZVkgPSAwO1xuICAgIGlmICh0aGlzLm1fZW5hYmxlTGltaXQgJiYgdGhpcy5tX2xpbWl0U3RhdGUgIT09IGIySm9pbnQuZV9pbmFjdGl2ZUxpbWl0KSB7XG4gICAgICBhbmdsZSA9IGJCLm1fc3dlZXAuYSAtIGJBLm1fc3dlZXAuYSAtIHRoaXMubV9yZWZlcmVuY2VBbmdsZTtcbiAgICAgIGxpbWl0SW1wdWxzZSA9IDAuMDtcbiAgICAgIGlmICh0aGlzLm1fbGltaXRTdGF0ZSA9PT0gYjJKb2ludC5lX2VxdWFsTGltaXRzKSB7XG4gICAgICAgIEMgPSBiMk1hdGguQ2xhbXAoYW5nbGUgLSB0aGlzLm1fbG93ZXJBbmdsZSwgLWIyU2V0dGluZ3MuYjJfbWF4QW5ndWxhckNvcnJlY3Rpb24sIGIyU2V0dGluZ3MuYjJfbWF4QW5ndWxhckNvcnJlY3Rpb24pO1xuICAgICAgICBsaW1pdEltcHVsc2UgPSAtdGhpcy5tX21vdG9yTWFzcyAqIEM7XG4gICAgICAgIGFuZ3VsYXJFcnJvciA9IGIyTWF0aC5BYnMoQyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubV9saW1pdFN0YXRlID09PSBiMkpvaW50LmVfYXRMb3dlckxpbWl0KSB7XG4gICAgICAgIEMgPSBhbmdsZSAtIHRoaXMubV9sb3dlckFuZ2xlO1xuICAgICAgICBhbmd1bGFyRXJyb3IgPSAtQztcbiAgICAgICAgQyA9IGIyTWF0aC5DbGFtcChDICsgYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcCwgLWIyU2V0dGluZ3MuYjJfbWF4QW5ndWxhckNvcnJlY3Rpb24sIDAuMCk7XG4gICAgICAgIGxpbWl0SW1wdWxzZSA9IC10aGlzLm1fbW90b3JNYXNzICogQztcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5tX2xpbWl0U3RhdGUgPT09IGIySm9pbnQuZV9hdFVwcGVyTGltaXQpIHtcbiAgICAgICAgQyA9IGFuZ2xlIC0gdGhpcy5tX3VwcGVyQW5nbGU7XG4gICAgICAgIGFuZ3VsYXJFcnJvciA9IEM7XG4gICAgICAgIEMgPSBiMk1hdGguQ2xhbXAoQyAtIGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsb3AsIDAuMCwgYjJTZXR0aW5ncy5iMl9tYXhBbmd1bGFyQ29ycmVjdGlvbik7XG4gICAgICAgIGxpbWl0SW1wdWxzZSA9IC10aGlzLm1fbW90b3JNYXNzICogQztcbiAgICAgIH1cbiAgICAgIGJBLm1fc3dlZXAuYSAtPSBiQS5tX2ludkkgKiBsaW1pdEltcHVsc2U7XG4gICAgICBiQi5tX3N3ZWVwLmEgKz0gYkIubV9pbnZJICogbGltaXRJbXB1bHNlO1xuICAgICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICAgIGJCLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgfVxuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgcjFYID0gdGhpcy5tX2xvY2FsQW5jaG9yMS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHIxWSA9IHRoaXMubV9sb2NhbEFuY2hvcjEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogcjFYICsgdE1hdC5jb2wyLnggKiByMVk7XG4gICAgcjFZID0gdE1hdC5jb2wxLnkgKiByMVggKyB0TWF0LmNvbDIueSAqIHIxWTtcbiAgICByMVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHIyWCA9IHRoaXMubV9sb2NhbEFuY2hvcjIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByMlkgPSB0aGlzLm1fbG9jYWxBbmNob3IyLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHIyWCArIHRNYXQuY29sMi54ICogcjJZO1xuICAgIHIyWSA9IHRNYXQuY29sMS55ICogcjJYICsgdE1hdC5jb2wyLnkgKiByMlk7XG4gICAgcjJYID0gdFg7XG4gICAgQ1ggPSBiQi5tX3N3ZWVwLmMueCArIHIyWCAtIGJBLm1fc3dlZXAuYy54IC0gcjFYO1xuICAgIENZID0gYkIubV9zd2VlcC5jLnkgKyByMlkgLSBiQS5tX3N3ZWVwLmMueSAtIHIxWTtcbiAgICBDTGVuZ3RoU3F1YXJlZCA9IENYICogQ1ggKyBDWSAqIENZO1xuICAgIENMZW5ndGggPSBNYXRoLnNxcnQoQ0xlbmd0aFNxdWFyZWQpO1xuICAgIHBvc2l0aW9uRXJyb3IgPSBDTGVuZ3RoO1xuICAgIGludk1hc3MxID0gYkEubV9pbnZNYXNzO1xuICAgIGludk1hc3MyID0gYkIubV9pbnZNYXNzO1xuICAgIGludkkxID0gYkEubV9pbnZJO1xuICAgIGludkkyID0gYkIubV9pbnZJO1xuICAgIGtfYWxsb3dlZFN0cmV0Y2ggPSAxMC4wICogYjJTZXR0aW5ncy5iMl9saW5lYXJTbG9wO1xuICAgIGlmIChDTGVuZ3RoU3F1YXJlZCA+IGtfYWxsb3dlZFN0cmV0Y2ggKiBrX2FsbG93ZWRTdHJldGNoKSB7XG4gICAgICB1WCA9IENYIC8gQ0xlbmd0aDtcbiAgICAgIHVZID0gQ1kgLyBDTGVuZ3RoO1xuICAgICAgayA9IGludk1hc3MxICsgaW52TWFzczI7XG4gICAgICBtID0gMS4wIC8gaztcbiAgICAgIGltcHVsc2VYID0gbSAqICgtQ1gpO1xuICAgICAgaW1wdWxzZVkgPSBtICogKC1DWSk7XG4gICAgICBrX2JldGEgPSAwLjU7XG4gICAgICBiQS5tX3N3ZWVwLmMueCAtPSBrX2JldGEgKiBpbnZNYXNzMSAqIGltcHVsc2VYO1xuICAgICAgYkEubV9zd2VlcC5jLnkgLT0ga19iZXRhICogaW52TWFzczEgKiBpbXB1bHNlWTtcbiAgICAgIGJCLm1fc3dlZXAuYy54ICs9IGtfYmV0YSAqIGludk1hc3MyICogaW1wdWxzZVg7XG4gICAgICBiQi5tX3N3ZWVwLmMueSArPSBrX2JldGEgKiBpbnZNYXNzMiAqIGltcHVsc2VZO1xuICAgICAgQ1ggPSBiQi5tX3N3ZWVwLmMueCArIHIyWCAtIGJBLm1fc3dlZXAuYy54IC0gcjFYO1xuICAgICAgQ1kgPSBiQi5tX3N3ZWVwLmMueSArIHIyWSAtIGJBLm1fc3dlZXAuYy55IC0gcjFZO1xuICAgIH1cbiAgICB0aGlzLksxLmNvbDEueCA9IGludk1hc3MxICsgaW52TWFzczI7XG4gICAgdGhpcy5LMS5jb2wyLnggPSAwLjA7XG4gICAgdGhpcy5LMS5jb2wxLnkgPSAwLjA7XG4gICAgdGhpcy5LMS5jb2wyLnkgPSBpbnZNYXNzMSArIGludk1hc3MyO1xuICAgIHRoaXMuSzIuY29sMS54ID0gaW52STEgKiByMVkgKiByMVk7XG4gICAgdGhpcy5LMi5jb2wyLnggPSAtaW52STEgKiByMVggKiByMVk7XG4gICAgdGhpcy5LMi5jb2wxLnkgPSAtaW52STEgKiByMVggKiByMVk7XG4gICAgdGhpcy5LMi5jb2wyLnkgPSBpbnZJMSAqIHIxWCAqIHIxWDtcbiAgICB0aGlzLkszLmNvbDEueCA9IGludkkyICogcjJZICogcjJZO1xuICAgIHRoaXMuSzMuY29sMi54ID0gLWludkkyICogcjJYICogcjJZO1xuICAgIHRoaXMuSzMuY29sMS55ID0gLWludkkyICogcjJYICogcjJZO1xuICAgIHRoaXMuSzMuY29sMi55ID0gaW52STIgKiByMlggKiByMlg7XG4gICAgdGhpcy5LLlNldE0odGhpcy5LMSk7XG4gICAgdGhpcy5LLkFkZE0odGhpcy5LMik7XG4gICAgdGhpcy5LLkFkZE0odGhpcy5LMyk7XG4gICAgdGhpcy5LLlNvbHZlKGIyUmV2b2x1dGVKb2ludC50SW1wdWxzZSwgLUNYLCAtQ1kpO1xuICAgIGltcHVsc2VYID0gYjJSZXZvbHV0ZUpvaW50LnRJbXB1bHNlLng7XG4gICAgaW1wdWxzZVkgPSBiMlJldm9sdXRlSm9pbnQudEltcHVsc2UueTtcbiAgICBiQS5tX3N3ZWVwLmMueCAtPSBiQS5tX2ludk1hc3MgKiBpbXB1bHNlWDtcbiAgICBiQS5tX3N3ZWVwLmMueSAtPSBiQS5tX2ludk1hc3MgKiBpbXB1bHNlWTtcbiAgICBiQS5tX3N3ZWVwLmEgLT0gYkEubV9pbnZJICogKHIxWCAqIGltcHVsc2VZIC0gcjFZICogaW1wdWxzZVgpO1xuICAgIGJCLm1fc3dlZXAuYy54ICs9IGJCLm1faW52TWFzcyAqIGltcHVsc2VYO1xuICAgIGJCLm1fc3dlZXAuYy55ICs9IGJCLm1faW52TWFzcyAqIGltcHVsc2VZO1xuICAgIGJCLm1fc3dlZXAuYSArPSBiQi5tX2ludkkgKiAocjJYICogaW1wdWxzZVkgLSByMlkgKiBpbXB1bHNlWCk7XG4gICAgYkEuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICBiQi5TeW5jaHJvbml6ZVRyYW5zZm9ybSgpO1xuICAgIHJldHVybiBwb3NpdGlvbkVycm9yIDw9IGIyU2V0dGluZ3MuYjJfbGluZWFyU2xvcCAmJiBhbmd1bGFyRXJyb3IgPD0gYjJTZXR0aW5ncy5iMl9hbmd1bGFyU2xvcDtcbiAgfTtcblxuICByZXR1cm4gYjJSZXZvbHV0ZUpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJSZXZvbHV0ZUpvaW50LmpzLm1hcFxuIiwidmFyIEJveDJELCBiMkpvaW50LCBiMkpvaW50RGVmLCBiMlZlYzIsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMkpvaW50ID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnQ7XG5cbmIyVmVjMiA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMjtcblxuYjJKb2ludERlZiA9IEJveDJELkR5bmFtaWNzLkpvaW50cy5iMkpvaW50RGVmO1xuXG5Cb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJSZXZvbHV0ZUpvaW50RGVmID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJSZXZvbHV0ZUpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUudHlwZSA9IGIySm9pbnQuZV9yZXZvbHV0ZUpvaW50O1xuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUubG9jYWxBbmNob3JBID0gbnVsbDtcblxuICBiMlJldm9sdXRlSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQiA9IG51bGw7XG5cbiAgYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS5yZWZlcmVuY2VBbmdsZSA9IDAuMDtcblxuICBiMlJldm9sdXRlSm9pbnREZWYucHJvdG90eXBlLmxvd2VyQW5nbGUgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS51cHBlckFuZ2xlID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUubWF4TW90b3JUb3JxdWUgPSAwLjA7XG5cbiAgYjJSZXZvbHV0ZUpvaW50RGVmLnByb3RvdHlwZS5tb3RvclNwZWVkID0gMC4wO1xuXG4gIGIyUmV2b2x1dGVKb2ludERlZi5wcm90b3R5cGUuZW5hYmxlTGltaXQgPSBmYWxzZTtcblxuICBiMlJldm9sdXRlSm9pbnREZWYucHJvdG90eXBlLmVuYWJsZU1vdG9yID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gYjJSZXZvbHV0ZUpvaW50RGVmKCkge1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubG9jYWxBbmNob3JBLlNldCgwLjAsIDAuMCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIuU2V0KDAuMCwgMC4wKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBiMlJldm9sdXRlSm9pbnREZWYucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihiQSwgYkIsIGFuY2hvcikge1xuICAgIHRoaXMuYm9keUEgPSBiQTtcbiAgICB0aGlzLmJvZHlCID0gYkI7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSB0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IHRoaXMuYm9keUIuR2V0TG9jYWxQb2ludChhbmNob3IpO1xuICAgIHRoaXMucmVmZXJlbmNlQW5nbGUgPSB0aGlzLmJvZHlCLkdldEFuZ2xlKCkgLSB0aGlzLmJvZHlBLkdldEFuZ2xlKCk7XG4gIH07XG5cbiAgcmV0dXJuIGIyUmV2b2x1dGVKb2ludERlZjtcblxufSkoYjJKb2ludERlZik7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWIyUmV2b2x1dGVKb2ludERlZi5qcy5tYXBcbiIsInZhciBCb3gyRCwgYjJKb2ludCwgYjJNYXQzMywgYjJWZWMyLCBiMlZlYzMsXG4gIF9faGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICBfX2V4dGVuZHMgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfTtcblxuQm94MkQgPSByZXF1aXJlKCcuLi8uLi9pbmRleCcpO1xuXG5iMlZlYzIgPSBCb3gyRC5Db21tb24uTWF0aC5iMlZlYzI7XG5cbmIyVmVjMyA9IEJveDJELkNvbW1vbi5NYXRoLmIyVmVjMztcblxuYjJNYXQzMyA9IEJveDJELkNvbW1vbi5NYXRoLmIyTWF0MzM7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzLmIyV2VsZEpvaW50ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICBfX2V4dGVuZHMoYjJXZWxkSm9pbnQsIF9zdXBlcik7XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLm1faW1wdWxzZSA9IG51bGw7XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLm1fbWFzcyA9IG51bGw7XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLm1fcmVmZXJlbmNlQW5nbGUgPSAwLjA7XG5cbiAgZnVuY3Rpb24gYjJXZWxkSm9pbnQoZGVmKSB7XG4gICAgYjJXZWxkSm9pbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZGVmKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3JBID0gbmV3IGIyVmVjMigpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5tX2ltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XG4gICAgdGhpcy5tX21hc3MgPSBuZXcgYjJNYXQzMygpO1xuICAgIHRoaXMubV9sb2NhbEFuY2hvckEuU2V0VihkZWYubG9jYWxBbmNob3JBKTtcbiAgICB0aGlzLm1fbG9jYWxBbmNob3JCLlNldFYoZGVmLmxvY2FsQW5jaG9yQik7XG4gICAgdGhpcy5tX3JlZmVyZW5jZUFuZ2xlID0gZGVmLnJlZmVyZW5jZUFuZ2xlO1xuICAgIHRoaXMubV9pbXB1bHNlLlNldFplcm8oKTtcbiAgICB0aGlzLm1fbWFzcyA9IG5ldyBiMk1hdDMzKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlBLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQSk7XG4gIH07XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLkdldEFuY2hvckIgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tX2JvZHlCLkdldFdvcmxkUG9pbnQodGhpcy5tX2xvY2FsQW5jaG9yQik7XG4gIH07XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLkdldFJlYWN0aW9uRm9yY2UgPSBmdW5jdGlvbihpbnZfZHQpIHtcbiAgICBpZiAoaW52X2R0ID09PSB2b2lkIDApIHtcbiAgICAgIGludl9kdCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgYjJWZWMyKGludl9kdCAqIHRoaXMubV9pbXB1bHNlLngsIGludl9kdCAqIHRoaXMubV9pbXB1bHNlLnkpO1xuICB9O1xuXG4gIGIyV2VsZEpvaW50LnByb3RvdHlwZS5HZXRSZWFjdGlvblRvcnF1ZSA9IGZ1bmN0aW9uKGludl9kdCkge1xuICAgIGlmIChpbnZfZHQgPT09IHZvaWQgMCkge1xuICAgICAgaW52X2R0ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGludl9kdCAqIHRoaXMubV9pbXB1bHNlLno7XG4gIH07XG5cbiAgYjJXZWxkSm9pbnQucHJvdG90eXBlLkluaXRWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBiQSwgYkIsIGlBLCBpQiwgbUEsIG1CLCByQVgsIHJBWSwgckJYLCByQlksIHRNYXQsIHRYO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgckFYID0gdGhpcy5tX2xvY2FsQW5jaG9yQS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJBWSA9IHRoaXMubV9sb2NhbEFuY2hvckEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogckFYICsgdE1hdC5jb2wyLnggKiByQVk7XG4gICAgckFZID0gdE1hdC5jb2wxLnkgKiByQVggKyB0TWF0LmNvbDIueSAqIHJBWTtcbiAgICByQVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHJCWCA9IHRoaXMubV9sb2NhbEFuY2hvckIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByQlkgPSB0aGlzLm1fbG9jYWxBbmNob3JCLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHJCWCArIHRNYXQuY29sMi54ICogckJZO1xuICAgIHJCWSA9IHRNYXQuY29sMS55ICogckJYICsgdE1hdC5jb2wyLnkgKiByQlk7XG4gICAgckJYID0gdFg7XG4gICAgbUEgPSBiQS5tX2ludk1hc3M7XG4gICAgbUIgPSBiQi5tX2ludk1hc3M7XG4gICAgaUEgPSBiQS5tX2ludkk7XG4gICAgaUIgPSBiQi5tX2ludkk7XG4gICAgdGhpcy5tX21hc3MuY29sMS54ID0gbUEgKyBtQiArIHJBWSAqIHJBWSAqIGlBICsgckJZICogckJZICogaUI7XG4gICAgdGhpcy5tX21hc3MuY29sMi54ID0gKC1yQVkgKiByQVggKiBpQSkgLSByQlkgKiByQlggKiBpQjtcbiAgICB0aGlzLm1fbWFzcy5jb2wzLnggPSAoLXJBWSAqIGlBKSAtIHJCWSAqIGlCO1xuICAgIHRoaXMubV9tYXNzLmNvbDEueSA9IHRoaXMubV9tYXNzLmNvbDIueDtcbiAgICB0aGlzLm1fbWFzcy5jb2wyLnkgPSBtQSArIG1CICsgckFYICogckFYICogaUEgKyByQlggKiByQlggKiBpQjtcbiAgICB0aGlzLm1fbWFzcy5jb2wzLnkgPSByQVggKiBpQSArIHJCWCAqIGlCO1xuICAgIHRoaXMubV9tYXNzLmNvbDEueiA9IHRoaXMubV9tYXNzLmNvbDMueDtcbiAgICB0aGlzLm1fbWFzcy5jb2wyLnogPSB0aGlzLm1fbWFzcy5jb2wzLnk7XG4gICAgdGhpcy5tX21hc3MuY29sMy56ID0gaUEgKyBpQjtcbiAgICBpZiAoc3RlcC53YXJtU3RhcnRpbmcpIHtcbiAgICAgIHRoaXMubV9pbXB1bHNlLnggKj0gc3RlcC5kdFJhdGlvO1xuICAgICAgdGhpcy5tX2ltcHVsc2UueSAqPSBzdGVwLmR0UmF0aW87XG4gICAgICB0aGlzLm1faW1wdWxzZS56ICo9IHN0ZXAuZHRSYXRpbztcbiAgICAgIGJBLm1fbGluZWFyVmVsb2NpdHkueCAtPSBtQSAqIHRoaXMubV9pbXB1bHNlLng7XG4gICAgICBiQS5tX2xpbmVhclZlbG9jaXR5LnkgLT0gbUEgKiB0aGlzLm1faW1wdWxzZS55O1xuICAgICAgYkEubV9hbmd1bGFyVmVsb2NpdHkgLT0gaUEgKiAockFYICogdGhpcy5tX2ltcHVsc2UueSAtIHJBWSAqIHRoaXMubV9pbXB1bHNlLnggKyB0aGlzLm1faW1wdWxzZS56KTtcbiAgICAgIGJCLm1fbGluZWFyVmVsb2NpdHkueCArPSBtQiAqIHRoaXMubV9pbXB1bHNlLng7XG4gICAgICBiQi5tX2xpbmVhclZlbG9jaXR5LnkgKz0gbUIgKiB0aGlzLm1faW1wdWxzZS55O1xuICAgICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgKz0gaUIgKiAockJYICogdGhpcy5tX2ltcHVsc2UueSAtIHJCWSAqIHRoaXMubV9pbXB1bHNlLnggKyB0aGlzLm1faW1wdWxzZS56KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tX2ltcHVsc2UuU2V0WmVybygpO1xuICAgIH1cbiAgfTtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUuU29sdmVWZWxvY2l0eUNvbnN0cmFpbnRzID0gZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBDZG90MVgsIENkb3QxWSwgQ2RvdDIsIGJBLCBiQiwgaUEsIGlCLCBpbXB1bHNlLCBtQSwgbUIsIHJBWCwgckFZLCByQlgsIHJCWSwgdE1hdCwgdFgsIHZBLCB2Qiwgd0EsIHdCO1xuICAgIHRNYXQgPSB2b2lkIDA7XG4gICAgdFggPSAwO1xuICAgIGJBID0gdGhpcy5tX2JvZHlBO1xuICAgIGJCID0gdGhpcy5tX2JvZHlCO1xuICAgIHZBID0gYkEubV9saW5lYXJWZWxvY2l0eTtcbiAgICB3QSA9IGJBLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIHZCID0gYkIubV9saW5lYXJWZWxvY2l0eTtcbiAgICB3QiA9IGJCLm1fYW5ndWxhclZlbG9jaXR5O1xuICAgIG1BID0gYkEubV9pbnZNYXNzO1xuICAgIG1CID0gYkIubV9pbnZNYXNzO1xuICAgIGlBID0gYkEubV9pbnZJO1xuICAgIGlCID0gYkIubV9pbnZJO1xuICAgIHRNYXQgPSBiQS5tX3hmLlI7XG4gICAgckFYID0gdGhpcy5tX2xvY2FsQW5jaG9yQS54IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJBWSA9IHRoaXMubV9sb2NhbEFuY2hvckEueSAtIGJBLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogckFYICsgdE1hdC5jb2wyLnggKiByQVk7XG4gICAgckFZID0gdE1hdC5jb2wxLnkgKiByQVggKyB0TWF0LmNvbDIueSAqIHJBWTtcbiAgICByQVggPSB0WDtcbiAgICB0TWF0ID0gYkIubV94Zi5SO1xuICAgIHJCWCA9IHRoaXMubV9sb2NhbEFuY2hvckIueCAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueDtcbiAgICByQlkgPSB0aGlzLm1fbG9jYWxBbmNob3JCLnkgLSBiQi5tX3N3ZWVwLmxvY2FsQ2VudGVyLnk7XG4gICAgdFggPSB0TWF0LmNvbDEueCAqIHJCWCArIHRNYXQuY29sMi54ICogckJZO1xuICAgIHJCWSA9IHRNYXQuY29sMS55ICogckJYICsgdE1hdC5jb2wyLnkgKiByQlk7XG4gICAgckJYID0gdFg7XG4gICAgQ2RvdDFYID0gdkIueCAtIHdCICogckJZIC0gdkEueCArIHdBICogckFZO1xuICAgIENkb3QxWSA9IHZCLnkgKyB3QiAqIHJCWCAtIHZBLnkgLSB3QSAqIHJBWDtcbiAgICBDZG90MiA9IHdCIC0gd0E7XG4gICAgaW1wdWxzZSA9IG5ldyBiMlZlYzMoKTtcbiAgICB0aGlzLm1fbWFzcy5Tb2x2ZTMzKGltcHVsc2UsIC1DZG90MVgsIC1DZG90MVksIC1DZG90Mik7XG4gICAgdGhpcy5tX2ltcHVsc2UuQWRkKGltcHVsc2UpO1xuICAgIHZBLnggLT0gbUEgKiBpbXB1bHNlLng7XG4gICAgdkEueSAtPSBtQSAqIGltcHVsc2UueTtcbiAgICB3QSAtPSBpQSAqIChyQVggKiBpbXB1bHNlLnkgLSByQVkgKiBpbXB1bHNlLnggKyBpbXB1bHNlLnopO1xuICAgIHZCLnggKz0gbUIgKiBpbXB1bHNlLng7XG4gICAgdkIueSArPSBtQiAqIGltcHVsc2UueTtcbiAgICB3QiArPSBpQiAqIChyQlggKiBpbXB1bHNlLnkgLSByQlkgKiBpbXB1bHNlLnggKyBpbXB1bHNlLnopO1xuICAgIGJBLm1fYW5ndWxhclZlbG9jaXR5ID0gd0E7XG4gICAgYkIubV9hbmd1bGFyVmVsb2NpdHkgPSB3QjtcbiAgfTtcblxuICBiMldlbGRKb2ludC5wcm90b3R5cGUuU29sdmVQb3NpdGlvbkNvbnN0cmFpbnRzID0gZnVuY3Rpb24oYmF1bWdhcnRlKSB7XG4gICAgdmFyIEMxWCwgQzFZLCBDMiwgYW5ndWxhckVycm9yLCBiQSwgYkIsIGlBLCBpQiwgaW1wdWxzZSwga19hbGxvd2VkU3RyZXRjaCwgbUEsIG1CLCBwb3NpdGlvbkVycm9yLCByQVgsIHJBWSwgckJYLCByQlksIHRNYXQsIHRYO1xuICAgIGlmIChiYXVtZ2FydGUgPT09IHZvaWQgMCkge1xuICAgICAgYmF1bWdhcnRlID0gMDtcbiAgICB9XG4gICAgdE1hdCA9IHZvaWQgMDtcbiAgICB0WCA9IDA7XG4gICAgYkEgPSB0aGlzLm1fYm9keUE7XG4gICAgYkIgPSB0aGlzLm1fYm9keUI7XG4gICAgdE1hdCA9IGJBLm1feGYuUjtcbiAgICByQVggPSB0aGlzLm1fbG9jYWxBbmNob3JBLnggLSBiQS5tX3N3ZWVwLmxvY2FsQ2VudGVyLng7XG4gICAgckFZID0gdGhpcy5tX2xvY2FsQW5jaG9yQS55IC0gYkEubV9zd2VlcC5sb2NhbENlbnRlci55O1xuICAgIHRYID0gdE1hdC5jb2wxLnggKiByQVggKyB0TWF0LmNvbDIueCAqIHJBWTtcbiAgICByQVkgPSB0TWF0LmNvbDEueSAqIHJBWCArIHRNYXQuY29sMi55ICogckFZO1xuICAgIHJBWCA9IHRYO1xuICAgIHRNYXQgPSBiQi5tX3hmLlI7XG4gICAgckJYID0gdGhpcy5tX2xvY2FsQW5jaG9yQi54IC0gYkIubV9zd2VlcC5sb2NhbENlbnRlci54O1xuICAgIHJCWSA9IHRoaXMubV9sb2NhbEFuY2hvckIueSAtIGJCLm1fc3dlZXAubG9jYWxDZW50ZXIueTtcbiAgICB0WCA9IHRNYXQuY29sMS54ICogckJYICsgdE1hdC5jb2wyLnggKiByQlk7XG4gICAgckJZID0gdE1hdC5jb2wxLnkgKiByQlggKyB0TWF0LmNvbDIueSAqIHJCWTtcbiAgICByQlggPSB0WDtcbiAgICBtQSA9IGJBLm1faW52TWFzcztcbiAgICBtQiA9IGJCLm1faW52TWFzcztcbiAgICBpQSA9IGJBLm1faW52STtcbiAgICBpQiA9IGJCLm1faW52STtcbiAgICBDMVggPSBiQi5tX3N3ZWVwLmMueCArIHJCWCAtIGJBLm1fc3dlZXAuYy54IC0gckFYO1xuICAgIEMxWSA9IGJCLm1fc3dlZXAuYy55ICsgckJZIC0gYkEubV9zd2VlcC5jLnkgLSByQVk7XG4gICAgQzIgPSBiQi5tX3N3ZWVwLmEgLSBiQS5tX3N3ZWVwLmEgLSB0aGlzLm1fcmVmZXJlbmNlQW5nbGU7XG4gICAga19hbGxvd2VkU3RyZXRjaCA9IDEwLjAgKiBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3A7XG4gICAgcG9zaXRpb25FcnJvciA9IE1hdGguc3FydChDMVggKiBDMVggKyBDMVkgKiBDMVkpO1xuICAgIGFuZ3VsYXJFcnJvciA9IGIyTWF0aC5BYnMoQzIpO1xuICAgIGlmIChwb3NpdGlvbkVycm9yID4ga19hbGxvd2VkU3RyZXRjaCkge1xuICAgICAgaUEgKj0gMS4wO1xuICAgICAgaUIgKj0gMS4wO1xuICAgIH1cbiAgICB0aGlzLm1fbWFzcy5jb2wxLnggPSBtQSArIG1CICsgckFZICogckFZICogaUEgKyByQlkgKiByQlkgKiBpQjtcbiAgICB0aGlzLm1fbWFzcy5jb2wyLnggPSAoLXJBWSAqIHJBWCAqIGlBKSAtIHJCWSAqIHJCWCAqIGlCO1xuICAgIHRoaXMubV9tYXNzLmNvbDMueCA9ICgtckFZICogaUEpIC0gckJZICogaUI7XG4gICAgdGhpcy5tX21hc3MuY29sMS55ID0gdGhpcy5tX21hc3MuY29sMi54O1xuICAgIHRoaXMubV9tYXNzLmNvbDIueSA9IG1BICsgbUIgKyByQVggKiByQVggKiBpQSArIHJCWCAqIHJCWCAqIGlCO1xuICAgIHRoaXMubV9tYXNzLmNvbDMueSA9IHJBWCAqIGlBICsgckJYICogaUI7XG4gICAgdGhpcy5tX21hc3MuY29sMS56ID0gdGhpcy5tX21hc3MuY29sMy54O1xuICAgIHRoaXMubV9tYXNzLmNvbDIueiA9IHRoaXMubV9tYXNzLmNvbDMueTtcbiAgICB0aGlzLm1fbWFzcy5jb2wzLnogPSBpQSArIGlCO1xuICAgIGltcHVsc2UgPSBuZXcgYjJWZWMzKCk7XG4gICAgdGhpcy5tX21hc3MuU29sdmUzMyhpbXB1bHNlLCAtQzFYLCAtQzFZLCAtQzIpO1xuICAgIGJBLm1fc3dlZXAuYy54IC09IG1BICogaW1wdWxzZS54O1xuICAgIGJBLm1fc3dlZXAuYy55IC09IG1BICogaW1wdWxzZS55O1xuICAgIGJBLm1fc3dlZXAuYSAtPSBpQSAqIChyQVggKiBpbXB1bHNlLnkgLSByQVkgKiBpbXB1bHNlLnggKyBpbXB1bHNlLnopO1xuICAgIGJCLm1fc3dlZXAuYy54ICs9IG1CICogaW1wdWxzZS54O1xuICAgIGJCLm1fc3dlZXAuYy55ICs9IG1CICogaW1wdWxzZS55O1xuICAgIGJCLm1fc3dlZXAuYSArPSBpQiAqIChyQlggKiBpbXB1bHNlLnkgLSByQlkgKiBpbXB1bHNlLnggKyBpbXB1bHNlLnopO1xuICAgIGJBLlN5bmNocm9uaXplVHJhbnNmb3JtKCk7XG4gICAgYkIuU3luY2hyb25pemVUcmFuc2Zvcm0oKTtcbiAgICByZXR1cm4gcG9zaXRpb25FcnJvciA8PSBiMlNldHRpbmdzLmIyX2xpbmVhclNsb3AgJiYgYW5ndWxhckVycm9yIDw9IGIyU2V0dGluZ3MuYjJfYW5ndWxhclNsb3A7XG4gIH07XG5cbiAgcmV0dXJuIGIyV2VsZEpvaW50O1xuXG59KShiMkpvaW50KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YjJXZWxkSm9pbnQuanMubWFwXG4iLCJ2YXIgQm94MkQsIGIySm9pbnQsIGIySm9pbnREZWYsIGIyVmVjMixcbiAgX19oYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gIF9fZXh0ZW5kcyA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoX19oYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9O1xuXG5Cb3gyRCA9IHJlcXVpcmUoJy4uLy4uL2luZGV4Jyk7XG5cbmIySm9pbnQgPSBCb3gyRC5EeW5hbWljcy5Kb2ludHMuYjJKb2ludDtcblxuYjJWZWMyID0gQm94MkQuQ29tbW9uLk1hdGguYjJWZWMyO1xuXG5iMkpvaW50RGVmID0gQm94MkQuRHluYW1pY3MuSm9pbnRzLmIySm9pbnREZWY7XG5cbkJveDJELkR5bmFtaWNzLkpvaW50cy5iMldlbGRKb2ludERlZiA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgX19leHRlbmRzKGIyV2VsZEpvaW50RGVmLCBfc3VwZXIpO1xuXG4gIGIyV2VsZEpvaW50RGVmLnByb3RvdHlwZS50eXBlID0gYjJKb2ludC5lX3dlbGRKb2ludDtcblxuICBiMldlbGRKb2ludERlZi5wcm90b3R5cGUucmVmZXJlbmNlQW5nbGUgPSAwLjA7XG5cbiAgYjJXZWxkSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQSA9IG51bGw7XG5cbiAgYjJXZWxkSm9pbnREZWYucHJvdG90eXBlLmxvY2FsQW5jaG9yQiA9IG51bGw7XG5cbiAgZnVuY3Rpb24gYjJXZWxkSm9pbnREZWYoKSB7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEgPSBuZXcgYjJWZWMyKCk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgYjJWZWMyKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYjJXZWxkSm9pbnREZWYucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbihiQSwgYkIsIGFuY2hvcikge1xuICAgIHRoaXMuYm9keUEgPSBiQTtcbiAgICB0aGlzLmJvZHlCID0gYkI7XG4gICAgdGhpcy5sb2NhbEFuY2hvckEuU2V0Vih0aGlzLmJvZHlBLkdldExvY2FsUG9pbnQoYW5jaG9yKSk7XG4gICAgdGhpcy5sb2NhbEFuY2hvckIuU2V0Vih0aGlzLmJvZHlCLkdldExvY2FsUG9pbnQoYW5jaG9yKSk7XG4gICAgdGhpcy5yZWZlcmVuY2VBbmdsZSA9IHRoaXMuYm9keUIuR2V0QW5nbGUoKSAtIHRoaXMuYm9keUEuR2V0QW5nbGUoKTtcbiAgfTtcblxuICByZXR1cm4gYjJXZWxkSm9pbnREZWY7XG5cbn0pKGIySm9pbnREZWYpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iMldlbGRKb2ludERlZi5qcy5tYXBcbiIsIlxuLypcbiAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIEJveDJEO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJveDJEID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBCb3gyRCgpIHt9XG5cbiAgQm94MkQucGFyc2VVSW50ID0gZnVuY3Rpb24odikge1xuICAgIHJldHVybiBNYXRoLmFicyhwYXJzZUludCh2KSk7XG4gIH07XG5cbiAgQm94MkQuVmVjdG9yID0gZnVuY3Rpb24obGVuZ3RoKSB7XG4gICAgdmFyIGksIHRtcDtcbiAgICBpZiAobGVuZ3RoID09IG51bGwpIHtcbiAgICAgIGxlbmd0aCA9IDA7XG4gICAgfVxuICAgIHRtcCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICB0bXBbaV0gPSAwO1xuICAgICAgKytpO1xuICAgIH1cbiAgICByZXR1cm4gdG1wO1xuICB9O1xuXG4gIEJveDJELmVxdWFscyA9IGZ1bmN0aW9uKG8xLCBvMikge1xuICAgIHZhciBfcmVmO1xuICAgIGlmIChvMSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoKG8yIGluc3RhbmNlb2YgRnVuY3Rpb24pICYmIChvMSBpbnN0YW5jZW9mIG8yKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoKF9yZWYgPSBvMS5jb25zdHJ1Y3Rvci5fX2ltcGxlbWVudHMpICE9IG51bGwgPyBfcmVmW28yLm5hbWVdIDogdm9pZCAwKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBCb3gyRC5nZW5lcmF0ZUNhbGxiYWNrID0gZnVuY3Rpb24oY29udGV4dCwgY2IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjYi5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIEJveDJEO1xuXG59KSgpO1xuXG5Cb3gyRC5Db21tb24gPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIENvbW1vbigpIHt9XG5cbiAgcmV0dXJuIENvbW1vbjtcblxufSkoKTtcblxuQm94MkQuQ29tbW9uLk1hdGggPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIE1hdGgoKSB7fVxuXG4gIHJldHVybiBNYXRoO1xuXG59KSgpO1xuXG5yZXF1aXJlKCcuL2NvbW1vbi9tYXRoL2IyVmVjMicpO1xuXG5yZXF1aXJlKCcuL2NvbW1vbi9tYXRoL2IyVmVjMycpO1xuXG5yZXF1aXJlKCcuL2NvbW1vbi9tYXRoL2IyTWF0MjInKTtcblxucmVxdWlyZSgnLi9jb21tb24vbWF0aC9iMk1hdDMzJyk7XG5cbnJlcXVpcmUoJy4vY29tbW9uL21hdGgvYjJTd2VlcCcpO1xuXG5yZXF1aXJlKCcuL2NvbW1vbi9tYXRoL2IyVHJhbnNmb3JtJyk7XG5cbnJlcXVpcmUoJy4vY29tbW9uL21hdGgvYjJNYXRoJyk7XG5cbnJlcXVpcmUoJy4vY29tbW9uL2IyQ29sb3InKTtcblxucmVxdWlyZSgnLi9jb21tb24vYjJTZXR0aW5ncycpO1xuXG5Cb3gyRC5Db2xsaXNpb24gPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIENvbGxpc2lvbigpIHt9XG5cbiAgcmV0dXJuIENvbGxpc2lvbjtcblxufSkoKTtcblxuQm94MkQuQ29sbGlzaW9uLlNoYXBlcyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gU2hhcGVzKCkge31cblxuICByZXR1cm4gU2hhcGVzO1xuXG59KSgpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9zaGFwZXMvYjJTaGFwZScpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9zaGFwZXMvYjJDaXJjbGVTaGFwZScpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9zaGFwZXMvYjJQb2x5Z29uU2hhcGUnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vc2hhcGVzL2IyRWRnZUNoYWluRGVmJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL3NoYXBlcy9iMkVkZ2VTaGFwZScpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9zaGFwZXMvYjJNYXNzRGF0YScpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9GZWF0dXJlcycpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMkNvbnRhY3RJRCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9DbGlwVmVydGV4Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyQUFCQicpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMkJvdW5kJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyQm91bmRWYWx1ZXMnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJDb2xsaXNpb24nKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJDb250YWN0UG9pbnQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJTaW1wbGV4VmVydGV4Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyU2ltcGxleCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMkRpc3RhbmNlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRGlzdGFuY2VJbnB1dCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMkRpc3RhbmNlT3V0cHV0Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRGlzdGFuY2VQcm94eScpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMkR5bmFtaWNUcmVlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRHluYW1pY1RyZWVCcm9hZFBoYXNlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRHluYW1pY1RyZWVOb2RlJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyRHluYW1pY1RyZWVQYWlyJyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyTWFuaWZvbGQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJNYW5pZm9sZFBvaW50Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyUG9pbnQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJSYXlDYXN0SW5wdXQnKTtcblxucmVxdWlyZSgnLi9jb2xsaXNpb24vYjJSYXlDYXN0T3V0cHV0Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyU2VnbWVudCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMlNlcGFyYXRpb25GdW5jdGlvbicpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMlNpbXBsZXhDYWNoZScpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMlRpbWVPZkltcGFjdCcpO1xuXG5yZXF1aXJlKCcuL2NvbGxpc2lvbi9iMlRPSUlucHV0Jyk7XG5cbnJlcXVpcmUoJy4vY29sbGlzaW9uL2IyV29ybGRNYW5pZm9sZCcpO1xuXG5Cb3gyRC5EeW5hbWljcyA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gRHluYW1pY3MoKSB7fVxuXG4gIHJldHVybiBEeW5hbWljcztcblxufSkoKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9iMlRpbWVTdGVwJyk7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRhY3RzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBDb250YWN0cygpIHt9XG5cbiAgcmV0dXJuIENvbnRhY3RzO1xuXG59KSgpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdFJlZ2lzdGVyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJDb250YWN0UmVzdWx0Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJDb250YWN0RWRnZScpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyQ29udGFjdENvbnN0cmFpbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RDb25zdHJhaW50UG9pbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3QnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkNpcmNsZUNvbnRhY3QnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMlBvc2l0aW9uU29sdmVyTWFuaWZvbGQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RTb2x2ZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkVkZ2VBbmRDaXJjbGVDb250YWN0Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udGFjdHMvYjJOdWxsQ29udGFjdCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9seUFuZENpcmNsZUNvbnRhY3QnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMlBvbHlBbmRFZGdlQ29udGFjdCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRhY3RzL2IyUG9seWdvbkNvbnRhY3QnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250YWN0cy9iMkNvbnRhY3RGYWN0b3J5Jyk7XG5cbkJveDJELkR5bmFtaWNzLkNvbnRyb2xsZXJzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBDb250cm9sbGVycygpIHt9XG5cbiAgcmV0dXJuIENvbnRyb2xsZXJzO1xuXG59KSgpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29udHJvbGxlckVkZ2UnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250cm9sbGVycy9iMkNvbnRyb2xsZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250cm9sbGVycy9iMkJ1b3lhbmN5Q29udHJvbGxlcicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyQ29uc3RhbnRBY2NlbENvbnRyb2xsZXInKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9jb250cm9sbGVycy9iMkNvbnN0YW50Rm9yY2VDb250cm9sbGVyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvY29udHJvbGxlcnMvYjJHcmF2aXR5Q29udHJvbGxlcicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2NvbnRyb2xsZXJzL2IyVGVuc29yRGFtcGluZ0NvbnRyb2xsZXInKTtcblxuQm94MkQuRHluYW1pY3MuSm9pbnRzID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBKb2ludHMoKSB7fVxuXG4gIHJldHVybiBKb2ludHM7XG5cbn0pKCk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IySm9pbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkpvaW50RWRnZScpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkphY29iaWFuJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyRGlzdGFuY2VKb2ludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkRpc3RhbmNlSm9pbnREZWYnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJGcmljdGlvbkpvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyRnJpY3Rpb25Kb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkdlYXJKb2ludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkdlYXJKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkxpbmVKb2ludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMkxpbmVKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMk1vdXNlSm9pbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJNb3VzZUpvaW50RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyUHJpc21hdGljSm9pbnQnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJQcmlzbWF0aWNKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMlB1bGxleUpvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyUHVsbGV5Sm9pbnREZWYnKTtcblxucmVxdWlyZSgnLi9keW5hbWljcy9qb2ludHMvYjJSZXZvbHV0ZUpvaW50Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3Mvam9pbnRzL2IyUmV2b2x1dGVKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMldlbGRKb2ludCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2pvaW50cy9iMldlbGRKb2ludERlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyQ29udGFjdExpc3RlbmVyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJDb250YWN0RmlsdGVyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJDb250YWN0TWFuYWdlcicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyRml4dHVyZScpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyQm9keScpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyRGVidWdEcmF3Jyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJCb2R5RGVmJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJDb250YWN0RmlsdGVyJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJDb250YWN0SW1wdWxzZScpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyRml4dHVyZURlZicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IySXNsYW5kJyk7XG5cbnJlcXVpcmUoJy4vZHluYW1pY3MvYjJXb3JsZCcpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyRGVzdHJ1Y3Rpb25MaXN0ZW5lcicpO1xuXG5yZXF1aXJlKCcuL2R5bmFtaWNzL2IyRmlsdGVyRGF0YScpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdfQ==
