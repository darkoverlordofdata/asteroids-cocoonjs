!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.asteroids=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c;b.exports=c=function(){function a(){}return a}(),c.input=function(){function a(){}return a}(),a("./src/input/key_poll"),c.ui=function(){function a(){}return a}(),a("./src/ui/point"),c.graphics=function(){function a(){}return a}(),a("./src/graphics/asteroid_view"),a("./src/graphics/asteroid_death_view"),a("./src/graphics/bullet_view"),a("./src/graphics/hud_view"),a("./src/graphics/spaceship_death_view"),a("./src/graphics/spaceship_view"),a("./src/graphics/wait_for_start_view"),c.components=function(){function a(){}return a}(),a("./src/components/animation"),a("./src/components/asteroid"),a("./src/components/audio"),a("./src/components/bullet"),a("./src/components/collision"),a("./src/components/death_throes"),a("./src/components/display"),a("./src/components/game_state"),a("./src/components/gun"),a("./src/components/gun_controls"),a("./src/components/hud"),a("./src/components/motion"),a("./src/components/motion_controls"),a("./src/components/position"),a("./src/components/spaceship"),a("./src/components/wait_for_start"),c.nodes=function(){function a(){}return a}(),a("./src/nodes/animation_node"),a("./src/nodes/asteroid_collision_node"),a("./src/nodes/audio_node"),a("./src/nodes/bullet_age_node"),a("./src/nodes/bullet_collision_node"),a("./src/nodes/death_throes_node"),a("./src/nodes/game_node"),a("./src/nodes/gun_control_node"),a("./src/nodes/hud_node"),a("./src/nodes/motion_control_node"),a("./src/nodes/movement_node"),a("./src/nodes/render_node"),a("./src/nodes/spaceship_collision_node"),a("./src/nodes/spaceship_node"),a("./src/nodes/wait_for_start_node"),c.systems=function(){function a(){}return a}(),a("./src/systems/animation_system"),a("./src/systems/audio_system"),a("./src/systems/bullet_age_system"),a("./src/systems/collision_system"),a("./src/systems/death_throes_system"),a("./src/systems/game_manager"),a("./src/systems/gun_control_system"),a("./src/systems/hud_system"),a("./src/systems/motion_control_system"),a("./src/systems/movement_system"),a("./src/systems/render_system"),a("./src/systems/system_priorities"),a("./src/systems/wait_for_start_system"),a("./src/entity_creator"),a("./src/game_config"),a("./src/asteroids"),a("./src/main")},{"./src/asteroids":2,"./src/components/animation":3,"./src/components/asteroid":4,"./src/components/audio":5,"./src/components/bullet":6,"./src/components/collision":7,"./src/components/death_throes":8,"./src/components/display":9,"./src/components/game_state":10,"./src/components/gun":11,"./src/components/gun_controls":12,"./src/components/hud":13,"./src/components/motion":14,"./src/components/motion_controls":15,"./src/components/position":16,"./src/components/spaceship":17,"./src/components/wait_for_start":18,"./src/entity_creator":19,"./src/game_config":20,"./src/graphics/asteroid_death_view":21,"./src/graphics/asteroid_view":22,"./src/graphics/bullet_view":23,"./src/graphics/hud_view":24,"./src/graphics/spaceship_death_view":25,"./src/graphics/spaceship_view":26,"./src/graphics/wait_for_start_view":27,"./src/input/key_poll":28,"./src/main":29,"./src/nodes/animation_node":30,"./src/nodes/asteroid_collision_node":31,"./src/nodes/audio_node":32,"./src/nodes/bullet_age_node":33,"./src/nodes/bullet_collision_node":34,"./src/nodes/death_throes_node":35,"./src/nodes/game_node":36,"./src/nodes/gun_control_node":37,"./src/nodes/hud_node":38,"./src/nodes/motion_control_node":39,"./src/nodes/movement_node":40,"./src/nodes/render_node":41,"./src/nodes/spaceship_collision_node":42,"./src/nodes/spaceship_node":43,"./src/nodes/wait_for_start_node":44,"./src/systems/animation_system":45,"./src/systems/audio_system":46,"./src/systems/bullet_age_system":47,"./src/systems/collision_system":48,"./src/systems/death_throes_system":49,"./src/systems/game_manager":50,"./src/systems/gun_control_system":51,"./src/systems/hud_system":52,"./src/systems/motion_control_system":53,"./src/systems/movement_system":54,"./src/systems/render_system":55,"./src/systems/system_priorities":56,"./src/systems/wait_for_start_system":57,"./src/ui/point":58}],2:[function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;t=a("../../lib"),b=t.systems.AnimationSystem,c=t.systems.AudioSystem,d=t.systems.BulletAgeSystem,e=t.systems.CollisionSystem,f=t.systems.DeathThroesSystem,i=t.systems.GameManager,k=t.systems.GunControlSystem,l=t.systems.HudSystem,n=t.systems.MotionControlSystem,o=t.systems.MovementSystem,q=t.systems.RenderSystem,r=t.systems.SystemPriorities,s=t.systems.WaitForStartSystem,p=t.systems.PhysicsSystem,j=t.components.GameState,g=t.EntityCreator,h=t.GameConfig,m=t.input.KeyPoll,t.Asteroids=function(){function a(a,b,c){this.container=a,this.prepare(b,c)}return a.prototype.container=null,a.prototype.engine=null,a.prototype.tickProvider=null,a.prototype.creator=null,a.prototype.keyPoll=null,a.prototype.config=null,a.prototype.prepare=function(a,j){this.engine=new ash.core.Engine,this.creator=new g(this.engine,this.container,this.world),this.keyPoll=new m(window),this.config=new h,this.config.height=j,this.config.width=a,this.engine.addSystem(new s(this.creator),r.preUpdate),this.engine.addSystem(new i(this.creator,this.config),r.preUpdate),this.engine.addSystem(new n(this.keyPoll),r.update),this.engine.addSystem(new k(this.keyPoll,this.creator),r.update),this.engine.addSystem(new d(this.creator),r.update),this.engine.addSystem(new f(this.creator),r.update),this.engine.addSystem(new o(this.config),r.move),this.engine.addSystem(new e(this.creator),r.resolveCollisions),this.engine.addSystem(new b,r.animate),this.engine.addSystem(new l,r.animate),this.engine.addSystem(new q(this.container),r.render),this.engine.addSystem(new c,r.render),this.creator.createWaitForClick(),this.creator.createGame()},a.prototype.start=function(){var a,b,c;navigator.isCocoonJS?a=null:(b=Math.floor(this.config.width/2)-40,c=0,a=new Stats,a.setMode(0),a.domElement.style.position="absolute",a.domElement.style.left=""+b+"px",a.domElement.style.top=""+c+"px",document.body.appendChild(a.domElement)),this.tickProvider=new ash.tick.FrameTickProvider(a),this.tickProvider.add(this.engine.update),this.tickProvider.start()},a}()},{"../../lib":1}],3:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Animation=function(){function a(a){this.animation=a}return a.prototype.animation=null,a}()},{"../../../lib":1}],4:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Asteroid=function(){function a(a){this.fsm=a}return a.prototype.fsm=null,a}()},{"../../../lib":1}],5:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Audio=function(){function a(){this.toPlay=[]}return a.prototype.toPlay=null,a.prototype.play=function(a){return this.toPlay.push(a)},a}()},{"../../../lib":1}],6:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Bullet=function(){function a(a){this.lifeRemaining=a}return a.prototype.lifeRemaining=0,a}()},{"../../../lib":1}],7:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Collision=function(){function a(a){this.radius=a}return a.prototype.radius=0,a}()},{"../../../lib":1}],8:[function(a){"use strict";var b;b=a("../../../lib"),b.components.DeathThroes=function(){function a(a){this.countdown=a}return a.prototype.countdown=0,a}()},{"../../../lib":1}],9:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Display=function(){function a(a){this.graphic=a}return a.prototype.graphic=0,a}()},{"../../../lib":1}],10:[function(a){"use strict";var b;b=a("../../../lib"),b.components.GameState=function(){function a(){}return a.prototype.lives=3,a.prototype.level=0,a.prototype.hits=0,a.prototype.playing=!1,a.prototype.setForStart=function(){this.lives=3,this.level=0,this.hits=0,this.playing=!0},a}()},{"../../../lib":1}],11:[function(a){"use strict";var b,c;c=a("../../../lib"),b=c.ui.Point,c.components.Gun=function(){function a(a,c,d,e){this.minimumShotInterval=d,this.bulletLifetime=e,this.shooting=!1,this.offsetFromParent=null,this.timeSinceLastShot=0,this.offsetFromParent=new b(a,c)}return a.prototype.shooting=!1,a.prototype.offsetFromParent=null,a.prototype.timeSinceLastShot=0,a.prototype.offsetFromParent=null,a}()},{"../../../lib":1}],12:[function(a){"use strict";var b;b=a("../../../lib"),b.components.GunControls=function(){function a(a){this.trigger=a}return a.prototype.trigger=0,a}()},{"../../../lib":1}],13:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Hud=function(){function a(a){this.view=a}return a.prototype.view=null,a}()},{"../../../lib":1}],14:[function(a){"use strict";var b,c;c=a("../../../lib"),b=c.ui.Point,c.components.Motion=function(){function a(a,c,d,e){this.angularVelocity=d,this.damping=e,this.velocity=new b(a,c)}return a.prototype.velocity=null,a.prototype.angularVelocity=0,a.prototype.damping=0,a}()},{"../../../lib":1}],15:[function(a){"use strict";var b;b=a("../../../lib"),b.components.MotionControls=function(){function a(a,b,c,d,e){this.left=a,this.right=b,this.accelerate=c,this.accelerationRate=d,this.rotationRate=e}return a.prototype.left=0,a.prototype.right=0,a.prototype.accelerate=0,a.prototype.accelerationRate=0,a.prototype.rotationRate=0,a}()},{"../../../lib":1}],16:[function(a){"use strict";var b,c;c=a("../../../lib"),b=c.ui.Point,c.components.Position=function(){function a(a,c,d){this.rotation=d,this.position=new b(a,c)}return a.prototype.position=null,a.prototype.rotation=0,a}()},{"../../../lib":1}],17:[function(a){"use strict";var b;b=a("../../../lib"),b.components.Spaceship=function(){function a(a){this.fsm=a}return a.prototype.fsm=null,a}()},{"../../../lib":1}],18:[function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=a("../../../lib"),b.components.WaitForStart=function(){function a(a){this.waitForStart=a,this.setStartGame=c(this.setStartGame,this),this.waitForStart.click.add(this.setStartGame)}return a.prototype.waitForStart=null,a.prototype.startGame=!1,a.prototype.setStartGame=function(){this.startGame=!0},a}()},{"../../../lib":1}],19:[function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;B=a("../../lib"),A=B.graphics.WaitForStartView,l=ash.core.Entity,m=ash.fsm.EntityStateMachine,b=B.components.Animation,c=B.components.Asteroid,f=B.components.Audio,g=B.components.Bullet,i=B.components.Collision,j=B.components.DeathThroes,k=B.components.Display,n=B.components.GameState,o=B.components.Gun,p=B.components.GunControls,q=B.components.Hud,s=B.components.Motion,t=B.components.MotionControls,u=B.components.Physics,v=B.components.Position,w=B.components.Spaceship,z=B.components.WaitForStart,d=B.graphics.AsteroidDeathView,e=B.graphics.AsteroidView,h=B.graphics.BulletView,r=B.graphics.HudView,x=B.graphics.SpaceshipDeathView,y=B.graphics.SpaceshipView,B.EntityCreator=function(){function a(a,b,c){this.engine=a,this.graphic=b,this.world=c}var u,B,C,D;return u=37,C=38,B=39,D=90,a.prototype.engine=null,a.prototype.waitEntity=null,a.prototype.graphic=null,a.prototype.destroyEntity=function(a){this.engine.removeEntity(a)},a.prototype.createGame=function(){var a,b;return b=new r(this.graphic),a=new l("game").add(new n).add(new q(b)).add(new k(b)).add(new v(0,0,0,0)),this.engine.addEntity(a),a},a.prototype.createWaitForClick=function(){var a;return this.waitEntity||(a=new A(this.graphic),this.waitEntity=new l("wait").add(new z(a)).add(new k(a)).add(new v(0,0,0,0))),this.waitEntity.get(z).startGame=!1,this.engine.addEntity(this.waitEntity),this.waitEntity},a.prototype.createAsteroid=function(a,g,h){var n,o,p;return n=new l,p=new m(n),p.createState("alive").add(s).withInstance(new s(4*(Math.random()-.5)*(50-a),4*(Math.random()-.5)*(50-a),2*Math.random()-1,0)).add(i).withInstance(new i(a)).add(k).withInstance(new k(new e(this.graphic,a))),o=new d(this.graphic,a),p.createState("destroyed").add(j).withInstance(new j(3)).add(k).withInstance(new k(o)).add(b).withInstance(new b(o)),n.add(new c(p)).add(new v(g,h,0)).add(new f),p.changeState("alive"),this.engine.addEntity(n),n},a.prototype.createSpaceship=function(){var a,c,d;return d=new l,c=new m(d),c.createState("playing").add(s).withInstance(new s(0,0,0,15)).add(t).withInstance(new t(u,B,C,100,3)).add(o).withInstance(new o(8,0,.3,2)).add(p).withInstance(new p(D)).add(i).withInstance(new i(9)).add(k).withInstance(new k(new y(this.graphic))),a=new x(this.graphic),c.createState("destroyed").add(j).withInstance(new j(5)).add(k).withInstance(new k(a)).add(b).withInstance(new b(a)),d.add(new w(c)).add(new v(300,225,0)).add(new f),c.changeState("playing"),this.engine.addEntity(d),d},a.prototype.createUserBullet=function(a,b){var c,d,e,f,j;return d=Math.cos(b.rotation),e=Math.sin(b.rotation),f=d*a.offsetFromParent.x-e*a.offsetFromParent.y+b.position.x,j=e*a.offsetFromParent.x+d*a.offsetFromParent.y+b.position.y,c=(new l).add(new g(a.bulletLifetime)).add(new v(f,j,0)).add(new i(0)).add(new s(150*d,150*e,0,0)).add(new k(new h(this.graphic))),this.engine.addEntity(c),c},a}()},{"../../lib":1}],20:[function(a){"use strict";var b;b=a("../../lib"),b.GameConfig=function(){function a(){}return a.prototype.width=0,a.prototype.height=0,a}()},{"../../lib":1}],21:[function(a){"use strict";var b,c,d;d=a("../../../lib"),c=d.ui.Point,d.graphics.AsteroidDeathView=function(){function a(a,b){this.graphic=a,this.radius=b,this.dots=[]}var c;return c=8,a.prototype.dots=null,a.prototype.x=0,a.prototype.y=0,a.prototype.width=0,a.prototype.height=0,a.prototype.rotation=0,a.prototype.graphic=null,a.prototype.radius=0,a.prototype.points=null,a.prototype.count=0,a.prototype.first=!0,a.prototype.animate=function(a){var d,e,f,g,h,i;if(this.first)for(this.first=!1,e=f=0;c>=0?c>f:f>c;e=c>=0?++f:--f)d=new b(this.graphic,this.radius),this.dots.push(d);for(i=this.dots,g=0,h=i.length;h>g;g++)d=i[g],d.x+=d.velocity.x*a,d.y+=d.velocity.y*a;return this.draw()},a.prototype.draw=function(){var a,b,c,d,e;for(d=this.dots,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.draw(this.x,this.y));return e},a}(),b=function(){function a(a,b){var d,e,f;this.graphic=a,d=2*Math.random()*Math.PI,e=Math.random()*b,this.x=Math.cos(d)*e,this.y=Math.sin(d)*e,f=10*Math.random()+10,this.velocity=new c(Math.cos(d)*f,Math.sin(d)*f)}return a.prototype.velocity=null,a.prototype.graphic=null,a.prototype.x1=0,a.prototype.y1=0,a.prototype.x=0,a.prototype.y=0,a.prototype.draw=function(a,b){var c;c=this.graphic,c.save(),c.beginPath(),c.translate(a,b),c.rotate(this.rotation),c.fillStyle="#FFFFFF",c.arc(this.x,this.y,2,0,2*Math.PI,!1),c.fill(),c.restore()},a}()},{"../../../lib":1}],22:[function(a){"use strict";var b;b=a("../../../lib"),b.graphics.AsteroidView=function(){function a(a,b){var c,d,e,f;for(this.graphic=a,this.radius=b,this.width=this.radius,this.height=this.radius,this.points=[],c=0;c<2*Math.PI;)d=(.75+.25*Math.random())*this.radius,e=Math.cos(c)*d,f=Math.sin(c)*d,this.points.push({x:e,y:f}),c+=.5*Math.random()}return a.prototype.x=0,a.prototype.y=0,a.prototype.width=0,a.prototype.height=0,a.prototype.rotation=0,a.prototype.graphic=null,a.prototype.radius=0,a.prototype.points=null,a.prototype.count=0,a.prototype.draw=function(){var a,b;for(a=this.graphic,a.save(),a.beginPath(),a.translate(this.x,this.y),a.rotate(this.rotation),a.fillStyle="#FFFFFF",a.moveTo(this.radius,0),b=0;b<this.points.length;)a.lineTo(this.points[b].x,this.points[b].y),++b;a.lineTo(this.radius,0),a.fill(),a.restore()},a}()},{"../../../lib":1}],23:[function(a){"use strict";var b;b=a("../../../lib"),b.graphics.BulletView=function(){function a(a){this.graphic=a}return a.prototype.x=0,a.prototype.y=0,a.prototype.width=4,a.prototype.height=4,a.prototype.rotation=0,a.prototype.graphic=null,a.prototype.draw=function(){var a;a=this.graphic,a.save(),a.beginPath(),a.rotate(this.rotation),a.fillStyle="#FFFFFF",a.arc(this.x,this.y,2,0,2*Math.PI,!1),a.fill(),a.restore()},a}()},{"../../../lib":1}],24:[function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=a("../../../lib"),b.graphics.HudView=function(){function a(a){this.graphic=a,this.setScore=c(this.setScore,this),this.setLives=c(this.setLives,this),this.draw=c(this.draw,this),this.drawScore=this.createScore,this.drawLives=this.createLives}return a.prototype.x=0,a.prototype.y=0,a.prototype.width=4,a.prototype.height=4,a.prototype.rotation=0,a.prototype.graphic=null,a.prototype.score=0,a.prototype.lives=3,a.prototype.drawScore=null,a.prototype.drawLives=null,a.prototype.draw=function(){this.drawScore(),this.drawLives()},a.prototype.setLives=function(a){return this.lives=a},a.prototype.setScore=function(a){return this.score=a},a.prototype.createLives=function(){var a,b,c,d;this.graphic.save(),this.graphic.beginPath(),this.graphic.font="bold 18px Helvetica",this.graphic.fillStyle="#FFFFFF",this.graphic.textAlign="center",b="LIVES: "+this.lives,a=this.graphic.measureText(b),c=a.width,d=20,this.graphic.fillText(b,c,d),this.graphic.fill(),this.graphic.restore()},a.prototype.createScore=function(){var a,b,c,d;this.graphic.save(),this.graphic.beginPath(),this.graphic.font="bold 18px Helvetica",this.graphic.fillStyle="#FFFFFF",this.graphic.textAlign="center",b="SCORE: "+this.score,a=this.graphic.measureText(b),c=window.window.innerWidth*window.devicePixelRatio-a.width,d=20,this.graphic.fillText(b,c,d),this.graphic.fill(),this.graphic.restore()},a}()},{"../../../lib":1}],25:[function(a){"use strict";var b,c;c=a("../../../lib"),b=c.ui.Point,c.graphics.SpaceshipDeathView=function(){function a(a){this.graphic=a}return a.prototype.x=0,a.prototype.y=0,a.prototype.width=20,a.prototype.height=20,a.prototype.rotation=0,a.prototype.graphic=null,a.prototype.vel1=null,a.prototype.vel2=null,a.prototype.rot1=null,a.prototype.rot2=null,a.prototype.x1=0,a.prototype.y2=0,a.prototype.y1=0,a.prototype.y2=0,a.prototype.first=!0,a.prototype.animate=function(a){return this.first&&(this.first=!1,this.vel1=new b(10*Math.random()-5,10*Math.random()+10),this.vel2=new b(10*Math.random()-5,-(10*Math.random()+10)),this.rot1=300*Math.random()-150,this.rot2=300*Math.random()-150,this.x1=this.x2=this.x,this.y1=this.y2=this.y,this.r1=this.r2=this.rotation),this.x1+=this.vel1.x*a,this.y1+=this.vel1.y*a,this.r1+=this.rot1*a,this.x2+=this.vel2.x*a,this.y2+=this.vel2.y*a,this.r2+=this.rot2*a,this.draw()},a.prototype.draw=function(){var a;a=this.graphic,a.save(),a.beginPath(),a.translate(this.x+this.x1,this.y+this.y1),a.rotate(this.r1),a.fillStyle="#FFFFFF",a.moveTo(10,0),a.lineTo(-7,7),a.lineTo(-4,0),a.lineTo(10,0),a.fill(),a.restore(),a.save(),a.beginPath(),a.translate(this.x+this.x2,this.y+this.y2),a.rotate(this.r2),a.fillStyle="#FFFFFF",a.moveTo(10,0),a.lineTo(-7,7),a.lineTo(-4,0),a.lineTo(10,0),a.fill(),a.restore()},a}()},{"../../../lib":1}],26:[function(a){"use strict";var b;b=a("../../../lib"),b.graphics.SpaceshipView=function(){function a(a){this.graphic=a}return a.prototype.x=0,a.prototype.y=0,a.prototype.width=20,a.prototype.height=20,a.prototype.rotation=0,a.prototype.graphic=null,a.prototype.draw=function(){var a;a=this.graphic,a.save(),a.beginPath(),a.translate(this.x,this.y),a.rotate(this.rotation),a.fillStyle="#FFFFFF",a.moveTo(10,0),a.lineTo(-7,7),a.lineTo(-4,0),a.lineTo(-7,-7),a.lineTo(10,0),a.fill(),a.restore()},a}()},{"../../../lib":1}],27:[function(a){"use strict";var b,c;c=a("../../../lib"),b=ash.signals.Signal0,c.graphics.WaitForStartView=function(){function a(a){this.graphic=a,this.click=new b,this.gameOver=this.createGameOver,this.instructions=this.createInstructions,this.clickToStart=this.createClickToStart,this.graphic.canvas.addEventListener("click",function(a){return function(){return a.click.dispatch()}}(this))}return a.prototype.x=0,a.prototype.y=0,a.prototype.width=4,a.prototype.height=4,a.prototype.rotation=0,a.prototype.graphic=null,a.prototype.gameOver=null,a.prototype.clickToStart=null,a.prototype.instructions=null,a.prototype.click=null,a.prototype.createGameOver=function(){var a,b,c,d;this.graphic.save(),this.graphic.beginPath(),this.graphic.font="bold 32px Helvetica",this.graphic.fillStyle="#FFFFFF",b="ASTEROIDS",a=this.graphic.measureText(b),c=Math.floor((window.innerWidth*window.devicePixelRatio-a.width)/2),d=175,this.graphic.fillText(b,c,d),this.graphic.fill(),this.graphic.restore()},a.prototype.createClickToStart=function(){var a,b,c,d;this.graphic.save(),this.graphic.beginPath(),this.graphic.font="bold 18px Helvetica",this.graphic.fillStyle="#FFFFFF",b="CLICK TO START",a=this.graphic.measureText(b),c=Math.floor((window.innerWidth*window.devicePixelRatio-a.width)/2),d=225,this.graphic.fillText(b,c,d),this.graphic.fill(),this.graphic.restore()},a.prototype.createInstructions=function(){var a,b,c,d;this.graphic.save(),this.graphic.beginPath(),this.graphic.font="bold 14px Helvetica",this.graphic.fillStyle="#FFFFFF",b="Z to Fire  ~  Arrow Keys to Move",a=this.graphic.measureText(b),c=10,d=window.innerHeight*window.devicePixelRatio-20,this.graphic.fillText(b,c,d),this.graphic.fill(),this.graphic.restore()},a.prototype.draw=function(){this.gameOver(),this.clickToStart(),this.instructions()},a}()},{"../../../lib":1}],28:[function(a){"use strict";var b,c=function(a,b){return function(){return a.apply(b,arguments)}};b=a("../../../lib"),b.input.KeyPoll=function(){function a(a){this.displayObj=a,this.isUp=c(this.isUp,this),this.isDown=c(this.isDown,this),this.keyUpListener=c(this.keyUpListener,this),this.keyDownListener=c(this.keyDownListener,this),this.states={},this.displayObj.addEventListener("keydown",this.keyDownListener),this.displayObj.addEventListener("keyup",this.keyUpListener)}var b,d;return d=null,b=null,a.prototype.keyDownListener=function(a){this.states[a.keyCode]=!0},a.prototype.keyUpListener=function(a){this.states[a.keyCode]&&(this.states[a.keyCode]=!1)},a.prototype.isDown=function(a){return this.states[a]},a.prototype.isUp=function(a){return!this.states[a]},a}()},{"../../../lib":1}],29:[function(a){"use strict";var b;b=a("../../lib"),b.Main=function(){function a(){var a;a=this.canvas(),b=new b.Asteroids(a.getContext("2d"),a.width,a.height),b.start()}return a.prototype.canvas=function(){var a;return a=document.createElement(navigator.isCocoonJS?"screencanvas":"canvas"),a.width=window.innerWidth*window.devicePixelRatio,a.height=window.innerHeight*window.devicePixelRatio,a.style.width="100%",a.style.height="100%",a.style.backgroundColor="#000000",document.body.appendChild(a),a},a}()},{"../../lib":1}],30:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.AnimationNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={animation:b.components.Animation},c.prototype.animation=null,c}(ash.core.Node)},{"../../../lib":1}],31:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.AsteroidCollisionNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={asteroid:b.components.Asteroid,position:b.components.Position,collision:b.components.Collision,audio:b.components.Audio},c.prototype.asteroid=null,c.prototype.position=null,c.prototype.collision=null,c.prototype.audio=null,c}(ash.core.Node)},{"../../../lib":1}],32:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.AudioNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={audio:b.components.Audio},c.prototype.audio=null,c}(ash.core.Node)},{"../../../lib":1}],33:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.BulletAgeNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={bullet:b.components.Bullet},c.prototype.bullet=null,c}(ash.core.Node)},{"../../../lib":1}],34:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.BulletCollisionNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={bullet:b.components.Bullet,position:b.components.Position,collision:b.components.Collision},c.prototype.bullet=null,c.prototype.position=null,c.prototype.collision=null,c}(ash.core.Node)},{"../../../lib":1}],35:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.DeathThroesNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={death:b.components.DeathThroes},c.prototype.death=null,c}(ash.core.Node)},{"../../../lib":1}],36:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.GameNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={state:b.components.GameState},c.prototype.state=null,c}(ash.core.Node)},{"../../../lib":1}],37:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.GunControlNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={audio:b.components.Audio,control:b.components.GunControls,gun:b.components.Gun,position:b.components.Position},c.prototype.control=null,c.prototype.gun=null,c.prototype.position=null,c.prototype.audio=null,c}(ash.core.Node)},{"../../../lib":1}],38:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.HudNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={state:b.components.GameState,hud:b.components.Hud},c.prototype.state=null,c.prototype.hud=null,c}(ash.core.Node)},{"../../../lib":1}],39:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.MotionControlNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={control:b.components.MotionControls,position:b.components.Position,motion:b.components.Motion},c.prototype.control=null,c.prototype.position=null,c.prototype.motion=null,c}(ash.core.Node)},{"../../../lib":1}],40:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.MovementNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={position:b.components.Position,motion:b.components.Motion},c.prototype.position=null,c.prototype.motion=null,c}(ash.core.Node)},{"../../../lib":1}],41:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.RenderNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={position:b.components.Position,display:b.components.Display},c.prototype.position=null,c.prototype.display=null,c}(ash.core.Node)},{"../../../lib":1}],42:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.SpaceshipCollisionNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={spaceship:b.components.Spaceship,position:b.components.Position,collision:b.components.Collision,audio:b.components.Audio},c.prototype.spaceship=0,c.prototype.position=0,c.prototype.collision=null,c.prototype.audio=null,c}(ash.core.Node)},{"../../../lib":1}],43:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.SpaceshipNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={spaceship:b.components.Spaceship,position:b.components.Position},c.prototype.spaceship=0,c.prototype.position=0,c}(ash.core.Node)},{"../../../lib":1}],44:[function(a){"use strict";var b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b=a("../../../lib"),b.nodes.WaitForStartNode=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return d(c,a),c.components={wait:b.components.WaitForStart},c.prototype.wait=null,c}(ash.core.Node)},{"../../../lib":1}],45:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.AnimationNode,c.systems.AnimationSystem=function(a){function c(){this.updateNode=d(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)}return f(c,a),c.prototype.updateNode=function(a,b){a.animation.animation.animate(b)},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],46:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.AudioNode,c.systems.AudioSystem=function(a){function c(){this.updateNode=d(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)
}return f(c,a),c.prototype.updateNode=function(a){var b,c,d,e;e=a.audio.toPlay;for(b in e)d=e[b],c=new d,c.play(0,1);a.audio.toPlay.length=0},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],47:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.BulletAgeNode,c.systems.BulletAgeSystem=function(a){function c(a){this.creator=a,this.updateNode=d(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)}return f(c,a),c.prototype.creator=null,c.prototype.updateNode=function(a,b){var c;c=a.bullet,c.lifeRemaining-=b,c.lifeRemaining<=0&&this.creator.destroyEntity(a.entity)},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],48:[function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=function(a,b){return function(){return a.apply(b,arguments)}},E={}.hasOwnProperty,F=function(a,b){function c(){this.constructor=a}for(var d in b)E.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};C=a("../../../lib"),y=C.nodes.SpaceshipCollisionNode,d=C.nodes.AsteroidCollisionNode,i=C.nodes.BulletCollisionNode,n=C.nodes.GameNode,b=C.components.Animation,c=C.components.Asteroid,g=C.components.Audio,h=C.components.Bullet,k=C.components.Collision,l=C.components.DeathThroes,m=C.components.Display,o=C.components.GameState,p=C.components.Gun,q=C.components.GunControls,r=C.components.Hud,t=C.components.Motion,u=C.components.MotionControls,v=C.components.Physics,w=C.components.Position,x=C.components.Spaceship,B=C.components.WaitForStart,e=C.graphics.AsteroidDeathView,f=C.graphics.AsteroidView,j=C.graphics.BulletView,s=C.graphics.HudView,z=C.graphics.SpaceshipDeathView,A=C.graphics.SpaceshipView,C.systems.CollisionSystem=function(a){function b(a){this.creator=a,this.update=D(this.update,this)}return F(b,a),b.prototype.creator=null,b.prototype.games=null,b.prototype.spaceships=null,b.prototype.asteroids=null,b.prototype.bullets=null,b.prototype.addToEngine=function(a){this.games=a.getNodeList(n),this.spaceships=a.getNodeList(y),this.asteroids=a.getNodeList(d),this.bullets=a.getNodeList(i)},b.prototype.removeFromEngine=function(){this.games=null,this.spaceships=null,this.asteroids=null,this.bullets=null},b.prototype.update=function(){var a,b,c;for(b=this.bullets.head;b;){for(a=this.asteroids.head;a;){if(a.position.position.distanceTo(b.position.position)<=a.collision.radius){this.creator.destroyEntity(b.entity),a.collision.radius>10&&(this.creator.createAsteroid(a.collision.radius-10,a.position.position.x+10*Math.random()-5,a.position.position.y+10*Math.random()-5),this.creator.createAsteroid(a.collision.radius-10,a.position.position.x+10*Math.random()-5,a.position.position.y+10*Math.random()-5)),a.asteroid.fsm.changeState("destroyed"),this.games.head&&this.games.head.state.hits++;break}a=a.next}b=b.next}for(c=this.spaceships.head;c;){for(a=this.asteroids.head;a;){if(a.position.position.distanceTo(c.position.position)<=a.collision.radius+c.collision.radius){c.spaceship.fsm.changeState("destroyed"),this.games.head&&this.games.head.state.lives++;break}a=a.next}c=c.next}},b}(ash.core.System)},{"../../../lib":1}],49:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.DeathThroesNode,c.systems.DeathThroesSystem=function(a){function c(a){this.creator=a,this.updateNode=d(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)}return f(c,a),c.prototype.creator=null,c.prototype.updateNode=function(a,b){a.death.countdown-=b,a.death.countdown<=0&&this.creator.destroyEntity(a.entity)},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],50:[function(a){"use strict";var b,c,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../../../lib"),d=g.nodes.GameNode,f=g.nodes.SpaceshipNode,b=g.nodes.AsteroidCollisionNode,c=g.nodes.BulletCollisionNode,e=g.ui.Point,g.systems.GameManager=function(a){function g(a,b){this.creator=a,this.config=b,this.update=h(this.update,this)}return j(g,a),g.prototype.config=null,g.prototype.creator=null,g.prototype.gameNodes=null,g.prototype.spaceships=null,g.prototype.asteroids=null,g.prototype.bullets=null,g.prototype.addToEngine=function(a){this.gameNodes=a.getNodeList(d),this.spaceships=a.getNodeList(f),this.asteroids=a.getNodeList(b),this.bullets=a.getNodeList(c)},g.prototype.update=function(){var a,b,c,d,f,g,h,i;if(g=this.gameNodes.head,g&&g.state.playing){if(this.spaceships.empty)if(g.state.lives>0){for(f=new e(.5*this.config.width,.5*this.config.height),c=!0,a=this.asteroids.head;a;){if(e.distance(a.position.position,f)<=a.collision.radius+50){c=!1;break}a=a.next}c&&this.creator.createSpaceship()}else g.state.playing=!1,this.creator.createWaitForClick();if(this.asteroids.empty&&this.bullets.empty&&!this.spaceships.empty)for(i=this.spaceships.head,g.state.level++,b=2+g.state.level,d=0;b>d;){for(;;)if(h=new e(Math.random()*this.config.width,Math.random()*this.config.height),!(e.distance(h,i.position.position)<=80))break;this.creator.createAsteroid(30,h.x,h.y),++d}}},g.prototype.removeFromEngine=function(){this.gameNodes=null,this.spaceships=null,this.asteroids=null,this.bullets=null},g}(ash.core.System)},{"../../../lib":1}],51:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.GunControlNode,c.systems.GunControlSystem=function(a){function c(a,e){this.keyPoll=a,this.creator=e,this.updateNode=d(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)}return f(c,a),c.prototype.keyPoll=null,c.prototype.creator=null,c.prototype.updateNode=function(a,b){var c,d,e;c=a.control,e=a.position,d=a.gun,d.shooting=this.keyPoll.isDown(c.trigger),d.timeSinceLastShot+=b,d.shooting&&d.timeSinceLastShot>=d.minimumShotInterval&&(this.creator.createUserBullet(d,e),d.timeSinceLastShot=0)},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],52:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.HudNode,c.systems.HudSystem=function(a){function c(){this.updateNode=d(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)}return f(c,a),c.prototype.updateNode=function(a){a.hud.view.setLives(a.state.lives),a.hud.view.setScore(a.state.hits)},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],53:[function(a){"use strict";var b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.MotionControlNode,d=Box2D.Common.Math.b2Vec2,c.systems.MotionControlSystem=function(a){function c(a){this.keyPoll=a,this.updateNode=e(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)}return g(c,a),c.prototype.keyPoll=null,c.prototype.updateNode=function(a,b){var c,d,e,f,g;c=a.control,f=a.position,e=a.motion,d=this.keyPoll.isDown(c.left),g=this.keyPoll.isDown(c.right),d&&(f.rotation-=c.rotationRate*b),g&&(f.rotation+=c.rotationRate*b),this.keyPoll.isDown(c.accelerate)&&(e.velocity.x+=Math.cos(f.rotation)*c.accelerationRate*b,e.velocity.y+=Math.sin(f.rotation)*c.accelerationRate*b)},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],54:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.MovementNode,c.systems.MovementSystem=function(a){function c(a){this.config=a,this.updateNode=d(this.updateNode,this),c.__super__.constructor.call(this,b,this.updateNode)}return f(c,a),c.prototype.config=null,c.prototype.updateNode=function(a,b){var c,d,e,f;d=a.position,c=a.motion,d.position.x+=c.velocity.x*b,d.position.y+=c.velocity.y*b,d.position.x<0&&(d.position.x+=this.config.width),d.position.x>this.config.width&&(d.position.x-=this.config.width),d.position.y<0&&(d.position.y+=this.config.height),d.position.y>this.config.height&&(d.position.y-=this.config.height),d.rotation+=c.angularVelocity*b,c.damping>0&&(e=Math.abs(Math.cos(d.rotation)*c.damping*b),f=Math.abs(Math.sin(d.rotation)*c.damping*b),c.velocity.x>e?c.velocity.x-=e:c.velocity.x<-e?c.velocity.x+=e:c.velocity.x=0,c.velocity.y>f?c.velocity.y-=f:c.velocity.y<-f?c.velocity.y+=f:c.velocity.y=0)},c}(ash.tools.ListIteratingSystem)},{"../../../lib":1}],55:[function(a){"use strict";var b,c,d=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("../../../lib"),b=c.nodes.RenderNode,c.systems.RenderSystem=function(a){function c(a){this.graphic=a,this.update=d(this.update,this)}return f(c,a),c.prototype.graphic=null,c.prototype.nodes=null,c.prototype.addToEngine=function(a){var c;for(this.nodes=a.getNodeList(b),c=this.nodes.head;c;)this.addToDisplay(c),c=c.next},c.prototype.addToDisplay=function(){},c.prototype.removeFromDisplay=function(){},c.prototype.removeFromEngine=function(){this.nodes=null},c.prototype.update=function(){var a,b,c,d;for(this.graphic.save(),this.graphic.translate(0,0),this.graphic.rotate(0),this.graphic.clearRect(0,0,this.graphic.canvas.width,this.graphic.canvas.height),c=this.nodes.head;c;)a=c.display,b=a.graphic,d=c.position,b.x=d.position.x,b.y=d.position.y,b.rotation=d.rotation,b.draw(),c=c.next;this.graphic.restore()},c}(ash.core.System)},{"../../../lib":1}],56:[function(a){"use strict";var b;b=a("../../../lib"),b.systems.SystemPriorities=function(){function a(){}return a.preUpdate=1,a.update=2,a.move=3,a.resolveCollisions=4,a.stateMachines=5,a.animate=6,a.render=7,a}()},{"../../../lib":1}],57:[function(a){"use strict";var b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../../../lib"),d=e.nodes.WaitForStartNode,b=e.nodes.AsteroidCollisionNode,c=e.nodes.GameNode,e.systems.WaitForStartSystem=function(a){function e(a){this.creator=a,this.update=f(this.update,this)}return h(e,a),e.prototype.engine=null,e.prototype.creator=null,e.prototype.gameNodes=null,e.prototype.waitNodes=null,e.prototype.asteroids=null,e.prototype.addToEngine=function(a){this.engine=a,this.waitNodes=a.getNodeList(d),this.gameNodes=a.getNodeList(c),this.asteroids=a.getNodeList(b)},e.prototype.removeFromEngine=function(){this.waitNodes=null,this.gameNodes=null},e.prototype.update=function(){var a,b,c;if(c=this.waitNodes.head,b=this.gameNodes.head,c&&c.wait.startGame&&b){for(a=this.asteroids.head;a;)this.creator.destroyEntity(a.entity),a=a.next;b.state.setForStart(),c.wait.startGame=!1,this.engine.removeEntity(c.entity)}},e}(ash.core.System)},{"../../../lib":1}],58:[function(a){"use strict";var b;b=a("../../../lib"),b.ui.Point=function(){function a(a,b){this.x=null!=a?a:0,this.y=null!=b?b:0}return a.prototype.x=0,a.prototype.y=0,a.distance=function(a,b){var c,d;return c=a.x-b.x,d=a.y-b.y,Math.sqrt(c*c+d*d)},a.prototype.distanceSquaredTo=function(a){var b,c;return b=this.x-a.x,c=this.y-a.y,b*b+c*c},a.prototype.distanceTo=function(a){var b,c;return b=this.x-a.x,c=this.y-a.y,Math.sqrt(b*b+c*c)},a}()},{"../../../lib":1}]},{},[1])(1)});